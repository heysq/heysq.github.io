{"config":{"lang":["ja"],"separator":"[\\s\\-\uff0c\u3002]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#_1","title":"\u4eba\u751f\u5982\u9006\u65c5\uff0c\u6211\u4ea6\u662f\u884c\u4eba : )","text":""},{"location":"#_2","title":"\u5185\u5bb9\u6b63\u5728\u8fc1\u79fb\u8865\u5145\u4e2d~","text":""},{"location":"#_3","title":"\u656c\u8bf7\u671f\u5f85~","text":""},{"location":"nav/","title":"Nav","text":"<ul> <li>Home</li> <li>Go</li> <li>Kafka</li> <li>MySQL</li> <li>Redis</li> <li>\u8ba1\u7b97\u673a\u7f51\u7edc</li> <li>VIM</li> <li>IDE</li> <li>\u8ba1\u7b97\u673a\u7ec4\u6210</li> <li>Linux&amp;macOS</li> <li>Ruby&amp;&amp;Rails</li> <li>Docker&amp;&amp;K8S</li> <li>Kubernetes</li> <li>CI/CD</li> <li>Nginx</li> </ul>"},{"location":"cicd/build/","title":"\u642d\u5efaCI/CD\u73af\u5883","text":""},{"location":"cicd/build/#giteacicd","title":"\u57fa\u4e8eGitea\u7684CICD\u6d41\u7a0b","text":""},{"location":"cicd/build/#gitea","title":"\u90e8\u7f72Gitea","text":"<ul> <li>\u672c\u8eab\u642d\u5efa\u73af\u5883\uff0c\u5148\u4e0d\u8003\u8651\u6570\u636e\u5b89\u5168\u6027</li> <li>docker-compose \u542f\u52a8\u5bb9\u5668</li> <li>\u6570\u636e\u5e93\u6682\u65f6\u4f7f\u7528sqlite</li> <li>\u53ef\u4ee5\u81ea\u5b9a\u4e49\u7aef\u53e3</li> <li>\u8bbf\u95ee3000\u7aef\u53e3\u8bbe\u7f6egitea</li> </ul> <p>mkdir -p gitea/{data,config} &amp;&amp; cd gitea touch docker-compose.yaml docker-compose up -d</p> <pre><code>version: \"2\"\nservices:\nserver:\nimage: gitea/gitea:1.18.0-rootless\nrestart: always\nvolumes:\n- ./data:/var/lib/gitea\n- ./config:/etc/gitea\n- /etc/timezone:/etc/timezone:ro\n- /etc/localtime:/etc/localtime:ro\nports:\n- \"3000:3000\"\n- \"2222:2222\"\n</code></pre>"},{"location":"cicd/build/#drone","title":"Drone \u73af\u5883\u51c6\u5907","text":"<ul> <li>Drone\u5b98\u65b9\u6587\u6863</li> <li>Gitea\u4e2d\u65b0\u5efa\u4e00\u4e2aOAuth2\u5e94\u7528</li> <li>\u5e94\u7528\u56de\u8c03\u5730\u5740\u5199drone\u5c06\u8981\u8fd0\u884c\u7684\u57df\u540d+/login</li> <li>drone.heysq.com:8443/login  </li> <li>\u521b\u5efa\u4e00\u4e2a\u5171\u4eab\u5bc6\u94a5 <pre><code>openssl rand -hex 16\nbea26a2221fd8090ea38720fc445eca6\n</code></pre></li> </ul>"},{"location":"cicd/build/#drone-docker","title":"Drone docker \u90e8\u7f72","text":"<ul> <li>\u66ff\u6362\u591a\u4e2a\u53d8\u91cf \u914d\u7f6e\u53d8\u91cf</li> <li>\u66f4\u6362\u6620\u5c04\u7aef\u53e3</li> <li>\u542f\u52a8docker\u5bb9\u5668 <pre><code>docker run \\\n--volume=/var/lib/drone:/data \\\n--env=DRONE_GITEA_SERVER=https://git.heysq.com:8443 \\\n--env=DRONE_GITEA_CLIENT_ID=${oauth client id} \\\n--env=DRONE_GITEA_CLIENT_SECRET=${oauth client secret} \\\n--env=DRONE_RPC_SECRET=${\u5171\u4eab\u5bc6\u94a5} \\\n--env=DRONE_SERVER_HOST=drone.heysq.com:8443 \\\n--env=DRONE_SERVER_PROTO=https \\\n--publish=XXXX:80 \\\n--publish=XXXX:443 \\\n--restart=always \\\n--detach=true \\\n--name=drone \\\ndrone/drone:2\n</code></pre></li> </ul>"},{"location":"cicd/build/#drone-runner-docker","title":"Drone Runner docker \u90e8\u7f72","text":"<ul> <li>Runner \u7528\u6765\u6267\u884c\u4ed3\u5e93\u4e2d\u7684yaml\u6587\u4ef6</li> <li>\u6267\u884c\u514b\u9686\u6253\u5305\u7f16\u8bd1\u7b49\u4e00\u4e9b\u5217\u9884\u5148\u5b9a\u4e49\u597d\u7684\u64cd\u4f5c</li> <li>\u66ff\u6362\u5171\u4eab\u5bc6\u94a5\u548c\u7aef\u53e3</li> <li>docker run \u542f\u52a8\u5bb9\u5668</li> <li>Runner\u5bb9\u5668\u65e5\u5fd7\u6709\u4ee5\u4e0b\u4fe1\u606f\u5219\u542f\u52a8\u6210\u529f <p>INFO[0027] successfully pinged the remote server       INFO[0027] polling the remote server                     arch=amd64 capacity=2 endpoint=\"https://drone.heysq.com:8443\" kind=pipeline os=linux type=docker</p> </li> </ul> <pre><code>docker run -itd --detach \\\n--volume=/var/run/docker.sock:/var/run/docker.sock \\\n--env=DRONE_RPC_PROTO=https \\\n--env=DRONE_RPC_HOST=drone.heysq.com:8443 \\\n--env=DRONE_RPC_SECRET=${\u5171\u4eab\u5bc6\u94a5} \\\n--env=DRONE_RUNNER_CAPACITY=2 \\\n--env=DRONE_RUNNER_NAME=drone-runner \\\n--publish=XXXX:3000 \\\n--restart=always \\\n--name=runner \\\ndrone/drone-runner-docker:1\n</code></pre>"},{"location":"cicd/build/#_1","title":"\u6388\u6743&amp;&amp;\u8bbe\u7f6e\u4ed3\u5e93","text":"<ul> <li>\u8bbf\u95eedrone\u7684\u57df\u540d\uff0c\u4f1a\u81ea\u52a8\u8df3\u8f6c\u5230gitea\u8fdb\u884c\u767b\u5f55\u6388\u6743\u64cd\u4f5c</li> <li>\u5728drone\u7684\u9875\u9762\u4e2dsync\u540c\u6b65\u4ed3\u5e93\uff0c\u5e76\u5c06\u9700\u8981\u8fdb\u884cCI/CD\u7684\u4ed3\u5e93\u8bbe\u7f6e\u4e3aActive\u5373\u53ef</li> </ul>"},{"location":"cicd/nav/","title":"Nav","text":"<ul> <li>\u642d\u5efaCI/CD\u73af\u5883</li> <li>\u955c\u50cf\u4ed3\u5e93Harbor</li> </ul>"},{"location":"docker%26%26k8s/docker/","title":"Docker","text":""},{"location":"docker%26%26k8s/docker/#_1","title":"\u5bb9\u5668\u5173\u952e\u6280\u672f","text":"<ul> <li>linux NameSpace \u9694\u79bb\u80fd\u529b</li> <li>linux Cgroups \u9650\u5236\u80fd\u529b</li> <li>rootfs \u6587\u4ef6\u7cfb\u7edf</li> </ul>"},{"location":"docker%26%26k8s/install_centos/","title":"CentOS\u5b89\u88c5","text":""},{"location":"docker%26%26k8s/install_centos/#centos","title":"CentOS \u5b89\u88c5","text":""},{"location":"docker%26%26k8s/install_centos/#_1","title":"\u5b98\u65b9\u6587\u6863","text":"<ul> <li>Install on CentOS</li> </ul>"},{"location":"docker%26%26k8s/install_centos/#_2","title":"\u652f\u6301\u7684\u7cfb\u7edf\u7248\u672c","text":"<ul> <li>CentOS7</li> <li>CentOS8\uff08stream\uff09</li> <li>CentOS9\uff08stream\uff09</li> </ul>"},{"location":"docker%26%26k8s/install_centos/#_3","title":"\u5378\u8f7d\u65e7\u5b89\u88c5","text":"<pre><code>sudo yum remove docker \\\ndocker-client \\\ndocker-client-latest \\\ndocker-common \\\ndocker-latest \\\ndocker-latest-logrotate \\\ndocker-logrotate \\\ndocker-engine\n</code></pre>"},{"location":"docker%26%26k8s/install_centos/#repository","title":"\u901a\u8fc7\u4ed3\u5e93\uff08repository\uff09\u5b89\u88c5","text":""},{"location":"docker%26%26k8s/install_centos/#1","title":"1. \u5b89\u88c5\u4f9d\u8d56\u8f6f\u4ef6","text":"<pre><code>sudo yum install -y yum-utils\n</code></pre>"},{"location":"docker%26%26k8s/install_centos/#2","title":"2. \u6dfb\u52a0\u8f6f\u4ef6\u6e90","text":"<pre><code>sudo yum-config-manager \\\n--add-repo \\\nhttps://download.docker.com/linux/centos/docker-ce.repo\n</code></pre>"},{"location":"docker%26%26k8s/install_centos/#3-docker-engine","title":"3. \u5b89\u88c5docker engine","text":"<pre><code>sudo yum install docker-ce docker-ce-cli containerd.io docker-compose-plugin\n</code></pre>"},{"location":"docker%26%26k8s/install_centos/#4-docker","title":"4. \u542f\u52a8docker","text":"<pre><code>sudo systemctl start docker\n</code></pre>"},{"location":"docker%26%26k8s/install_centos/#5","title":"5. \u9a8c\u8bc1\u5b89\u88c5","text":"<pre><code>sudo docker run hello-world\n</code></pre>"},{"location":"docker%26%26k8s/install_centos/#rootdocker","title":"\u7528\u975eroot\u7528\u6237\u64cd\u4f5cdocker","text":""},{"location":"docker%26%26k8s/install_centos/#1-docker","title":"1. \u6dfb\u52a0docker \u7528\u6237\u7ec4","text":"<pre><code>sudo groupadd docker\n</code></pre>"},{"location":"docker%26%26k8s/install_centos/#2-docker","title":"2. \u5c06\u5f53\u524d\u7528\u6237\u6216\u8005\u8981\u6dfb\u52a0\u7684\u7528\u6237\u6dfb\u52a0\u5230docker\u7ec4","text":"<pre><code>sudo usermod -aG docker $USER\n</code></pre>"},{"location":"docker%26%26k8s/install_centos/#3-docker","title":"3. \u91cd\u8f7ddocker\u7ec4","text":"<ul> <li>\u91cd\u542f\u7cfb\u7edf</li> <li>\u4e0d\u60f3\u91cd\u542f\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4</li> </ul> <pre><code>newgrp docker\n</code></pre>"},{"location":"docker%26%26k8s/install_centos/#4-rootdocker","title":"4. \u6d4b\u8bd5\u975eroot\u7528\u6237\u64cd\u4f5cdocker","text":"<pre><code>docker ps\n\u6216\u8005\ndocker run hello-world\n</code></pre>"},{"location":"docker%26%26k8s/install_ubuntu/","title":"Ubuntu\u5b89\u88c5","text":""},{"location":"docker%26%26k8s/install_ubuntu/#ubuntu","title":"Ubuntu \u5b89\u88c5","text":""},{"location":"docker%26%26k8s/install_ubuntu/#_1","title":"\u5b98\u65b9\u6587\u6863","text":"<ul> <li>Install on Ubuntu</li> </ul>"},{"location":"docker%26%26k8s/install_ubuntu/#_2","title":"\u652f\u6301\u7684\u7cfb\u7edf\u7248\u672c","text":"<ul> <li>Ubuntu Jammy 22.04 (LTS)</li> <li>Ubuntu Impish 21.10</li> <li>Ubuntu Focal 20.04 (LTS)</li> <li>Ubuntu Bionic 18.04 (LTS)</li> </ul>"},{"location":"docker%26%26k8s/install_ubuntu/#_3","title":"\u5378\u8f7d\u65e7\u5b89\u88c5","text":"<pre><code>sudo apt-get remove docker docker-engine docker.io containerd runc\n</code></pre>"},{"location":"docker%26%26k8s/install_ubuntu/#repository","title":"\u901a\u8fc7\u4ed3\u5e93\uff08repository\uff09\u5b89\u88c5","text":""},{"location":"docker%26%26k8s/install_ubuntu/#1","title":"1. \u66f4\u65b0\u5e76\u6dfb\u52a0\u4ed3\u5e93\u6e90","text":"<pre><code>sudo apt-get update\nsudo apt-get install ca-certificates curl gnupg lsb-release\n</code></pre>"},{"location":"docker%26%26k8s/install_ubuntu/#2-dockergpg-key","title":"2. \u6dfb\u52a0docker\u5b98\u65b9GPG key","text":"<pre><code>sudo mkdir -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\n</code></pre>"},{"location":"docker%26%26k8s/install_ubuntu/#3-dockerlist","title":"3. \u6dfb\u52a0\u4ed3\u5e93\u6e90\u5730\u5740\u5230docker.list","text":"<pre><code>echo \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n</code></pre>"},{"location":"docker%26%26k8s/install_ubuntu/#4-docker-engine","title":"4. \u5b89\u88c5docker engine","text":"<pre><code>sudo apt-get update\nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin\n</code></pre>"},{"location":"docker%26%26k8s/install_ubuntu/#5","title":"5. \u6d4b\u8bd5\u5b89\u88c5","text":"<pre><code>sudo docker run hello-world:lastest\n</code></pre>"},{"location":"docker%26%26k8s/install_ubuntu/#rootdocker","title":"\u7528\u975eroot\u7528\u6237\u64cd\u4f5cdocker","text":""},{"location":"docker%26%26k8s/install_ubuntu/#1-docker","title":"1. \u6dfb\u52a0docker \u7528\u6237\u7ec4","text":"<pre><code>sudo groupadd docker\n</code></pre>"},{"location":"docker%26%26k8s/install_ubuntu/#2-docker","title":"2. \u5c06\u5f53\u524d\u7528\u6237\u6216\u8005\u8981\u6dfb\u52a0\u7684\u7528\u6237\u6dfb\u52a0\u5230docker\u7ec4","text":"<pre><code>sudo usermod -aG docker $USER\n</code></pre>"},{"location":"docker%26%26k8s/install_ubuntu/#3-docker","title":"3. \u91cd\u8f7ddocker\u7ec4","text":"<ul> <li>\u91cd\u542f\u7cfb\u7edf</li> <li>\u4e0d\u60f3\u91cd\u542f\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4</li> </ul> <pre><code>newgrp docker\n</code></pre>"},{"location":"docker%26%26k8s/install_ubuntu/#4-rootdocker","title":"4. \u6d4b\u8bd5\u975eroot\u7528\u6237\u64cd\u4f5cdocker","text":"<pre><code>docker ps\n\u6216\u8005\ndocker run hello-world\n</code></pre>"},{"location":"docker%26%26k8s/k8s_ubuntu/","title":"K8s ubuntu","text":""},{"location":"docker%26%26k8s/k8s_ubuntu/#_1","title":"\u5b89\u88c5\u51c6\u5907","text":""},{"location":"docker%26%26k8s/k8s_ubuntu/#docker","title":"\u5b89\u88c5 docker","text":"<ul> <li>docker</li> </ul>"},{"location":"docker%26%26k8s/k8s_ubuntu/#docker-cgroupdriver","title":"\u4fee\u6539 docker cgroupdriver","text":"<ul> <li>/etc/docker/daemon.json</li> <li>\u6dfb\u52a0\u4ee5\u4e0b\u5b57\u6bb5 <pre><code>\"exec-opts\": [\"native.cgroupdriver=systemd\"]\n</code></pre></li> </ul>"},{"location":"docker%26%26k8s/nav/","title":"Nav","text":"<ul> <li>Ubuntu\u5b89\u88c5</li> <li>CentOS\u5b89\u88c5</li> </ul>"},{"location":"go/array_slice/","title":"\u6570\u7ec4&&\u5207\u7247","text":""},{"location":"go/array_slice/#_1","title":"\u6570\u7ec4\u5b9a\u4e49","text":"<ul> <li>\u4e00\u4e2a\u957f\u5ea6\u56fa\u5b9a\u7684\u3001\u7531\u540c\u6784\u7c7b\u578b\uff08\u76f8\u540c\u7c7b\u578b\uff09\u5143\u7d20\u7ec4\u6210\u7684\u8fde\u7eed\u5e8f\u5217</li> <li><code>var arr [N]T</code></li> <li>\u6570\u7ec4\u53d8\u91cf arr\uff0c\u7c7b\u578b\u4e3a<code>[N]T</code>\uff0c\u957f\u5ea6\u4e3aN\uff0c\u5143\u7d20\u7c7b\u578b\u4e3aT</li> <li>\u5982\u679c\u4e24\u4e2a\u6570\u7ec4\u7c7b\u578b\u7684\u5143\u7d20\u7c7b\u578b T \u4e0e\u6570\u7ec4\u957f\u5ea6 N \u90fd\u662f\u4e00\u6837\u7684\uff0c\u90a3\u4e48\u8fd9\u4e24\u4e2a\u6570\u7ec4\u7c7b\u578b\u662f\u7b49\u4ef7\u7684</li> <li>\u5982\u679c\u6709\u4e00\u4e2a\u5c5e\u6027\u4e0d\u540c\uff0c\u5b83\u4eec\u5c31\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u6570\u7ec4\u7c7b\u578b</li> <li>\u901a\u8fc7<code>len</code>\u65b9\u6cd5\u83b7\u5f97\u6570\u7ec4\u957f\u5ea6</li> <li>\u901a\u8fc7<code>unsafe.Pointer()</code>\u53ef\u4ee5\u83b7\u5f97\u6570\u7ec4\u603b\u7684\u5360\u7528\u7a7a\u95f4</li> <li>\u6570\u7ec4\u505a\u4e3a\u51fd\u6570\u53c2\u6570\uff0c\u503c\u62f7\u8d1d\uff0c\u6027\u80fd\u4ee3\u4ef7\u9ad8</li> </ul>"},{"location":"go/array_slice/#_2","title":"\u6570\u7ec4\u5b9a\u4e49&amp;&amp;\u521d\u59cb\u5316","text":"<ul> <li>\u5b9a\u4e49\u4f46\u4e0d\u521d\u59cb\u5316</li> <li>\u5b9a\u4e49\u4e14\u521d\u59cb\u5316\u5e76\u6307\u5b9a\u957f\u5ea6</li> <li>\u5b9a\u4e49\u4e14\u521d\u59cb\u5316\u5f53\u4e0d\u6307\u5b9a\u957f\u5ea6</li> <li>\u4e0b\u6807\u8d4b\u503c\u7684\u65b9\u5f0f\u5bf9\u5b83\u8fdb\u884c\u521d\u59cb\u5316 <pre><code>var arr1 [6]int // \u6ca1\u6709\u663e\u793a\u521d\u59cb\u5316\uff0c\u6570\u636e\u9ed8\u8ba4\u4e3a\u96f6\u503c\uff0c[0 0 0 0 0 0]\nvar arr2 = [6]int {\n11, 12, 13, 14, 15, 16,\n} // [11 12 13 14 15 16]\nvar arr3 = [...]int { 21, 22, 23,\n} // \u7f16\u8bd1\u5668\u81ea\u52a8\u63a8\u65ad\u6570\u7ec4\u7684\u957f\u5ea6\uff0c[21 22 23]\nfmt.Printf(\"%T\\n\", arr3) // [3]int\n// \u4e0b\u6807\u8d4b\u503c\u7684\u65b9\u5f0f\u5bf9\u5b83\u8fdb\u884c\u521d\u59cb\u5316\nvar arr4 = [...]int{\n99: 39, // \u5c06\u7b2c100\u4e2a\u5143\u7d20(\u4e0b\u6807\u503c\u4e3a99)\u7684\u503c\u8d4b\u503c\u4e3a39\uff0c\u5176\u4f59\u5143\u7d20\u503c\u5747\u4e3a0\n}\nfmt.Printf(\"%T\\n\", arr4) // [100]int\n</code></pre></li> </ul>"},{"location":"go/array_slice/#_3","title":"\u5207\u7247","text":"<ul> <li>\u5b9a\u4e49\u5207\u7247\u53d8\u91cf\u65f6\uff0c\u4e0d\u50cf\u6570\u7ec4\u4e00\u6837\u5b9a\u4e49\u957f\u5ea6</li> <li>\u957f\u5ea6\u5bb9\u91cf\u4e0d\u56fa\u5b9a</li> <li>len \u8fd4\u56de\u5207\u7247\u957f\u5ea6</li> <li>append \u5411\u5207\u7247\u4e2d\u8ffd\u52a0\u5143\u7d20</li> <li>\u5207\u7247\u4f20\u53c2\u6570\uff0c\u76f8\u5f53\u4e8e\u4f20\u9012\u5e95\u5c42\u6570\u7ec4\u7684\u63cf\u8ff0\u7b26</li> </ul>"},{"location":"go/array_slice/#_4","title":"\u5207\u7247\u7ed3\u6784","text":"<ul> <li>\u5e95\u5c42\u8fd0\u884c\u65f6\u7ed3\u6784</li> <li>array \u5e95\u5c42\u6570\u7ec4\u7684\u6307\u9488</li> <li>len \u5207\u7247\u957f\u5ea6</li> <li>cap \u5207\u7247\u5bb9\u91cf <pre><code>type slice struct {\narray unsafe.Pointer\nlen   int\ncap   int\n}\n</code></pre></li> </ul>"},{"location":"go/array_slice/#_5","title":"\u5207\u7247\u5b9a\u4e49\u4e0e\u521d\u59cb\u5316","text":"<ul> <li>\u901a\u8fc7make\u521b\u5efa\u5207\u7247\uff0c\u53ef\u4ee5\u6307\u5b9a\u957f\u5ea6\u4e0e\u5bb9\u91cf<ul> <li><code>var arr = make([]int, 3, 6)</code> \u7c7b\u578b\uff0c\u957f\u5ea6\uff0c\u5bb9\u91cf</li> <li>\u4e0d\u6307\u5b9a\u5bb9\u91cf\uff0ccap=len</li> </ul> </li> <li> <p>\u91c7\u7528 array[low : high : max]\u8bed\u6cd5\u57fa\u4e8e\u4e00\u4e2a\u5df2\u5b58\u5728\u7684\u6570\u7ec4\u521b\u5efa\u5207\u7247\u3002\u8fd9\u79cd\u65b9\u5f0f\u88ab\u79f0\u4e3a\u6570\u7ec4\u7684\u5207\u7247\u5316</p> <ul> <li>\u4ece\u539f\u6570\u7ec4\u8d77\u59cb\u4f4d\u7f6elow\u5f00\u59cb</li> <li>\u65b0\u6570\u7ec4\u957f\u5ea6 high - low</li> <li>\u6570\u7ec4\u5bb9\u91cf\u662f max - low</li> <li>\u5bf9\u65b0\u5207\u7247\u4e2d\u5143\u7d20\u7684\u4fee\u6539\u5c06\u76f4\u63a5\u5f71\u54cd\u539f\u6570\u7ec4</li> <li>\u65b0\u6570\u7ec4\u7684\u5bb9\u91cf\u548c\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e\u539f\u6570\u7ec4 <pre><code>arr := [10]int{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}\nsl := arr[3:7:9]\n</code></pre> </li> </ul> </li> <li> <p>\u57fa\u4e8e\u5207\u7247\u521b\u5efa\u5207\u7247</p> </li> </ul>"},{"location":"go/array_slice/#_6","title":"\u5207\u7247\u52a8\u6001\u6269\u5bb9","text":"<ul> <li>\u7ffb\u500d\u6269\u5bb9</li> <li>\u57fa\u4e8e\u4e00\u4e2a\u5df2\u6709\u6570\u7ec4\u5efa\u7acb\u7684\u5207\u7247\uff0c\u4e00\u65e6\u8ffd\u52a0\u7684\u6570\u636e\u64cd\u4f5c\u89e6\u78b0\u5230\u5207\u7247\u7684\u5bb9\u91cf\u4e0a\u9650\uff08\u5b9e\u8d28\u4e0a\u4e5f\u662f\u6570\u7ec4\u5bb9\u91cf\u7684\u4e0a\u754c)\uff0c\u5207\u7247\u5c31\u4f1a\u548c\u539f\u6570\u7ec4\u89e3\u9664\u201c\u7ed1\u5b9a\u201d\uff0c\u540e\u7eed\u5bf9\u5207\u7247\u7684\u4efb\u4f55\u4fee\u6539\u90fd\u4e0d\u4f1a\u53cd\u6620\u5230\u539f\u6570\u7ec4\u4e2d</li> </ul>"},{"location":"go/array_slice/#go117","title":"\u6570\u7ec4\u4e0e\u5207\u7247\u4e92\u76f8\u8f6c\u6362\uff08go1.17\u540e\u5b98\u65b9\u652f\u6301\uff09","text":"<ul> <li> <p>\u6570\u7ec4\u8f6c\u5207\u7247 <pre><code>func main() {\narr := [3]int{1, 2, 3}\nsli := arr[:]\nfmt.Println(sli)\n}\n</code></pre></p> </li> <li> <p>\u5207\u7247\u8f6c\u6570\u7ec4 <code>unsafe</code> \u65b9\u6cd5 <pre><code>func main() {\nb := []int{1, 2, 3}\np := (*[3]int)(unsafe.Pointer(&amp;b[0]))\n(*p)[1]+= 10\nfmt.Println(*p)\n}\n</code></pre></p> </li> <li> <p>\u5207\u7247\u8f6c\u6570\u7ec4\u5b98\u65b9\u65b9\u6cd5\uff0c\u8f6c\u6362\u540e\u7684\u6570\u7ec4\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e\u539f\u5207\u7247\u7684\u957f\u5ea6\uff0cnil \u5207\u7247\u6216 cap \u4e3a 0 \u7684 empty \u5207\u7247\u90fd\u53ef\u4ee5\u88ab\u8f6c\u6362\u4e3a\u4e00\u4e2a\u957f\u5ea6\u4e3a 0 \u7684\u6570\u7ec4\u6307\u9488 <pre><code>func main() {\nb := []int{1, 2, 3}\np := (*[3]int)(b)\n(*p)[1] += 10\nfmt.Println(*p)\n}\n</code></pre></p> </li> </ul>"},{"location":"go/array_slice/#_7","title":"\u51fd\u6570\u4f20\u53c2\u6027\u80fd","text":"<ul> <li>\u4f20\u53c2\u90fd\u662f\u503c\u62f7\u8d1d</li> <li>slice\u62f7\u8d1d\u7684\u662f\u5f15\u7528\u7ed3\u6784</li> <li>array\u62f7\u8d1d\u7684\u662f\u6570\u7ec4\u7684\u503c\uff08\u5305\u542b\u5143\u7d20\uff09 <pre><code>a1 := [16]int{}\nd1 := func(arr [16]int) int {\nreturn len(arr)\n}\nf1 := func() int {\nreturn d1(a1)\n}\na2 := [65535]int{}\nd2 := func(arr [65535]int) int {\nreturn len(arr)\n}\nf2 := func() int {\nreturn d2(a2)\n}\nfor _, f := range []func() int{f1, f2} {\nstart := time.Now()\nfor i := 0; i &lt; 10000; i++ {\nf()\n}\nfmt.Printf(\"time.Since(start).Milliseconds(): %v\\n\", time.Since(start).Microseconds())\n}\n// 88\n// 398362\n</code></pre></li> </ul>"},{"location":"go/changliang/","title":"\u5e38\u91cf","text":""},{"location":"go/changliang/#go","title":"Go \u5e38\u91cf\u521b\u65b0","text":"<ul> <li>\u652f\u6301\u65e0\u7c7b\u578b\u5e38\u91cf</li> <li>\u652f\u6301\u9690\u5f0f\u81ea\u52a8\u8f6c\u578b</li> <li>\u53ef\u7528\u4e8e\u5b9e\u73b0\u679a\u4e3e</li> </ul>"},{"location":"go/changliang/#_1","title":"\u65e0\u7c7b\u578b\u5e38\u91cf","text":"<ul> <li>\u5e38\u91cf\u58f0\u660e\u65f6\u6ca1\u6709\u88ab\u663e\u793a\u8bbe\u7f6e\u7c7b\u578b</li> <li>const n \u6839\u636e\u5b57\u9762\u503c\u63a8\u65ad\u7c7b\u578b\u4e3aint <pre><code>package main\nimport (\n\"fmt\"\n)\ntype myInt int\nconst n = 13\nconst m int64 = n + 5 // OK\nfunc main() {\nvar a int = 5\nfmt.Println(a + n) // \u8f93\u51fa\uff1a18\n}\n</code></pre></li> </ul>"},{"location":"go/changliang/#_2","title":"\u9690\u5f0f\u8f6c\u578b","text":"<ul> <li>\u5bf9\u4e8e\u65e0\u7c7b\u578b\u5e38\u91cf\u53c2\u4e0e\u7684\u8868\u8fbe\u5f0f\u6c42\u503c\uff0cGo \u7f16\u8bd1\u5668\u4f1a\u6839\u636e\u4e0a\u4e0b\u6587\u4e2d\u7684\u7c7b\u578b\u4fe1\u606f\uff0c\u628a\u65e0\u7c7b\u578b\u5e38\u91cf\u81ea\u52a8\u8f6c\u6362\u4e3a\u76f8\u5e94\u7684\u7c7b\u578b\u540e\uff0c\u518d\u53c2\u4e0e\u6c42\u503c\u8ba1\u7b97</li> <li>\u8f6c\u578b\u7684\u5bf9\u8c61\u662f\u4e00\u4e2a\u5e38\u91cf\uff0c\u5e76\u4e0d\u4f1a\u5f15\u53d1\u7c7b\u578b\u5b89\u5168\u95ee\u9898\uff0cGo \u7f16\u8bd1\u5668\u4f1a\u4fdd\u8bc1\u8fd9\u4e00\u8f6c\u578b\u7684\u5b89\u5168\u6027</li> <li>\u5982\u679c Go \u7f16\u8bd1\u5668\u5728\u505a\u9690\u5f0f\u8f6c\u578b\u65f6\uff0c\u53d1\u73b0\u65e0\u6cd5\u5c06\u5e38\u91cf\u8f6c\u6362\u4e3a\u76ee\u6807\u7c7b\u578b\uff0cGo \u7f16\u8bd1\u5668\u4e5f\u4f1a\u62a5\u9519 <pre><code>const m = 1333333333\nvar k int8 = 1\nj := k + m // \u7f16\u8bd1\u5668\u62a5\u9519\uff1aconstant 1333333333 overflows int8\n</code></pre></li> </ul>"},{"location":"go/changliang/#_3","title":"\u5b9e\u73b0\u679a\u4e3e","text":"<ul> <li> <p>Go \u7684 const \u8bed\u6cd5\u63d0\u4f9b\u4e86\u201c\u9690\u5f0f\u91cd\u590d\u524d\u4e00\u4e2a\u975e\u7a7a\u8868\u8fbe\u5f0f\u201d\u7684\u673a\u5236 <pre><code>package main\nimport (\n\"fmt\"\n)\nconst (\nApple  = 11\nBanana = 12\nStrawberry\nPear\n)\nfunc main() {\nfmt.Println(Apple)\nfmt.Println(Pear)\n}\n</code></pre></p> </li> <li> <p><code>iota</code> const \u58f0\u660e\u5757\uff08\u5305\u62ec\u5355\u884c\u58f0\u660e\uff09\u4e2d\uff0c\u6bcf\u4e2a\u5e38\u91cf\u6240\u5904\u4f4d\u7f6e\u5728\u5757\u4e2d\u7684\u504f\u79fb\u503c\uff08\u4ece\u96f6\u5f00\u59cb\uff09</p> </li> <li>\u6bcf\u4e00\u884c\u4e2d\u7684 iota \u81ea\u8eab\u4e5f\u662f\u4e00\u4e2a\u65e0\u7c7b\u578b\u5e38\u91cf\uff0c\u53ef\u4ee5\u50cf\u65e0\u7c7b\u578b\u5e38\u91cf\u90a3\u6837\uff0c\u81ea\u52a8\u53c2\u4e0e\u5230\u4e0d\u540c\u7c7b\u578b\u7684\u6c42\u503c\u8fc7\u7a0b\u4e2d\u6765\uff0c\u4e0d\u9700\u8981\u518d\u5bf9\u5b83\u8fdb\u884c\u663e\u5f0f\u8f6c\u578b\u64cd\u4f5c</li> <li>\u540c\u4e00\u884c\u7684 iota \u5373\u4fbf\u51fa\u73b0\u591a\u6b21\uff0c\u591a\u4e2a iota \u7684\u503c\u4e5f\u662f\u4e00\u6837\u7684</li> <li> <p>\u5176\u503c\u4e00\u76f4\u81ea\u589e\uff11\u76f4\u5230\u9047\u5230\u4e0b\u4e00\u4e2aconst\u5173\u952e\u5b57\uff0c\u5176\u503c\u624d\u88ab\u91cd\u65b0\u7f6e\u4e3a\uff10 <pre><code>// $GOROOT/src/sync/mutex.go \nconst ( mutexLocked = 1 &lt;&lt; iota // \u521a\u5f00\u59cbiota\u4e3a1\uff0c\u540e\u7eed\u81ea\u589e1, 1 &lt;&lt; 0\nmutexWoken // \u5b9a\u4e49\u65f6\u6ca1\u6709\u663e\u793a\u8d4b\u503c\uff0c\u91cd\u590d\u4e0a\u4e00\u884c\u7684\u503c\uff0c1 &lt;&lt; iota\uff0c\u76f8\u5f53\u4e8e1 &lt;&lt; 1\nmutexStarving // \u540c\u4e0a\nmutexWaiterShift = iota // \u91cd\u65b0\u8bbe\u7f6e\u4e3a3\nstarvationThresholdNs = 1e6\n)\nconst (\nApple, Banana = iota, iota + 10 // 0, 10 (iota = 0)\nStrawberry, Grape // 1, 11 (iota = 1)\nPear, Watermelon  // 2, 12 (iota = 2)\n)\n</code></pre></p> </li> <li> <p>\u7565\u8fc7iota\u4e2d\u76840\u6216\u8005\u67d0\u4e2a\u503c <pre><code>// $GOROOT/src/syscall/net_js.go\nconst (\n_ = iota\nIPV6_V6ONLY  // 1\nSOMAXCONN    // 2\nSO_ERROR     // 3\n)\nconst (\n_ = iota // 0\nPin1\nPin2\nPin3\n_\nPin5    // 5   \n)\n</code></pre></p> </li> <li> <p>\u6bcf\u4e2aconst\u5757\u90fd\u6709\u81ea\u5df1\u7684iota <pre><code>const (\na = iota + 1 // 1, iota = 0\nb            // 2, iota = 1\nc            // 3, iota = 2\n)\nconst (\ni = iota &lt;&lt; 1 // 0, iota = 0\nj             // 2, iota = 1\nk             // 4, iota = 2\n)\n</code></pre></p> </li> </ul>"},{"location":"go/channel/","title":"Channel","text":""},{"location":"go/channel/#channel","title":"Channel","text":"<ul> <li>\u4f7f\u7528<code>make(chan eleType, cap)</code>\u521b\u5efa</li> <li>\u5e95\u5c42\u662f<code>runtime.hchan</code>\u7c7b\u578b\u7684\u6307\u9488</li> </ul>"},{"location":"go/channel/#channelchannel","title":"\u6709\u7f13\u51b2channel\u548c\u65e0\u7f13\u51b2channel","text":"<ul> <li>\u65e0\u7f13\u51b2<ul> <li>\u53d1\u9001\u6570\u636e\u7684\u65f6\u5019\uff0c\u5982\u679c\u6ca1\u6709\u5bf9\u5e94\u7684\u63a5\u6536\u8005ready\uff0c\u90a3\u4e48\u53d1\u9001\u8005\u5c31\u8fdb\u5165\u5230\u7b49\u5f85\u53d1\u9001\u961f\u5217\u4e2d\uff0c\u7b49\u5f85\u6709\u5bf9\u5e94\u7684\u63a5\u6536\u8005\u5524\u9192\u5b83</li> <li>\u63a5\u6536\u6570\u636e\u7684\u65f6\u5019\uff0c\u5982\u679c\u6ca1\u6709\u5bf9\u5e94\u7684\u53d1\u9001\u8005ready\uff0c\u90a3\u4e48\u63a5\u6536\u8005\u5c31\u8fdb\u5165\u5230\u7b49\u5f85\u63a5\u6536\u961f\u5217\u4e2d\uff0c\u7b49\u5f85\u6709\u5bf9\u5e94\u7684\u53d1\u9001\u8005\u5524\u9192\u5b83</li> </ul> </li> <li> <p>\u6709\u7f13\u51b2</p> <ul> <li> <p>\u5bf9\u4e8e\u53d1\u9001\u8005\u6765\u8bf4\uff1a\u53ea\u8981\u7f13\u51b2\u533a\u672a\u6ee1\uff0c\u53d1\u9001\u8005\u5c31\u53ef\u4ee5\u7ee7\u7eed\u53d1\u9001\u6570\u636e\u5b58\u653e\u5728\u7f13\u51b2\u533a\u3002\u4e00\u65e6\u7f13\u51b2\u533a\u6ee1\u4e86\uff0c\u53d1\u9001\u8005\u5c31\u53ea\u80fd\u8fdb\u5165\u5230\u7b49\u5f85\u53d1\u9001\u961f\u5217\u4e2d\uff0c\u7b49\u5f85\u6709\u5bf9\u5e94\u7684\u63a5\u6536\u8005\u5524\u9192\u5b83\uff0c\u7136\u540e\u5b83\u518d\u628a\u6570\u636e\u653e\u5165\u5230\u521a\u521a\u88ab\u53d6\u8d70\u6570\u636e\u7684\u4f4d\u7f6e</p> </li> <li> <p>\u5bf9\u4e8e\u63a5\u6536\u8005\u6765\u8bf4\uff1a\u53ea\u8981\u7f13\u51b2\u533a\u4e0d\u4e3a\u7a7a\uff0c\u63a5\u6536\u8005\u5c31\u53ef\u4ee5\u7ee7\u7eed\u63a5\u6536\u6570\u636e\u3002\u4e00\u65e6\u7f13\u51b2\u533a\u7a7a\u4e86\uff0c\u90a3\u4e48\u63a5\u6536\u8005\u5c31\u53ea\u80fd\u8fdb\u5165\u5230\u7b49\u5f85\u63a5\u6536\u961f\u5217\u4e2d\uff0c\u7b49\u5f85\u6709\u5bf9\u5e94\u7684\u53d1\u9001\u8005\u5524\u9192\u5b83</p> </li> </ul> </li> </ul>"},{"location":"go/channel/#channel_1","title":"\u8bfb\u53d6\u5199\u5165channel\u51e0\u79cd\u60c5\u51b5","text":""},{"location":"go/channel/#channel_2","title":"\u5b9a\u4e49channel\uff0c\u4f46\u662f\u4e0d\u8fdb\u884c\u521d\u59cb\u5316","text":"<ul> <li><code>var ch chan string</code>\u5b9a\u4e49\u7684channel\u4e3a <code>nil channel</code> \u5bfc\u81f4 <code>fatal error</code></li> <li>\u963b\u585e\u6a21\u5f0f\u8bfb\u53d6\u6216\u5199\u5165\u5230chan\uff0c\u624d\u4f1a\u5d29\u6e83</li> <li><code>select</code>\u4e2d\u5411<code>nil channel</code>\u5199\u5165\u6216\u8bfb\u53d6\u4e0d\u4f1a\u5d29\u6e83\uff0c\u56e0\u4e3aselect\u662f\u975e\u963b\u585e\u6a21\u5f0f     <pre><code>// select \u53d1\u9001\nfunc selectnbsend(c *hchan, elem unsafe.Pointer) (selected bool) {\nreturn chansend(c, elem, false, getcallerpc())\n}\n// select \u63a5\u6536  \nfunc selectnbrecv(elem unsafe.Pointer, c *hchan) (selected, received bool) {\nreturn chanrecv(c, elem, false)\n}\nfunc chansend(c *hchan, ep unsafe.Pointer, block bool, callerpc uintptr) bool {\n// nilchannel \u975e\u963b\u585e\u5199\u5165\u4e0d\u4f1a\u5d29\u6e83\nif c == nil {\nif !block {\nreturn false\n}\ngopark(nil, nil, waitReasonChanSendNilChan, traceEvGoStop, 2)\nthrow(\"unreachable\")\n}\nif debugChan {\nprint(\"chansend: chan=\", c, \"\\n\")\n}\n// ...\u7701\u7565\u4ee3\u7801\n}\nfunc chanrecv(c *hchan, ep unsafe.Pointer, block bool) (selected, received bool) {\n// raceenabled: don't need to check ep, as it is always on the stack\n// or is new memory allocated by reflect.\nif debugChan {\nprint(\"chanrecv: chan=\", c, \"\\n\")\n}\nif c == nil {\nif !block {\nreturn\n}\ngopark(nil, nil, waitReasonChanReceiveNilChan, traceEvGoStop, 2)\nthrow(\"unreachable\")\n}\n// ...\u7701\u7565\u4ee3\u7801\n}\n</code></pre> <pre><code>func main() {\nwg := sync.WaitGroup{}\nvar ch chan string\nwrite := func() {\nfmt.Println(\"writing\")\ns := \"t\"\nch &lt;- s\nfmt.Println(\"write:\", s)\nwg.Done()\n}\nwrite()\n}\n// true\n// writing\n// fatal error: all goroutines are asleep - deadlock!\n</code></pre></li> </ul>"},{"location":"go/channel/#channelmake","title":"\u5b9a\u4e49channel\uff0cmake\u521d\u59cb\u5316","text":"<ul> <li>\u6b63\u5e38\u8bfb\u53d6\uff0c\u4e0d\u4f1a\u5d29\u6e83</li> <li>\u8bfb\u53d6\u5982\u679c\u5904\u7406\u4e0d\u5f53\u4f1a\u963b\u585e</li> </ul> <pre><code>func main() {\nwg := sync.WaitGroup{}\nvar ch chan string = make(chan string)\nread := func() {\nfmt.Println(\"reading\")\ns := &lt;-ch\nfmt.Println(\"read:\", s)\nwg.Done()\n}\nwrite := func() {\nfmt.Println(\"writing\")\ns := \"t\"\nch &lt;- s\nfmt.Println(\"write:\", s)\nwg.Done()\n}\nwg.Add(2)\ngo read()\ngo write()\nfmt.Println(\"waiting\")\nwg.Wait()\n}\n// waiting\n// reading\n// writing\n// write: t\n// read: t\n</code></pre>"},{"location":"go/channel/#channel_3","title":"\u8bfb\u53d6\u5df2\u7ecf\u5173\u95ed\u7684channel","text":"<ul> <li>channel \u5173\u95ed\u524d\u6b63\u5e38\u8bfb\u53d6</li> <li>channel \u5173\u95ed\u540e\u8bfb\u53d6\u5230chan\u5143\u7d20\u7c7b\u578b\u7684\u96f6\u503c\uff0c\u5e76\u4e14\u7b2c\u4e8c\u4e2acomma\u8fd4\u56de\u503c\u8fd4\u56defalse <pre><code>func main() {\nwg := sync.WaitGroup{}\nvar ch = make(chan string, 5)\nread := func() {\nfor {\nfmt.Println(\"reading\")\ns, ok := &lt;-ch\nfmt.Println(\"read:\", len(s), s, ok)\ntime.Sleep(time.Second)\n}\nwg.Done()\n}\nwrite := func() {\nfor i := 0; i &lt; 5; i++ {\nfmt.Println(\"writing\")\ns := \"t\"\nch &lt;- s\nfmt.Println(\"write:\", s)\n}\nwg.Done()\nclose(ch)\nfmt.Println(\"closed\")\n}\nwg.Add(2)\nwrite()\ngo read()\nfmt.Println(\"waiting\")\nwg.Wait()\nfmt.Println(\"finish\")\n}\n//reading\n//read: 1 t true\n//reading\n//read: 0  false\n//reading\n//read: 0  false\n</code></pre></li> </ul>"},{"location":"go/channel/#channel_4","title":"\u5199\u5165\u5df2\u7ecf\u5173\u95ed\u7684channel","text":"<ul> <li>panic: send on closed channel <pre><code>func main() {\nch := make(chan string)\nclose(ch)\nch &lt;- \"1\"\n}\n//panic: send on closed channel\n</code></pre></li> </ul>"},{"location":"go/channel/#channel-hchan","title":"Channel \u7ed3\u6784 hchan","text":"<pre><code>type hchan struct {\n// channel\u4e2d\u5f53\u524d\u5143\u7d20\u4e2a\u6570\nqcount   uint           // total data in the queue\n// \u961f\u5217\u5bb9\u91cf\ndataqsiz uint           // size of the circular queue\n// \u961f\u5217\u5143\u7d20\u7f13\u5b58\u533a\uff0c\u6570\u7ec4\u6307\u9488\nbuf      unsafe.Pointer // points to an array of dataqsiz elements\n// \u6bcf\u4e2a\u5143\u7d20\u5927\u5c0f\nelemsize uint16\n// channel\u662f\u5426\u5173\u95ed\nclosed   uint32\n// \u5143\u7d20\u7c7b\u578b\nelemtype *_type // element type\n// \u53d1\u9001\u4f4d\u7f6e\u7d22\u5f15\nsendx    uint   // send index\n// \u63a5\u6536\u4f4d\u7f6e\u7d22\u5f15\nrecvx    uint   // receive index\n// \u7b49\u5f85\u63a5\u6536\u963b\u585e\u7684goroutine\nrecvq    waitq  // list of recv waiters\n// \u7b49\u5f85\u53d1\u9001\u963b\u585e\u7684goroutine\nsendq    waitq  // list of send waiters\n// lock protects all fields in hchan, as well as several\n// fields in sudogs blocked on this channel.\n//\n// Do not change another G's status while holding this lock\n// (in particular, do not ready a G), as this can deadlock\n// with stack shrinking.\nlock mutex\n}\n</code></pre>"},{"location":"go/channel/#runtimemakechan","title":"runtime.makechan","text":"<ul> <li>\u5fc5\u8981\u7684\u8fb9\u754c\u68c0\u67e5\uff0c\u5185\u5b58\u6ea2\u51fa\uff0c\u5bb9\u91cf\u4e3a\u8d1f\u6570</li> <li>\u5982\u679c\u521b\u5efa\u4e00\u4e2a\u65e0\u7f13\u51b2channel \uff0c\u53ea\u9700\u8981\u4e3aruntime.hchan\u672c\u8eab\u5206\u914d\u4e00\u6bb5\u5185\u5b58\u7a7a\u95f4</li> <li>\u5982\u679c\u521b\u5efa\u7684\u7f13\u51b2channel\u5b58\u50a8\u7684\u7c7b\u578b\u4e0d\u662f\u6307\u9488\u7c7b\u578b\uff0c\u4f1a\u4e3a\u5f53\u524dchannel\u548c\u5b58\u50a8\u7c7b\u578b\u5143\u7d20\u7684\u7f13\u51b2\u533a\uff0c\u5206\u914d\u4e00\u5757\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u4e0b(\u7f13\u51b2channel\u5b58\u50a8\u7c7b\u578b\u5305\u542b\u6307\u9488)\uff0c\u4f1a\u5355\u72ec\u4e3aruntime.hchan\u548c\u7f13\u51b2\u533a\u5206\u914d\u5185\u5b58</li> </ul> <pre><code>func makechan(t *chantype, size int) *hchan {\nelem := t.elem\n// compiler checks this but be safe.\nif elem.size &gt;= 1&lt;&lt;16 {\nthrow(\"makechan: invalid channel element type\")\n}\nif hchanSize%maxAlign != 0 || elem.align &gt; maxAlign {\nthrow(\"makechan: bad alignment\")\n}\nmem, overflow := math.MulUintptr(elem.size, uintptr(size))\nif overflow || mem &gt; maxAlloc-hchanSize || size &lt; 0 {\npanic(plainError(\"makechan: size out of range\"))\n}\n// Hchan does not contain pointers interesting for GC when elements stored in buf do not contain pointers.\n// buf points into the same allocation, elemtype is persistent.\n// SudoG's are referenced from their owning thread so they can't be collected.\n// TODO(dvyukov,rlh): Rethink when collector can move allocated objects.\nvar c *hchan\nswitch {\ncase mem == 0:\n// Queue or element size is zero.\n// \u65e0\u7f13\u51b2\u961f\u5217\u6216\u8005\u5143\u7d20\u5360\u7528\u5927\u5c0f\u4e3a0\nc = (*hchan)(mallocgc(hchanSize, nil, true))\n// Race detector uses this location for synchronization.\nc.buf = c.raceaddr()\ncase elem.ptrdata == 0:\n// Elements do not contain pointers.\n// Allocate hchan and buf in one call.\n// \u5b58\u50a8\u7684\u5143\u7d20\u4e0d\u5305\u542b\u6307\u9488\uff0c\u5206\u914dhchan\u548cbuf\u5728\u4e00\u5757\u5185\u5b58\u533a\u57df\nc = (*hchan)(mallocgc(hchanSize+mem, nil, true))\n// maxAlign  = 8\n// hchanSize = unsafe.Sizeof(hchan{}) + uintptr(-int(unsafe.Sizeof(hchan{}))&amp;(maxAlign-1))\nc.buf = add(unsafe.Pointer(c), hchanSize)\ndefault:\n// Elements contain pointers.\n// \u72ec\u7acb\u5206\u914dhchan\u548cbuff\u5185\u5b58\nc = new(hchan)\nc.buf = mallocgc(mem, elem, true)\n}\nc.elemsize = uint16(elem.size)\nc.elemtype = elem\nc.dataqsiz = uint(size)\nlockInit(&amp;c.lock, lockRankHchan)\nif debugChan {\nprint(\"makechan: chan=\", c, \"; elemsize=\", elem.size, \"; dataqsiz=\", size, \"\\n\")\n}\nreturn c\n}\n</code></pre>"},{"location":"go/channel/#waitq-sudog","title":"waitq &amp;&amp; sudog","text":"<pre><code>type waitq struct {\nfirst *sudog\nlast  *sudog\n}\n// sudog represents a g in a wait list, such as for sending/receiving\n// on a channel.\n//\n// sudog is necessary because the g \u2194 synchronization object relation\n// is many-to-many. A g can be on many wait lists, so there may be\n// many sudogs for one g; and many gs may be waiting on the same\n// synchronization object, so there may be many sudogs for one object.\n//\n// sudogs are allocated from a special pool. Use acquireSudog and\n// releaseSudog to allocate and free them.\ntype sudog struct {\n// The following fields are protected by the hchan.lock of the\n// channel this sudog is blocking on. shrinkstack depends on\n// this for sudogs involved in channel ops.\ng *g\nnext *sudog\nprev *sudog\nelem unsafe.Pointer // data element (may point to stack)\n// The following fields are never accessed concurrently.\n// For channels, waitlink is only accessed by g.\n// For semaphores, all fields (including the ones above)\n// are only accessed when holding a semaRoot lock.\nacquiretime int64\nreleasetime int64\nticket      uint32\n// isSelect indicates g is participating in a select, so\n// g.selectDone must be CAS'd to win the wake-up race.\nisSelect bool\n// success indicates whether communication over channel c\n// succeeded. It is true if the goroutine was awoken because a\n// value was delivered over channel c, and false if awoken\n// because c was closed.\nsuccess bool\nparent   *sudog // semaRoot binary tree\nwaitlink *sudog // g.waiting list or semaRoot\nwaittail *sudog // semaRoot\nc        *hchan // channel\n}\n</code></pre>"},{"location":"go/channel/#channel-runtimechansend","title":"\u5411channel\u53d1\u9001\u6570\u636e runtime.chansend","text":"<ul> <li>c channel\u5bf9\u8c61\u7684\u6307\u9488</li> <li>ep \u5177\u4f53\u8981\u53d1\u9001\u7684\u5143\u7d20</li> <li>block true\u963b\u585e\u6a21\u5f0f\uff0cfalse \u975e\u963b\u585e\u6a21\u5f0f</li> <li>callerpc \u8c03\u7528\u8005\u7684\u8c03\u7528\u8005\u7684\u7a0b\u5e8f\u8ba1\u6570\u5668 (PC)</li> </ul> <pre><code>func full(c *hchan) bool {\n// c.dataqsiz is immutable (never written after the channel is created)\n// so it is safe to read at any time during channel operation.\n// \u521b\u5efa\u4e4b\u540e\u5c31\u4e0d\u4f1a\u8fb9\uff0c0\u662f\u4e00\u4e2a\u65e0\u7f13\u51b2channel\n// \u6ca1\u6709\u63a5\u6536\u7684\uff0c\u8fd4\u56detrue\nif c.dataqsiz == 0 {\n// Assumes that a pointer read is relaxed-atomic.\nreturn c.recvq.first == nil\n}\n// Assumes that a uint read is relaxed-atomic.\n// \u6709\u7f13\u51b2channel\nreturn c.qcount == c.dataqsiz\n}\nfunc chansend(c *hchan, ep unsafe.Pointer, block bool, callerpc uintptr) bool {\n// nil channel \u5224\u65ad\n// \u963b\u585e\u6a21\u5f0f,\u963b\u585egoroutine\uff0c\u7136\u540e\u5d29\u6e83\n// \u975e\u963b\u585e\u6a21\u5f0f \u6bd4\u5982select case\u60c5\u51b5\u4e0b\uff0c\u8fd4\u56defalse\nif c == nil {\nif !block {\nreturn false\n}\ngopark(nil, nil, waitReasonChanSendNilChan, traceEvGoStop, 2)\nthrow(\"unreachable\")\n}\n// \u8c03\u8bd5\u65e5\u5fd7\nif debugChan {\nprint(\"chansend: chan=\", c, \"\\n\")\n}\n// go build -race \u624d\u4f1a\u7528\u5230\nif raceenabled {\nracereadpc(c.raceaddr(), callerpc, funcPC(chansend))\n}\n// \u975e\u963b\u585e\u6a21\u5f0f\uff0c\u7136\u540echannel\u6ca1\u6709\u5173\u95ed\uff0c\u5e76\u4e14channel\u6ee1\u7684\u60c5\u51b5\u4e0b\u8fd4\u56defalse\nif !block &amp;&amp; c.closed == 0 &amp;&amp; full(c) {\nreturn false\n}\nvar t0 int64\nif blockprofilerate &gt; 0 {\nt0 = cputicks()\n}\n// \u4e0a\u9501\nlock(&amp;c.lock)\n// \u5173\u95ed\u7684channel \u62a5\u9519\nif c.closed != 0 {\nunlock(&amp;c.lock)\npanic(plainError(\"send on closed channel\"))\n}\n// \u53d6\u51fa\u7b2c\u4e00\u4e2a\u63a5\u6536\u8005\uff0c\nif sg := c.recvq.dequeue(); sg != nil {\n// Found a waiting receiver. We pass the value we want to send\n// directly to the receiver, bypassing the channel buffer (if any).\nsend(c, sg, ep, func() { unlock(&amp;c.lock) }, 3)\nreturn true\n}\n// \u6709\u7f13\u51b2\u901a\u9053\nif c.qcount &lt; c.dataqsiz {\n// Space is available in the channel buffer. Enqueue the element to send.\nqp := chanbuf(c, c.sendx)\nif raceenabled {\nracenotify(c, c.sendx, nil)\n}\ntypedmemmove(c.elemtype, qp, ep)\nc.sendx++\n// \u5faa\u73af\u5199\u5165\nif c.sendx == c.dataqsiz {\nc.sendx = 0\n}\nc.qcount++\nunlock(&amp;c.lock)\nreturn true\n}\n// \u65e0\u7f13\u51b2channel select \u4e5f\u4e0d\u4f1a\u963b\u585e\nif !block {\nunlock(&amp;c.lock)\nreturn false\n}\n// \u5f53\u524d\u53d1\u9001\u7684g\uff0c\u5c01\u88c5\u6210sudog\n// Block on the channel. Some receiver will complete our operation for us.\ngp := getg()\nmysg := acquireSudog()\nmysg.releasetime = 0\nif t0 != 0 {\nmysg.releasetime = -1\n}\n// No stack splits between assigning elem and enqueuing mysg\n// on gp.waiting where copystack can find it.\nmysg.elem = ep\nmysg.waitlink = nil\nmysg.g = gp\nmysg.isSelect = false\nmysg.c = c\ngp.waiting = mysg\ngp.param = nil\n//  sudog\u5165\u961f\nc.sendq.enqueue(mysg)\n// Signal to anyone trying to shrink our stack that we're about\n// to park on a channel. The window between when this G's status\n// changes and when we set gp.activeStackChans is not safe for\n// stack shrinking.\n// \u539f\u5b50\u6807\u8bb0goroutine \u56e0\u4e3achansend \u6216\u8005chanrecv\u963b\u585e\natomic.Store8(&amp;gp.parkingOnChan, 1)\n// \u6302\u8d77\u5f53\u524dG\ngopark(chanparkcommit, unsafe.Pointer(&amp;c.lock), waitReasonChanSend, traceEvGoBlockSend, 2)\n// Ensure the value being sent is kept alive until the\n// receiver copies it out. The sudog has a pointer to the\n// stack object, but sudogs aren't considered as roots of the\n// stack tracer.\n// \u4fdd\u6301\u5f53\u524dep \u4e0d\u4f1a\u88abGC\u56de\u6536\uff0c\u4e5f\u5c31\u662f\u53d1\u9001\u7684\u5143\u7d20\u4e0d\u4f1a\u88ab\u56de\u6536\nKeepAlive(ep)\n// someone woke us up.\n// \u88ab\u5524\u9192\u540e\u624d\u4f1a\u4f7f\u7528\nif mysg != gp.waiting {\nthrow(\"G waiting list is corrupted\")\n}\ngp.waiting = nil\ngp.activeStackChans = false\nclosed := !mysg.success\ngp.param = nil\nif mysg.releasetime &gt; 0 {\nblockevent(mysg.releasetime-t0, 2)\n}\nmysg.c = nil\nreleaseSudog(mysg)\nif closed {\nif c.closed == 0 {\nthrow(\"chansend: spurious wakeup\")\n}\n// \u5173\u95ed\u7684channel \u5199\u5165 panic\npanic(plainError(\"send on closed channel\"))\n}\nreturn true\n}\n</code></pre>"},{"location":"go/channel/#channel-runtimechanrecv","title":"\u4ecechannel\u63a5\u6536\u6570\u636e runtime.chanrecv","text":"<ul> <li>c \u8bfb\u53d6\u7684channel</li> <li>ep \u8981\u8bfb\u53d6\u51fa\u7684\u5185\u5bb9\u5b58\u7684\u5730\u5740</li> <li>block \u963b\u585e\u6a21\u5f0f</li> <li>nil channel \u975e\u963b\u585e\u6a21\u5f0f\u4e0d\u4f1a\u62a5\u9519\uff0c\u4f1a\u8bfb\u4e0d\u5230return\uff0c\u963b\u585e\u6a21\u5f0f\u8bfbnil channel \u5d29\u6e83</li> <li>\u975e\u963b\u585e\u6a21\u5f0f\u8bfb\u53d6\u5173\u95ed\u7684channel <pre><code>// empty reports whether a read from c would block (that is, the channel is\n// empty).  It uses a single atomic read of mutable state.\nfunc empty(c *hchan) bool {\n// c.dataqsiz is immutable.\nif c.dataqsiz == 0 {\nreturn atomic.Loadp(unsafe.Pointer(&amp;c.sendq.first)) == nil\n}\nreturn atomic.Loaduint(&amp;c.qcount) == 0\n}\n// chanrecv receives on channel c and writes the received data to ep.\n// ep may be nil, in which case received data is ignored.\n// If block == false and no elements are available, returns (false, false).\n// Otherwise, if c is closed, zeros *ep and returns (true, false).\n// Otherwise, fills in *ep with an element and returns (true, true).\n// A non-nil ep must point to the heap or the caller's stack.\nfunc chanrecv(c *hchan, ep unsafe.Pointer, block bool) (selected, received bool) {\n// raceenabled: don't need to check ep, as it is always on the stack\n// or is new memory allocated by reflect.\nif debugChan {\nprint(\"chanrecv: chan=\", c, \"\\n\")\n}\n// nil channel \u5224\u65ad\nif c == nil {\nif !block {\nreturn\n}\ngopark(nil, nil, waitReasonChanReceiveNilChan, traceEvGoStop, 2)\nthrow(\"unreachable\")\n}\n// Fast path: check for failed non-blocking operation without acquiring the lock.\nif !block &amp;&amp; empty(c) {\n// After observing that the channel is not ready for receiving, we observe whether the\n// channel is closed.\n//\n// Reordering of these checks could lead to incorrect behavior when racing with a close.\n// For example, if the channel was open and not empty, was closed, and then drained,\n// reordered reads could incorrectly indicate \"open and empty\". To prevent reordering,\n// we use atomic loads for both checks, and rely on emptying and closing to happen in\n// separate critical sections under the same lock.  This assumption fails when closing\n// an unbuffered channel with a blocked send, but that is an error condition anyway.\nif atomic.Load(&amp;c.closed) == 0 {\n// Because a channel cannot be reopened, the later observation of the channel\n// being not closed implies that it was also not closed at the moment of the\n// first observation. We behave as if we observed the channel at that moment\n// and report that the receive cannot proceed.\nreturn\n}\n// The channel is irreversibly closed. Re-check whether the channel has any pending data\n// to receive, which could have arrived between the empty and closed checks above.\n// Sequential consistency is also required here, when racing with such a send.\nif empty(c) {\n// The channel is irreversibly closed and empty.\nif raceenabled {\nraceacquire(c.raceaddr())\n}\n// value := &lt;- ch \u8bfb\u53d6\u65b9\u5f0f\nif ep != nil {\ntypedmemclr(c.elemtype, ep)\n}\nreturn true, false\n}\n}\nvar t0 int64\nif blockprofilerate &gt; 0 {\nt0 = cputicks()\n}\nlock(&amp;c.lock)\n// value := &lt;- ch \u8bfb\u53d6\u65b9\u5f0f\n// channel \u5df2\u7ecf\u5173\u95ed\uff0c\u6ca1\u6709\u672a\u8bfb\u51fa\u7684\u5143\u7d20\nif c.closed != 0 &amp;&amp; c.qcount == 0 {\nif raceenabled {\nraceacquire(c.raceaddr())\n}\nunlock(&amp;c.lock)\nif ep != nil {\ntypedmemclr(c.elemtype, ep)\n}\nreturn true, false\n}\n// \u6709\u963b\u585e\u7684send goroutine\nif sg := c.sendq.dequeue(); sg != nil {\n// Found a waiting sender. If buffer is size 0, receive value\n// directly from sender. Otherwise, receive from head of queue\n// and add sender's value to the tail of the queue (both map to\n// the same buffer slot because the queue is full).\nrecv(c, sg, ep, func() { unlock(&amp;c.lock) }, 3)\nreturn true, true\n}\n// \u6709\u7f13\u51b2\nif c.qcount &gt; 0 {\n// Receive directly from queue\nqp := chanbuf(c, c.recvx)\nif raceenabled {\nracenotify(c, c.recvx, nil)\n}\nif ep != nil {\ntypedmemmove(c.elemtype, ep, qp)\n}\ntypedmemclr(c.elemtype, qp)\nc.recvx++\nif c.recvx == c.dataqsiz {\nc.recvx = 0\n}\nc.qcount--\nunlock(&amp;c.lock)\nreturn true, true\n}\nif !block {\nunlock(&amp;c.lock)\nreturn false, false\n}\n// \u963b\u585e\u60c5\u51b5\u4e0b\u5c01\u88c5G\uff0c\u5b58\u5230recvq\n// no sender available: block on this channel.\ngp := getg()\nmysg := acquireSudog()\nmysg.releasetime = 0\nif t0 != 0 {\nmysg.releasetime = -1\n}\n// No stack splits between assigning elem and enqueuing mysg\n// on gp.waiting where copystack can find it.\nmysg.elem = ep\nmysg.waitlink = nil\ngp.waiting = mysg\nmysg.g = gp\nmysg.isSelect = false\nmysg.c = c\ngp.param = nil\nc.recvq.enqueue(mysg)\n// Signal to anyone trying to shrink our stack that we're about\n// to park on a channel. The window between when this G's status\n// changes and when we set gp.activeStackChans is not safe for\n// stack shrinking.\natomic.Store8(&amp;gp.parkingOnChan, 1)\n//\u6302\u8d77goroutine\ngopark(chanparkcommit, unsafe.Pointer(&amp;c.lock), waitReasonChanReceive, traceEvGoBlockRecv, 2)\n// someone woke us up\nif mysg != gp.waiting {\nthrow(\"G waiting list is corrupted\")\n}\ngp.waiting = nil\ngp.activeStackChans = false\nif mysg.releasetime &gt; 0 {\nblockevent(mysg.releasetime-t0, 2)\n}\nsuccess := mysg.success\ngp.param = nil\nmysg.c = nil\nreleaseSudog(mysg)\nreturn true, success\n}\n</code></pre></li> </ul>"},{"location":"go/channel/#channelcounting-semaphoregoroutine","title":"\u6709\u7f13\u5b58channel\u7528\u505a\u8ba1\u6570\u5668\uff0c\u7528\u4f5c\u8ba1\u6570\u4fe1\u53f7\u91cf\uff08counting semaphore\uff09\uff0c\u53ef\u4ee5\u7528\u6765\u63a7\u5236\u6d3b\u52a8goroutine\u6570\u91cf","text":"<pre><code>var active = make(chan struct{}, 3)\nvar jobs = make(chan int, 10)\nfunc main() {\ngo func() {\nfor i := 0; i &lt; 8; i++ {\njobs &lt;- (i + 1)\n}\nclose(jobs)\n}()\nvar wg sync.WaitGroup\nfor j := range jobs {\nwg.Add(1)\ngo func(j int) {\nactive &lt;- struct{}{}\nlog.Printf(\"handle job: %d\\n\", j)\ntime.Sleep(2 * time.Second)\n&lt;-active\nwg.Done()\n}(j)\n}\nwg.Wait()\n}\n</code></pre>"},{"location":"go/channel/#nil-channel-select","title":"nil channel\u914d\u5408 select\u4f7f\u7528 \u624d\u4e0d\u4f1a\u5d29\u6e83","text":"<ul> <li>channel \u5173\u95ed\u540e\u8bfb\u53d6\u4f1a\u8bfb\u53d6\u5230\u96f6\u503c</li> <li>\u7528select\u53ef\u4ee5\u5c06\u5173\u95ed\u540e\u7684channel\u53d8\u6210nil channel\uff0c\u800c\u4e0d\u662f\u6bcf\u6b21\u90fd\u8bfb\u5230\u96f6\u503c <pre><code>func main() {\nch1, ch2 := make(chan int), make(chan int)\ngo func() {\ntime.Sleep(time.Second * 5)\nch1 &lt;- 5\nclose(ch1)\n}()\ngo func() {\ntime.Sleep(time.Second * 7)\nch2 &lt;- 7\nclose(ch2)\n}()\nfor {\nselect {\ncase x, ok := &lt;-ch1:\nif !ok {\nch1 = nil\n} else {\nfmt.Println(x)\n}\ncase x, ok := &lt;-ch2:\nif !ok {\nch2 = nil\n} else {\nfmt.Println(x)\n}\n}\nif ch1 == nil &amp;&amp; ch2 == nil {\nbreak\n}\n}\nfmt.Println(\"program end\")\n}\n</code></pre></li> </ul>"},{"location":"go/cli/","title":"\u547d\u4ee4\u884c\u5c0f\u7a0b\u5e8f","text":""},{"location":"go/cli/#_1","title":"\u547d\u4ee4\u884c\u5c0f\u7a0b\u5e8f\u5408\u8ba1","text":"<ul> <li>gzip \u538b\u7f29</li> <li>gzip \u89e3\u538b</li> </ul>"},{"location":"go/cli/#gzip","title":"gzip \u538b\u7f29","text":"<ul> <li>go build -o gzip</li> <li>gzip &lt; main.go &gt; main.go.gz <pre><code>package main\nimport (\n\"compress/gzip\"\n\"io\"\n\"os\"\n)\nfunc main() {\nw := gzip.NewWriter(os.Stdout)\nio.Copy(w, os.Stdin)\n}\n</code></pre></li> </ul>"},{"location":"go/condition/","title":"\u6761\u4ef6&&\u5faa\u73af","text":""},{"location":"go/condition/#labelcontinue","title":"\u5e26label\u7684continue\u8bed\u53e5","text":"<ul> <li>\u591a\u7528\u4e8e\u5d4c\u5957\u5faa\u73af</li> <li>\u7ec8\u6b62\u5185\u5c42\u5faa\u73af\u7528\uff0c\u7ee7\u7eed\u6267\u884c\u5916\u5c42\u5faa\u73af</li> <li>\u5982\u679c\u4f7f\u7528<code>goto</code>\u8bed\u53e5\u4e0d\u7ba1\u662f\u5185\u5c42\u5faa\u73af\u8fd8\u662f\u5916\u5c42\u5faa\u73af\u90fd\u4f1a\u88ab\u7ec8\u7ed3\uff0c\u4ee3\u7801\u5c06\u4f1a\u4ece outerloop \u8fd9\u4e2a label \u5904\uff0c\u5f00\u59cb\u91cd\u65b0\u6267\u884c\u5d4c\u5957\u5faa\u73af\u8bed\u53e5\uff0c\u8fd9\u4e0e\u5e26 label \u7684 continue \u7684\u8df3\u8f6c\u8bed\u4e49\u662f\u5b8c\u5168\u4e0d\u540c\u7684 <pre><code>func main() {\nvar sl = [][]int{\n{1, 34, 26, 35, 78},\n{3, 45, 13, 24, 99},\n{101, 13, 38, 7, 127},\n{54, 27, 40, 83, 81},\n}\nouterloop:\nfor i := 0; i &lt; len(sl); i++ {\nfor j := 0; j &lt; len(sl[i]); j++ {\nif sl[i][j] == 13 {\nfmt.Printf(\"found 13 at [%d, %d]\\n\", i, j)\ncontinue outerloop\n}\n}\n}\n}\n</code></pre></li> </ul>"},{"location":"go/condition/#labelbreak","title":"\u5e26label\u7684break\u8bed\u53e5","text":"<ul> <li>\u7528\u4e8e\u5d4c\u5957\u5faa\u73af\uff0c\u7ed3\u675f\u5916\u5c42\u5faa\u73af <pre><code>var gold = 38\nfunc main() {\nvar sl = [][]int{\n{1, 34, 26, 35, 78},\n{3, 45, 13, 24, 99},\n{101, 13, 38, 7, 127},\n{54, 27, 40, 83, 81},\n}\nouterloop:\nfor i := 0; i &lt; len(sl); i++ {\nfor j := 0; j &lt; len(sl[i]); j++ {\nif sl[i][j] == gold {\nfmt.Printf(\"found gold at [%d, %d]\\n\", i, j)\nbreak outerloop\n}\n}\n}\n}\n</code></pre></li> </ul>"},{"location":"go/condition/#for","title":"for \u5faa\u73af\u7684\u5751","text":"<ul> <li> <p>\u5faa\u73af\u53d8\u91cf\u91cd\u7528\uff0ci\u548cv\u53d8\u91cf\u53ea\u4f1a\u5b9a\u4e49\u4e00\u6b21\uff0c\u540e\u7eed\u6bcf\u6b21\u90fd\u662f\u91cd\u7528\u3002\u4e3a\u95ed\u5305\u51fd\u6570\u589e\u52a0\u53c2\u6570\uff0c\u4f20\u53c2iv <pre><code>func main() {\nvar m = []int{1, 2, 3, 4, 5}  for i, v := range m {\ngo func() {\ntime.Sleep(time.Second * 3)\nfmt.Println(i, v)\n}()\n}\ntime.Sleep(time.Second * 10)\n}\n</code></pre></p> </li> <li> <p>\u53c2\u4e0e for range \u5faa\u73af\u7684\u662f range \u8868\u8fbe\u5f0f\u7684\u526f\u672c\uff0c\u53c2\u4e0e\u5faa\u73af\u7684a\u662fa\u7684\u526f\u672c\uff0c\u4f46\u662f\u4fee\u6539\u7684\u662f\u539f\u59cb\u7684a\uff0c\u6570\u7ec4\u7c7b\u578b\u5faa\u73af\u53ef\u4ee5\u7528\u5207\u7247\u4ee3\u66ff <pre><code>func main() {\nvar a = [5]int{1, 2, 3, 4, 5}\nvar r [5]int\nfmt.Println(\"original a =\", a)\nfor i, v := range a {\nif i == 0 {\na[1] = 12\na[2] = 13\n}\nr[i] = v\n}\nfmt.Println(\"after for range loop, r =\", r)\nfmt.Println(\"after for range loop, a =\", a)\n}\n// original a = [1 2 3 4 5]\n// after for range loop, r = [1 2 3 4 5]\n// after for range loop, a = [1 12 13 4 5]\n</code></pre></p> </li> <li> <p>\u904d\u5386 map \u4e2d\u5143\u7d20\u7684\u968f\u673a\u6027</p> </li> </ul>"},{"location":"go/condition/#switch-case-type","title":"switch case type","text":"<ul> <li>x \u5fc5\u987b\u662f\u4e00\u4e2ainterface{} \u63a5\u53e3\u7c7b\u578b</li> <li>switch\u4e0d\u7528\u77ed\u53d8\u91cf\u63a5\u6536\uff0c\u53ea\u4f1a\u6709x\u7684\u52a8\u6001\u7c7b\u578b</li> <li>\u7528\u77ed\u53d8\u91cf\u63a5\u53d7\u8fd8\u53ef\u4ee5\u83b7\u5f97x\u7684value\uff0cv \u5b58\u50a8\u7684\u662f\u53d8\u91cf x \u7684\u52a8\u6001\u7c7b\u578b\u5bf9\u5e94\u7684\u503c\u4fe1\u606f</li> <li>Go \u4e2d\u6240\u6709\u7c7b\u578b\u90fd\u5b9e\u73b0\u4e86 interface{}\u7c7b\u578b\uff0c\u6240\u4ee5 case \u540e\u9762\u53ef\u4ee5\u662f\u4efb\u610f\u7c7b\u578b\u4fe1\u606f</li> <li>\u5982\u679c\u5728 switch \u540e\u9762\u4f7f\u7528\u4e86\u67d0\u4e2a\u7279\u5b9a\u7684\u63a5\u53e3\u7c7b\u578b I\uff0c\u90a3\u4e48 case \u540e\u9762\u5c31\u53ea\u80fd\u4f7f\u7528\u5b9e\u73b0\u4e86\u63a5\u53e3\u7c7b\u578b I \u7684\u7c7b\u578b\u4e86\uff0c\u5426\u5219 Go \u7f16\u8bd1\u5668\u4f1a\u62a5\u9519 <pre><code>func main() {\nvar x interface{} = Book{Name: \"11\"}\nswitch v := x.(type) {\ncase nil:\nprintln(\"v is nil\")\ncase int:\nprintln(\"the type of v is int, v =\", v)\ncase string:\nprintln(\"the type of v is string, v =\", v)\ncase bool:\nprintln(\"the type of v is bool, v =\", v)\ncase Book:\nfmt.Println(\"the type of v is book, v =\", v)\ndefault:\nprintln(\"don't support the type\")\n}\n}\n</code></pre></li> </ul>"},{"location":"go/daimakuai/","title":"\u4ee3\u7801\u5757&&\u4f5c\u7528\u57df","text":""},{"location":"go/daimakuai/#_1","title":"\u4ee3\u7801\u5757","text":"<ul> <li>\u5305\u88f9\u5728\u4e00\u5bf9\u5927\u62ec\u53f7\u5185\u90e8\u7684\u58f0\u660e\u548c\u8bed\u53e5\u5e8f\u5217</li> <li>\u5982\u679c\u5927\u62ec\u53f7\u5185\u6ca1\u6709\u58f0\u660e\u548c\u8bed\u53e5\u5e8f\u5217\uff0c\u5219\u79f0\u4e3a<code>\u7a7a\u4ee3\u7801\u5757</code></li> <li>\u4ee3\u7801\u5757\u652f\u6301\u5d4c\u5957\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u4ee3\u7801\u5757\u4e2d\u5d4c\u5165\u591a\u4e2a\u5c42\u6b21\u7684\u4ee3\u7801\u5757</li> </ul> <pre><code>func foo() { //\u4ee3\u7801\u57571\n{ // \u4ee3\u7801\u57572\n{ // \u4ee3\u7801\u57573\n{ // \u4ee3\u7801\u57574\n}\n}\n}\n}\n</code></pre>"},{"location":"go/daimakuai/#_2","title":"\u663e\u793a\u4ee3\u7801\u5757","text":"<ul> <li>\u8089\u773c\u53ef\u89c1\u7684\u5927\u62ec\u53f7\u5305\u88f9</li> </ul>"},{"location":"go/daimakuai/#_3","title":"\u9690\u5f0f\u4ee3\u7801\u5757","text":"<ul> <li>\u65e0\u6cd5\u901a\u8fc7\u5927\u62ec\u53f7\u6765\u8bc6\u522b</li> </ul>"},{"location":"go/daimakuai/#_4","title":"\u4f5c\u7528\u57df","text":"<ul> <li>\u9488\u5bf9\u6807\u8bc6\u7b26\u7684\uff0c\u4e0d\u5c40\u9650\u4e8e\u53d8\u91cf</li> <li>\u4e00\u4e2a\u6807\u8bc6\u7b26\u7684\u4f5c\u7528\u57df\u5c31\u662f\u6307\u8fd9\u4e2a\u6807\u8bc6\u7b26\u5728\u88ab\u58f0\u660e\u540e\u53ef\u4ee5\u88ab\u6709\u6548\u4f7f\u7528\u7684\u6e90\u7801\u533a\u57df</li> <li>\u4f5c\u7528\u57df\u662f\u4e00\u4e2a\u7f16\u8bd1\u671f\u7684\u6982\u5ff5\uff0c\u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u4f1a\u5bf9\u6bcf\u4e2a\u6807\u8bc6\u7b26\u7684\u4f5c\u7528\u57df\u8fdb\u884c\u68c0\u67e5\uff0c\u5bf9\u4e8e\u5728\u6807\u8bc6\u7b26\u4f5c\u7528\u57df\u5916\u4f7f\u7528\u8be5\u6807\u8bc6\u7b26\u7684\u884c\u4e3a\u4f1a\u7ed9\u51fa\u7f16\u8bd1\u9519\u8bef\u7684\u62a5\u9519</li> </ul>"},{"location":"go/data_type/","title":"\u6570\u503c\u7c7b\u578b","text":""},{"location":"go/data_type/#_1","title":"\u6574\u578b","text":"<ul> <li>\u5e73\u53f0\u65e0\u5173\u6574\u578b</li> <li>\u5e73\u53f0\u76f8\u5173\u6574\u578b</li> <li>\u533a\u522b\u5728\u4e8e\u6574\u6570\u7c7b\u578b\u5728\u4e0d\u540c CPU \u67b6\u6784\u6216\u64cd\u4f5c\u7cfb\u7edf\u4e0b\u9762\uff0c\u5b83\u4eec\u7684\u957f\u5ea6\u662f\u5426\u662f\u4e00\u81f4</li> </ul>"},{"location":"go/data_type/#_2","title":"\u5e73\u53f0\u65e0\u5173\u6574\u578b","text":"<ul> <li>\u4efb\u4f55CPU\u67b6\u6784\u4e0b\uff0c\u957f\u5ea6\u90fd\u662f\u4e00\u81f4\u7684</li> <li>\u6709\u7b26\u53f7\u6574\u6570 int8-int64</li> <li>\u65e0\u7b26\u53f7\u6574\u6570 uint8-unint64</li> <li>\u672c\u8d28\u5dee\u522b\u5728\u4e8e\u6700\u9ad8\u4e8c\u8fdb\u5236\u4f4d\uff08bit \u4f4d\uff09\u662f\u5426\u88ab\u89e3\u91ca\u4e3a\u7b26\u53f7\u4f4d </li> </ul>"},{"location":"go/data_type/#_3","title":"\u5e73\u53f0\u76f8\u5173\u6574\u578b","text":"<ul> <li>int</li> <li>uint</li> <li>uintptr</li> <li>\u53ef\u4ee5\u8c03\u7528unsafe.Sizeof(\u53d8\u91cf) \u65b9\u6cd5\u6765\u83b7\u53d6\u5bf9\u5e94\u5e73\u53f0\u5360\u7528\u7684\u5927\u5c0f </li> </ul>"},{"location":"go/data_type/#_4","title":"\u6574\u578b\u6ea2\u51fa","text":"<ul> <li>\u6574\u578b\u8fd0\u7b97\u7ed3\u679c\u8d85\u51fa\u8868\u793a\u7684\u8303\u56f4</li> <li>\u6ea2\u51fa\u7684\u7ed3\u679c\u4f9d\u7136\u5728\u6574\u578b\u8868\u793a\u8303\u56f4</li> <li>\u7ed3\u679c\u4e0e\u9884\u671f\u7ed3\u679c\u4e0d\u7b26 <pre><code>var s int8 = 127\ns += 1 // \u9884\u671f128\uff0c\u5b9e\u9645\u7ed3\u679c-128\nvar u uint8 = 1\nu -= 2 // \u9884\u671f-1\uff0c\u5b9e\u9645\u7ed3\u679c255\n</code></pre></li> </ul>"},{"location":"go/data_type/#_5","title":"\u6574\u578b\u5b57\u9762\u503c\u4e0e\u683c\u5f0f\u5316\u8f93\u51fa","text":"<ul> <li>\u4e8c\u8fdb\u5236</li> <li>\u516b\u8fdb\u5236</li> <li>\u5341\u8fdb\u5236</li> <li>\u5341\u516d\u8fdb\u5236 <pre><code>d1 := 0b10000001 // \u4e8c\u8fdb\u5236\uff0c\u4ee5\"0b\"\u4e3a\u524d\u7f00\uff0c\u5728go1.13\u4e4b\u540e\u7684\u7248\u672c\u624d\u751f\u6548\nd2 := 0B10000001 // \u4e8c\u8fdb\u5236\uff0c\u4ee5\"0B\"\u4e3a\u524d\u7f00\uff0c\u5728go1.13\u4e4b\u540e\u7684\u7248\u672c\u624d\u751f\u6548\nb := 0700      // \u516b\u8fdb\u5236\uff0c\u4ee5\"0\"\u4e3a\u524d\u7f00\ne1 := 0o700      // \u516b\u8fdb\u5236\uff0c\u4ee5\"0o\"\u4e3a\u524d\u7f00\ne2 := 0O700      // \u516b\u8fdb\u5236\uff0c\u4ee5\"0O\"\u4e3a\u524d\u7f00\na := 53        // \u5341\u8fdb\u5236\nc1 := 0xaabbcc // \u5341\u516d\u8fdb\u5236\uff0c\u4ee5\"0x\"\u4e3a\u524d\u7f00\nc2 := 0Xddeeff // \u5341\u516d\u8fdb\u5236\uff0c\u4ee5\"0X\"\u4e3a\u524d\u7f00\n</code></pre></li> </ul>"},{"location":"go/data_type/#-","title":"\u652f\u6301\u5728\u5b57\u9762\u503c\u4e2d\u589e\u52a0\u6570\u5b57\u5206\u9694\u7b26\"-\"","text":"<ul> <li>\u5728go1.13\u4e4b\u540e\u7684\u7248\u672c\u624d\u751f\u6548 <pre><code>a := 5_3_7   // \u5341\u8fdb\u5236: 537\nb := 0b_1000_0111  // \u4e8c\u8fdb\u5236\u4f4d\u8868\u793a\u4e3a10000111 \nc1 := 0_700  // \u516b\u8fdb\u5236: 0700\nc2 := 0o_700 // \u516b\u8fdb\u5236: 0700\nd1 := 0x_5c_6d // \u5341\u516d\u8fdb\u5236\uff1a0x5c6d\n</code></pre></li> </ul>"},{"location":"go/data_type/#_6","title":"\u6d6e\u70b9\u6570","text":"<ul> <li>float32 32\u4f4d\uff0c\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570</li> <li>float64 64\u4f4d\uff0c\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570</li> <li>\u9ed8\u8ba4\u503c0.0</li> <li>Go\u63d0\u4f9b\u7684\u6d6e\u70b9\u6570\u90fd\u662f\u5e73\u53f0\u65e0\u5173\u7684</li> </ul>"},{"location":"go/data_type/#_7","title":"\u6d6e\u70b9\u6570\u4e8c\u8fdb\u5236\u8868\u793a","text":"<ul> <li>IEEE 754\u7b97\u672f\u6807\u51c6</li> <li>\u5355\u7cbe\u5ea6 32\u4f4d</li> <li>\u53cc\u7cbe\u5ea6 64\u4f4d</li> <li>\u6269\u5c55\u5355\u7cbe\u5ea6 43\u4f4d\u4ee5\u4e0a</li> <li>\u6269\u5c55\u53cc\u7cbe\u5ea6 79\u4f4d\u4ee5\u4e0a</li> <li>\u4e8c\u8fdb\u5236\u8868\u793a\u65b9\u5f0f </li> </ul>"},{"location":"go/data_type/#_8","title":"\u6d6e\u70b9\u6570\u9636\u7801\u548c\u5c3e\u6570","text":""},{"location":"go/data_type/#_9","title":"\u5341\u8fdb\u5236\u5c0f\u6570\u8f6c\u6362\u6210\u4e8c\u8fdb\u5236\u8ba1\u7b97\u65b9\u5f0f","text":"<ul> <li>\u4e582\u53d6\u6574\u7684\u7ad6\u5f0f\u8ba1\u7b97</li> <li>\u5c0f\u6570\u90e8\u5206\u6bcf\u6b21\u4e582\uff0c\u7ed3\u679c\u5927\u4e8e1\u8bb01\uff0c\u7ed3\u679c\u5c0f\u4e8e1\u8bb00</li> <li>\u5269\u4e0b\u7684\u5c0f\u6570\u90e8\u5206\u518d\u4e582\uff0c\u8bb0\u5f55\u65b9\u5f0f\u540c\u4e0a</li> <li>\u76f4\u5230\u7ed3\u679c\u7b49\u4e8e\u5c0f\u6570\u90e8\u5206\u4e3a0</li> </ul>"},{"location":"go/data_type/#1398125ieee754","title":"\u5341\u8fdb\u5236\u5f62\u5f0f\u7684\u6d6e\u70b9\u503c 139.8125\u8f6c\u6362\u4e3aIEEE754\u5355\u7cbe\u5ea6\u4e8c\u8fdb\u5236","text":""},{"location":"go/data_type/#_10","title":"\u4e8c\u8fdb\u5236\u8f6c\u6362","text":"<ul> <li>\u6574\u6570\u90e8\u5206\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236 <code>10001011b</code></li> <li>\u5c0f\u6570\u90e8\u5206\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236 <code>1101b</code></li> <li>\u539f\u6765\u7684<code>139.8125</code>\u53d8\u4e3a<code>10001011.1101</code></li> </ul>"},{"location":"go/data_type/#11","title":"\u79fb\u52a8\u5c0f\u6570\u70b9\uff0c\u76f4\u5230\u6574\u6570\u90e8\u5206\u4ec5\u67091\u4e2a1","text":"<ul> <li><code>10001011.1101b</code> =&gt; <code>1.00010111101b</code></li> <li>\u5c0f\u6570\u70b9\u79fb\u52a87\u4f4d</li> <li>\u5c3e\u6570\u4e3a<code>00010111101b</code></li> </ul>"},{"location":"go/data_type/#_11","title":"\u8ba1\u7b97\u9636\u7801","text":"<ul> <li>\u9636\u7801 = \u6307\u6570 + \u504f\u79fb\u503c\uff0c\u6307\u6570\u5c31\u662f\u5c0f\u6570\u70b9\u79fb\u52a8\u7684\u4f4d\u6570\uff0c\u504f\u79fb\u503c\u4e3a2^(e-1)-1\uff0ce\u5c31\u662f\u9636\u7801\u90e8\u5206\u7684bit\u4f4d\u6570\uff0c32\u4f4d\u7cbe\u5ea6e\u4e3a8,64\u7cbe\u5ea6e\u4e3a11</li> <li>\u9636\u7801 = 7 + 127\uff0c\u4e3a134d\uff0c<code>10000110b</code></li> </ul>"},{"location":"go/data_type/#0","title":"\u7b26\u53f7\u4f4d\uff0c\u9636\u7801\u548c\u5c3e\u6570\u586b\u5145\uff0c\u5c3e\u6570\u4f4d\u4e0d\u591f\u7684\u8bdd\u88650","text":"<ul> <li>\u7b26\u53f7\u4f4d 0</li> <li>\u9636\u7801 10000110</li> <li>\u5c3e\u6570 00010111101(000000000000)\uff0c\u8865\u514512\u4e2a0</li> <li>\u4e8c\u8fdb\u5236139.8125\u7684\u8868\u793a\u65b9\u5f0f\u5c31\u662f<code>0b_0_10000110_00010111101_000000000000</code> <pre><code>func main() {\nvar f float32 = 139.8125\nbits := math.Float32bits(f)\nfmt.Printf(\"%b\\n\", bits)// \u9ad8\u5371\u88650\u8868\u793a\u7b26\u53f7\u4f4d\n// 1000011000010111101000000000000\n}\n</code></pre></li> </ul>"},{"location":"go/data_type/#_12","title":"\u5b57\u9762\u503c\u4e0e\u683c\u5f0f\u5316\u8f93\u51fa","text":""},{"location":"go/data_type/#_13","title":"\u5b57\u9762\u503c","text":"<ul> <li>\u5341\u8fdb\u5236\u8868\u793a\u6d6e\u70b9\u503c\u7684\u5f62\u5f0f <pre><code>3.1415\n.15  // \u6574\u6570\u90e8\u5206\u5982\u679c\u4e3a0\uff0c\u6574\u6570\u90e8\u5206\u53ef\u4ee5\u7701\u7565\u4e0d\u5199\n81.80\n82. // \u5c0f\u6570\u90e8\u5206\u5982\u679c\u4e3a0\uff0c\u5c0f\u6570\u70b9\u540e\u76840\u53ef\u4ee5\u7701\u7565\u4e0d\u5199\n</code></pre></li> <li>\u79d1\u5b66\u8ba1\u6570\u6cd5 <pre><code>v\n6674.28e-2 // 6674.28 * 10^(-2) = 66.742800\n.12345E+5  // 0.12345 * 10^5 = 12345.000000\n</code></pre></li> <li>16\u8fdb\u5236\u79d1\u5b66\u8ba1\u6570\u6cd5\uff0c\u6574\u6570\u548c\u5c0f\u6570\u90e8\u5206\u7528\u7684\u90fd\u662f16\u8fdb\u5236\uff0c\u4f46\u662f\u6307\u6570\u90e8\u5206\u4f9d\u7136\u662f10\u8fdb\u5236 <pre><code>0x2.p10  // 2.0 * 2^10 = 2048.000000\n0x1.Fp+0 // 1.9375 * 2^0 = 1.937500\n</code></pre></li> </ul>"},{"location":"go/data_type/#_14","title":"\u683c\u5f0f\u5316","text":"<ul> <li> <p>%f\u683c\u5f0f\u5316 <pre><code>var f float64 = 123.45678\nfmt.Printf(\"%f\\n\", f) // 123.456780\n</code></pre></p> </li> <li> <p>\u8f93\u51fa\u79d1\u5b66\u8ba1\u6570\u6cd5\u5f62\u5f0f <pre><code>var f float64 = 123.45678\nfmt.Printf(\"%e\\n\", f) // 1.234568e+02 \u5341\u8fdb\u5236\u79d1\u5b66\u8ba1\u6570\u6cd5\nfmt.Printf(\"%x\\n\", f) // 0x1.edd3be22e5de1p+06 16\u8fdb\u5236\u79d1\u5b66\u8ba1\u6570\u6cd5\n</code></pre></p> </li> </ul>"},{"location":"go/data_type/#_15","title":"\u590d\u6570","text":"<ul> <li>complex64\uff0c\u5b9e\u90e8\u4e0e\u865a\u90e8\u90fd\u662ffloat32</li> <li>complex128\uff0c\u5b9e\u90e8\u4e0e\u865a\u90e8\u90fd\u662ffloat64</li> <li>\u5982\u679c\u4e00\u4e2a\u590d\u6570\u6ca1\u6709\u663e\u793a\u8d4b\u4e88\u7c7b\u578b\uff0c\u5219\u9ed8\u8ba4\u7c7b\u578b\u4e3acomplex128</li> </ul>"},{"location":"go/data_type/#_16","title":"\u5b57\u9762\u503c\u4e0e\u521d\u59cb\u5316","text":"<ul> <li> <p>\u901a\u8fc7\u5b57\u9762\u503c\u76f4\u63a5\u521d\u59cb\u5316 <pre><code>var c = 5 + 6i\nvar d = 0o123 + .12345E+5i // 83+12345i\n</code></pre></p> </li> <li> <p><code>complex</code> \u51fd\u6570\uff0c\u65b9\u4fbf\u521b\u5efa\u4e00\u4e2a complex128 \u7c7b\u578b\u503c <pre><code>var c = complex(5, 6) // 5 + 6i\nvar d = complex(0o123, .12345E+5) // 83+12345i\n</code></pre></p> </li> <li> <p>\u901a\u8fc7\u9884\u5b9a\u4e49\u51fd\u6570 <code>real</code>\u548c<code>imag</code>\u6765\u83b7\u53d6\u4e00\u4e2a\u590d\u6570\u7684\u5b9e\u90e8\u548c\u865a\u90e8 <pre><code>var c = complex(5, 6) // 5 + 6i\nr := real(c) // 5.000000\ni := imag(c) // 6.000000\n</code></pre></p> </li> </ul>"},{"location":"go/data_type/#_17","title":"\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u6570\u503c\u7c7b\u578b","text":"<ul> <li>type MyInt int32</li> <li>MyInt\u5e95\u5c42\u4ecd\u7136\u662fint32\uff0c\u6570\u503c\u6027\u8d28\u4e5f\u4e0eint32\u76f8\u540c</li> <li>\u4f46\u662fGo\u7684\u7c7b\u578b\u5b89\u5168\u89c4\u5219\uff0c\u9650\u5b9aMyInt\u548cint32\u4ecd\u662f\u5b8c\u5168\u4e0d\u540c\u7684\u4e24\u79cd\u7c7b\u578b\uff0c\u65e0\u6cd5\u8fdb\u884c\u76f8\u4e92\u590d\u5236\u548c\u8ba1\u7b97</li> <li>\u8d4b\u503c\u548c\u8ba1\u7b97\u9700\u663e\u793a\u7c7b\u578b\u8f6c\u6362</li> </ul>"},{"location":"go/data_type/#_18","title":"\u901a\u8fc7\u7c7b\u578b\u522b\u540d\u6765\u5b9a\u4e49\u6570\u503c\u7c7b\u578b","text":"<ul> <li>type MyInt = int32</li> <li>\u901a\u8fc7\u7c7b\u578b\u522b\u540d\u8bed\u6cd5\u5b9a\u4e49\u7684\u65b0\u7c7b\u578b\u4e0e\u539f\u7c7b\u578b\u522b\u65e0\u4e8c\u81f4\uff0c\u53ef\u4ee5\u5b8c\u5168\u76f8\u4e92\u66ff\u4ee3</li> </ul>"},{"location":"go/desc/","title":"\u7b80\u8ff0","text":""},{"location":"go/desc/#go","title":"Go \u8bed\u8a00\u7684\u8bbe\u8ba1\u54f2\u5b66","text":"<ul> <li>\u7b80\u5355\u3001\u663e\u5f0f\u3001\u7ec4\u5408\u3001\u5e76\u53d1\u548c\u9762\u5411\u5de5\u7a0b</li> <li>\u7b80\u5355\u662f\u6307 Go \u8bed\u8a00\u7279\u6027\u59cb\u7ec8\u4fdd\u6301\u5728\u5c11\u4e14\u8db3\u591f\u7684\u6c34\u5e73\uff0c\u4e0d\u8d70\u8bed\u8a00\u7279\u6027\u878d\u5408\u7684\u9053\u8def\uff0c\u4f46\u53c8\u4e0d\u4e4f\u751f\u4ea7\u529b\u3002\u7b80\u5355\u662f Go \u751f\u4ea7\u529b\u7684\u6e90\u6cc9\uff0c\u4e5f\u662f Go \u5bf9\u5f00\u53d1\u8005\u7684\u6700\u5927\u5438\u5f15\u529b</li> <li>\u663e\u5f0f\u662f\u6307\u4efb\u4f55\u4ee3\u7801\u884c\u4e3a\u90fd\u9700\u5f00\u53d1\u8005\u660e\u786e\u77e5\u6653\uff0c\u4e0d\u5b58\u5728\u56e0\u201c\u6697\u7bb1\u64cd\u4f5c\u201d\u800c\u5bfc\u81f4\u53ef\u7ef4\u62a4\u6027\u964d\u4f4e\u548c\u4e0d\u5b89\u5168\u7684\u7ed3\u679c\uff1a\u7c7b\u578b\u663e\u793a\u8f6c\u6362</li> <li>\u7ec4\u5408\u662f\u6784\u5efa Go \u7a0b\u5e8f\u9aa8\u67b6\u7684\u4e3b\u8981\u65b9\u5f0f\uff0c\u5b83\u53ef\u4ee5\u5927\u5e45\u964d\u4f4e\u7a0b\u5e8f\u5143\u7d20\u95f4\u7684\u8026\u5408\uff0c\u63d0\u9ad8\u7a0b\u5e8f\u7684\u53ef\u6269\u5c55\u6027\u548c\u7075\u6d3b\u6027\uff0c\u63a5\u53e3\u4e4b\u95f4\u7ec4\u5408\u5b9e\u73b0\u9762\u5411\u5bf9\u8c61\u4e0e\u7ee7\u627f</li> <li>\u5e76\u53d1\u662f Go \u654f\u9510\u5730\u628a\u63e1\u4e86 CPU \u5411\u591a\u6838\u65b9\u5411\u53d1\u5c55\u8fd9\u4e00\u8d8b\u52bf\u7684\u7ed3\u679c\uff0c\u53ef\u4ee5\u8ba9\u5f00\u53d1\u4eba\u5458\u5728\u591a\u6838\u65f6\u4ee3\u66f4\u5bb9\u6613\u5199\u51fa\u5145\u5206\u5229\u7528\u7cfb\u7edf\u8d44\u6e90\u3001\u652f\u6301\u6027\u80fd\u968f CPU \u6838\u6570\u589e\u52a0\u800c\u81ea\u7136\u63d0\u5347\u7684\u5e94\u7528\u7a0b\u5e8f\uff1agoroutine\uff0cselect\u548cchannel\u7684\u7ed3\u5408</li> <li>\u9762\u5411\u5de5\u7a0b\u662f Go \u8bed\u8a00\u5728\u8bed\u8a00\u8bbe\u8ba1\u4e0a\u7684\u4e00\u4e2a\u91cd\u5927\u521b\u65b0\uff0c\u5b83\u5c06\u8bed\u8a00\u8981\u89e3\u51b3\u7684\u95ee\u9898\u57df\u6269\u5c55\u5230\u90a3\u4e9b\u539f\u672c\u5e76\u4e0d\u662f\u7531\u7f16\u7a0b\u8bed\u8a00\u53bb\u89e3\u51b3\u7684\u9886\u57df\uff0c\u4ece\u800c\u8986\u76d6\u4e86\u66f4\u591a\u5f00\u53d1\u8005\u5728\u5f00\u53d1\u8fc7\u7a0b\u9047\u5230\u7684\u201c\u75db\u70b9\u201d\uff0c\u4e3a\u5f00\u53d1\u8005\u63d0\u4f9b\u4e86\u66f4\u597d\u7684\u4f7f\u7528\u4f53\u9a8c\uff1a\u6ca1\u6709\u7528\u5230\u7684\u5305\u548c\u53d8\u91cf\u6784\u5efa\u65f6\u62a5\u9519\uff0c\u7981\u6b62\u5305\u5faa\u73af\u4f9d\u8d56</li> </ul>"},{"location":"go/fmt/","title":"fmt\u5907\u5fd8","text":""},{"location":"go/fmt/#fmt-v","title":"fmt \u5404\u79cdv","text":"<pre><code>%v \u6309\u9ed8\u8ba4\u683c\u5f0f\u8f93\u51fa\n%+v \u5728%v\u7684\u57fa\u7840\u4e0a\u989d\u5916\u8f93\u51fa\u5b57\u6bb5\u540d\n%#v \u5728%+v\u7684\u57fa\u7840\u4e0a\u989d\u5916\u8f93\u51fa\u7c7b\u578b\u540d\n</code></pre>"},{"location":"go/for_defer/","title":"\u7981\u6b62for\u5faa\u73af\u4e2d\u4f7f\u7528defer","text":""},{"location":"go/for_defer/#for-defer","title":"for \u5faa\u73af\u4e2d\u7981\u6b62\u4f7f\u7528defer","text":"<ul> <li>\u76f4\u63a5\u5728 for \u5faa\u73af\u4e2d\u4f7f\u7528 defer \u5f88\u53ef\u80fd\u4f7f\u5f97 defer \u4e0d\u80fd\u6267\u884c\uff0c\u5bfc\u81f4\u5185\u5b58\u6cc4\u9732\u6216\u8005\u5176\u4ed6\u8d44\u6e90\u95ee\u9898\uff0c\u6240\u4ee5\u5e94\u8be5\u5c06 defer \u653e\u5230\u5916\u5c42\u3002</li> <li>\u82e5\u786e\u5b9e\u9700\u8981\u4f7f\u7528 defer\uff0c\u53ef\u4ee5\u5c06\u903b\u8f91\u5c01\u88c5\u4e3a\u4e00\u4e2a\u72ec\u7acb\u51fd\u6570\u6216\u8005\u4f7f\u7528\u95ed\u5305</li> <li>\u9519\u8bef <pre><code>func readFiles(files []string) {\nfor i:=0;i&lt;len(files);i++{\nf,err:=os.Open(files[i])\nif err!=nil{\nprintln(err.Error())\ncontinue\n}\n// bug here\n// \u5728\u5faa\u73af\u4e2d\u7684 defer \u53ea\u6709\u5728\u5faa\u73af\u7ed3\u675f\u540e\u624d\u4f1a\u6267\u884c\n// \u82e5 files \u5f88\u591a\uff0c\u4f1a\u5bfc\u81f4\u5927\u91cf\u6587\u4ef6\u53e5\u67c4\u672a\u53ca\u65f6\u91ca\u653e\ndefer f.Close()  bf,err:=io.ReadAll(f)\nif err!=nil{\nprintln(err.Error())\n}else{\nprintln(string(bf))\n}\n}\n}\n</code></pre></li> <li>\u6b63\u786e <pre><code>func readFiles(files []string) {\nfor i:=0;i&lt;len(files);i++{\nreadFile(files[i])\n}\n}\nfunc readFile(name string){\nf,err:=os.Open(name)\nif err!=nil{\nprintln(err.Error())\nreturn\n}\ndefer f.Close()\nbf,err:=io.ReadAll(f)\nif err!=nil{\nprintln(err.Error())\n}else{\nprintln(string(bf))\n}\n}\n</code></pre></li> </ul>"},{"location":"go/function/","title":"\u51fd\u6570","text":""},{"location":"go/function/#_1","title":"\u51fd\u6570\u53c2\u6570","text":"<ul> <li>\u5b9e\u9645\u53c2\u6570\uff1a\u51fd\u6570\u5b9e\u9645\u8c03\u7528\u65f6\u4f20\u5165\u7684\u53c2\u6570</li> <li>\u5f62\u5f0f\u53c2\u6570\uff1a\u628a\u53c2\u6570\u5217\u8868\u4e2d\u7684\u53c2\u6570 </li> </ul>"},{"location":"go/function/#_2","title":"\u4f20\u53c2","text":"<ul> <li>\u51fd\u6570\u53c2\u6570\u4f20\u9012\u91c7\u7528\u662f\u503c\u4f20\u9012\u7684\u65b9\u5f0f</li> <li>\u6240\u8c13\u201c\u503c\u4f20\u9012\u201d\uff0c\u5c31\u662f\u5c06\u5b9e\u9645\u53c2\u6570\u5728\u5185\u5b58\u4e2d\u7684\u8868\u793a\u9010\u4f4d\u62f7\u8d1d\uff08Bitwise Copy\uff09\u5230\u5f62\u5f0f\u53c2\u6570\u4e2d</li> <li>\u5bf9\u4e8e\u50cf\u6574\u578b\u3001\u6570\u7ec4\u3001\u7ed3\u6784\u4f53\u8fd9\u7c7b\u7c7b\u578b\uff0c\u5b83\u4eec\u7684\u5185\u5b58\u8868\u793a\u5c31\u662f\u5b83\u4eec\u81ea\u8eab\u7684\u6570\u636e\u5185\u5bb9\uff0c\u56e0\u6b64\u5f53\u8fd9\u4e9b\u7c7b\u578b\u4f5c\u4e3a\u5b9e\u53c2\u7c7b\u578b\u65f6\uff0c\u503c\u4f20\u9012\u62f7\u8d1d\u7684\u5c31\u662f\u5b83\u4eec\u81ea\u8eab\uff0c\u4f20\u9012\u7684\u5f00\u9500\u4e5f\u4e0e\u5b83\u4eec\u81ea\u8eab\u7684\u5927\u5c0f\u6210\u6b63\u6bd4</li> <li>\u50cf string\u3001\u5207\u7247\u3001map \u8fd9\u4e9b\u7c7b\u578b\u5b83\u4eec\u7684\u5185\u5b58\u8868\u793a\u5bf9\u5e94\u7684\u662f\u5b83\u4eec\u6570\u636e\u5185\u5bb9\u7684\u201c\u63cf\u8ff0\u7b26\u201d\u3002\u5f53\u8fd9\u4e9b\u7c7b\u578b\u4f5c\u4e3a\u5b9e\u53c2\u7c7b\u578b\u65f6\uff0c\u503c\u4f20\u9012\u62f7\u8d1d\u7684\u4e5f\u662f\u5b83\u4eec\u6570\u636e\u5185\u5bb9\u7684\u201c\u63cf\u8ff0\u7b26\u201d\uff0c\u4e0d\u5305\u62ec\u6570\u636e\u5185\u5bb9\u672c\u8eab\uff0c\u6240\u4ee5\u8fd9\u4e9b\u7c7b\u578b\u4f20\u9012\u7684\u5f00\u9500\u662f\u56fa\u5b9a\u7684\uff0c\u4e0e\u6570\u636e\u5185\u5bb9\u5927\u5c0f\u65e0\u5173</li> </ul>"},{"location":"go/function/#_3","title":"\u51fd\u6570\u4f20\u53c2\u4f8b\u5916","text":"<ul> <li>\u5bf9\u4e8e\u7c7b\u578b\u4e3a\u63a5\u53e3\u7c7b\u578b\u7684\u5f62\u53c2\uff0cGo \u7f16\u8bd1\u5668\u4f1a\u628a\u4f20\u9012\u7684\u5b9e\u53c2\u8d4b\u503c\u7ed9\u5bf9\u5e94\u7684\u63a5\u53e3\u7c7b\u578b\u5f62\u53c2</li> <li>\u5bf9\u4e8e\u4e3a\u53d8\u957f\u53c2\u6570\u7684\u5f62\u53c2\uff0cGo \u7f16\u8bd1\u5668\u4f1a\u5c06\u96f6\u4e2a\u6216\u591a\u4e2a\u5b9e\u53c2\u6309\u4e00\u5b9a\u5f62\u5f0f\u8f6c\u6362\u4e3a\u5bf9\u5e94\u7684\u53d8\u957f\u5f62\u53c2</li> <li>\u53d8\u957f\u53c2\u6570\u5b9e\u9645\u4e0a\u662f\u901a\u8fc7\u5207\u7247\u6765\u5b9e\u73b0</li> </ul>"},{"location":"go/function/#go","title":"Go\u51fd\u6570\u7279\u5f81","text":"<ul> <li>\u591a\u4e2a\u53ef\u4ee5\u547d\u540d\u7684\u8fd4\u56de\u503c</li> <li>\u51fd\u6570\u53ef\u4ee5\u5b58\u50a8\u5728\u53d8\u91cf\u4e2d</li> <li>\u652f\u6301\u5728\u51fd\u6570\u5185\u521b\u5efa\u5e76\u901a\u8fc7\u8fd4\u56de\u503c\u8fd4\u56de</li> <li>\u53ef\u4ee5\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\u51fd\u6570</li> <li>\u62e5\u6709\u81ea\u5df1\u7684\u7c7b\u578b<code>type HandlerFunc func(ResponseWriter, *Request)</code></li> </ul>"},{"location":"go/function/#_4","title":"\u51fd\u6570\u5065\u58ee\u6027\u539f\u5219","text":"<ul> <li>\u4e0d\u8981\u76f8\u4fe1\u4efb\u4f55\u5916\u90e8\u8f93\u5165\u7684\u53c2\u6570</li> <li>\u4e0d\u8981\u5ffd\u7565\u4efb\u4f55\u4e00\u4e2a\u9519\u8bef</li> <li>\u4e0d\u8981\u5047\u5b9a\u5f02\u5e38\u4e0d\u4f1a\u53d1\u751f</li> </ul>"},{"location":"go/function/#defer","title":"defer \u83b7\u53d6\u8c03\u7528\u51fd\u6570\u65b9\u6cd5\u540d","text":"<ul> <li>runtime.Caller\uff0c\u53c2\u6570\u4e3a0\u65f6\uff0c\u8fd4\u56de\u8c03\u7528\u8005\u672c\u8eab\u7684\u4fe1\u606f\uff08Trace\u7684\u4fe1\u606f\uff09\uff0c\u4e3a1\u662f\u8fd4\u56de\u8c03\u7528\u8c03\u7528\u8005\u7684\u4fe1\u606f\uff08\u8c03\u7528Trace\u7684\u4fe1\u606f\uff09</li> <li>Caller \u51fd\u6570\u6709\u56db\u4e2a\u8fd4\u56de\u503c\uff1a<ul> <li>\u7b2c\u4e00\u4e2a\u8fd4\u56de\u503c\u4ee3\u8868\u7684\u662f\u7a0b\u5e8f\u8ba1\u6570\uff08pc\uff09</li> <li>\u7b2c\u4e8c\u4e2a\u548c\u7b2c\u4e09\u4e2a\u53c2\u6570\u4ee3\u8868\u5bf9\u5e94\u51fd\u6570\u6240\u5728\u7684\u6e90\u6587\u4ef6\u540d\u4ee5\u53ca\u6240\u5728\u884c\u6570</li> <li>\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u4ee3\u8868\u662f\u5426\u80fd\u6210\u529f\u83b7\u53d6\u8fd9\u4e9b\u4fe1\u606f</li> </ul> </li> <li>runtime.FuncForPC \u51fd\u6570\u548c\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC\uff09\u5f97\u5230\u88ab\u8ddf\u8e2a\u51fd\u6570\u7684\u51fd\u6570\u4fe1\u606f <pre><code>// trace1/trace.go\nfunc Trace() func() {\npc, _, _, ok := runtime.Caller(1)\nif !ok {\npanic(\"not found caller\")\n}\nfn := runtime.FuncForPC(pc)\nname := fn.Name()\nprintln(\"enter:\", name)\nreturn func() { println(\"exit:\", name) }\n}\nfunc main() {\ndefer Trace()()\nfoo()\n}\n</code></pre></li> </ul>"},{"location":"go/gc/","title":"GC","text":""},{"location":"go/gc/#_1","title":"\u5185\u5b58\u7ba1\u7406\u7684\u4e09\u4e2a\u53c2\u4e0e\u8005","text":"<ul> <li> <p>mutator \u6307\u7684\u662f\u6211\u4eec\u7684\u5e94\u7528\uff0c\u4e5f\u5c31\u662f application\uff0c\u6211\u4eec\u5c06\u5806\u4e0a\u7684\u5bf9\u8c61\u770b\u4f5c\u4e00\u4e2a\u56fe\uff0c\u8df3\u51fa\u5e94\u7528\u6765\u770b\u7684\u8bdd\uff0c\u5e94\u7528\u7684\u4ee3\u7801\u5c31\u662f\u5728\u4e0d\u505c\u5730\u4fee\u6539\u8fd9\u5f20\u5806\u5bf9\u8c61\u56fe\u91cc\u7684\u6307\u5411\u5173\u7cfb </p> </li> <li> <p>allocator \u5c31\u5f88\u597d\u7406\u89e3\u4e86\uff0c\u6307\u7684\u662f\u5185\u5b58\u5206\u914d\u5668\uff0c\u5e94\u7528\u9700\u8981\u5185\u5b58\u7684\u65f6\u5019\u90fd\u8981\u5411 allocator \u7533\u8bf7\u3002allocator \u8981\u7ef4\u62a4\u597d\u5185\u5b58\u5206\u914d\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5728\u591a\u7ebf\u7a0b\u573a\u666f\u4e0b\u5de5\u4f5c\u7684\u5185\u5b58\u5206\u914d\u5668\u8fd8\u9700\u8981\u8003\u8651\u9ad8\u5e76\u53d1\u573a\u666f\u4e0b\u9501\u7684\u5f71\u54cd\uff0c\u5e76\u9488\u5bf9\u6027\u5730\u8fdb\u884c\u8bbe\u8ba1\u4ee5\u964d\u4f4e\u9501\u51b2\u7a81</p> </li> <li>collector \u662f\u5783\u573e\u56de\u6536\u5668\u3002\u6b7b\u6389\u7684\u5806\u5bf9\u8c61\u3001\u4e0d\u7528\u7684\u5806\u5185\u5b58\u90fd\u8981\u7531 collector \u56de\u6536\uff0c\u6700\u7ec8\u5f52\u8fd8\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u3002\u5f53 GC \u626b\u63cf\u6d41\u7a0b\u5f00\u59cb\u6267\u884c\u65f6\uff0ccollector \u9700\u8981\u626b\u63cf\u5185\u5b58\u4e2d\u5b58\u6d3b\u7684\u5806\u5bf9\u8c61\uff0c\u626b\u63cf\u5b8c\u6210\u540e\uff0c\u672a\u88ab\u626b\u63cf\u5230\u7684\u5bf9\u8c61\u5c31\u662f\u65e0\u6cd5\u8bbf\u95ee\u7684\u5806\u4e0a\u5783\u573e\uff0c\u9700\u8981\u5c06\u5176\u5360\u7528\u5185\u5b58\u56de\u6536\u6389 </li> </ul>"},{"location":"go/gc/#tcmalloc","title":"tcmalloc","text":""},{"location":"go/gc/#go","title":"Go\u5185\u5b58\u5206\u914d\u8fc7\u7a0b\u5206\u7c7b","text":"<ul> <li>tiny \uff1asize &lt; 16 bytes &amp;&amp; has no pointer(noscan)</li> <li>small \uff1ahas pointer(scan) || (size &gt;= 16 bytes &amp;&amp; size &lt;= 32 KB)</li> <li>large \uff1asize &gt; 32 KB</li> </ul>"},{"location":"go/gc/#_2","title":"\u5185\u5b58\u5206\u914d\u6570\u636e\u7ed3\u6784","text":"<ul> <li>arenas \u662f Go \u5411\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u5185\u5b58\u65f6\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u6bcf\u4e2a arena \u4e3a 64MB \u5927\u5c0f\uff0c\u5728\u5185\u5b58\u4e2d\u53ef\u4ee5\u90e8\u5206\u8fde\u7eed\uff0c\u4f46\u6574\u4f53\u662f\u4e2a\u7a00\u758f\u7ed3\u6784</li> <li>\u5355\u4e2a arena \u4f1a\u88ab\u5207\u5206\u6210\u4ee5 8KB \u4e3a\u5355\u4f4d\u7684 page\uff0c\u7531 page allocator \u7ba1\u7406</li> <li>\u4e00\u4e2a\u6216\u591a\u4e2a page \u53ef\u4ee5\u7ec4\u6210\u4e00\u4e2a mspan</li> <li>\u6bcf\u4e2a mspan \u53ef\u4ee5\u6309\u7167 sizeclass \u518d\u5212\u5206\u6210\u591a\u4e2a element</li> <li>\u540c\u6837\u5927\u5c0f\u7684 mspan \u53c8\u5206\u4e3a scan \u548c noscan \u4e24\u79cd\uff0c\u5206\u522b\u5bf9\u5e94\u5185\u90e8\u6709\u6307\u9488\u7684 object \u548c\u5185\u90e8\u6ca1\u6709\u6307\u9488\u7684 object </li> </ul>"},{"location":"go/gc/#mspan","title":"mspan","text":"<ul> <li>\u6bcf\u4e00\u4e2a mspan \u90fd\u6709\u4e00\u4e2a allocBits \u7ed3\u6784</li> <li>\u4ece mspan \u91cc\u5206\u914d element \u65f6\uff0c\u53ea\u8981\u5c06 mspan \u4e2d\u5bf9\u5e94\u8be5 element \u4f4d\u7f6e\u7684 bit \u4f4d\u7f6e\u4e00\u5c31\u53ef\u4ee5\uff0c\u5176\u5b9e\u5c31\u662f\u5c06 mspan \u5bf9\u5e94 allocBits \u4e2d\u7684\u5bf9\u5e94 bit \u4f4d\u7f6e\u4e00</li> <li>\u6bcf\u4e00\u4e2a mspan \u90fd\u4f1a\u5bf9\u5e94\u4e00\u4e2a allocBits \u7ed3\u6784 </li> </ul>"},{"location":"go/gc/#gc","title":"GC \u6d41\u7a0b","text":""},{"location":"go/gc/#_3","title":"\u4e09\u8272\u6807\u8bb0","text":"<ul> <li>\u9ed1\u8868\u793a\u5df2\u7ecf\u626b\u63cf\u5b8c\u6bd5\uff0c\u5b50\u8282\u70b9\u626b\u63cf\u5b8c\u6bd5\uff08gcmarkbits = 1\uff0c\u4e14\u5728\u961f\u5217\u5916\uff09</li> <li>\u7070\u8868\u793a\u5df2\u7ecf\u626b\u63cf\u5b8c\u6bd5\uff0c\u5b50\u8282\u70b9\u672a\u626b\u63cf\u5b8c\u6bd5\uff08gcmarkbits = 1, \u5728\u961f\u5217\u5185\uff09</li> <li>\u767d\u8868\u793a\u672a\u626b\u63cf\uff0ccollector \u4e0d\u77e5\u9053\u4efb\u4f55\u76f8\u5173\u4fe1\u606f\u3002</li> </ul>"},{"location":"go/gc/#_4","title":"\u89e3\u51b3\u9519\u6807\u6f0f\u6807\uff0c\u5f15\u5165\u4e09\u8272\u4e0d\u53d8\u6027","text":"<ul> <li>\u5f3a\u4e09\u8272\u4e0d\u53d8\u6027 strong tricolor invariant\uff1a\u9ed1\u8272\u5bf9\u8c61\u4e0d\u80fd\u76f4\u63a5\u5f15\u7528\u767d\u8272\u5bf9\u8c61 </li> <li>\u5f31\u4e09\u8272\u4e0d\u53d8\u6027 weak tricolor invariant\uff1a\u9ed1\u8272\u5bf9\u8c61\u53ef\u4ee5\u5f15\u7528\u767d\u8272\u5bf9\u8c61\uff0c\u4f46\u767d\u8272\u5bf9\u8c61\u5fc5\u987b\u6709\u80fd\u4ece\u7070\u8272\u5bf9\u8c61\u53ef\u8fbe\u7684\u8def\u5f84 </li> </ul>"},{"location":"go/gc/#go_1","title":"Go\u5b9e\u73b0\u4e09\u8272\u4e0d\u53d8\u6027\uff0c\u5f15\u5165\u5199\u5c4f\u969c","text":"<ul> <li>snippet of code insert before pointer modify</li> <li>\u5728\u5e94\u7528\u8fdb\u5165 GC \u6807\u8bb0\u9636\u6bb5\u524d\u7684 stw \u9636\u6bb5\uff0c\u4f1a\u5c06\u5168\u5c40\u53d8\u91cf runtime.writeBarrier.enabled \u4fee\u6539\u4e3a true</li> <li>\u7136\u540e\u6240\u6709\u7684\u5806\u4e0a\u6307\u9488\u4fee\u6539\u64cd\u4f5c\u5728\u4fee\u6539\u4e4b\u524d\u4fbf\u4f1a\u989d\u5916\u8c03\u7528 runtime.gcWriteBarrier</li> <li>\u6808\u4e0a\u7684\u5bf9\u8c61\u5e02\u4e0d\u4f1a\u5f00\u542f\u5199\u5c4f\u969c\u7684</li> <li>\u6df7\u5408\u5199\u5c4f\u969c\uff0c\u6307\u9488\u65ad\u5f00\u7684\u8001\u5bf9\u8c61\u548c\u65b0\u5bf9\u8c61\u90fd\u6807\u7070\u7684\u5b9e\u73b0 </li> </ul>"},{"location":"go/gc/#_5","title":"\u5e38\u89c1\u7684\u5199\u5c4f\u969c","text":"<ul> <li>Dijistra Insertion Barrier\uff0c\u6307\u9488\u4fee\u6539\u65f6\uff0c\u6307\u5411\u7684\u65b0\u5bf9\u8c61\u8981\u6807\u7070</li> <li>Yuasa Deletion Barrier\uff0c\u6307\u9488\u4fee\u6539\u65f6\uff0c\u4fee\u6539\u524d\u6307\u5411\u7684\u5bf9\u8c61\u8981\u6807\u7070</li> </ul>"},{"location":"go/gc/#goroutine","title":"\u56de\u6536\u7684\u4e24\u4e2agoroutine","text":"<ul> <li>\u4e00\u4e2a\u53eb sweep.g\uff0c\u4e3b\u8981\u8d1f\u8d23\u6e05\u626b\u6b7b\u5bf9\u8c61\uff0c\u5408\u5e76\u76f8\u5173\u7684\u7a7a\u95f2\u9875</li> <li>\u4e00\u4e2a\u53eb scvg.g\uff0c\u4e3b\u8981\u8d1f\u8d23\u5411\u64cd\u4f5c\u7cfb\u7edf\u5f52\u8fd8\u5185\u5b58</li> </ul>"},{"location":"go/gc/#sweepg","title":"sweep.g","text":"<ul> <li>GC \u7684\u6807\u8bb0\u6d41\u7a0b\u7ed3\u675f\u4e4b\u540e\uff0csweep goroutine \u5c31\u4f1a\u88ab\u5524\u9192\uff0c\u8fdb\u884c\u6e05\u626b\u5de5\u4f5c</li> <li>\u5faa\u73af\u6267\u884c sweepone -&gt; sweep\u3002\u9488\u5bf9\u6bcf\u4e2a mspan\uff0csweep.g \u7684\u5de5\u4f5c\u662f\u5c06\u6807\u8bb0\u671f\u95f4\u751f\u6210\u7684 bitmap \u66ff\u6362\u6389\u5206\u914d\u65f6\u4f7f\u7528\u7684 bitmap </li> <li> <p>\u6839\u636e mspan \u4e2d\u7684\u69fd\u4f4d\u60c5\u51b5\u51b3\u5b9a\u8be5 mspan \u7684\u53bb\u5411</p> <ul> <li>\u5982\u679c mspan \u4e2d\u5b58\u6d3b\u5bf9\u8c61\u6570 = 0\uff0c\u4e5f\u5c31\u662f\u6240\u6709 element \u90fd\u53d8\u6210\u4e86\u5185\u5b58\u5783\u573e\uff0c\u6267\u884c freeSpan -&gt; \u5f52\u8fd8\u7ec4\u6210\u8be5 mspan \u6240\u4f7f\u7528\u7684\u9875\uff0c\u5e76\u66f4\u65b0\u5168\u5c40\u7684\u9875\u5206\u914d\u5668\u6458\u8981\u4fe1\u606f</li> <li>\u5982\u679c mspan \u4e2d\u6ca1\u6709\u7a7a\u69fd\uff0c\u8bf4\u660e\u6240\u6709\u5bf9\u8c61\u90fd\u662f\u5b58\u6d3b\u7684\uff0c\u5c06\u5176\u653e\u5165 fullSwept \u961f\u5217\u4e2d</li> <li>\u5982\u679c mspan \u4e2d\u6709\u7a7a\u69fd\uff0c\u8bf4\u660e\u8fd9\u4e2a mspan \u8fd8\u53ef\u4ee5\u62ff\u6765\u505a\u5185\u5b58\u5206\u914d\uff0c\u5c06\u5176\u653e\u5165 partialSweep \u961f\u5217\u4e2d</li> </ul> </li> </ul>"},{"location":"go/gc/#scvgg","title":"scvg.g \u5f85\u8865\u5145","text":"<ul> <li>bgscavenge</li> <li>pageAlloc.scavenge</li> <li>pageAlloc.scavengeOne</li> <li>pageAlloc.scavengeRangeLocked</li> <li>sysUnused</li> <li>madvise </li> </ul>"},{"location":"go/gmp/","title":"GMP","text":""},{"location":"go/gmp/#go-goroutine","title":"Go goroutine\u8c03\u5ea6","text":"<ul> <li>\u76ee\u7684\uff1a\u5c06 Goroutine \u6309\u7167\u4e00\u5b9a\u7b97\u6cd5\u653e\u5230\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u7ebf\u7a0b\u4e2d\u53bb\u6267\u884c</li> <li>\u8c03\u5ea6\u6a21\u578b\u4e0e\u7b97\u6cd5\u51e0\u7ecf\u6f14\u5316\uff0c\u4ece\u6700\u521d\u7684 G-M \u6a21\u578b\u3001\u5230 G-P-M \u6a21\u578b\uff0c\u4ece\u4e0d\u652f\u6301\u62a2\u5360\uff0c\u5230\u652f\u6301\u534f\u4f5c\u5f0f\u62a2\u5360\uff0c\u518d\u5230\u652f\u6301\u57fa\u4e8e\u4fe1\u53f7\u7684\u5f02\u6b65\u62a2\u5360</li> </ul>"},{"location":"go/gmp/#gm","title":"GM\u6a21\u578b","text":"<ul> <li>\u6bcf\u4e2a Goroutine \u5bf9\u5e94\u4e8e\u8fd0\u884c\u65f6\u4e2d\u7684\u4e00\u4e2a\u62bd\u8c61\u7ed3\u6784\uff1aG(Goroutine) </li> <li>\u88ab\u89c6\u4f5c\u201c\u7269\u7406 CPU\u201d\u7684\u64cd\u4f5c\u7cfb\u7edf\u7ebf\u7a0b\uff0c\u5219\u88ab\u62bd\u8c61\u4e3a\u53e6\u5916\u4e00\u4e2a\u7ed3\u6784\uff1aM(machine)</li> </ul>"},{"location":"go/gmp/#gm_1","title":"GM\u4e0d\u8db3","text":"<ul> <li>\u5355\u4e00\u5168\u5c40\u4e92\u65a5\u9501(Sched.Lock) \u548c\u96c6\u4e2d\u72b6\u6001\u5b58\u50a8\u7684\u5b58\u5728\uff0c\u5bfc\u81f4\u6240\u6709 Goroutine \u76f8\u5173\u64cd\u4f5c\uff0c\u6bd4\u5982\u521b\u5efa\u3001\u91cd\u65b0\u8c03\u5ea6\u7b49\uff0c\u90fd\u8981\u4e0a\u9501</li> <li>Goroutine \u4f20\u9012\u95ee\u9898\uff1aM \u7ecf\u5e38\u5728 M \u4e4b\u95f4\u4f20\u9012\u201c\u53ef\u8fd0\u884c\u201d\u7684 Goroutine\uff0c\u8fd9\u5bfc\u81f4\u8c03\u5ea6\u5ef6\u8fdf\u589e\u5927\uff0c\u4e5f\u589e\u52a0\u4e86\u989d\u5916\u7684\u6027\u80fd\u635f\u8017</li> <li>\u6bcf\u4e2a M \u90fd\u505a\u5185\u5b58\u7f13\u5b58\uff0c\u5bfc\u81f4\u5185\u5b58\u5360\u7528\u8fc7\u9ad8\uff0c\u6570\u636e\u5c40\u90e8\u6027\u8f83\u5dee</li> <li>\u7531\u4e8e\u7cfb\u7edf\u8c03\u7528\uff08syscall\uff09\u800c\u5f62\u6210\u7684\u9891\u7e41\u7684\u5de5\u4f5c\u7ebf\u7a0b\u963b\u585e\u548c\u89e3\u9664\u963b\u585e\uff0c\u5bfc\u81f4\u989d\u5916\u7684\u6027\u80fd\u635f\u8017 <p>\u96c6\u4e2d\u72b6\u6001(centralized state)\uff0c\u5c31\u662f\u4e00\u628a\u5168\u5c40\u9501\u8981\u4fdd\u62a4\u7684\u6570\u636e\u592a\u591a\u3002\u8fd9\u6837\u65e0\u8bba\u8bbf\u95ee\u54ea\u4e2a\u6570\u636e\uff0c\u90fd\u8981\u9501\u8fd9\u628a\u5168\u5c40\u9501\u3002\u6570\u636e\u5c40\u90e8\u6027\u5dee\u662f\u56e0\u4e3a\u6bcf\u4e2am\u90fd\u4f1a\u7f13\u5b58\u5b83\u6267\u884c\u7684\u4ee3\u7801\u6216\u6570\u636e\uff0c\u4f46\u662f\u5982\u679c\u5728m\u4e4b\u95f4\u9891\u7e41\u4f20\u9012goroutine\uff0c\u90a3\u4e48\u8fd9\u79cd\u5c40\u90e8\u7f13\u5b58\u7684\u610f\u4e49\u5c31\u6ca1\u6709\u4e86\u3002\u65e0\u6cd5\u5b9e\u73b0\u5c40\u90e8\u7f13\u5b58\u5e26\u6765\u7684\u6027\u80fd\u63d0\u5347\u3002</p> </li> </ul>"},{"location":"go/gmp/#gmp","title":"GMP\u6a21\u578b","text":"<ul> <li> <p>\u5728 Go 1.1 \u7248\u672c\u4e2d\u5b9e\u73b0\u4e86 G-P-M \u8c03\u5ea6\u6a21\u578b\u548cwork stealing \u7b97\u6cd5\uff0c\u8fd9\u4e2a\u6a21\u578b\u4e00\u76f4\u6cbf\u7528\u81f3\u4eca </p> <ul> <li>P \u662f\u4e00\u4e2a\u201c\u903b\u8f91 Proccessor\u201d\uff0c\u6bcf\u4e2a G\uff08Goroutine\uff09\u8981\u60f3\u771f\u6b63\u8fd0\u884c\u8d77\u6765\uff0c\u9996\u5148\u9700\u8981\u88ab\u5206\u914d\u4e00\u4e2a P\uff0c\u4e5f\u5c31\u662f\u8fdb\u5165\u5230 P \u7684\u672c\u5730\u8fd0\u884c\u961f\u5217\uff08local runq\uff09\u4e2d</li> <li>\u5bf9\u4e8e G \u6765\u8bf4\uff0cP \u5c31\u662f\u8fd0\u884c\u5b83\u7684\u201cCPU\u201d\uff0c\u53ef\u4ee5\u8bf4\uff1a\u5728 G \u7684\u773c\u91cc\u53ea\u6709 P</li> <li>\u4ece Go \u8c03\u5ea6\u5668\u7684\u89c6\u89d2\u6765\u770b\uff0c\u771f\u6b63\u7684\u201cCPU\u201d\u662f M\uff0c\u53ea\u6709\u5c06 P \u548c M \u7ed1\u5b9a\uff0c\u624d\u80fd\u8ba9 P \u7684 runq \u4e2d\u7684 G \u771f\u6b63\u8fd0\u884c\u8d77\u6765</li> </ul> </li> <li> <p>Go 1.1 \u6a21\u578b\u4e0d\u652f\u6301\u62a2\u5360\u5f0f\u8c03\u5ea6</p> </li> <li>GO 1.2 \u52a0\u5165\u62a2\u5360\u5f0f\u8c03\u5ea6\uff0c\u539f\u7406\u5c31\u662f\uff0cGo \u7f16\u8bd1\u5668\u5728\u6bcf\u4e2a\u51fd\u6570\u6216\u65b9\u6cd5\u7684\u5165\u53e3\u5904\u52a0\u4e0a\u4e86\u4e00\u6bb5\u989d\u5916\u7684\u4ee3\u7801 (runtime.morestack_noctxt)\uff0c\u8ba9\u8fd0\u884c\u65f6\u6709\u673a\u4f1a\u5728\u8fd9\u6bb5\u4ee3\u7801\u4e2d\u68c0\u67e5\u662f\u5426\u9700\u8981\u6267\u884c\u62a2\u5360\u8c03\u5ea6\uff0c\u5f0a\u7aef\u5c31\u662f\u53ea\u6709\u5728\u51fd\u6570\u6216\u65b9\u6cd5\u4e0d\u80fd\u80fd\u52a0\u5165\u4ee3\u7801\uff0c\u7eaf\u7b97\u6cd5\u5faa\u73af\u4ee3\u7801\u65e0\u6cd5\u52a0\u5165\u8c03\u5ea6\u529f\u80fd\uff08\u6bd4\u5982\u6b7b\u5faa\u73af\uff09</li> <li>Go 1.14 \u7248\u672c\u4e2d\u589e\u52a0\u4e86\u5bf9\u975e\u534f\u4f5c\u7684\u62a2\u5360\u5f0f\u8c03\u5ea6\u7684\u652f\u6301\uff0c\u8fd9\u79cd\u62a2\u5360\u5f0f\u8c03\u5ea6\u662f\u57fa\u4e8e\u7cfb\u7edf\u4fe1\u53f7\u7684\uff0c\u4e5f\u5c31\u662f\u901a\u8fc7\u5411\u7ebf\u7a0b\u53d1\u9001\u4fe1\u53f7\u7684\u65b9\u5f0f\u6765\u62a2\u5360\u6b63\u5728\u8fd0\u884c\u7684 Goroutine <p>\u534f\u4f5c\u5f0f\uff1a\u5927\u5bb6\u90fd\u6309\u4e8b\u5148\u5b9a\u4e49\u597d\u7684\u89c4\u5219\u6765\uff0c\u6bd4\u5982\uff1a\u4e00\u4e2agoroutine\u6267\u884c\u5b8c\u540e\uff0c\u9000\u51fa\uff0c\u8ba9\u51fap\uff0c\u7136\u540e\u4e0b\u4e00\u4e2agoroutine\u88ab\u8c03\u5ea6\u5230p\u4e0a\u8fd0\u884c\u3002\u8fd9\u6837\u505a\u7684\u7f3a\u70b9\u5c31\u5728\u4e8e \u662f\u5426\u8ba9\u51fap\u7684\u51b3\u5b9a\u6743\u5728groutine\u81ea\u8eab\u3002\u4e00\u65e6\u67d0\u4e2ag\u4e0d\u4e3b\u52a8\u8ba9\u51fap\u6216\u6267\u884c\u65f6\u95f4\u8f83\u957f\uff0c\u90a3\u4e48\u540e\u9762\u7684goroutine\u53ea\u80fd\u7b49\u7740\uff0c\u6ca1\u6709\u65b9\u6cd5\u8ba9\u524d\u8005\u8ba9\u51fap\uff0c\u5bfc\u81f4\u5ef6\u8fdf\u751a\u81f3\u997f\u6b7b\u3002\u800c\u975e\u534f\u4f5c: \u5c31\u662f\u7531runtime\u6765\u51b3\u5b9a\u4e00\u4e2agoroutine\u8fd0\u884c\u591a\u957f\u65f6\u95f4\uff0c\u5982\u679c\u4f60\u4e0d\u4e3b\u52a8\u8ba9\u51fa\uff0c\u5bf9\u4e0d\u8d77\uff0c\u6211\u6709\u624b\u6bb5\u53ef\u4ee5\u62a2\u5360\u4f60\uff0c\u628a\u4f60\u8e22\u51fa\u53bb\uff0c\u8ba9\u540e\u9762\u7684goroutine\u8fdb\u6765\u8fd0\u884c</p> </li> </ul>"},{"location":"go/gmp/#g","title":"G","text":"<ul> <li>goroutine \u7f29\u5199\uff0c\u6bcf\u6b21go func()\u90fd\u4ee3\u8868\u4e00\u4e2aG\uff0c\u65e0\u9650\u5236\uff0c\u800c\u4e14 G \u5bf9\u8c61\u662f\u53ef\u4ee5\u91cd\u7528\u7684</li> <li>\u4f7f\u7528struct runtime.g\uff0c\u5305\u542b\u4e86\u5f53\u524dgoroutine\u7684\u72b6\u6001\uff0c\u5806\u6808\u548c\u4e0a\u4e0b\u6587</li> </ul>"},{"location":"go/gmp/#m","title":"M","text":"<ul> <li>\u5de5\u4f5c\u7ebf\u7a0b\uff08OS thread\uff09\u4e5f\u88ab\u79f0\u4e3aMachine\uff0c\u4f7f\u7528 struct  runtime.m\uff0c\u6240\u6709M\u662f\u6709\u7ebf\u7a0b\u6808\u7684\uff081-8M\uff09</li> <li>\u6267\u884c\u6d41\u7a0b\u662f\u4ece P \u7684\u672c\u5730\u8fd0\u884c\u961f\u5217\u4ee5\u53ca\u5168\u5c40\u961f\u5217\u4e2d\u83b7\u53d6 G\uff0c\u5207\u6362\u5230 G \u7684\u6267\u884c\u6808\u4e0a\u5e76\u6267\u884c G \u7684\u51fd\u6570\uff0c\u8c03\u7528 goexit \u505a\u6e05\u7406\u5de5\u4f5c\u5e76\u56de\u5230 M\uff0c\u5982\u6b64\u53cd\u590d</li> <li>\u5982\u679c\u4e0d\u5bf9\u8be5\u7ebf\u7a0b\u6808\u63d0\u4f9b\u5185\u5b58\u7684\u8bdd\uff0c\u7cfb\u7edf\u4f1a\u7ed9\u8be5\u7ebf\u7a0b\u6808\u63d0\u4f9b\u5185\u5b58(\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u7ebf\u7a0b\u6808\u5927\u5c0f\u4e0d\u540c)\u3002\u5f53\u6307\u5b9a\u4e86\u7ebf\u7a0b\u6808\uff0c\u5219 M.stack\u2192G.stack\uff0cM \u7684 PC \u5bc4\u5b58\u5668\u6307\u5411 G \u63d0\u4f9b\u7684\u51fd\u6570\uff0c\u7136\u540e\u53bb\u6267\u884c</li> </ul>"},{"location":"go/gmp/#p","title":"P","text":"<ul> <li>Processor\u662f\u4e00\u4e2a\u62bd\u8c61\u6982\u5ff5\uff0c\u5e76\u4e0d\u662f\u771f\u6b63\u7684\u7269\u7406CPU</li> <li>\u4ee3\u8868\u4e86M\u6240\u9700\u7684\u4e0a\u4e0b\u6587\u73af\u5883\uff0c\u4e5f\u662f\u5904\u7406\u7528\u6237\u7ea7\u4ee3\u7801\u903b\u8f91\u7684\u5904\u7406\u5668\u3002\u8d1f\u8d23\u8854\u63a5M\u548cG\u7684\u8c03\u5ea6\u4e0a\u4e0b\u6587\uff0c\u5c06\u7b49\u5f85\u6267\u884c\u7684G\u548cM\u8fdb\u884c\u8fde\u63a5\u3002\u5f53P\u6709\u4efb\u52a1\u662f\u9700\u8981\u521b\u5efa\u6216\u8005\u5524\u9192\u4e00\u4e2aM\u6765\u6267\u884c \u5b83\u961f\u5217\u91cc\u7684\u4efb\u52a1\uff0c\u6240\u4ee5P/M\u9700\u8981\u8fdb\u884c\u7ed1\u5b9a\uff0c\u6784\u6210\u4e00\u4e2a\u6267\u884c\u5355\u5143</li> <li>P\u51b3\u5b9a\u4e86\u5e76\u53d1\u4efb\u52a1\u7684\u6570\u91cf\uff0c\u901a\u8fc7runtime.GOMAXPROCS\u6765\u8bbe\u5b9a\uff0cGo1.5\u4e4b\u540e\u88ab\u9ed8\u8ba4\u8bbe\u7f6e\u4e3a\u53ef\u7528\u6838\u6570\uff0c\u4e4b\u524d\u9ed8\u8ba4\u8bbe\u7f6e\u4e3a1</li> </ul>"},{"location":"go/gmp/#gmp_1","title":"GMP\u4f18\u5316\u90e8\u5206","text":"<ul> <li>netpoller\uff0c\u5373\u4fbf G \u53d1\u8d77\u7f51\u7edc I/O \u64cd\u4f5c\uff0c\u4e5f\u4e0d\u4f1a\u5bfc\u81f4 M \u88ab\u963b\u585e\uff08\u4ec5\u963b\u585e G\uff09\uff0c\u4e5f\u5c31\u4e0d\u4f1a\u5bfc\u81f4\u5927\u91cf\u7ebf\u7a0b\uff08M\uff09\u88ab\u521b\u5efa\u51fa\u6765</li> <li>io poller\uff0c\u8fd9\u4e2a\u529f\u80fd\u53ef\u4ee5\u50cf netpoller \u90a3\u6837\uff0c\u5728 G \u64cd\u4f5c\u90a3\u4e9b\u652f\u6301\u76d1\u542c\uff08pollable\uff09\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u65f6\uff0c\u4ec5\u4f1a\u963b\u585e G\uff0c\u800c\u4e0d\u4f1a\u963b\u585e M\u3002\u4e0d\u652f\u6301\u5bf9\u5e38\u89c4\u6587\u4ef6\u7684\u76d1\u542c</li> </ul>"},{"location":"go/gmp/#sysmon-m","title":"\u534f\u4f5c\u62a2\u5360\u5f0f\u76d1\u63a7\u7ebf\u7a0b sysmon M","text":"<ul> <li>M \u7684\u7279\u6b8a\u4e4b\u5904\u5728\u4e8e\u5b83\u4e0d\u9700\u8981\u7ed1\u5b9a P \u5c31\u53ef\u4ee5\u8fd0\u884c\uff08\u4ee5 g0 \u8fd9\u4e2a G \u7684\u5f62\u5f0f\uff09</li> <li>sysmon \u6bcf 20us~10ms \u542f\u52a8\u4e00\u6b21</li> <li>\u91ca\u653e\u95f2\u7f6e\u8d85\u8fc7 5 \u5206\u949f\u7684 span \u5185\u5b58</li> <li>\u5982\u679c\u8d85\u8fc7 2 \u5206\u949f\u6ca1\u6709\u5783\u573e\u56de\u6536\uff0c\u5f3a\u5236\u6267\u884c</li> <li>\u5c06\u957f\u65f6\u95f4\u672a\u5904\u7406\u7684 netpoll \u7ed3\u679c\u6dfb\u52a0\u5230\u4efb\u52a1\u961f\u5217</li> <li>\u5411\u957f\u65f6\u95f4\u8fd0\u884c\u7684 G \u4efb\u52a1\u53d1\u51fa\u62a2\u5360\u8c03\u5ea6</li> <li>\u6536\u56de\u56e0 syscall \u957f\u65f6\u95f4\u963b\u585e\u7684 P</li> </ul>"},{"location":"go/gmp/#sysmon-m-goroutine","title":"sysmon M \u62a2\u5360\u8c03\u5ea6goroutine","text":"<ul> <li>\u5982\u679c\u4e00\u4e2a G \u4efb\u52a1\u8fd0\u884c 10ms\uff0csysmon \u5c31\u4f1a\u8ba4\u4e3a\u5b83\u7684\u8fd0\u884c\u65f6\u95f4\u592a\u4e45\u800c\u53d1\u51fa\u62a2\u5360\u5f0f\u8c03\u5ea6\u7684\u8bf7\u6c42</li> <li>\u4e00\u65e6 G \u7684\u62a2\u5360\u6807\u5fd7\u4f4d\u88ab\u8bbe\u4e3a true\uff0c\u7b49\u5230\u8fd9\u4e2a G \u4e0b\u4e00\u6b21\u8c03\u7528\u51fd\u6570\u6216\u65b9\u6cd5\u65f6\uff0c\u8fd0\u884c\u65f6\u5c31\u53ef\u4ee5\u5c06 G \u62a2\u5360\u5e76\u79fb\u51fa\u8fd0\u884c\u72b6\u6001\uff0c\u653e\u5165\u961f\u5217\u4e2d\uff0c\u7b49\u5f85\u4e0b\u4e00\u6b21\u88ab\u8c03\u5ea6</li> </ul>"},{"location":"go/gmp/#channel-io","title":"channel \u963b\u585e\u6216\u7f51\u7edc I/O \u60c5\u51b5\u4e0b\u7684\u8c03\u5ea6","text":"<ul> <li>G \u88ab\u963b\u585e\u5728\u67d0\u4e2a channel \u64cd\u4f5c\u6216\u7f51\u7edc I/O \u64cd\u4f5c\u4e0a\u65f6\uff0cG \u4f1a\u88ab\u653e\u7f6e\u5230\u67d0\u4e2a\u7b49\u5f85\uff08wait\uff09\u961f\u5217\u4e2d\uff0c\u800c M \u4f1a\u5c1d\u8bd5\u8fd0\u884c P \u7684\u4e0b\u4e00\u4e2a\u53ef\u8fd0\u884c\u7684 G</li> <li>\u5982\u679c\u8fd9\u4e2a\u65f6\u5019 P \u6ca1\u6709\u53ef\u8fd0\u884c\u7684 G \u4f9b M \u8fd0\u884c\uff0c\u90a3\u4e48 M \u5c06\u89e3\u7ed1 P\uff0c\u5e76\u8fdb\u5165\u6302\u8d77\u72b6\u6001</li> <li>\u5f53 I/O \u64cd\u4f5c\u5b8c\u6210\u6216 channel \u64cd\u4f5c\u5b8c\u6210\uff0c\u5728\u7b49\u5f85\u961f\u5217\u4e2d\u7684 G \u4f1a\u88ab\u5524\u9192\uff0c\u6807\u8bb0\u4e3a\u53ef\u8fd0\u884c\uff08runnable\uff09\uff0c\u5e76\u88ab\u653e\u5165\u5230\u67d0 P \u7684\u961f\u5217\u4e2d\uff0c\u7ed1\u5b9a\u4e00\u4e2a M \u540e\u7ee7\u7eed\u6267\u884c</li> </ul>"},{"location":"go/gmp/#_1","title":"\u7cfb\u7edf\u8c03\u7528\u963b\u585e\u60c5\u51b5\u4e0b\u7684\u8c03\u5ea6","text":"<ul> <li>G \u88ab\u963b\u585e\u5728\u67d0\u4e2a\u7cfb\u7edf\u8c03\u7528\uff08system call\uff09\u4e0a\uff0c\u4e0d\u5149 G \u4f1a\u963b\u585e\uff0c\u6267\u884c\u8fd9\u4e2a G \u7684 M \u4e5f\u4f1a\u89e3\u7ed1 P\uff0c\u4e0e G \u4e00\u8d77\u8fdb\u5165\u6302\u8d77\u72b6\u6001</li> <li>\u5982\u679c\u6b64\u65f6\u6709\u7a7a\u95f2\u7684 M\uff0c\u90a3\u4e48 P \u5c31\u4f1a\u548c\u5b83\u7ed1\u5b9a\uff0c\u5e76\u7ee7\u7eed\u6267\u884c\u5176\u4ed6 G</li> <li>\u5982\u679c\u6ca1\u6709\u7a7a\u95f2\u7684 M\uff0c\u4f46\u4ecd\u7136\u6709\u5176\u4ed6 G \u8981\u53bb\u6267\u884c\uff0cGo \u8fd0\u884c\u65f6\u5c31\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0 M\uff08\u7ebf\u7a0b\uff09</li> <li>\u5f53\u8fdb\u884c\u4e00\u4e9b\u6162\u7cfb\u7edf\u8c03\u7528\u7684\u65f6\u5019\uff0c\u6bd4\u5982\u5e38\u89c4\u6587\u4ef6io\uff0c\u6267\u884c\u7cfb\u7edf\u8c03\u7528\u7684m\u5c31\u8981\u548cg\u4e00\u8d77\u6302\u8d77\uff0c\u8fd9\u662fos\u7684\u8981\u6c42\uff0c\u4e0d\u662fgo runtime\u7684\u8981\u6c42\u3002\u6bd5\u7adf\u771f\u6b63\u6267\u884c\u4ee3\u7801\u7684\u8fd8\u662fm</li> </ul>"},{"location":"go/gmp_detail/","title":"GMP\u673a\u5236","text":"<p>Go\uff1ag0\uff0c\u7279\u6b8a\u7684 Goroutine</p>"},{"location":"go/gmp_detail/#p","title":"\u521b\u5efaP","text":"<ul> <li>P \u7684\u521d\u59cb\u5316\uff1a\u9996\u5148\u4f1a\u521b\u5efa\u903b\u8f91 CPU \u6838\u6570\u4e2a P \uff0c\u5b58\u50a8\u5728 sched \u7684 \u7a7a\u95f2\u94fe\u8868(pidle)\u3002 </li> </ul>"},{"location":"go/gmp_detail/#os-thread","title":"\u521b\u5efaos thread","text":"<ul> <li>\u51c6\u5907\u8fd0\u884c\u7684\u65b0 goroutine \u5c06\u5524\u9192 P \u4ee5\u66f4\u597d\u5730\u5206\u53d1\u5de5\u4f5c\u3002\u8fd9\u4e2a P \u5c06\u521b\u5efa\u4e00\u4e2a\u4e0e\u4e4b\u5173\u8054\u7684 M \u7ed1\u5b9a\u5230\u4e00\u4e2aOS thread</li> <li>go func() \u4e2d \u89e6\u53d1 Wakeup \u5524\u9192\u673a\u5236\uff0c\u6709\u7a7a\u95f2\u7684 Processor \u800c\u6ca1\u6709\u5728 spinning \u72b6\u6001\u7684 Machine \u65f6\u5019, \u9700\u8981\u53bb\u5524\u9192\u4e00\u4e2a\u7a7a\u95f2(\u7761\u7720)\u7684 M \u6216\u8005\u65b0\u5efa\u4e00\u4e2a\u3002spinning\u5c31\u662f\u81ea\u9009\u72b6\u6001\uff0c\u6ca1\u6709\u4efb\u52a1\u5904\u7406\uff0c\u81ea\u65cb\u4e00\u6bb5\u65f6\u95f4\u540e\u8fdb\u5165\u7761\u7720\u72b6\u6001\u7b49\u5f85\u4e0b\u6b21\u88ab\u5524\u9192</li> </ul>"},{"location":"go/gmp_detail/#m0-main","title":"\u521b\u5efaM0 main","text":"<ul> <li>\u7a0b\u5e8f\u542f\u52a8\u540e\uff0cGo \u5df2\u7ecf\u5c06\u4e3b\u7ebf\u7a0b\u548c M \u7ed1\u5b9a(rt0_go)</li> <li>\u5f53 goroutine \u521b\u5efa\u5b8c\u540e\uff0c\u653e\u5728\u5f53\u524d P \u7684 local queue\uff0c\u5982\u679c\u672c\u5730\u961f\u5217\u6ee1\u4e86\uff0c\u5b83\u4f1a\u5c06\u672c\u5730\u961f\u5217\u7684\u524d\u534a\u90e8\u5206\u548c newg \u8fc1\u79fb\u5230\u5168\u5c40\u961f\u5217\u4e2d</li> </ul>"},{"location":"go/gmp_detail/#work-stealing-goroutine","title":"Work-stealing goroutine\u5077\u53d6","text":"<ul> <li>M \u7ed1\u5b9a\u7684 P \u6ca1\u6709\u53ef\u6267\u884c\u7684 goroutine \u65f6\uff0c\u5b83\u4f1a\u53bb\u6309\u7167\u4f18\u5148\u7ea7\u53bb\u62a2\u5360\u4efb\u52a1</li> <li>\u67091/61\u7684\u6982\u7387\u53bb\u9009\u62e9\u5168\u5c40goroutine\u961f\u5217\u83b7\u53d6\u4efb\u52a1\uff0c\u9632\u6b62\u5168\u5c40goroutine\u9965\u997f</li> <li>\u5982\u679c\u6ca1\u6709\u7684\u8bdd\uff0c\u53bb\u81ea\u5df1\u672c\u5730\u7684\u961f\u5217\u83b7\u53d6\u4efb\u52a1</li> <li>\u5982\u679c\u6ca1\u6709\u7684\u8bdd\uff0c\u53bb\u5077\u53d6\u5176\u4ed6P\u7684\u961f\u5217\u7684\u4efb\u52a1</li> <li>\u5982\u679c\u6ca1\u6709\u7684\u8bdd\uff0c\u68c0\u67e5\u5176\u4ed6\u963b\u585e\u7684goroutine\u6709\u6ca1\u6709\u5c31\u7eea\u7684</li> <li>\u5982\u679c\u6ca1\u6709\u8fdb\u5165\u81ea\u65cb\u72b6\u6001</li> <li>\u627e\u5230\u4efb\u4f55\u4e00\u4e2a\u4efb\u52a1\uff0c\u5207\u6362\u8c03\u7528\u6808\u6267\u884c\u4efb\u52a1\u3002\u518d\u5faa\u73af\u4e0d\u65ad\u7684\u83b7\u53d6\u4efb\u52a1\uff0c\u76f4\u5230\u8fdb\u5165\u4f11\u7720 <p>\u4e3a\u4e86\u4fdd\u8bc1\u516c\u5e73\u6027\uff0c\u4ece\u968f\u673a\u4f4d\u7f6e\u4e0a\u7684 P \u5f00\u59cb\uff0c\u800c\u4e14\u904d\u5386\u7684\u987a\u5e8f\u4e5f\u968f\u673a\u5316\u4e86(\u9009\u62e9\u4e00\u4e2a\u5c0f\u4e8e GOMAXPROCS\uff0c\u4e14\u548c\u5b83\u4e92\u4e3a\u8d28\u6570\u7684\u6b65\u957f)\uff0c\u4fdd\u8bc1\u904d\u5386\u7684\u987a\u5e8f\u4e5f\u968f\u673a\u5316\u4e86</p> </li> </ul>"},{"location":"go/gmp_detail/#spinning-thread","title":"spinning thread \u7ebf\u7a0b\u81ea\u65cb","text":"<ul> <li>\u7ebf\u7a0b\u81ea\u65cb\u662f\u76f8\u5bf9\u4e8e\u7ebf\u7a0b\u963b\u585e\u800c\u8a00\u7684\uff0c\u8868\u8c61\u5c31\u662f\u5faa\u73af\u6267\u884c\u4e00\u4e2a\u6307\u5b9a\u903b\u8f91(\u5c31\u662f\u4e0a\u9762\u63d0\u5230\u7684\u8c03\u5ea6\u903b\u8f91\uff0c\u76ee\u7684\u662f\u4e0d\u505c\u5730\u5bfb\u627e G)\u3002</li> <li>\u4f1a\u4ea7\u751f\u95ee\u9898\uff0c\u5982\u679c G \u8fdf\u8fdf\u4e0d\u6765\uff0cCPU \u4f1a\u767d\u767d\u6d6a\u8d39\u5728\u8fd9\u65e0\u610f\u4e49\u7684\u8ba1\u7b97\u4e0a\u3002\u4f46\u597d\u5904\u4e5f\u5f88\u660e\u663e\uff0c\u964d\u4f4e\u4e86 M \u7684\u4e0a\u4e0b\u6587\u5207\u6362\u6210\u672c\uff0c\u63d0\u9ad8\u4e86\u6027\u80fd</li> <li>\u5e26P\u7684M\u4e0d\u505c\u7684\u627eG</li> <li>\u4e0d\u5e26P\u7684M\u627eP\u6302\u8f7d</li> <li>G \u521b\u5efa\u53c8\u6ca1 spining M \u5524\u9192\u4e00\u4e2a M</li> </ul>"},{"location":"go/go_complicate/","title":"Go\u5e76\u53d1","text":""},{"location":"go/go_complicate/#_1","title":"\u5e76\u53d1&amp;&amp;\u5e76\u884c","text":"<ul> <li>\u5e76\u53d1\u4e0d\u662f\u5e76\u884c</li> <li>\u5e76\u53d1\u662f\u5e94\u7528\u7ed3\u6784\u8bbe\u8ba1\u76f8\u5173\u7684\u6982\u5ff5\uff0c\u800c\u5e76\u884c\u53ea\u662f\u7a0b\u5e8f\u6267\u884c\u671f\u7684\u6982\u5ff5</li> <li>\u5e76\u884c\u7684\u5fc5\u8981\u6761\u4ef6\u662f\u5177\u6709\u591a\u4e2a\u5904\u7406\u5668\u6216\u591a\u6838\u5904\u7406\u5668\uff0c\u5426\u5219\u65e0\u8bba\u662f\u5426\u662f\u5e76\u53d1\u7684\u8bbe\u8ba1\uff0c\u7a0b\u5e8f\u6267\u884c\u65f6\u90fd\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u4efb\u52a1\u53ef\u4ee5\u88ab\u8c03\u5ea6\u5230\u5904\u7406\u5668\u4e0a\u6267\u884c</li> </ul>"},{"location":"go/go_complicate/#go","title":"Go\u5e76\u53d1\u65b9\u6848","text":"<ul> <li>Go \u7684\u5e76\u53d1\u65b9\u6848\uff1agoroutine</li> <li>Go \u5e76\u6ca1\u6709\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u7ebf\u7a0b\u4f5c\u4e3a\u627f\u8f7d\u5206\u89e3\u540e\u7684\u4ee3\u7801\u7247\u6bb5\uff08\u6a21\u5757\uff09\u7684\u57fa\u672c\u6267\u884c\u5355\u5143</li> <li>\u5b9e\u73b0\u4e86goroutine\u8fd9\u4e00\u7531 Go \u8fd0\u884c\u65f6\uff08runtime\uff09\u8d1f\u8d23\u8c03\u5ea6\u7684\u3001\u8f7b\u91cf\u7684\u7528\u6237\u7ea7\u7ebf\u7a0b\uff0c\u4e3a\u5e76\u53d1\u7a0b\u5e8f\u8bbe\u8ba1\u63d0\u4f9b\u539f\u751f\u652f\u6301</li> <li>\u65e0\u8bba\u662f Go \u81ea\u8eab\u8fd0\u884c\u65f6\u4ee3\u7801\u8fd8\u662f\u7528\u6237\u5c42 Go \u4ee3\u7801\uff0c\u90fd\u65e0\u4e00\u4f8b\u5916\u5730\u8fd0\u884c\u5728 goroutine \u4e2d</li> </ul>"},{"location":"go/go_complicate/#goroutine","title":"goroutine\u4f18\u52bf","text":"<ul> <li>\u8d44\u6e90\u5360\u7528\u5c0f\uff0c\u6bcf\u4e2a goroutine \u7684\u521d\u59cb\u6808\u5927\u5c0f\u4ec5\u4e3a 2k</li> <li>\u7531 Go \u8fd0\u884c\u65f6\u800c\u4e0d\u662f\u64cd\u4f5c\u7cfb\u7edf\u8c03\u5ea6\uff0cgoroutine \u4e0a\u4e0b\u6587\u5207\u6362\u5728\u7528\u6237\u5c42\u5b8c\u6210\uff0c\u5f00\u9500\u66f4\u5c0f</li> <li>\u5728\u8bed\u8a00\u5c42\u9762\u800c\u4e0d\u662f\u901a\u8fc7\u6807\u51c6\u5e93\u63d0\u4f9b\u3002goroutine \u7531go\u5173\u952e\u5b57\u521b\u5efa\uff0c\u4e00\u9000\u51fa\u5c31\u4f1a\u88ab\u56de\u6536\u6216\u9500\u6bc1\uff0c\u5f00\u53d1\u4f53\u9a8c\u66f4\u4f73</li> <li>\u8bed\u8a00\u5185\u7f6e channel \u4f5c\u4e3a goroutine \u95f4\u901a\u4fe1\u539f\u8bed\uff0c\u4e3a\u5e76\u53d1\u8bbe\u8ba1\u63d0\u4f9b\u4e86\u5f3a\u5927\u652f\u6491</li> </ul>"},{"location":"go/go_complicate/#goroutine_1","title":"goroutine\u4f7f\u7528","text":""},{"location":"go/go_complicate/#goroutine_2","title":"\u521b\u5efagoroutine","text":"<ul> <li>Go \u8bed\u8a00\u901a\u8fc7go\u5173\u952e\u5b57+\u51fd\u6570/\u65b9\u6cd5\u7684\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a goroutine</li> <li>Go \u4e5f\u53ef\u4ee5\u57fa\u4e8e\u533f\u540d\u51fd\u6570 / \u95ed\u5305\u521b\u5efa goroutine</li> <li>\u521b\u5efa goroutine \u540e\uff0cgo \u5173\u952e\u5b57\u4e0d\u4f1a\u8fd4\u56de goroutine id \u4e4b\u7c7b\u7684\u552f\u4e00\u6807\u8bc6 goroutine \u7684 id</li> <li>\u4e00\u4e2a\u5e94\u7528\u5185\u90e8\u542f\u52a8\u7684\u6240\u6709 goroutine \u5171\u4eab\u8fdb\u7a0b\u7a7a\u95f4\u7684\u8d44\u6e90\uff0c\u5982\u679c\u591a\u4e2a goroutine \u8bbf\u95ee\u540c\u4e00\u5757\u5185\u5b58\u6570\u636e\uff0c\u5c06\u4f1a\u5b58\u5728\u7ade\u4e89\uff0c\u9700\u8981\u8fdb\u884c goroutine \u95f4\u7684\u540c\u6b65</li> <li>\u521b\u5efa\u540e\uff0c\u65b0 goroutine \u5c06\u62e5\u6709\u72ec\u7acb\u7684\u4ee3\u7801\u6267\u884c\u6d41\uff0c\u5e76\u4e0e\u521b\u5efa\u5b83\u7684 goroutine \u4e00\u8d77\u88ab Go \u8fd0\u884c\u65f6\u8c03\u5ea6</li> </ul>"},{"location":"go/go_complicate/#goroutine_3","title":"\u9000\u51fagoroutine","text":"<ul> <li>goroutine \u7684\u6267\u884c\u51fd\u6570\u7684\u8fd4\u56de\uff0c\u5c31\u610f\u5473\u7740 goroutine \u9000\u51fa\uff0cgoroutine \u6267\u884c\u7684\u51fd\u6570\u6216\u65b9\u6cd5\u5373\u4fbf\u6709\u8fd4\u56de\u503c\uff0cGo \u4e5f\u4f1a\u5ffd\u7565\u8fd9\u4e9b\u8fd4\u56de\u503c\uff0c\u5982\u679c\u9700\u8981\u8fd4\u56de\u503c\uff0c\u901a\u8fc7 goroutine \u95f4\u7684\u901a\u4fe1\u6765\u5b9e\u73b0</li> <li>main goroutine \u9000\u51fa\uff0c\u90a3\u4e48\u4e5f\u610f\u5473\u7740\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u9000\u51fa\uff0c\u5176\u4ed6\u7684goroutine\u4e5f\u5c31\u90fd\u9000\u51fa</li> </ul>"},{"location":"go/go_complicate/#goroutine_4","title":"goroutine\u95f4\u7684\u901a\u4fe1","text":"<p>\u64cd\u4f5c\u7cfb\u7edf\u7ebf\u7a0b\u95f4\u7684\u901a\u4fe1\u65b9\u5f0f\uff1a\u5171\u4eab\u5185\u5b58\u3001\u4fe1\u53f7\uff08signal\uff09\u3001\u7ba1\u9053\uff08pipe\uff09\u3001\u6d88\u606f\u961f\u5217\u3001\u5957\u63a5\u5b57\uff08socket\uff09\uff0c\u57fa\u4e8e\u5bf9\u5185\u5b58\u7684\u5171\u4eab\u7684</p> <ul> <li>channel \u7b26\u5408<code>CSP\uff08Communicationing Sequential Processes\uff0c\u901a\u4fe1\u987a\u5e8f\u8fdb\u7a0b\uff09</code>\u6a21\u578b\u7684\u901a\u4fe1\u65b9\u5f0f\uff0c\u901a\u8fc7\u4f7f\u7528 channel \u5c06goroutine\u7ec4\u5408\u5728\u4e00\u8d77</li> <li>Go \u4e5f\u652f\u6301\u4f20\u7edf\u7684\u3001\u57fa\u4e8e\u5171\u4eab\u5185\u5b58\u7684\u5e76\u53d1\u6a21\u578b\uff0c\u5e76\u63d0\u4f9b\u4e86\u57fa\u672c\u7684\u4f4e\u7ea7\u522b\u540c\u6b65\u539f\u8bed\uff08\u4e3b\u8981\u662f sync \u5305\u4e2d\u7684\u4e92\u65a5\u9501\u3001\u6761\u4ef6\u53d8\u91cf\u3001\u8bfb\u5199\u9501\u3001\u539f\u5b50\u64cd\u4f5c\u7b49\uff09</li> </ul>"},{"location":"go/go_mod/","title":"Go Modules\u6784\u5efa\u6a21\u5f0f","text":""},{"location":"go/go_mod/#_1","title":"\u8bed\u4e49\u5bfc\u5165\u7248\u672c","text":"<ul> <li>Semantic Import Versioning</li> <li>go.mod \u7684 require \u6bb5\u4e2d\u4f9d\u8d56\u7684\u7248\u672c\u53f7\uff0c\u90fd\u7b26\u5408 vX.Y.Z \u7684\u683c\u5f0f</li> <li>\u4e00\u4e2a\u7b26\u5408 Go Module \u8981\u6c42\u7684\u7248\u672c\u53f7\uff0c\u7531\u524d\u7f00 v \u548c\u4e00\u4e2a\u6ee1\u8db3\u8bed\u4e49\u7248\u672c\u89c4\u8303\u7684\u7248\u672c\u53f7\u7ec4\u6210</li> <li>\u501f\u52a9\u4e8e\u8bed\u4e49\u7248\u672c\u89c4\u8303\uff0cGo \u547d\u4ee4\u53ef\u4ee5\u786e\u5b9a\u540c\u4e00 module \u7684\u4e24\u4e2a\u7248\u672c\u53d1\u5e03\u7684\u5148\u540e\u6b21\u5e8f\uff0c\u800c\u4e14\u53ef\u4ee5\u786e\u5b9a\u5b83\u4eec\u662f\u5426\u517c\u5bb9</li> <li>Go Module \u89c4\u5b9a\uff1a\u5982\u679c\u540c\u4e00\u4e2a\u5305\u7684\u65b0\u65e7\u7248\u672c\u662f\u517c\u5bb9\u7684\uff0c\u90a3\u4e48\u5b83\u4eec\u7684\u5305\u5bfc\u5165\u8def\u5f84\u5e94\u8be5\u662f\u76f8\u540c\u7684</li> </ul>"},{"location":"go/go_mod/#_2","title":"\u8bed\u4e49\u7248\u672c\u53f7\u7ec4\u6210","text":"<ul> <li>\u4e3b\u7248\u672c</li> <li>\u6b21\u7248\u672c</li> <li>\u8865\u4e01\u7248\u672c </li> </ul>"},{"location":"go/go_mod/#_3","title":"\u6700\u5c0f\u7248\u672c\u9009\u62e9","text":"<ul> <li>Minimal Version Selection</li> <li>\u9879\u76ee\u4e4b\u95f4\u51fa\u73b0\u4f9d\u8d56\u540c\u4e00\u4e2a\u5305\u4f46\u662f\u4e0d\u540c\u7248\u672c\u7684\u60c5\u51b5</li> <li>go mod \u9009\u62e9\u4f9d\u8d56\u6240\u6709\u7248\u672c\u7684\u6700\u5c0f\u7684\u90a3\u4e2a\u7248\u672c</li> <li>go mod \u4e0d\u4f1a\u9009\u62e9\u6700\u65b0\u76841.7.0\u7248\u672c\uff0c\u800c\u662f\u9009\u62e91.3.0 \u7248\u672c </li> </ul>"},{"location":"go/go_mod/#go111module","title":"GO111MODULE\u914d\u7f6e\u503c","text":"<ul> <li>on \u5f00\u542f</li> <li>off \u5173\u95ed</li> <li>auto \u7f16\u8bd1\u5668\u5224\u65ad </li> </ul>"},{"location":"go/go_mod_operate/","title":"Go Mod6\u4e2a\u5e38\u89c4\u64cd\u4f5c","text":""},{"location":"go/go_mod_operate/#_1","title":"\u4e3a\u5f53\u524d\u9879\u76ee\u6dfb\u52a0\u4e00\u4e2a\u4f9d\u8d56","text":"<ul> <li>\u5728\u4ee3\u7801\u4e2dimport\u5305\u5730\u5740</li> <li>go get <code>\u65b0\u7684\u4f9d\u8d56\u7684\u5305\u5730\u5740</code></li> <li>go mod tidy \u81ea\u52a8\u5904\u7406\u5305\u7684\u4f9d\u8d56\u5bfc\u5165</li> </ul>"},{"location":"go/go_mod_operate/#_2","title":"\u5347\u7ea7/\u964d\u7ea7\u4f9d\u8d56\u7684\u7248\u672c","text":"<ul> <li>\u9879\u76eemodules\u76ee\u5f55\uff0c\u6267\u884cgo get \u6307\u5b9a\u7684\u7248\u672c</li> <li>go mod edit \u66f4\u65b0\u4f9d\u8d56\u7248\u672c\uff0c\u7136\u540e\u6267\u884cgo mod tidy</li> <li>\u53ef\u4ee5\u4fee\u6539go mod \u4f9d\u8d56\u7248\u672c\u53f7\u4e3a\u8981\u4f7f\u7528\u7684\u5206\u652f\uff0c\u7136\u540e\u6267\u884cgo mod tidy</li> </ul>"},{"location":"go/go_mod_operate/#1","title":"\u6dfb\u52a0\u4e00\u4e2a\u4e3b\u7248\u672c\u53f7\u5927\u4e8e 1 \u7684\u4f9d\u8d56","text":"<ul> <li>\u5728\u5bfc\u5305\u7684\u8def\u5f84\u4e0a\u52a0\u4e0a\u7248\u672c\u53f7</li> <li>github.com/go-redis/redis/v7</li> <li>\u7136\u540e\u6267\u884cgo get \u6216\u8005 go mod tidy</li> </ul>"},{"location":"go/go_mod_operate/#_3","title":"\u5347\u7ea7\u4f9d\u8d56\u7248\u672c\u5230\u4e00\u4e2a\u4e0d\u517c\u5bb9\u7248\u672c","text":"<ul> <li>\u901a\u8fc7\u7a7a\u5e94\u7528\u66f4\u65b0\u7248\u672c</li> <li><code>import _ \"github.com/go-redis/redis/v8\"</code></li> <li>\u7136\u540e\u6267\u884cgo get \u6216\u8005 go mod tidy</li> </ul>"},{"location":"go/go_mod_operate/#_4","title":"\u79fb\u9664\u4e00\u4e2a\u4e0d\u7528\u7684\u4f9d\u8d56","text":"<ul> <li>\u5220\u9664\u4ee3\u7801\u4e2d\u7684\u5f15\u7528</li> <li>\u6267\u884c go mod tidy\uff0c\u66f4\u65b0go.mod\u548cgo.sum</li> </ul>"},{"location":"go/go_mod_operate/#vendor","title":"\u7279\u6b8a\u60c5\u51b5\uff0c\u53ef\u4ee5\u4f7f\u7528vendor","text":"<ul> <li>vendor\u505a\u4e3ago mod\u7684\u8865\u5145</li> <li>\u4e0d\u65b9\u4fbf\u8bbf\u95ee\u5916\u7f51\u8fdb\u884c\u5305\u4e0b\u8f7d</li> <li>\u6bd4\u8f83\u5173\u6ce8\u6784\u5efa\u8fc7\u7a0b\u4e2d\u7684\u6027\u80fd</li> <li>\u901a\u8fc7 <code>go mod vendor</code>\u81ea\u52a8\u5e38\u89c1vendor\u76ee\u5f55</li> <li>\u57fa\u4e8evender\u6587\u4ef6\u5939\u8fdb\u884c\u6784\u5efa <code>go build -mod=vendor</code></li> <li>Go 1.14 \u53ca\u4ee5\u540e\u7248\u672c\u4e2d\uff0c\u5982\u679c Go \u9879\u76ee\u7684\u9876\u5c42\u76ee\u5f55\u4e0b\u5b58\u5728 vendor \u76ee\u5f55\uff0c\u90a3\u4e48 go build \u9ed8\u8ba4\u4e5f\u4f1a\u4f18\u5148\u57fa\u4e8e vendor \u6784\u5efa\uff0c\u9664\u975ego build \u4f20\u5165 -mod=mod \u7684\u53c2\u6570</li> </ul>"},{"location":"go/go_project/","title":"Go\u5f00\u6e90\u9879\u76ee","text":""},{"location":"go/goroutine_status/","title":"Goroutine \u72b6\u6001","text":"\u72b6\u6001 \u542b\u4e49 _Gidle \u521a\u521a\u88ab\u5206\u914d\uff0c\u8fd8\u6ca1\u6709\u8fdb\u884c\u521d\u59cb\u5316\u3002 _Grunnable \u5df2\u7ecf\u5728\u8fd0\u884c\u961f\u5217\u4e2d\uff0c\u8fd8\u6ca1\u6709\u6267\u884c\u7528\u6237\u4ee3\u7801\u3002 _Grunning \u4e0d\u5728\u8fd0\u884c\u961f\u5217\u91cc\u4e2d\uff0c\u5df2\u7ecf\u53ef\u4ee5\u6267\u884c\u7528\u6237\u4ee3\u7801\uff0c\u6b64\u65f6\u5df2\u7ecf\u5206\u914d\u4e86 M \u548c P\u3002 _Gsyscall \u6b63\u5728\u6267\u884c\u7cfb\u7edf\u8c03\u7528\uff0c\u6b64\u65f6\u5206\u914d\u4e86 M\u3002 _Gwaiting \u5728\u8fd0\u884c\u65f6\u88ab\u963b\u6b62\uff0c\u6ca1\u6709\u6267\u884c\u7528\u6237\u4ee3\u7801\uff0c\u4e5f\u4e0d\u5728\u8fd0\u884c\u961f\u5217\u4e2d\uff0c\u6b64\u65f6\u5b83\u6b63\u5728\u67d0\u5904\u963b\u585e\u7b49\u5f85\u4e2d\u3002 _Gmoribund_unused \u5c1a\u672a\u4f7f\u7528\uff0c\u4f46\u662f\u5728 gdb \u4e2d\u8fdb\u884c\u4e86\u786c\u7f16\u7801\u3002 _Gdead \u5c1a\u672a\u4f7f\u7528\uff0c\u8fd9\u4e2a\u72b6\u6001\u53ef\u80fd\u662f\u521a\u9000\u51fa\u6216\u662f\u521a\u88ab\u521d\u59cb\u5316\uff0c\u6b64\u65f6\u5b83\u5e76\u6ca1\u6709\u6267\u884c\u7528\u6237\u4ee3\u7801\uff0c\u6709\u53ef\u80fd\u6709\u4e5f\u6709\u53ef\u80fd\u6ca1\u6709\u5206\u914d\u5806\u6808\u3002 _Genqueue_unused \u5c1a\u672a\u4f7f\u7528\u3002 _Gcopystack \u6b63\u5728\u590d\u5236\u5806\u6808\uff0c\u5e76\u6ca1\u6709\u6267\u884c\u7528\u6237\u4ee3\u7801\uff0c\u4e5f\u4e0d\u5728\u8fd0\u884c\u961f\u5217\u4e2d\u3002"},{"location":"go/goroutine_thread/","title":"Goroutine && Thread","text":""},{"location":"go/goroutine_thread/#_1","title":"\u5185\u5b58\u5360\u7528","text":"<ul> <li>\u521b\u5efa\u4e00\u4e2a goroutine \u7684\u6808\u5185\u5b58\u6d88\u8017\u4e3a 2 KB(Linux AMD64 Go v1.4\u540e)\uff0c\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u6808\u7a7a\u95f4\u4e0d\u591f\u7528\uff0c\u4f1a\u81ea\u52a8\u8fdb\u884c\u6269\u5bb9\u3002</li> <li>\u521b\u5efa\u4e00\u4e2a thread \u4e3a\u4e86\u5c3d\u91cf\u907f\u514d\u6781\u7aef\u60c5\u51b5\u4e0b\u64cd\u4f5c\u7cfb\u7edf\u7ebf\u7a0b\u6808\u7684\u6ea2\u51fa\uff0c\u9ed8\u8ba4\u4f1a\u4e3a\u5176\u5206\u914d\u4e00\u4e2a\u8f83\u5927\u7684\u6808\u5185\u5b58( 1 - 8 MB \u6808\u5185\u5b58\uff0cPOSIX Thread)\uff0c\u800c\u4e14\u8fd8\u9700\u8981\u4e00\u4e2a\u88ab\u79f0\u4e3a \u201cguard page\u201d \u7684\u533a\u57df\u7528\u4e8e\u548c\u5176\u4ed6 thread \u7684\u6808\u7a7a\u95f4\u8fdb\u884c\u9694\u79bb\u3002\u800c\u6808\u5185\u5b58\u7a7a\u95f4\u4e00\u65e6\u521b\u5efa\u548c\u521d\u59cb\u5316\u5b8c\u6210\u4e4b\u540e\u5176\u5927\u5c0f\u5c31\u4e0d\u80fd\u518d\u6709\u53d8\u5316\uff0c\u8fd9\u51b3\u5b9a\u4e86\u5728\u67d0\u4e9b\u7279\u6b8a\u573a\u666f\u4e0b\u7cfb\u7edf\u7ebf\u7a0b\u6808\u8fd8\u662f\u6709\u6ea2\u51fa\u7684\u98ce\u9669\u3002</li> </ul>"},{"location":"go/goroutine_thread/#_2","title":"\u521b\u5efa\u548c\u9500\u6bc1","text":"<ul> <li>\u7ebf\u7a0b\u521b\u5efa\u548c\u9500\u6bc0\u90fd\u4f1a\u6709\u5de8\u5927\u7684\u6d88\u8017\uff0c\u662f\u5185\u6838\u7ea7\u7684\u4ea4\u4e92(trap)\u3002\u8fdb\u5165\u5185\u6838\u6240\u6d88\u8017\u7684\u6027\u80fd\u4ee3\u4ef7\u6bd4\u8f83\u9ad8\uff0c\u5f00\u9500\u8f83\u5927\u3002</li> <li>goroutine \u662f\u7528\u6237\u6001\u7ebf\u7a0b\uff0c\u662f\u7531 go runtime \u7ba1\u7406\uff0c\u521b\u5efa\u548c\u9500\u6bc1\u7684\u6d88\u8017\u975e\u5e38\u5c0f\u3002</li> </ul>"},{"location":"go/goroutine_thread/#_3","title":"\u8c03\u5ea6\u5207\u6362","text":"<ul> <li>\u629b\u5f00\u9677\u5165\u5185\u6838\uff0c\u7ebf\u7a0b\u5207\u6362\u4f1a\u6d88\u8017 1000-1500 \u7eb3\u79d2(\u4e0a\u4e0b\u6587\u4fdd\u5b58\u6210\u672c\u9ad8\uff0c\u8f83\u591a\u5bc4\u5b58\u5668\uff0c\u516c\u5e73\u6027\uff0c\u590d\u6742\u65f6\u95f4\u8ba1\u7b97\u7edf\u8ba1)\uff0c\u4e00\u4e2a\u7eb3\u79d2\u5e73\u5747\u53ef\u4ee5\u6267\u884c 12-18 \u6761\u6307\u4ee4\u3002\u6240\u4ee5\u7531\u4e8e\u7ebf\u7a0b\u5207\u6362\uff0c\u6267\u884c\u6307\u4ee4\u7684\u6761\u6570\u4f1a\u51cf\u5c11 12000-18000\u3002</li> <li>goroutine \u7684\u5207\u6362\u7ea6\u4e3a 200 ns(\u7528\u6237\u6001\u30013\u4e2a\u5bc4\u5b58\u5668)\uff0c\u76f8\u5f53\u4e8e 2400-3600 \u6761\u6307\u4ee4\u3002\u56e0\u6b64\uff0cgoroutines \u5207\u6362\u6210\u672c\u6bd4 threads \u8981\u5c0f\u5f97\u591a</li> </ul>"},{"location":"go/goroutine_thread/#_4","title":"\u590d\u6742\u6027","text":"<ul> <li>\u7ebf\u7a0b\u7684\u521b\u5efa\u548c\u9000\u51fa\u590d\u6742\uff0c\u591a\u4e2athread\u95f4\u901a\u8baf\u590d\u6742(share memory)</li> <li>\u4e0d\u80fd\u5927\u91cf\u521b\u5efa\u7ebf\u7a0b\uff0c\u6210\u672c\u9ad8\uff0c\u4f7f\u7528\u7f51\u7edc\u591a\u8def\u590d\u7528\uff0c\u5b58\u5728\u5927\u91cfcallback\u3002\u5bf9\u4e8e\u5e94\u7528\u670d\u52a1\u7ebf\u7a0b\u95e8\u69db\u9ad8\uff0c\u4f8b\u5982\u9700\u8981\u505a\u7b2c\u4e09\u65b9\u5e93\u9694\u79bb\uff0c\u9700\u8981\u8003\u8651\u5f15\u5165\u7ebf\u7a0b\u6c60\u7b49</li> </ul>"},{"location":"go/goroutine_xielou/","title":"Goroutine \u6cc4\u6f0f","text":""},{"location":"go/goroutine_xielou/#_1","title":"\u6cc4\u6f0f\u7684\u5927\u591a\u6570\u539f\u56e0","text":"<ul> <li>Goroutine \u5185\u6b63\u5728\u8fdb\u884c channel/mutex \u7b49\u8bfb\u5199\u64cd\u4f5c\uff0c\u4f46\u7531\u4e8e\u903b\u8f91\u95ee\u9898\uff0c\u67d0\u4e9b\u60c5\u51b5\u4e0b\u4f1a\u88ab\u4e00\u76f4\u963b\u585e\u3002</li> <li>Goroutine \u5185\u7684\u4e1a\u52a1\u903b\u8f91\u8fdb\u5165\u6b7b\u5faa\u73af\uff0c\u8d44\u6e90\u4e00\u76f4\u65e0\u6cd5\u91ca\u653e\u3002</li> <li>Goroutine \u5185\u7684\u4e1a\u52a1\u903b\u8f91\u8fdb\u5165\u957f\u65f6\u95f4\u7b49\u5f85\uff0c\u6709\u4e0d\u65ad\u65b0\u589e\u7684 Goroutine \u8fdb\u5165\u7b49\u5f85</li> </ul>"},{"location":"go/goroutine_xielou/#channel","title":"channel\u53d1\u9001\u4e0d\u63a5\u6536","text":"<ul> <li>\u5f00\u542f\u591a\u4e2agoroutine\uff0c\u5199channel</li> <li>\u53ea\u8bfb\u4e86\u90e8\u5206\u7684channel\uff0c\u5bfc\u81f4goroutine\u963b\u585e\u4e0d\u4f1a\u91ca\u653e <pre><code>package main\nfunc main() {\nfor i := 0; i &lt; 4; i++ {\nqueryAll()\nfmt.Printf(\"goroutines: %d\\n\", runtime.NumGoroutine())\n}\n}\nfunc queryAll() int {\nch := make(chan int)\nfor i := 0; i &lt; 3; i++ {\ngo func() { ch &lt;- query() }()\n}\n// \u5f00\u542f\u591a\u4e2achannel\uff0c\u53ea\u63a5\u6536\u4e86\u4e00\u4e2a\nreturn &lt;-ch\n}\nfunc query() int {\nn := rand.Intn(100)\ntime.Sleep(time.Duration(n) * time.Millisecond)\nreturn n\n}\n</code></pre></li> </ul>"},{"location":"go/goroutine_xielou/#channel_1","title":"channel\u63a5\u6536\u4e0d\u53d1\u9001","text":"<ul> <li>\u53ea\u5f00\u542f\u4e86\u63a5\u6536\uff0c\u4f46\u662f\u6ca1\u6709goroutine\u53bb\u53d1\u9001\u6570\u636e\u5230channel <pre><code>func main() {\ndefer func() {\nfmt.Println(\"goroutines: \", runtime.NumGoroutine())\n}()\nvar ch chan struct{}\ngo func() {\nch &lt;- struct{}{}\n}()\ntime.Sleep(time.Second)\n}\n</code></pre></li> </ul>"},{"location":"go/goroutine_xielou/#nil-channel-goroutine","title":"nil channel \u8bfb\u5199\u90fd\u4f1a\u963b\u585egoroutine","text":"<pre><code>ch := make(chan int)\ngo func() {\n&lt;-ch\n}()\nch &lt;- 0\ntime.Sleep(time.Second)\n</code></pre>"},{"location":"go/goroutine_xielou/#_2","title":"\u8bf7\u6c42\u4e09\u65b9\u63a5\u53e3\u6ca1\u6709\u8bbe\u7f6e\u8d85\u65f6\u7b49\u5f85","text":"<pre><code>func main() {\nfor {\ngo func() {\n_, err := http.Get(\"https://www.xxx.com/\")\nif err != nil {\nfmt.Printf(\"http.Get err: %v\\n\", err)\n}\n// do something...\n}()\ntime.Sleep(time.Second * 1)\nfmt.Println(\"goroutines: \", runtime.NumGoroutine())\n}\n}\n</code></pre>"},{"location":"go/goroutine_xielou/#_3","title":"\u4e92\u65a5\u9501\u5fd8\u8bb0\u89e3\u9501","text":"<ul> <li>\u4e92\u65a5\u9501\u4e0a\u9501\u540e\uff0c\u5fd8\u8bb0\u89e3\u9501</li> <li>\u9020\u6210\u5176\u4ed6goroutine\u9501\u7b49\u5f85\uff0c\u8fdb\u800c\u4ea7\u751f\u8d44\u6e90\u6cc4\u6f0f</li> <li><code>defer lock.Unlock()</code></li> </ul>"},{"location":"go/goroutine_xielou/#_4","title":"\u540c\u6b65\u9501\u4f7f\u7528\u4e0d\u5f53","text":"<ul> <li>sync.WaitGroup</li> <li><code>Add</code>\u7684\u6570\u91cf\u548c<code>Done</code>\u7684\u6570\u91cf\u4e0d\u4e00\u81f4</li> <li><code>Wait</code>\u65b9\u6cd5\u4e00\u76f4\u963b\u585e </li> </ul>"},{"location":"go/http_server/","title":"\u539f\u59cbHTTP SERVER","text":""},{"location":"go/http_server/#_1","title":"\u539f\u7406","text":"<ul> <li>\u7ed3\u6784\u4f53\u5b9e\u73b0ServeHTTP(http.ResponseWriter, *http.Request)\u65b9\u6cd5</li> </ul>"},{"location":"go/http_server/#_2","title":"\u4ee3\u7801","text":"<pre><code>package main\nimport (\n\"fmt\"\n\"io/ioutil\"\n\"net/http\"\n)\ntype Handler struct{}\nfunc (h *Handler) ServeHTTP(w http.ResponseWriter, req *http.Request) {\nrequestBody, err := ioutil.ReadAll(req.Body)\nif err != nil {\nw.Write([]byte(err.Error()))\nreturn\n}\nfmt.Println(req.RequestURI)\nfmt.Println(string(requestBody))\n}\nfunc main() {\nserver := http.Server{Addr: \":8081\", Handler: &amp;Handler{}}\nerr := server.ListenAndServe()\nif err != nil {\nfmt.Println(err.Error())\n}\n}\n</code></pre>"},{"location":"go/interface/","title":"\u63a5\u53e3","text":""},{"location":"go/interface/#_1","title":"\u63a5\u53e3\u5b9a\u4e49\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>Go\u8bed\u8a00\u8981\u6c42\u63a5\u53e3\u7c7b\u578b\u58f0\u660e\u4e2d\u7684\u65b9\u6cd5\u5fc5\u987b\u662f\u5177\u540d\u7684\uff0c\u5e76\u4e14\u65b9\u6cd5\u540d\u5b57\u5728\u8fd9\u4e2a\u63a5\u53e3\u7c7b\u578b\u7684\u65b9\u6cd5\u96c6\u5408\u4e2d\u662f\u552f\u4e00\u7684</li> <li>\u5373\u4f7f\u5d4c\u5957\u63a5\u53e3\u51fa\u73b0\u4ea4\u96c6\uff0c\u4e5f\u8981\u6c42\u4ea4\u96c6\u7684\u65b9\u6cd5\u540d\uff0c\u5165\u53c2\u548c\u8fd4\u56de\u503c\u4e00\u6837\uff0c\u5426\u5219\u7f16\u8bd1\u5668\u4f1a\u62a5\u9519</li> <li>\u5728 Go \u63a5\u53e3\u7c7b\u578b\u7684\u65b9\u6cd5\u96c6\u5408\u4e2d\u653e\u5165\u9996\u5b57\u6bcd\u5c0f\u5199\u7684\u975e\u5bfc\u51fa\u65b9\u6cd5\u4e5f\u662f\u5408\u6cd5\u7684</li> </ul>"},{"location":"go/interface/#_2","title":"\u5b9e\u73b0\u63a5\u53e3","text":"<ul> <li>\u5982\u679c\u4e00\u4e2a\u7c7b\u578b T \u7684\u65b9\u6cd5\u96c6\u5408\u662f\u67d0\u63a5\u53e3\u7c7b\u578b I \u7684\u65b9\u6cd5\u96c6\u5408\u7684\u7b49\u4ef7\u96c6\u5408\u6216\u8d85\u96c6\uff0c\u7c7b\u578b T \u5b9e\u73b0\u4e86\u63a5\u53e3\u7c7b\u578b I\uff0c\u90a3\u4e48\u7c7b\u578b T \u7684\u53d8\u91cf\u5c31\u53ef\u4ee5\u4f5c\u4e3a\u5408\u6cd5\u7684\u53f3\u503c\u8d4b\u503c\u7ed9\u63a5\u53e3\u7c7b\u578b I \u7684\u53d8\u91cf</li> <li>\u4efb\u4f55\u7c7b\u578b\u90fd\u5b9e\u73b0\u4e86\u7a7a\u63a5\u53e3</li> </ul>"},{"location":"go/interface/#_3","title":"\u63a5\u53e3\u7684\u9759\u6001\u7279\u6027\u4e0e\u52a8\u6001\u7279\u6027","text":"<ul> <li>\u9759\u6001\u7279\u6027\uff1a\u63a5\u53e3\u7c7b\u578b\u53d8\u91cf\u5177\u6709\u9759\u6001\u7c7b\u578b\uff0c\u6bd4\u5982var err error\u4e2d\u53d8\u91cf err \u7684\u9759\u6001\u7c7b\u578b\u4e3a error</li> <li>\u9759\u6001\u7c7b\u578b\uff1a\u63a5\u53e3\u7c7b\u578b\u53d8\u91cf\u5728\u8fd0\u884c\u65f6\u8fd8\u5b58\u50a8\u4e86\u53f3\u503c\u7684\u771f\u5b9e\u7c7b\u578b\u4fe1\u606f\uff0c\u8fd9\u4e2a\u53f3\u503c\u7684\u771f\u5b9e\u7c7b\u578b\u88ab\u79f0\u4e3a\u63a5\u53e3\u7c7b\u578b\u53d8\u91cf\u7684\u52a8\u6001\u7c7b\u578b <pre><code>var err error\nerr = errors.New(\"error1\")\nfmt.Printf(\"%T\\n\", err)  // *errors.errorString\n</code></pre></li> </ul>"},{"location":"go/interface/#_4","title":"\u52a8\u9759\u7279\u6027\u4f18\u52bf","text":"<ul> <li>\u63a5\u53e3\u7c7b\u578b\u53d8\u91cf\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u53ef\u4ee5\u88ab\u8d4b\u503c\u4e3a\u4e0d\u540c\u7684\u52a8\u6001\u7c7b\u578b\u53d8\u91cf\uff0c\u6bcf\u6b21\u8d4b\u503c\u540e\uff0c\u63a5\u53e3\u7c7b\u578b\u53d8\u91cf\u4e2d\u5b58\u50a8\u7684\u52a8\u6001\u7c7b\u578b\u4fe1\u606f\u90fd\u4f1a\u53d1\u751f\u53d8\u5316</li> <li>\u9e2d\u5b50\u7c7b\u578b Duck Typing\uff0c\u67d0\u4e00\u7c7b\u578b\u8868\u73b0\u51fa\u7684\u884c\u4e3a\u4e0d\u662f\u6709\u57fa\u56e0\u51b3\u5b9a\u7684\uff0c\u800c\u662f\u7531\u7c7b\u578b\u6240\u8868\u73b0\u51fa\u7684\u884c\u4e3a\u51b3\u5b9a\u7684</li> <li>Go \u63a5\u53e3\u8fd8\u53ef\u4ee5\u4fdd\u8bc1\u201c\u52a8\u6001\u7279\u6027\u201d\u4f7f\u7528\u65f6\u7684\u5b89\u5168\u6027\uff0c\u7f16\u8bd1\u9636\u6bb5\u5c31\u53ef\u4ee5\u53d1\u73b0\u63a5\u53e3\u7c7b\u578b\u8d4b\u503c\u4e0d\u6b63\u786e\u7684\u9519\u8bef <pre><code>type QuackableAnimal interface {\nQuack()\n}\ntype Duck struct{}\nfunc (Duck) Quack() {\nprintln(\"duck quack!\")\n}\ntype Dog struct{}\nfunc (Dog) Quack() {\nprintln(\"dog quack!\")\n}\ntype Bird struct{}\nfunc (Bird) Quack() {\nprintln(\"bird quack!\")\n}                         func AnimalQuackInForest(a QuackableAnimal) {\na.Quack()             }                         func main() {             animals := []QuackableAnimal{new(Duck), new(Dog), new(Bird)}\nfor _, animal := range animals {\nAnimalQuackInForest(animal)\n}  }\n</code></pre></li> </ul>"},{"location":"go/interface/#_5","title":"\u63a5\u53e3\u53d8\u91cf\u7684\u5185\u90e8\u8868\u793a","text":"<pre><code>// $GOROOT/src/runtime/runtime2.go\ntype iface struct {\ntab  *itab\ndata unsafe.Pointer\n}\ntype eface struct {\n_type *_type\ndata  unsafe.Pointer\n}\n</code></pre> <ul> <li>eface \u7528\u4e8e\u8868\u793a\u6ca1\u6709\u65b9\u6cd5\u7684\u7a7a\u63a5\u53e3\uff08empty interface\uff09\u7c7b\u578b\u53d8\u91cf\uff0c\u4e5f\u5c31\u662f interface{}\u7c7b\u578b\u7684\u53d8\u91cf</li> <li>iface \u7528\u4e8e\u8868\u793a\u5176\u4f59\u62e5\u6709\u65b9\u6cd5\u7684\u63a5\u53e3 interface \u7c7b\u578b\u53d8\u91cf</li> <li>\u7b2c\u4e8c\u4e2a\u6307\u9488\u5b57\u6bb5\u7684\u529f\u80fd\u76f8\u540c\uff0c\u90fd\u662f\u6307\u5411\u5f53\u524d\u8d4b\u503c\u7ed9\u8be5\u63a5\u53e3\u7c7b\u578b\u53d8\u91cf\u7684\u52a8\u6001\u7c7b\u578b\u53d8\u91cf\u7684\u503c</li> <li>_type \u6307\u5411\u8d4b\u503c\u7ed9\u8fd9\u4e2a\u63a5\u53e3\u7684\u53d8\u91cf\u7684\u52a8\u6001\u7c7b\u578b\u4fe1\u606f <pre><code>// $GOROOT/src/runtime/type.go\ntype _type struct {\nsize       uintptr\nptrdata    uintptr // size of memory prefix holding all pointers\nhash       uint32\ntflag      tflag\nalign      uint8\nfieldAlign uint8\nkind       uint8\n// function for comparing objects of this type\n// (ptr to object A, ptr to object B) -&gt; ==?\nequal func(unsafe.Pointer, unsafe.Pointer) bool\n// gcdata stores the GC type data for the garbage collector.\n// If the KindGCProg bit is set in kind, gcdata is a GC program.\n// Otherwise it is a ptrmask bitmap. See mbitmap.go for details.\ngcdata    *byte\nstr       nameOff\nptrToThis typeOff\n}\n</code></pre></li> <li>iface \u9664\u4e86\u8981\u5b58\u50a8\u52a8\u6001\u7c7b\u578b\u4fe1\u606f\u4e4b\u5916\uff0c\u8fd8\u8981\u5b58\u50a8\u63a5\u53e3\u672c\u8eab\u7684\u4fe1\u606f\uff08\u63a5\u53e3\u7684\u7c7b\u578b\u4fe1\u606f\u3001\u65b9\u6cd5\u5217\u8868\u4fe1\u606f\u7b49\uff09\u4ee5\u53ca\u52a8\u6001\u7c7b\u578b\u6240\u5b9e\u73b0\u7684\u65b9\u6cd5\u7684\u4fe1\u606f\uff0c\u56e0\u6b64 iface \u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u6307\u5411\u4e00\u4e2aitab\u7c7b\u578b\u7ed3\u6784 <pre><code>// $GOROOT/src/runtime/runtime2.go\ntype itab struct {\ninter *interfacetype // \u63a5\u53e3\u7c7b\u578b\u81ea\u8eab\u7684\u4fe1\u606f\n_type *_type\nhash  uint32 // copy of _type.hash. Used for type switches.\n_     [4]byte\nfun   [1]uintptr // variable sized. fun[0]==0 means _type does not implement inter. \u5b57\u6bb5fun\u5219\u662f\u52a8\u6001\u7c7b\u578b\u5df2\u5b9e\u73b0\u7684\u63a5\u53e3\u65b9\u6cd5\u7684\u8c03\u7528\u5730\u5740\u6570\u7ec4\u3002\n}\n// $GOROOT/src/runtime/type.go\ntype interfacetype struct {\ntyp     _type\npkgpath name\nmhdr    []imethod\n}\n</code></pre></li> </ul>"},{"location":"go/interface/#_6","title":"\u63a5\u53e3\u76f8\u7b49\u5224\u65ad","text":"<ul> <li>\u63a5\u53e3\u5b58\u50a8\u7684\u52a8\u6001\u6570\u636e\u7c7b\u578b\u4e00\u6837<ul> <li>\u7a7a\u63a5\u53e3\u4f7f\u7528_type</li> <li>\u975e\u7a7a\u63a5\u53e3\u4f7f\u7528tab._type</li> </ul> </li> <li>\u63a5\u53e3\u5b58\u50a8\u7684data\u6307\u5411\u7684\u6570\u636e\u4e00\u6837</li> <li>\u5bf9\u4e8e\u7a7a\u63a5\u53e3\u7c7b\u578b\u53d8\u91cf\uff0c\u53ea\u6709 _type \u548c data \u6240\u6307\u6570\u636e\u5185\u5bb9\u4e00\u81f4\u7684\u60c5\u51b5\u4e0b\uff0c\u4e24\u4e2a\u7a7a\u63a5\u53e3\u7c7b\u578b\u53d8\u91cf\u4e4b\u95f4\u624d\u80fd\u5212\u7b49\u53f7</li> <li>Go \u5728\u521b\u5efa eface \u65f6\u4e00\u822c\u4f1a\u4e3a data \u91cd\u65b0\u5206\u914d\u65b0\u5185\u5b58\u7a7a\u95f4\uff0c\u5c06\u52a8\u6001\u7c7b\u578b\u53d8\u91cf\u7684\u503c\u590d\u5236\u5230\u8fd9\u5757\u5185\u5b58\u7a7a\u95f4\uff0c\u5e76\u5c06 data \u6307\u9488\u6307\u5411\u8fd9\u5757\u5185\u5b58\u7a7a\u95f4\uff0c\u591a\u6570\u60c5\u51b5\u4e0b\u770b\u5230\u7684 data \u6307\u9488\u503c\u90fd\u662f\u4e0d\u540c\u7684</li> </ul>"},{"location":"go/leixingqianru/","title":"\u7c7b\u578b\u5d4c\u5165","text":""},{"location":"go/leixingqianru/#_1","title":"\u591a\u4e2a\u5d4c\u5165\u65b9\u5f0f","text":"<ul> <li>\u63a5\u53e3\u5d4c\u5165</li> <li>\u7ed3\u6784\u4f53\u5d4c\u5165</li> </ul>"},{"location":"go/leixingqianru/#_2","title":"\u5d4c\u5165\u603b\u7ed3","text":"<ul> <li>\u7ed3\u6784\u4f53\u7c7b\u578b\u7684\u65b9\u6cd5\u96c6\u5408\u5305\u542b\u5d4c\u5165\u7684\u63a5\u53e3\u7c7b\u578b\u7684\u65b9\u6cd5\u96c6\u5408</li> <li>\u5f53\u7ed3\u6784\u4f53\u7c7b\u578b T \u5305\u542b\u5d4c\u5165\u5b57\u6bb5 E \u65f6\uff0cT \u7684\u65b9\u6cd5\u96c6\u5408\u4e0d\u4ec5\u5305\u542b\u7c7b\u578b E \u7684\u65b9\u6cd5\u96c6\u5408\uff0c\u8fd8\u8981\u5305\u542b\u7c7b\u578b E \u7684\u65b9\u6cd5\u96c6\u5408</li> <li>\u57fa\u4e8e\u975e\u63a5\u53e3\u7c7b\u578b\u7684 defined \u7c7b\u578b\u521b\u5efa\u7684\u65b0 defined \u7c7b\u578b\u4e0d\u4f1a\u7ee7\u627f\u539f\u7c7b\u578b\u7684\u65b9\u6cd5\u96c6\u5408</li> <li>\u901a\u8fc7\u7c7b\u578b\u522b\u540d\u5b9a\u4e49\u7684\u65b0\u7c7b\u578b\u5219\u548c\u539f\u7c7b\u578b\u62e5\u6709\u76f8\u540c\u7684\u65b9\u6cd5\u96c6\u5408</li> </ul>"},{"location":"go/leixingqianru/#_3","title":"\u63a5\u53e3\u5d4c\u5165","text":"<ul> <li>\u63a5\u53e3\u5c31\u662f\u4e00\u4e2a\u65b9\u6cd5\u96c6\u5408</li> <li>\u65b0\u63a5\u53e3\u7c7b\u578b\uff08\u5982\u63a5\u53e3\u7c7b\u578b I\uff09\u5c06\u5d4c\u5165\u7684\u63a5\u53e3\u7c7b\u578b\uff08\u5982\u63a5\u53e3\u7c7b\u578b E\uff09\u7684\u65b9\u6cd5\u96c6\u5408\uff0c\u5e76\u5165\u5230\u81ea\u5df1\u7684\u65b9\u6cd5\u96c6\u5408\u4e2d</li> <li>\u5728 Go 1.14 \u7248\u672c\u4e4b\u524d\u662f\u6709\u7ea6\u675f\u7684\uff1a\u5982\u679c\u65b0\u63a5\u53e3\u7c7b\u578b\u5d4c\u5165\u4e86\u591a\u4e2a\u63a5\u53e3\u7c7b\u578b\uff0c\u8fd9\u4e9b\u5d4c\u5165\u7684\u63a5\u53e3\u7c7b\u578b\u7684\u65b9\u6cd5\u96c6\u5408\u4e0d\u80fd\u6709\u4ea4\u96c6\uff0c\u540c\u65f6\u5d4c\u5165\u7684\u63a5\u53e3\u7c7b\u578b\u7684\u65b9\u6cd5\u96c6\u5408\u4e2d\u7684\u65b9\u6cd5\u540d\u5b57\uff0c\u4e5f\u4e0d\u80fd\u4e0e\u65b0\u63a5\u53e3\u4e2d\u7684\u5176\u4ed6\u65b9\u6cd5\u540c\u540d <pre><code>type I interface {\nM1()\nM2()\nM3()\n}\ntype I interface {\nE\nM3()\n}\n</code></pre></li> <li>\u4ee5\u67d0\u4e2a\u7c7b\u578b\u540d\u3001\u7c7b\u578b\u7684\u6307\u9488\u7c7b\u578b\u540d\u6216\u63a5\u53e3\u7c7b\u578b\u540d\uff0c\u76f4\u63a5\u4f5c\u4e3a\u7ed3\u6784\u4f53\u5b57\u6bb5\u7684\u65b9\u5f0f\u5c31\u53eb\u505a\u7ed3\u6784\u4f53\u7684\u7c7b\u578b\u5d4c\u5165\uff0c\u8fd9\u4e9b\u5b57\u6bb5\u4e5f\u88ab\u53eb\u505a\u5d4c\u5165\u5b57\u6bb5\uff08Embedded Field\uff09</li> <li>\u7ed3\u6784\u4f53\u53ef\u4ee5\u5d4c\u5165\u7ed3\u6784\u4f53\u548c\u63a5\u53e3\u7c7b\u578b</li> <li>\u5d4c\u5165\u5b57\u6bb5\u7c7b\u578b\u7684\u5e95\u5c42\u7c7b\u578b\u4e0d\u80fd\u4e3a\u6307\u9488\u7c7b\u578b</li> <li>\u5d4c\u5165\u5b57\u6bb5\u7684\u540d\u5b57\u5728\u7ed3\u6784\u4f53\u5b9a\u4e49\u4e5f\u5fc5\u987b\u662f\u552f\u4e00\u7684\uff0c\u5982\u679c\u4e24\u4e2a\u7c7b\u578b\u7684\u540d\u5b57\u76f8\u540c\uff0c\u5b83\u4eec\u65e0\u6cd5\u540c\u65f6\u4f5c\u4e3a\u5d4c\u5165\u5b57\u6bb5\u653e\u5230\u540c\u4e00\u4e2a\u7ed3\u6784\u4f53\u5b9a\u4e49\u4e2d</li> </ul>"},{"location":"go/leixingqianru/#_4","title":"\u7ed3\u6784\u4f53\u5d4c\u5165","text":"<pre><code>type T1 int\ntype t2 struct{\nn int\nm int\n}\ntype I interface {\nM1()\n}\ntype S1 struct {\nT1\n*t2\nI            a int\nb string\n}\n</code></pre>"},{"location":"go/leixingqianru/#_5","title":"\u5d4c\u5165\u540e\u65b9\u6cd5\u96c6\u5408","text":"<ul> <li> <p>\u7ed3\u6784\u4f53\u7c7b\u578b\u7684\u65b9\u6cd5\u96c6\u5408\uff0c\u5305\u542b\u5d4c\u5165\u7684\u63a5\u53e3\u7c7b\u578b\u7684\u65b9\u6cd5\u96c6\u5408 <pre><code>type I interface {\nM1()\nM2()\n}\ntype T struct {\nI\n}\nfunc (T) M3() {}\nfunc main() {\nvar t T\nvar p *T\ndumpMethodSet(t)\ndumpMethodSet(p)\n}\nmain.T's method set:\n- M1\n- M2\n- M3\n*main.T's method set:\n- M1\n- M2\n- M3\n</code></pre></p> </li> <li> <p>\u5d4c\u5165\u4e86\u5176\u4ed6\u7c7b\u578b\u7684\u7ed3\u6784\u4f53\u7c7b\u578b\u672c\u8eab\u662f\u4e00\u4e2a\u4ee3\u7406</p> </li> <li>\u8c03\u7528\u5176\u5b9e\u4f8b\u6240\u4ee3\u7406\u7684\u65b9\u6cd5\u65f6\uff0cGo \u4f1a\u9996\u5148\u67e5\u770b\u7ed3\u6784\u4f53\u81ea\u8eab\u662f\u5426\u5b9e\u73b0\u4e86\u8be5\u65b9\u6cd5</li> <li>\u5982\u679c\u5b9e\u73b0\u65b9\u6cd5\u4e86\uff0cGo \u5c31\u4f1a\u4f18\u5148\u4f7f\u7528\u7ed3\u6784\u4f53\u81ea\u5df1\u5b9e\u73b0\u7684\u65b9\u6cd5</li> <li>\u5982\u679c\u6ca1\u6709\u5b9e\u73b0\uff0c\u90a3\u4e48 Go \u5c31\u4f1a\u67e5\u627e\u7ed3\u6784\u4f53\u4e2d\u7684\u5d4c\u5165\u5b57\u6bb5\u7684\u65b9\u6cd5\u96c6\u5408\u4e2d\uff0c\u662f\u5426\u5305\u542b\u4e86\u8fd9\u4e2a\u65b9\u6cd5</li> <li>\u5982\u679c\u591a\u4e2a\u5d4c\u5165\u5b57\u6bb5\u7684\u65b9\u6cd5\u96c6\u5408\u4e2d\u90fd\u5305\u542b\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u90a3\u4e48\u65b9\u6cd5\u96c6\u5408\u5b58\u5728\u4ea4\u96c6\u3002Go \u7f16\u8bd1\u5668\u5c31\u4f1a\u56e0\u65e0\u6cd5\u786e\u5b9a\u7a76\u7adf\u4f7f\u7528\u54ea\u4e2a\u65b9\u6cd5\u800c\u62a5\u9519</li> <li>\u53bb\u6389\u56e0\u5d4c\u5165\u9020\u6210\u7684\u4ea4\u96c6\u7684\u65b9\u6cd5\u6216\u8005\u7ed3\u6784\u4f53\u81ea\u8eab\u5b9e\u73b0\u4ea4\u96c6\u7684\u65b9\u6cd5 <pre><code>  type E1 interface {\nM1()\nM2()\nM3()\n}\ntype E2 interface {\nM1()\nM2()\nM4()\n}\ntype T struct {\nE1\nE2\n}\nfunc main() {\nt := T{}\nt.M1()\nt.M2()\n}\n```\n ### \u6253\u5370\u4e00\u4e2ainterface\u7684\u65b9\u6cd5\u96c6\u5408\n ```go\nfunc dumpMethodSet(i interface{}) {\ndynTyp := reflect.TypeOf(i)\nif dynTyp == nil {\nfmt.Printf(\"there is no dynamic type\\n\")\nreturn\n}\nn := dynTyp.NumMethod()\nif n == 0 {\nfmt.Printf(\"%s's method set is empty!\\n\", dynTyp)\nreturn\n}\nfmt.Printf(\"%s's method set:\\n\", dynTyp)\nfor j := 0; j &lt; n; j++ {\nfmt.Println(\"-\", dynTyp.Method(j).Name)\n}\nfmt.Printf(\"\\n\")\n}\n</code></pre></li> </ul>"},{"location":"go/many_go/","title":"\u591a\u7248\u672cGO","text":""},{"location":"go/many_go/#_1","title":"\u547d\u4ee4","text":"<ul> <li>\u6b63\u5e38\u4f1a\u4e0b\u8f7d\u5230$HOME/sdk <pre><code>go install golang.org/dl/go1.13@latest\n</code></pre></li> </ul>"},{"location":"go/many_go/#_2","title":"\u8865\u5168\u73af\u5883","text":"<pre><code>go1.13 download\n</code></pre>"},{"location":"go/many_go/#_3","title":"\u67e5\u770b\u7248\u672c","text":"<pre><code>go1.13 version\n</code></pre>"},{"location":"go/map/","title":"Map","text":""},{"location":"go/map/#map","title":"Map \u5e38\u7528\u64cd\u4f5c","text":""},{"location":"go/map/#_1","title":"\u521d\u59cb\u5316","text":"<ul> <li>var m1 map[string]int // m1 == nil \u7ed3\u679c\u4e3atrue\uff0c\u6b64\u65f6\u5199\u5165\u4f1a\u4ea7\u751fpanic</li> <li>var m2 = map[string]int{}</li> <li>var m3 = make(map[string]int) </li> <li>\u51fd\u6570\u7c7b\u578b\u3001map \u7c7b\u578b\u81ea\u8eab\uff0c\u4ee5\u53ca\u5207\u7247\u7c7b\u578b\u662f\u4e0d\u80fd\u4f5c\u4e3a map \u7684 key \u7c7b\u578b\u7684 <pre><code>s1 := make([]int, 1)\ns2 := make([]int, 2)\nf1 := func() {}\nf2 := func() {}\nm1 := make(map[int]string)\nm2 := make(map[int]string)\nprintln(s1 == s2) // \u9519\u8bef\uff1ainvalid operation: s1 == s2 (slice can only be compared to nil)\nprintln(f1 == f2) // \u9519\u8bef\uff1ainvalid operation: f1 == f2 (func can only be compared to nil)\nprintln(m1 == m2) // \u9519\u8bef\uff1ainvalid operation: m1 == m2 (map can only be compared to nil)\n</code></pre></li> <li>makemap_small \u6e90\u7801 <pre><code>// makemap_small implements Go map creation for make(map[k]v) and\n// make(map[k]v, hint) when hint is known to be at most bucketCnt\n// at compile time and the map needs to be allocated on the heap.\n// \u521b\u5efamap\u4e0d\u6307\u5b9a\u5bb9\u91cf\uff0c\u6216\u8005\u5bb9\u91cf\u5c0f\u4e8ebucketCnt\uff08\u8fd9\u4e2a\u5bb9\u91cf\u4e3a8\uff09\nfunc makemap_small() *hmap {\nh := new(hmap)\nh.hash0 = fastrand()\nreturn h\n}\n</code></pre></li> <li>makemap \u6e90\u7801 <pre><code>// makemap implements Go map creation for make(map[k]v, hint).\n// If the compiler has determined that the map or the first bucket\n// can be created on the stack, h and/or bucket may be non-nil.\n// If h != nil, the map can be created directly in h.\n// If h.buckets != nil, bucket pointed to can be used as the first bucket.\nfunc makemap(t *maptype, hint int, h *hmap) *hmap {\nmem, overflow := math.MulUintptr(uintptr(hint), t.bucket.size)\n// \u6570\u636e\u8303\u56f4\u6ea2\u51fa\uff0c\u8bbe\u7f6e\u4e3a0\nif overflow || mem &gt; maxAlloc {\nhint = 0\n}\n// initialize Hmap\nif h == nil {\nh = new(hmap)\n}\n// \u968f\u673a\u79cd\u5b50\nh.hash0 = fastrand()\n// Find the size parameter B which will hold the requested # of elements.\n// For hint &lt; 0 overLoadFactor returns false since hint &lt; bucketCnt.\nB := uint8(0)\nfor overLoadFactor(hint, B) {\nB++\n}\nh.B = B\n// allocate initial hash table\n// if B == 0, the buckets field is allocated lazily later (in mapassign)\n// If hint is large zeroing this memory could take a while.\nif h.B != 0 {\nvar nextOverflow *bmap\nh.buckets, nextOverflow = makeBucketArray(t, h.B, nil)\nif nextOverflow != nil {\nh.extra = new(mapextra)\nh.extra.nextOverflow = nextOverflow\n}\n}\nreturn h\n}\n</code></pre></li> </ul>"},{"location":"go/map/#map_1","title":"\u5199map","text":"<ul> <li>key, value \u5199\u5165</li> <li>mapassign\u6e90\u7801 <pre><code>// Like mapaccess, but allocates a slot for the key if it is not present in the map.\nfunc mapassign(t *maptype, h *hmap, key unsafe.Pointer) unsafe.Pointer {\nif h == nil {\npanic(plainError(\"assignment to entry in nil map\"))\n}\nif raceenabled {\ncallerpc := getcallerpc()\npc := funcPC(mapassign)\nracewritepc(unsafe.Pointer(h), callerpc, pc)\nraceReadObjectPC(t.key, key, callerpc, pc)\n}\nif msanenabled {\nmsanread(key, t.key.size)\n}\n// hashWriting = 4 \u56fa\u5b9a\u503c \u4e8c\u8fdb\u5236 0000 0100\nif h.flags&amp;hashWriting != 0 {\nthrow(\"concurrent map writes\")\n}\nhash := t.hasher(key, uintptr(h.hash0))\n// Set hashWriting after calling t.hasher, since t.hasher may panic,\n// in which case we have not actually done a write.\n// map\u771f\u6b63\u5199\u5165\u524d\u8bbe\u7f6e\u6807\u8bb0\u4f4d\uff0c\u5176\u4ed6goroutine\u5199\u5165\u4f1a\u9a6c\u4e0a throw(\"concurrent map writes\")\n// \u5f02\u6216\u64cd\u4f5c\uff0c\u76f8\u540c\u4e3a0\uff0c\u4e0d\u540c\u4e3a1\uff0c\u4fee\u6539\u7b2c\u4e09\u4f4d\u4e3a1\uff0c\u4fdd\u7559\u5176\u4ed6\u4f4d\u4e3a\u539f\u503c\uff0c\u518d\u6b21\u8fdb\u884c\u4e0e\u64cd\u4f5c\u65f6\uff0c\u7b49\u4e8e1\uff0c\u7136\u540e\u5c31\u4f1a\u5d29\u6e83\nh.flags ^= hashWriting\nif h.buckets == nil {\nh.buckets = newobject(t.bucket) // newarray(t.bucket, 1)\n}\n// \u7701\u7565\u90e8\u5206\u4ee3\u7801\n</code></pre></li> </ul>"},{"location":"go/map/#map_2","title":"\u8bfbmap","text":"<ul> <li>value := hash[key]</li> <li>value, ok := hash[key]</li> <li>\u5982\u679ckey\u4e0d\u5b58\u5728\uff0c\u8fd4\u56devalue\u7c7b\u578b\u7684\u96f6\u503c</li> <li>mapaccess1 \u8fd4\u56deval \u6e90\u7801</li> <li>mapaccess2 \u8fd4\u56deval\u548cbool <pre><code>// mapaccess1 returns a pointer to h[key].  Never returns nil, instead\n// it will return a reference to the zero object for the elem type if\n// the key is not in the map.\n// NOTE: The returned pointer may keep the whole map live, so don't\n// hold onto it for very long.\n// key\u4e0d\u5b58\u5728\u8fd4\u56de\u7c7b\u578b\u7684\u96f6\u503c\n// \u4e0d\u8981\u6301\u6709\u8fd4\u56de\u7684\u6307\u9488\u592a\u957f\u65f6\u95f4\uff0c\u5bb9\u6613\u9020\u6210GC\u65e0\u6cd5\u56de\u6536map\uff0c\u5bfc\u81f4\u5185\u5b58\u6cc4\u6f0f\nfunc mapaccess1(t *maptype, h *hmap, key unsafe.Pointer) unsafe.Pointer {\nif raceenabled &amp;&amp; h != nil {\ncallerpc := getcallerpc()\npc := funcPC(mapaccess1)\nracereadpc(unsafe.Pointer(h), callerpc, pc)\nraceReadObjectPC(t.key, key, callerpc, pc)\n}\nif msanenabled &amp;&amp; h != nil {\nmsanread(key, t.key.size)\n}\n// map \u4e3a\u7a7a\nif h == nil || h.count == 0 {\nif t.hashMightPanic() {\nt.hasher(key, 0) // see issue 23734\n}\nreturn unsafe.Pointer(&amp;zeroVal[0])\n}\n// \u6709\u6b63\u5728\u5199\u7684goroutine\uff0c\u5d29\u6e83fatal error\nif h.flags&amp;hashWriting != 0 {\nthrow(\"concurrent map read and map write\")\n}\nhash := t.hasher(key, uintptr(h.hash0)) // \u6839\u636ekey\u8ba1\u7b97\u7684hash\u503c\nm := bucketMask(h.B) // \u6876\u7684\u4e2a\u6570\n// \u6307\u9488\u8ba1\u7b97\uff0c\u627e\u5230key\u5e94\u8be5\u5728\u7684bmap\nb := (*bmap)(add(h.buckets, (hash&amp;m)*uintptr(t.bucketsize)))\n// \u6876\u6b63\u5728\u6269\u5bb9\nif c := h.oldbuckets; c != nil {\nif !h.sameSizeGrow() {\n// There used to be half as many buckets; mask down one more power of two.\nm &gt;&gt;= 1\n}\noldb := (*bmap)(add(c, (hash&amp;m)*uintptr(t.bucketsize)))\nif !evacuated(oldb) {\nb = oldb\n}\n}\ntop := tophash(hash)\n// \u904d\u5386bucket\nbucketloop:\nfor ; b != nil; b = b.overflow(t) {\nfor i := uintptr(0); i &lt; bucketCnt; i++ {\nif b.tophash[i] != top {\nif b.tophash[i] == emptyRest {\nbreak bucketloop\n}\ncontinue\n}\nk := add(unsafe.Pointer(b), dataOffset+i*uintptr(t.keysize))\nif t.indirectkey() {\nk = *((*unsafe.Pointer)(k))\n}\nif t.key.equal(key, k) {\ne := add(unsafe.Pointer(b), dataOffset+bucketCnt*uintptr(t.keysize)+i*uintptr(t.elemsize))\nif t.indirectelem() {\ne = *((*unsafe.Pointer)(e))\n}\nreturn e\n}\n}\n}\n// \u6ca1\u6709\u7684\u8bdd \u8fd4\u56de\u96f6\u503c\nreturn unsafe.Pointer(&amp;zeroVal[0])\n}\n</code></pre></li> </ul>"},{"location":"go/map/#map_3","title":"\u5220\u9664map\u4e2d\u7684\u5143\u7d20","text":"<ul> <li>delete(map, key)</li> <li><code>mapdelete</code> \u65b9\u6cd5</li> </ul>"},{"location":"go/map/#range-map","title":"range map","text":"<ul> <li>\u8c03\u7528 <code>mapiterinit</code> \u65b9\u6cd5\u8fdb\u884c\u521d\u59cb\u5316</li> <li>\u4e0d\u65ad\u8c03\u7528 <code>mapiternext</code> \u65b9\u6cd5\u8fdb\u884c\u5faa\u73af</li> </ul>"},{"location":"go/map/#_2","title":"\u7279\u6027","text":"<ul> <li>map\u662f\u4e2a\u6307\u9488\uff0c\u5e95\u5c42\u6307\u5411hmap\uff0c\u6240\u4ee5\u662f\u4e2a\u5f15\u7528\u7c7b\u578b</li> <li>golang slice\u3001map\u3001channel\u90fd\u662f\u5f15\u7528\u7c7b\u578b\uff0c\u5f53\u5f15\u7528\u7c7b\u578b\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u65f6\uff0c\u53ef\u80fd\u4f1a\u4fee\u6539\u539f\u5185\u5bb9\u6570\u636e</li> <li>golang \u4e2d\u6ca1\u6709\u5f15\u7528\u4f20\u9012\uff0c\u53ea\u6709\u503c\u548c\u6307\u9488\u4f20\u9012\u3002map \u4f5c\u4e3a\u51fd\u6570\u5b9e\u53c2\u4f20\u9012\u65f6\u672c\u8d28\u4e0a\u4e5f\u662f\u503c\u4f20\u9012\uff0c\u56e0\u4e3a map \u5e95\u5c42\u6570\u636e\u7ed3\u6784\u662f\u901a\u8fc7\u6307\u9488\u6307\u5411\u5b9e\u9645\u7684\u5143\u7d20\u5b58\u50a8\u7a7a\u95f4\uff0c\u5728\u88ab\u8c03\u51fd\u6570\u4e2d\u4fee\u6539 map\uff0c\u5bf9\u8c03\u7528\u8005\u540c\u6837\u53ef\u89c1\uff0c\u6240\u4ee5 map \u4f5c\u4e3a\u51fd\u6570\u5b9e\u53c2\u4f20\u9012\u65f6\u8868\u73b0\u51fa\u4e86\u5f15\u7528\u4f20\u9012\u7684\u6548\u679c</li> <li>map \u5e95\u5c42\u6570\u636e\u7ed3\u6784\u662f\u901a\u8fc7\u6307\u9488\u6307\u5411\u5b9e\u9645\u7684\u5143\u7d20\u5b58\u50a8\u7a7a\u95f4\uff0c\u5bf9\u5176\u4e2d\u4e00\u4e2amap\u7684\u66f4\u6539\uff0c\u4f1a\u5f71\u54cd\u5230\u5176\u4ed6map</li> <li>\u904d\u5386\u65e0\u5e8f</li> <li>map \u53ef\u4ee5\u81ea\u52a8\u6269\u5bb9\uff0cmap \u4e2d\u6570\u636e\u5143\u7d20\u7684 value \u4f4d\u7f6e\u53ef\u80fd\u5728\u8fd9\u4e00\u8fc7\u7a0b\u4e2d\u53d1\u751f\u53d8\u5316\uff0c\u6240\u4ee5 Go \u4e0d\u5141\u8bb8\u83b7\u53d6 map \u4e2d value \u7684\u5730\u5740\uff0c\u8fd9\u4e2a\u7ea6\u675f\u662f\u5728\u7f16\u8bd1\u671f\u95f4\u5c31\u751f\u6548\u7684</li> </ul>"},{"location":"go/map/#map_4","title":"Map \u5b9e\u73b0\u539f\u7406","text":"<ul> <li>Go\u4e2d\u7684map\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u5360\u75288\u4e2a\u5b57\u8282\uff0c\u6307\u5411hmap\u7ed3\u6784\u4f53; \u6e90\u7801src/runtime/map.go\u4e2d\u53ef\u4ee5\u770b\u5230map\u7684\u5e95\u5c42\u7ed3\u6784</li> <li>\u6bcf\u4e2amap\u7684\u5e95\u5c42\u7ed3\u6784\u662fhmap\uff0chmap\u5305\u542b\u82e5\u5e72\u4e2a\u7ed3\u6784\u4e3abmap\u7684bucket\u6570\u7ec4\u3002\u6bcf\u4e2abucket\u5e95\u5c42\u90fd\u91c7\u7528\u94fe\u8868\u7ed3\u6784</li> <li>\u6bcf\u4e2a bucket \u4e2d\u5b58\u50a8\u7684\u662f Hash \u503c\u4f4e bit \u4f4d\u6570\u503c\u76f8\u540c\u7684\u5143\u7d20\uff0c\u9ed8\u8ba4\u7684\u5143\u7d20\u4e2a\u6570\u4e3a BUCKETSIZE\uff08\u503c\u4e3a 8\uff0cGo 1.17 \u7248\u672c\u4e2d\u5728 $GOROOT/src/cmd/compile/internal/reflectdata/reflect.go \u4e2d\u5b9a\u4e49\uff0c\u4e0eruntime/map.go \u4e2d\u5e38\u91cf bucketCnt \u4fdd\u6301\u4e00\u81f4\uff09</li> <li>\u5f53\u67d0\u4e2a bucket\uff08\u6bd4\u5982 buckets[0]) \u7684 8 \u4e2a\u7a7a\u69fd slot\uff09\u90fd\u586b\u6ee1\u4e86\uff0c\u4e14 map \u5c1a\u672a\u8fbe\u5230\u6269\u5bb9\u7684\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd0\u884c\u65f6\u4f1a\u5efa\u7acb overflow bucket\uff0c\u5e76\u5c06\u8fd9\u4e2a overflow bucket \u6302\u5728\u4e0a\u9762 bucket\uff08\u5982 buckets[0]\uff09\u672b\u5c3e\u7684 overflow \u6307\u9488\u4e0a\uff0c\u8fd9\u6837\u4e24\u4e2a buckets \u5f62\u6210\u4e86\u4e00\u4e2a\u94fe\u8868\u7ed3\u6784\uff0c\u76f4\u5230\u4e0b\u4e00\u6b21 map \u6269\u5bb9\u4e4b\u524d\uff0c\u8fd9\u4e2a\u7ed3\u6784\u90fd\u4f1a\u4e00\u76f4\u5b58\u5728</li> <li>map \u7ed3\u6784\uff0ckey\u548cvalue\u5355\u72ec\u6392\u5217\u5728\u4e00\u8d77\u53ef\u4ee5\u51cf\u5c11\u7ed3\u6784\u4f53\u5bf9\u9f50\u586b\u5145\uff0c\u51cf\u5c11\u5185\u5b58\u6d6a\u8d39  <pre><code>// A header for a Go map.\ntype hmap struct {\ncount     int // \u4ee3\u8868\u54c8\u5e0c\u8868\u4e2d\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u8c03\u7528len(map)\u65f6\uff0c\u8fd4\u56de\u7684\u5c31\u662f\u8be5\u5b57\u6bb5\u503c\u3002\nflags     uint8 // \u6807\u8bb0 \u6269\u5bb9\u72b6\u6001\uff0c\u8bfb\u5199\u72b6\u6001\nB         uint8  // buckets\uff08\u6876\uff09\u7684\u5bf9\u6570log_2\n// \u5982\u679cB=5\uff0c\u5219buckets\u6570\u7ec4\u7684\u957f\u5ea6 = 2^5=32\uff0c\u610f\u5473\u7740\u670932\u4e2a\u6876\nnoverflow uint16 // \u6ea2\u51fa\u6876\u7684\u5927\u6982\u6570\u91cf\nhash0     uint32 // \u54c8\u5e0c\u79cd\u5b50\nbuckets    unsafe.Pointer // \u6307\u5411buckets\u6570\u7ec4\u7684\u6307\u9488\uff0c\u6570\u7ec4\u5927\u5c0f\u4e3a2^B\uff0c\u5982\u679c\u5143\u7d20\u4e2a\u6570\u4e3a0\uff0c\u5b83\u4e3anil\u3002\noldbuckets unsafe.Pointer // \u5982\u679c\u53d1\u751f\u6269\u5bb9\uff0coldbuckets\u662f\u6307\u5411\u8001\u7684buckets\u6570\u7ec4\u7684\u6307\u9488\uff0c\n// \u8001\u7684buckets\u6570\u7ec4\u5927\u5c0f\u662f\u65b0\u7684buckets\u76841/2;\u975e\u6269\u5bb9\u72b6\u6001\u4e0b\uff0c\u5b83\u4e3anil\u3002\nnevacuate  uintptr        // \u8868\u793a\u6269\u5bb9\u8fdb\u5ea6\uff0c\u5c0f\u4e8e\u6b64\u5730\u5740\u7684buckets\u4ee3\u8868\u5df2\u642c\u8fc1\u5b8c\u6210\u3002\nextra *mapextra // \u8fd9\u4e2a\u5b57\u6bb5\u662f\u4e3a\u4e86\u4f18\u5316GC\u626b\u63cf\u800c\u8bbe\u8ba1\u7684\u3002\u5f53key\u548cvalue\u5747\u4e0d\u5305\u542b\u6307\u9488\n// \u5e76\u4e14\u90fd\u53ef\u4ee5inline\u65f6\u4f7f\u7528\u3002extra\u662f\u6307\u5411mapextra\u7c7b\u578b\u7684\u6307\u9488\u3002\n}\n</code></pre></li> <li>bmap\u7ed3\u6784 <pre><code>bucketCntBits = 3\nbucketCnt     = 1 &lt;&lt; bucketCntBits\n// A bucket for a Go map.\ntype bmap struct {\n// tophash generally contains the top byte of the hash value\n// for each key in this bucket. If tophash[0] &lt; minTopHash,\n// tophash[0] is a bucket evacuation state instead.\ntophash [bucketCnt]uint8\n// Followed by bucketCnt keys and then bucketCnt elems.\n// NOTE: packing all the keys together and then all the elems together makes the\n// code a bit more complicated than alternating key/elem/key/elem/... but it allows\n// us to eliminate padding which would be needed for, e.g., map[int64]int8.\n// Followed by an overflow pointer.\n// len\u4e3a8\u7684\u6570\u7ec4\n// \u7528\u6765\u5feb\u901f\u5b9a\u4f4dkey\u662f\u5426\u5728\u8fd9\u4e2abmap\u4e2d\n// \u6876\u7684\u69fd\u4f4d\u6570\u7ec4\uff0c\u4e00\u4e2a\u6876\u6700\u591a8\u4e2a\u69fd\u4f4d\uff0c\u5982\u679ckey\u6240\u5728\u7684\u69fd\u4f4d\u5728tophash\u4e2d\uff0c\u5219\u4ee3\u8868\u8be5key\u5728\u8fd9\u4e2a\u6876\u4e2d\n// key \u5355\u72ec\u653e\u5728\u4e00\u8d77\uff0cvalue\u5355\u72ec\u653e\u5728\u4e00\u8d77\uff0c\u76f8\u540c\u7684\u7c7b\u578b\u653e\u5728\u4e00\u8d77\uff0c\u51cf\u5c11\u7a7a\u95f4\u6d6a\u8d39\uff0c\n}\n</code></pre></li> <li>mapextra\u7ed3\u6784 <pre><code>// mapextra holds fields that are not present on all maps.\n// \u5b57\u9762\u7406\u89e3\u9644\u52a0\u5b57\u6bb5\ntype mapextra struct {\n// If both key and elem do not contain pointers and are inline, then we mark bucket\n// type as containing no pointers. This avoids scanning such maps.\n// However, bmap.overflow is a pointer. In order to keep overflow buckets\n// alive, we store pointers to all overflow buckets in hmap.extra.overflow and hmap.extra.oldoverflow.\n// overflow and oldoverflow are only used if key and elem do not contain pointers.\n// overflow contains overflow buckets for hmap.buckets.\n// oldoverflow contains overflow buckets for hmap.oldbuckets.\n// The indirection allows to store a pointer to the slice in hiter.\n// \u5982\u679c key \u548c value \u90fd\u4e0d\u5305\u542b\u6307\u9488\uff0c\u5e76\u4e14\u53ef\u4ee5\u88ab inline(&lt;=128 \u5b57\u8282)\n// \u5c31\u4f7f\u7528 hmap\u7684extra\u5b57\u6bb5 \u6765\u5b58\u50a8 overflow buckets\uff0c\u8fd9\u6837\u53ef\u4ee5\u907f\u514d GC \u626b\u63cf\u6574\u4e2a map\n// \u7136\u800c bmap.overflow \u4e5f\u662f\u4e2a\u6307\u9488\u3002\u8fd9\u65f6\u5019\u6211\u4eec\u53ea\u80fd\u628a\u8fd9\u4e9b overflow \u7684\u6307\u9488\n// \u90fd\u653e\u5728 hmap.extra.overflow \u548c hmap.extra.oldoverflow \u4e2d\u4e86\n// overflow \u5305\u542b\u7684\u662f hmap.buckets \u7684 overflow \u7684 buckets\n// oldoverflow \u5305\u542b\u6269\u5bb9\u65f6\u7684 hmap.oldbuckets \u7684 overflow \u7684 bucket\noverflow    *[]*bmap\noldoverflow *[]*bmap\n// nextOverflow holds a pointer to a free overflow bucket.\nnextOverflow *bmap\n}\n</code></pre></li> </ul>"},{"location":"go/map/#tophash","title":"tophash\u533a\u57df","text":"<ul> <li>\u5411 map \u63d2\u5165\u4e00\u6761\u6570\u636e\uff0c\u6216\u8005\u662f\u4ece map \u6309 key \u67e5\u8be2\u6570\u636e\u7684\u65f6\u5019\uff0c\u8fd0\u884c\u65f6\u90fd\u4f1a\u4f7f\u7528\u54c8\u5e0c\u51fd\u6570\u5bf9 key \u505a\u54c8\u5e0c\u8fd0\u7b97\uff0c\u5e76\u83b7\u5f97\u4e00\u4e2a\u54c8\u5e0c\u503c\uff08hashcode\uff09</li> <li>\u8fd0\u884c\u65f6\u4f1a\u628a hashcode\u201c\u4e00\u5206\u4e3a\u4e8c\u201d\u6765\u770b\u5f85\uff0c\u5176\u4e2d\u4f4e\u4f4d\u533a\u7684\u503c\u7528\u4e8e\u9009\u5b9a bucket\uff0c\u9ad8\u4f4d\u533a\u7684\u503c\u7528\u4e8e\u5728\u67d0\u4e2a bucket \u4e2d\u786e\u5b9a key \u7684\u4f4d\u7f6e</li> <li>\u6bcf\u4e2a bucket \u7684 tophash \u533a\u57df\u5176\u5b9e\u662f\u7528\u6765\u5feb\u901f\u5b9a\u4f4d key \u4f4d\u7f6e\u7684\uff0c\u907f\u514d\u4e86\u9010\u4e2a key \u8fdb\u884c\u6bd4\u8f83\u8fd9\u79cd\u4ee3\u4ef7\u8f83\u5927\u7684\u64cd\u4f5c </li> </ul>"},{"location":"go/map/#map_5","title":"\u4e3a\u4ec0\u4e48\u904d\u5386map\u65e0\u5e8f\uff1f","text":"<ul> <li>range map\uff0c\u521d\u59cb\u5316\u65f6\u8c03\u7528<code>fastrand()</code>\u968f\u673a\u4e00\u4e2a\u6570\u5b57\uff0c\u51b3\u5b9a\u672c\u6b21range\u7684\u8d77\u59cb\u70b9 <pre><code>// mapiterinit initializes the hiter struct used for ranging over maps.\n// The hiter struct pointed to by 'it' is allocated on the stack\n// by the compilers order pass or on the heap by reflect_mapiterinit.\n// Both need to have zeroed hiter since the struct contains pointers.\nfunc mapiterinit(t *maptype, h *hmap, it *hiter) {\n// \u7701\u7565\u4e00\u90e8\u5206\n// decide where to start\n// \u5f00\u59cb\u8fed\u4ee3\u65f6\u4f1a\u6709\u4e00\u4e2a\u968f\u673a\u6570\uff0c\u51b3\u5b9a\u8d77\u59cb\u4f4d\u7f6e\nr := uintptr(fastrand())\nif h.B &gt; 31-bucketCntBits {\nr += uintptr(fastrand()) &lt;&lt; 31\n}\nit.startBucket = r &amp; bucketMask(h.B)\nit.offset = uint8(r &gt;&gt; h.B &amp; (bucketCnt - 1))\n// iterator state\nit.bucket = it.startBucket\n// Remember we have an iterator.\n// Can run concurrently with another mapiterinit().\nif old := h.flags; old&amp;(iterator|oldIterator) != iterator|oldIterator {\natomic.Or8(&amp;h.flags, iterator|oldIterator)\n}\nmapiternext(it)\n}\n</code></pre></li> </ul>"},{"location":"go/map/#map_6","title":"\u600e\u4e48\u6709\u5e8f\u904d\u5386map","text":"<ul> <li>\u5148\u53d6\u51famap\u7684key</li> <li>\u5bf9key\u8fdb\u884c\u6392\u5e8f</li> <li>\u5faa\u73af\u6392\u5e8f\u540e\u7684key\uff0c\u5b9e\u73b0\u6709\u5e8f\u904d\u5386map</li> </ul>"},{"location":"go/map/#map_7","title":"\u4e3a\u4ec0\u4e48map\u975e\u7ebf\u7a0b\u5b89\u5168","text":"<ul> <li>\u5e76\u53d1\u8bbf\u95ee\u9700\u8981\u63a7\u5236\u9501\u76f8\u5173\uff0c\u9632\u6b62\u51fa\u73b0\u8d44\u6e90\u7ade\u4e89</li> <li>\u5927\u90e8\u5206\u4e0d\u9700\u8981\u4ece\u591a\u4e2agoroutine\u540c\u65f6\u8bfb\u5199map\uff0c\u52a0\u9501\u53cd\u800c\u9020\u6210\u6027\u80fd\u964d\u4f4e</li> </ul> <pre><code>func mapiternext(it *hiter) {\nh := it.h\nif raceenabled {\ncallerpc := getcallerpc()\nracereadpc(unsafe.Pointer(h), callerpc, funcPC(mapiternext))\n}\nif h.flags&amp;hashWriting != 0 {\n// \u76f4\u63a5\u629b\u51fa\u5f02\u5e38\uff0cfatal error\nthrow(\"concurrent map iteration and map write\")\n}\nt := it.t\nbucket := it.bucket\nb := it.bptr\ni := it.i\ncheckBucket := it.checkBucket\n// \u7701\u7565\u90e8\u5206\u4ee3\u7801\n}\n</code></pre>"},{"location":"go/map/#map_8","title":"\u7ebf\u7a0b\u5b89\u5168\u7684map\u600e\u4e48\u5b9e\u73b0","text":"<ul> <li>\u4f7f\u7528\u8bfb\u5199\u9501 <code>map</code> + <code>sync.RWMutex</code></li> <li>sync.Map</li> </ul>"},{"location":"go/map/#map_9","title":"map\u6269\u5bb9\u7b56\u7565","text":"<ul> <li>\u88c5\u8f7d\u56e0\u5b50\u8d85\u8fc7\u9608\u503c\uff0c\u6e90\u7801\u91cc\u5b9a\u4e49\u7684\u9608\u503c\u662f 6.5</li> <li>overflow \u7684 bucket \u6570\u91cf\u8fc7\u591a\uff1a\u5f53 B \u5c0f\u4e8e 15\uff0c\u4e5f\u5373 bucket \u603b\u6570\u5c0f\u4e8e 2^15 \u65f6\uff0coverflow \u7684 bucket \u6570\u91cf\u8d85\u8fc7 2^B\uff1b\u5f53 B &gt;= 15\uff0c\u4e5f\u5373 bucket \u603b\u6570\u5927\u4e8e\u7b49\u4e8e 2^15\u65f6\uff0coverflow \u7684 bucket \u6570\u91cf\u8d85\u8fc7 2^15\u3002</li> <li>\u547d\u4e2d\u88c5\u8f7d\u56e0\u5b50\u589e\u91cf\u6269\u5bb9</li> <li>\u547d\u4e2d\u6ea2\u51fa\u6876\u592a\u591a\uff0c\u7b49\u91cf\u6269\u5bb9</li> <li>\u6269\u5bb9\u65f6\uff0c\u53ea\u662f\u628a\u539f\u6765\u7684\u6876\u6302\u8f7d\u5230\u65b0\u7684\u6876\u4e0a\uff0c\u7136\u540e\u91c7\u7528\u589e\u91cf\u590d\u5236\u53bb\u8fc1\u79fb\u6876\u5185\u7684\u6570\u636e</li> </ul> <pre><code>// Maximum average load of a bucket that triggers growth is 6.5.\n// Represent as loadFactorNum/loadFactorDen, to allow integer math.\nloadFactorNum = 13\nloadFactorDen = 2\n// growing reports whether h is growing. The growth may be to the same size or bigger.\nfunc (h *hmap) growing() bool {\nreturn h.oldbuckets != nil\n}\n// overLoadFactor reports whether count items placed in 1&lt;&lt;B buckets is over loadFactor.\nfunc overLoadFactor(count int, B uint8) bool {\nreturn count &gt; bucketCnt &amp;&amp; uintptr(count) &gt; loadFactorNum*(bucketShift(B)/loadFactorDen)\n}\n// tooManyOverflowBuckets reports whether noverflow buckets is too many for a map with 1&lt;&lt;B buckets.\n// Note that most of these overflow buckets must be in sparse use;\n// if use was dense, then we'd have already triggered regular map growth.\nfunc tooManyOverflowBuckets(noverflow uint16, B uint8) bool {\n// If the threshold is too low, we do extraneous work.\n// If the threshold is too high, maps that grow and shrink can hold on to lots of unused memory.\n// \"too many\" means (approximately) as many overflow buckets as regular buckets.\n// See incrnoverflow for more details.\nif B &gt; 15 {\nB = 15\n}\n// 15 &amp; 15 = 15\n// \u5224\u65ad\u7b26\u53f3\u8fb9\u6700\u5927\u7684\u7ed3\u679c\u5c31\u662f1 &lt;&lt; 15\n// \u8fd9\u4e2a\u64cd\u4f5c\u53ef\u80fd\u662f\u89c1\u7684\u592a\u5c11\uff0c\u4e3a\u4ec0\u4e48\u8981\u752815\u5462\uff1f\n// The compiler doesn't see here that B &lt; 16; mask B to generate shorter shift code.\nreturn noverflow &gt;= uint16(1)&lt;&lt;(B&amp;15)\n}\n// Did not find mapping for key. Allocate new cell &amp; add entry.\n// If we hit the max load factor or we have too many overflow buckets,\n// and we're not already in the middle of growing, start growing.\n// \u6700\u5927\u88c5\u8f7d\u56e0\u5b50\u6216\u8005\u6ea2\u51fa\u6876\u592a\u591a\uff0c\u7136\u540e\u8fd8\u6ca1\u6709\u5728\u6269\u5bb9\u72b6\u6001\uff0c\u5f00\u59cb\u6269\u5bb9\nif !h.growing() &amp;&amp; (overLoadFactor(h.count+1, h.B) || tooManyOverflowBuckets(h.noverflow, h.B)) {\nhashGrow(t, h)\ngoto again\n}\nfunc hashGrow(t *maptype, h *hmap) {\n// \u547d\u4e2d\u88c5\u8f7d\u56e0\u5b50\uff0c\u589e\u91cf\u6269\u5bb9\n// \u6ea2\u51fa\u6876\u592a\u591a\uff0c\u7b49\u91cf\u6269\u5bb9\n// If we've hit the load factor, get bigger.\n// Otherwise, there are too many overflow buckets,\n// so keep the same number of buckets and \"grow\" laterally.\nbigger := uint8(1)\nif !overLoadFactor(h.count+1, h.B) {\nbigger = 0\nh.flags |= sameSizeGrow\n}\noldbuckets := h.buckets\nnewbuckets, nextOverflow := makeBucketArray(t, h.B+bigger, nil)\nflags := h.flags &amp;^ (iterator | oldIterator)\nif h.flags&amp;iterator != 0 {\nflags |= oldIterator\n}\n// commit the grow (atomic wrt gc)\nh.B += bigger // \u5982\u679cbigger\u662f0\u5c31\u662f\u7b49\u91cf\u6269\u5bb9\uff0c\u662f1\u5c31\u662f2\u500d\uff0c\u7ffb\u500d\u6269\u5bb9\nh.flags = flags\nh.oldbuckets = oldbuckets\nh.buckets = newbuckets\nh.nevacuate = 0\nh.noverflow = 0\nif h.extra != nil &amp;&amp; h.extra.overflow != nil {\n// Promote current overflow buckets to the old generation.\nif h.extra.oldoverflow != nil {\nthrow(\"oldoverflow is not nil\")\n}\nh.extra.oldoverflow = h.extra.overflow\nh.extra.overflow = nil\n}\nif nextOverflow != nil {\nif h.extra == nil {\nh.extra = new(mapextra)\n}\nh.extra.nextOverflow = nextOverflow\n}\n// \u54c8\u5e0c\u8868\u6570\u636e\u7684\u5b9e\u9645\u590d\u5236\u662f\u589e\u91cf\u5b8c\u6210\u7684\n// \u901a\u8fc7growWork() \u548cevacuate()\u3002\n// the actual copying of the hash table data is done incrementally\n// by growWork() and evacuate().\n}\n// \u5199\u6216\u8005\u5220map\u4e2d\u7684\u5143\u7d20\u624d\u4f1a\u8c03\u7528growWork\n// mapassign\n// mapdelete\nfunc growWork(t *maptype, h *hmap, bucket uintptr) {\n// make sure we evacuate the oldbucket corresponding\n// to the bucket we're about to use\nevacuate(t, h, bucket&amp;h.oldbucketmask())\n// evacuate one more oldbucket to make progress on growing\nif h.growing() {\nevacuate(t, h, h.nevacuate)\n}\n}\n// \u8fc1\u79fb\u6876\u5185\u6570\u636e\nfunc evacuate(t *maptype, h *hmap, oldbucket uintptr) {\nb := (*bmap)(add(h.oldbuckets, oldbucket*uintptr(t.bucketsize)))\nnewbit := h.noldbuckets()\nif !evacuated(b) {\n// TODO: reuse overflow buckets instead of using new ones, if there\n// is no iterator using the old buckets.  (If !oldIterator.)\n// \u5148\u641e\u957f\u5ea62\u4e2a\u7684\u6570\u7ec4\n// xy contains the x and y (low and high) evacuation destinations.\nvar xy [2]evacDst\nx := &amp;xy[0] // \u7528\u4e00\u4e2a\nx.b = (*bmap)(add(h.buckets, oldbucket*uintptr(t.bucketsize)))\nx.k = add(unsafe.Pointer(x.b), dataOffset)\nx.e = add(x.k, bucketCnt*uintptr(t.keysize))\nif !h.sameSizeGrow() { // \u4e0d\u662f\u7b49\u91cf\u6269\u5bb9\uff0c\u518d\u7528\u53e6\u4e00\u4e2a\n// Only calculate y pointers if we're growing bigger.\n// Otherwise GC can see bad pointers.\ny := &amp;xy[1]\ny.b = (*bmap)(add(h.buckets, (oldbucket+newbit)*uintptr(t.bucketsize)))\ny.k = add(unsafe.Pointer(y.b), dataOffset)\ny.e = add(y.k, bucketCnt*uintptr(t.keysize))\n}\n</code></pre>"},{"location":"go/method/","title":"\u65b9\u6cd5","text":""},{"location":"go/method/#_1","title":"\u65b9\u6cd5","text":"<ul> <li>Go \u8bed\u8a00\u4e2d\u7684\u65b9\u6cd5\u7684\u672c\u8d28\u5c31\u662f\uff0c\u4e00\u4e2a\u4ee5\u65b9\u6cd5\u7684 receiver \u53c2\u6570\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u666e\u901a\u51fd\u6570 </li> <li>\u65b9\u6cd5\u652f\u6301\u8d4b\u503c\u7ed9\u53d8\u91cf\uff0c\u76f8\u5f53\u4e8e\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u7ed3\u6784\u4f53\u81ea\u8eab\u6216\u8005\u81ea\u8eab\u7684\u6307\u9488\u7c7b\u578b <pre><code>package main\nimport \"fmt\"\ntype T struct{}\nfunc (t *T) M(n int) {\nfmt.Println(n)\n}\nfunc (t T)N(n int) {\nfmt.Println(n)\n}\nfunc main() {\nm1 := (*T).M\nm1(&amp;T{}, 2)\nm2 := T.N\nm2(T{}, 3)\n}\n</code></pre></li> </ul>"},{"location":"go/method/#receiver","title":"\u65b9\u6cd5\u63a5\u6536receiver","text":"<p><pre><code>func (t *T\u6216T) MethodName(\u53c2\u6570\u5217\u8868) (\u8fd4\u56de\u503c\u5217\u8868) {\n// \u65b9\u6cd5\u4f53\n}\n</code></pre> - T\u4e3a\u57fa\u7c7b\u578b - receiver \u53c2\u6570\u7684\u57fa\u7c7b\u578b\u672c\u8eab\u4e0d\u80fd\u4e3a\u6307\u9488\u7c7b\u578b\u6216\u63a5\u53e3\u7c7b\u578b - \u6bcf\u4e2a\u65b9\u6cd5\u53ea\u80fd\u6709\u4e00\u4e2a receiver \u53c2\u6570 - Go \u4e0d\u652f\u6301\u5728\u65b9\u6cd5\u7684 receiver \u90e8\u5206\u653e\u7f6e\u5305\u542b\u591a\u4e2a receiver \u53c2\u6570\u7684\u53c2\u6570\u5217\u8868\uff0c\u6216\u8005\u53d8\u957f receiver \u53c2\u6570 - \u65b9\u6cd5\u63a5\u6536\u5668\uff08receiver\uff09\u53c2\u6570\u3001\u51fd\u6570 / \u65b9\u6cd5\u53c2\u6570\uff0c\u4ee5\u53ca\u8fd4\u56de\u503c\u53d8\u91cf\u5bf9\u5e94\u7684\u4f5c\u7528\u57df\u8303\u56f4\uff0c\u90fd\u662f\u51fd\u6570 / \u65b9\u6cd5\u4f53\u5bf9\u5e94\u7684\u663e\u5f0f\u4ee3\u7801\u5757 - receiver \u90e8\u5206\u7684\u53c2\u6570\u540d\u4e0d\u80fd\u4e0e\u65b9\u6cd5\u53c2\u6570\u5217\u8868\u4e2d\u7684\u5f62\u53c2\u540d\uff0c\u4ee5\u53ca\u5177\u540d\u8fd4\u56de\u503c\u4e2d\u7684\u53d8\u91cf\u540d\u5b58\u5728\u51b2\u7a81\uff0c\u5fc5\u987b\u5728\u8fd9\u4e2a\u65b9\u6cd5\u7684\u4f5c\u7528\u57df\u4e2d\u5177\u6709\u552f\u4e00\u6027 - \u5982\u679c\u5728\u65b9\u6cd5\u4f53\u4e2d\uff0c\u6211\u4eec\u6ca1\u6709\u7528\u5230 receiver \u53c2\u6570\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u7701\u7565 receiver \u7684\u53c2\u6570\u540d</p>"},{"location":"go/method/#_2","title":"\u65b9\u6cd5\u58f0\u660e\u7ea6\u675f","text":"<ul> <li>\u65b9\u6cd5\u58f0\u660e\u8981\u4e0e receiver \u53c2\u6570\u7684\u57fa\u7c7b\u578b\u58f0\u660e\u653e\u5728\u540c\u4e00\u4e2a\u5305\u5185</li> <li>\u4e0d\u80fd\u4e3a\u539f\u751f\u7c7b\u578b\uff08\u8bf8\u5982 int\u3001float64\u3001map \u7b49\uff09\u6dfb\u52a0\u65b9\u6cd5</li> <li>\u4e0d\u80fd\u8de8\u8d8a Go \u5305\u4e3a\u5176\u4ed6\u5305\u7684\u7c7b\u578b\u58f0\u660e\u65b0\u65b9\u6cd5</li> </ul>"},{"location":"go/method/#receiver_1","title":"\u9009\u62e9receiver \u539f\u5219","text":"<ul> <li>\u5982\u679c\u9700\u8981\u4fee\u6539receiver\u5185\u90e8\u5c5e\u6027\uff0c\u4f7f\u7528\u6307\u9488\u7c7b\u578b</li> <li>\u4e0d\u9700\u8981\u4fee\u6539\u5185\u90e8\u5c5e\u6027\uff0c\u4f7f\u7528\u7ed3\u6784\u4f53\u7c7b\u578b\uff0c\u4f20\u53c2\u503c\u62f7\u8d1d\uff0c\u4f46\u662f\u7ed3\u6784\u4f53\u8fc7\u5927\u65f6\uff0c\u9009\u7528\u6307\u9488\u7c7b\u578b</li> <li>\u5982\u679c T \u7c7b\u578b\u9700\u8981\u5b9e\u73b0\u67d0\u4e2a\u63a5\u53e3\uff0c\u90a3\u5c31\u8981\u4f7f\u7528 T \u4f5c\u4e3a receiver \u53c2\u6570\u7684\u7c7b\u578b\uff0c\u6765\u6ee1\u8db3\u63a5\u53e3\u7c7b\u578b\u65b9\u6cd5\u96c6\u5408\u4e2d\u7684\u6240\u6709\u65b9\u6cd5</li> </ul>"},{"location":"go/method/#_3","title":"\u65b9\u6cd5\u96c6\u5408","text":"<pre><code>- \u7528\u6765\u5224\u65ad\u4e00\u4e2a\u7c7b\u578b\u662f\u5426\u5b9e\u73b0\u4e86\u67d0\u63a5\u53e3\u7c7b\u578b\u7684\u552f\u4e00\u624b\u6bb5\n- T\u7c7b\u578b\u5b9e\u73b0\u4e86M1\u65b9\u6cd5\n- *T\u7c7b\u578b\u5b9e\u73b0\u4e86M1\u548cM2\u65b9\u6cd5\ntype Interface interface {\nM1()\nM2()\n}\ntype T struct{}\nfunc (t T) M1()  {}\nfunc (t *T) M2() {}\nfunc main() {\nvar t T\nvar pt *T\nvar i Interface\ni = pt\ni = t // cannot use t (type T) as type Interface in assignment: T does not implement Interface (M2 method has pointer receiver)\n}\n</code></pre>"},{"location":"go/method/#type","title":"type\u5b9a\u4e49\u7684\u65b0\u7c7b\u578b\u548c\u547d\u540d\u7684\u7c7b\u578b\u7684\u65b9\u6cd5\u96c6\u5408","text":"<ul> <li>\u81ea\u5b9a\u4e49\u975e\u63a5\u53e3\u7c7b\u578b\u7684 defined \u7c7b\u578b\u7684\u65b9\u6cd5\u96c6\u5408\u4e3a\u7a7a</li> <li>\u81ea\u5b9a\u4e49\u63a5\u53e3\u7c7b\u578b\u7684 defined \u7c7b\u578b\u7684\u65b9\u6cd5\u96c6\u5408\u4e3a\u63a5\u53e3\u7684\u65b9\u6cd5 <pre><code>package main\ntype T struct{}\nfunc (T) M1()  {}\nfunc (*T) M2() {}\ntype T1 T\nfunc main() {\nvar t T\nvar pt *T\nvar t1 T1\nvar pt1 *T1\ndumpMethodSet(t)\ndumpMethodSet(t1)\ndumpMethodSet(pt)\ndumpMethodSet(pt1)\n}\nmain.T's method set:\n- M1\nmain.T1's method set is empty!\n*main.T's method set:\n- M1\n- M2\n*main.T1's method set is empty!\n</code></pre></li> <li>\u65e0\u8bba\u539f\u7c7b\u578b\u662f\u63a5\u53e3\u7c7b\u578b\u8fd8\u662f\u975e\u63a5\u53e3\u7c7b\u578b\uff0c\u7c7b\u578b\u522b\u540d\u90fd\u4e0e\u539f\u7c7b\u578b\u62e5\u6709\u5b8c\u5168\u76f8\u540c\u7684\u65b9\u6cd5\u96c6\u5408 <pre><code>type T struct{}\nfunc (T) M1()  {}\nfunc (*T) M2() {}\ntype T1 = T\nfunc main() {\nvar t T\nvar pt *T\nvar t1 T1\nvar pt1 *T1\ndumpMethodSet(t)\ndumpMethodSet(t1)\ndumpMethodSet(pt)\ndumpMethodSet(pt1)\n}\nmain.T's method set:\n- M1\nmain.T's method set:\n- M1\n*main.T's method set:\n- M1\n- M2\n*main.T's method set:\n- M1\n- M2\n</code></pre></li> </ul>"},{"location":"go/nav/","title":"Nav","text":"<ul> <li>\u7b80\u8ff0</li> <li>Map</li> <li>SyncMap</li> <li>Go\u5e76\u53d1</li> <li>Goroutine &amp;&amp; Thread</li> <li>Goroutine \u72b6\u6001</li> <li>Goroutine \u6cc4\u6f0f</li> <li>\u9650\u6d41\u7b97\u6cd5&amp;&amp;\u9650\u6d41\u5668</li> <li>Channel</li> <li>Go\u5f00\u6e90\u9879\u76ee</li> <li>Go Modules\u6784\u5efa\u6a21\u5f0f</li> <li>Go Mod6\u4e2a\u5e38\u89c4\u64cd\u4f5c</li> <li>\u4ee3\u7801\u5757&amp;&amp;\u4f5c\u7528\u57df</li> <li>\u6570\u503c\u7c7b\u578b</li> <li>\u5b57\u7b26\u4e32\u7c7b\u578b</li> <li>\u5e38\u91cf</li> <li>\u6570\u7ec4&amp;&amp;\u5207\u7247</li> <li>\u6742\u9879</li> <li>\u7ed3\u6784\u4f53</li> <li>panic&amp;&amp;recover</li> <li>\u6761\u4ef6&amp;&amp;\u5faa\u73af</li> <li>\u51fd\u6570</li> <li>\u65b9\u6cd5</li> <li>\u63a5\u53e3</li> <li>\u7c7b\u578b\u5d4c\u5165</li> <li>sync\u5305\u540c\u6b65\u539f\u8bed</li> <li>Socket\u6a21\u578b</li> <li>GC</li> <li>GMP</li> <li>GMP\u673a\u5236</li> <li>\u539f\u59cbHTTP SERVER</li> <li>\u8fd0\u884c\u7cfb\u7edf\u547d\u4ee4</li> <li>\u591a\u7248\u672cGO</li> <li>fmt\u5907\u5fd8</li> <li>\u7981\u6b62for\u5faa\u73af\u4e2d\u4f7f\u7528defer</li> <li>\u547d\u4ee4\u884c\u5c0f\u7a0b\u5e8f</li> </ul>"},{"location":"go/panic_recover/","title":"panic&&recover","text":""},{"location":"go/panic_recover/#defer","title":"defer","text":"<ul> <li>Go \u8bed\u8a00\u63d0\u4f9b\u7684\u4e00\u79cd\u5ef6\u8fdf\u8c03\u7528\u673a\u5236\uff0cdefer \u7684\u8fd0\u4f5c\u79bb\u4e0d\u5f00\u51fd\u6570</li> <li>\u53ea\u6709\u5728\u51fd\u6570\uff08\u548c\u65b9\u6cd5\uff09\u5185\u90e8\u624d\u80fd\u4f7f\u7528 defer</li> <li>defer \u5173\u952e\u5b57\u540e\u9762\u53ea\u80fd\u63a5\u51fd\u6570\uff08\u6216\u65b9\u6cd5\uff09\uff0c\u8fd9\u4e9b\u51fd\u6570\u88ab\u79f0\u4e3a deferred \u51fd\u6570</li> <li>defer \u5c06\u5b83\u4eec\u6ce8\u518c\u5230\u5176\u6240\u5728 Goroutine \u4e2d\uff0c\u7528\u4e8e\u5b58\u653e deferred \u51fd\u6570\u7684\u6808\u6570\u636e\u7ed3\u6784\u4e2d\uff0c\u8fd9\u4e9b deferred \u51fd\u6570\u5c06\u5728\u6267\u884c defer \u7684\u51fd\u6570\u9000\u51fa\u524d\uff0c\u6309\u540e\u8fdb\u5148\u51fa\uff08LIFO\uff09\u7684\u987a\u5e8f\u88ab\u7a0b\u5e8f\u8c03\u5ea6\u6267\u884c</li> <li>\u65e0\u8bba\u662f\u6267\u884c\u5230\u51fd\u6570\u4f53\u5c3e\u90e8\u8fd4\u56de\uff0c\u8fd8\u662f\u5728\u67d0\u4e2a\u9519\u8bef\u5904\u7406\u5206\u652f\u663e\u5f0f return\uff0c\u53c8\u6216\u662f\u51fa\u73b0 panic\uff0c\u5df2\u7ecf\u5b58\u50a8\u5230 deferred \u51fd\u6570\u6808\u4e2d\u7684\u51fd\u6570\uff0c\u90fd\u4f1a\u88ab\u8c03\u5ea6\u6267\u884c </li> </ul>"},{"location":"go/panic_recover/#defer_1","title":"defer \u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u660e\u786e\u54ea\u4e9b\u51fd\u6570\u53ef\u4ee5\u4f5c\u4e3a deferred \u51fd\u6570\uff0c\u6709\u8fd4\u56de\u503c\u7684deferred\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4f1a\u88ab\u81ea\u52a8\u4e22\u5f03<ul> <li>\u5185\u7f6e\u51fd\u6570 append\u3001cap\u3001len\u3001make\u3001new\u548cimag\u4e0d\u80fd\u88ab\u6ce8\u518c\u4e3adeferred\u51fd\u6570\uff0c\u53ef\u4ee5\u5305\u88c5\u4e00\u5c42func\uff0c\u8fdb\u884c\u8c03\u7528</li> <li>close\u3001copy\u3001delete\u3001print\u3001recover \u53ef\u4ee5\u88ab\u6ce8\u518c\u4e3adeferred\u51fd\u6570 <pre><code>Functions: \u5185\u7f6e\u51fd\u6570\u5217\u8868\nappend cap close complex copy delete imag len make new panic print println real recover\n</code></pre></li> </ul> </li> <li> <p>\u6ce8\u610f defer \u5173\u952e\u5b57\u540e\u9762\u8868\u8fbe\u5f0f\u7684\u6c42\u503c\u65f6\u673a\uff0cdefer \u5173\u952e\u5b57\u540e\u9762\u7684\u8868\u8fbe\u5f0f\uff0c\u662f\u5728\u5c06 deferred \u51fd\u6570\u6ce8\u518c\u5230 deferred \u51fd\u6570\u6808\u7684\u65f6\u5019\u8fdb\u884c\u6c42\u503c\u7684 <pre><code>package main\nimport (\n\"fmt\"\n)\nfunc foo1() {\nfor i := 0; i &lt;= 3; i++ {\ndefer fmt.Println(i)\n}\n}\nfunc foo2() {\nfor i := 0; i &lt;= 3; i++ {\ndefer func(n int) {\nfmt.Println(n)\n}(i)\n}\n}\nfunc foo3() {\nfor i := 0; i &lt;= 3; i++ {\ndefer func() {\nfmt.Println(i)\n}()\n}\n}\nfunc main() {\nfmt.Println(\"foo1 result:\")\nfoo1()\nfmt.Println(\"\\nfoo2 result:\")\nfoo2()\nfmt.Println(\"\\nfoo3 result:\")\nfoo3()\n}\n</code></pre></p> </li> <li> <p>\u77e5\u6653 defer \u5e26\u6765\u7684\u6027\u80fd\u635f\u8017</p> </li> </ul>"},{"location":"go/socket/","title":"Socket\u6a21\u578b","text":""},{"location":"go/socket/#socket","title":"Socket\u6a21\u578b","text":"<ul> <li>\u63d0\u4f9b\u963b\u585e I/O \u6a21\u578b\uff0c\u53ea\u9700\u5728 Goroutine \u4e2d\u4ee5\u6700\u7b80\u5355\u3001\u6700\u6613\u7528\u7684\u201c\u963b\u585e I/O \u6a21\u578b\u201d\u7684\u65b9\u5f0f\uff0c\u8fdb\u884c Socket \u64cd\u4f5c</li> <li>\u6bcf\u4e2a Goroutine \u5904\u7406\u4e00\u4e2a TCP \u8fde\u63a5\u6210\u4e3a\u53ef\u80fd\uff0c\u5e76\u4e14\u5728\u9ad8\u5e76\u53d1\u4e0b\u4f9d\u65e7\u8868\u73b0\u51fa\u8272</li> <li>\u5728\u8fd0\u884c\u65f6\u4e2d\u5b9e\u73b0\u4e86\u7f51\u7edc\u8f6e\u8be2\u5668\uff08netpoller)\uff0cnetpoller \u7684\u4f5c\u7528\uff0c\u5c31\u662f\u53ea\u963b\u585e\u6267\u884c\u7f51\u7edc I/O \u64cd\u4f5c\u7684 Goroutine\uff0c\u4f46\u4e0d\u963b\u585e\u6267\u884c Goroutine \u7684\u7ebf\u7a0b\uff08\u4e5f\u5c31\u662f M\uff09</li> <li>Go \u7a0b\u5e8f\u7684\u7528\u6237\u5c42\uff08\u76f8\u5bf9\u4e8e Go \u8fd0\u884c\u65f6\u5c42\uff09\u6765\u8bf4\uff0c\u5b83\u773c\u4e2d\u770b\u5230\u7684 goroutine \u91c7\u7528\u4e86\u201c\u963b\u585e I/O \u6a21\u578b\u201d\u8fdb\u884c\u7f51\u7edc I/O \u64cd\u4f5c\uff0cSocket \u90fd\u662f\u201c\u963b\u585e\u201d\u7684</li> </ul>"},{"location":"go/socket/#netpoller","title":"netpoller \u7f51\u7edc\u8f6e\u8be2\u5668","text":"<ul> <li>I/O \u591a\u8def\u590d\u7528\u673a\u5236</li> <li>\u771f\u5b9e\u7684\u5e95\u5c42\u64cd\u4f5c\u7cfb\u7edf Socket\uff0c\u662f\u975e\u963b\u585e\u7684</li> <li>\u8fd0\u884c\u65f6\u62e6\u622a\u4e86\u9488\u5bf9\u5e95\u5c42 Socket \u7684\u7cfb\u7edf\u8c03\u7528\u8fd4\u56de\u7684\u9519\u8bef\u7801\uff0c\u5e76\u901a\u8fc7 netpoller \u548c Goroutine \u8c03\u5ea6\uff0c\u8ba9 Goroutine\u201c\u963b\u585e\u201d\u5728\u7528\u6237\u5c42\u6240\u770b\u5230\u7684 Socket \u63cf\u8ff0\u7b26\u4e0a</li> </ul>"},{"location":"go/socket/#netpoller_1","title":"netpoller\u6d41\u7a0b","text":"<ul> <li>\u7528\u6237\u5c42\u9488\u5bf9\u67d0\u4e2a Socket \u63cf\u8ff0\u7b26\u53d1\u8d77read\u64cd\u4f5c\u65f6\uff0c\u5982\u679c\u8fd9\u4e2a Socket \u5bf9\u5e94\u7684\u8fde\u63a5\u4e0a\u8fd8\u6ca1\u6709\u6570\u636e\uff0c\u8fd0\u884c\u65f6\u5c06\u8fd9\u4e2a Socket \u63cf\u8ff0\u7b26\u52a0\u5165\u5230 netpoller \u4e2d\u76d1\u542c\uff0c\u540c\u65f6\u53d1\u8d77\u6b64\u6b21\u8bfb\u64cd\u4f5c\u7684 Goroutine \u4f1a\u88ab\u6302\u8d77</li> <li>Go \u8fd0\u884c\u65f6\u6536\u5230 Socket \u6570\u636e\u53ef\u8bfb\u7684\u901a\u77e5\uff0cGo \u8fd0\u884c\u65f6\u91cd\u65b0\u5524\u9192\u7b49\u5f85\u5728\u8fd9\u4e2a Socket \u4e0a\u51c6\u5907\u8bfb\u6570\u636e\u7684 Goroutine</li> <li>\u4ece Goroutine \u7684\u89c6\u89d2\u6765\u770b\uff0c\u5c31\u50cf\u662f read \u64cd\u4f5c\u4e00\u76f4\u963b\u585e\u5728 Socket \u63cf\u8ff0\u7b26\u4e0a</li> </ul>"},{"location":"go/socket/#io","title":"\u4e0d\u540c\u7cfb\u7edfio\u591a\u8def\u590d\u7528\u6a21\u578b","text":"<ul> <li>Linux epoll</li> <li>Windows iocp</li> <li>FreeBSD/MacOS kqueue</li> <li>Solaris event port</li> </ul>"},{"location":"go/socket/#socket-listenaccept","title":"socket \u670d\u52a1\u7aef\u76d1\u542c\uff08listen\uff09\u4e0e\u63a5\u6536\uff08Accept\uff09","text":"<ul> <li>\u670d\u52a1\u7aef\u7a0b\u5e8f\u901a\u5e38\u91c7\u7528\u4e00\u4e2a Goroutine \u5904\u7406\u4e00\u4e2a\u8fde\u63a5 <pre><code> func handleConn(c net.Conn) {\ndefer c.Close()\nfor {\n// read from the connection\n// ... ...\n// write to the connection\n//... ...\n}\n}\nfunc main() {\nl, err := net.Listen(\"tcp\", \":8888\")\nif err != nil {\nfmt.Println(\"listen error:\", err)\nreturn\n}\nfor {\nc, err := l.Accept()\nif err != nil {\nfmt.Println(\"accept error:\", err)\nbreak\n}\n// start a new goroutine to handle\n// the new connection.\ngo handleConn(c)\n}\n}\n</code></pre></li> </ul>"},{"location":"go/socket/#socket_1","title":"socket\u5ba2\u6237\u7aef","text":"<pre><code>conn, err := net.Dial(\"tcp\", \"localhost:8888\")\nconn, err := net.DialTimeout(\"tcp\", \"localhost:8888\", 2 * time.Second)\n</code></pre>"},{"location":"go/socket/#socket_2","title":"socket \u5168\u53cc\u5de5\u901a\u4fe1","text":"<ul> <li>\u901a\u4fe1\u53cc\u65b9\u901a\u8fc7\u5404\u81ea\u83b7\u5f97\u7684 Socket\uff0c\u53ef\u4ee5\u5728\u5411\u5bf9\u65b9\u53d1\u9001\u6570\u636e\u5305\u7684\u540c\u65f6\uff0c\u63a5\u6536\u6765\u81ea\u5bf9\u65b9\u7684\u6570\u636e\u5305</li> <li>\u4efb\u4f55\u4e00\u65b9\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u90fd\u4f1a\u4e3a\u5df2\u5efa\u7acb\u7684\u8fde\u63a5\u5206\u914d\u4e00\u4e2a\u53d1\u9001\u7f13\u51b2\u533a\u548c\u4e00\u4e2a\u63a5\u6536\u7f13\u51b2\u533a</li> <li>\u5ba2\u6237\u7aef\u4f1a\u901a\u8fc7\u6210\u529f\u8fde\u63a5\u670d\u52a1\u7aef\u540e\u5f97\u5230\u7684 conn\uff08\u5c01\u88c5\u4e86\u5e95\u5c42\u7684 socket\uff09\u5411\u670d\u52a1\u7aef\u53d1\u9001\u6570\u636e\u5305</li> <li>\u6570\u636e\u5305\u4f1a\u5148\u8fdb\u5165\u5230\u5df1\u65b9\uff08\u5ba2\u6237\u7aef\uff09\u7684\u53d1\u9001\u7f13\u51b2\u533a\u4e2d\uff0c\u4e4b\u540e\uff0c\u8fd9\u4e9b\u6570\u636e\u4f1a\u88ab\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u901a\u8fc7\u7f51\u7edc\u8bbe\u5907\u548c\u94fe\u8def\uff0c\u53d1\u5230\u670d\u52a1\u7aef\u7684\u63a5\u6536\u7f13\u51b2\u533a\u4e2d\uff0c\u670d\u52a1\u7aef\u7a0b\u5e8f\u518d\u901a\u8fc7\u4ee3\u8868\u5ba2\u6237\u7aef\u8fde\u63a5\u7684 conn \u8bfb\u53d6\u670d\u52a1\u7aef\u63a5\u6536\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e</li> </ul>"},{"location":"go/socket/#socket_3","title":"socket \u8bfb\u64cd\u4f5c","text":"<ul> <li>Socket \u4e2d\u65e0\u6570\u636e\uff0c\u8bfb\u64cd\u4f5c\u963b\u585e</li> <li>Socket \u4e2d\u6709\u90e8\u5206\u6570\u636e\uff0c\u6210\u529f\u8bfb\u51fa\u8fd9\u90e8\u5206\u6570\u636e\uff0c\u5e76\u8fd4\u56de\uff0c\u800c\u4e0d\u662f\u7b49\u5f85\u671f\u671b\u957f\u5ea6\u6570\u636e\u5168\u90e8\u8bfb\u53d6\u540e\uff0c\u518d\u8fd4\u56de</li> <li>Socket \u4e2d\u6709\u8db3\u591f\u6570\u636e\uff0c\u8bfb\u51faread\u64cd\u4f5c\u7684\u6570\u636e\uff0c\u5269\u4f59\u6570\u636e\u5206\u591a\u6b21\u8bfb\u53d6</li> <li>Socket \u8bbe\u7f6e\u8bfb\u8d85\u65f6\uff0cSetReadDeadline \u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u7edd\u5bf9\u65f6\u95f4\u4f5c\u4e3a\u8d85\u65f6\u7684 deadline\uff0c\u4e00\u65e6\u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u8bbe\u7f6e\u4e86\u67d0\u4e2a socket \u7684 Read deadline\uff0c\u65e0\u8bba\u540e\u7eed\u7684 Read \u64cd\u4f5c\u662f\u5426\u8d85\u65f6\uff0c\u53ea\u8981\u4e0d\u91cd\u65b0\u8bbe\u7f6e Deadline\uff0c\u540e\u9762\u4e0e\u8fd9\u4e2a socket \u6709\u5173\u7684\u6240\u6709\u8bfb\u64cd\u4f5c\uff0c\u90fd\u4f1a\u8fd4\u56de\u8d85\u65f6\u5931\u8d25\u9519\u8bef</li> <li>\u53d6\u6d88\u8d85\u65f6\u8bbe\u7f6e\uff0c\u53ef\u4ee5\u4f7f\u7528 SetReadDeadline\uff08time.Time{}\uff09</li> </ul>"},{"location":"go/socket/#socket_4","title":"socket \u5199\u64cd\u4f5c","text":"<ul> <li>Write \u8c03\u7528\u7684\u8fd4\u56de\u503c n \u7684\u503c\uff0c\u4e0e\u9884\u671f\u8981\u5199\u5165\u7684\u6570\u636e\u957f\u5ea6\u76f8\u7b49\uff0c\u4e14 err = nil \u65f6\uff0c\u4ee3\u8868\u5199\u5165\u6210\u529f</li> <li>\u5199\u963b\u585e\uff0c\u53d1\u9001\u65b9\u5c06\u5bf9\u65b9\u7684\u63a5\u6536\u7f13\u51b2\u533a\uff0c\u4ee5\u53ca\u81ea\u8eab\u7684\u53d1\u9001\u7f13\u51b2\u533a\u90fd\u5199\u6ee1\u540e\uff0c\u518d\u8c03\u7528 Write \u65b9\u6cd5\u5c31\u4f1a\u51fa\u73b0\u963b\u585e</li> <li>\u5199\u5165\u90e8\u5206\u6570\u636e</li> <li>\u5199\u5165\u8d85\u65f6\uff0cSetWriteDeadline\uff0c\u5982\u679c\u51fa\u73b0\u8d85\u65f6\uff0c\u65e0\u8bba\u540e\u7eed Write \u65b9\u6cd5\u662f\u5426\u6210\u529f\uff0c\u5982\u679c\u4e0d\u91cd\u65b0\u8bbe\u7f6e\u5199\u8d85\u65f6\u6216\u53d6\u6d88\u5199\u8d85\u65f6\uff0c\u540e\u7eed\u5bf9 Socket \u7684\u5199\u64cd\u4f5c\u90fd\u5c06\u8d85\u65f6\u5931\u8d25</li> </ul>"},{"location":"go/socket/#socket_5","title":"socket \u5e76\u53d1\u8bfb\u5199","text":"<ul> <li>\u53ef\u4ee5\u7528\uff0c\u4f46\u662f\u6ca1\u5fc5\u8981</li> <li>\u5e76\u53d1\u5199\uff0c\u5199\u5165\u987a\u5e8f\u4f1a\u4e71</li> <li>\u5e76\u53d1\u8bfb\uff0c\u8bfb\u53d6\u7684\u6570\u636e\u662f\u4e00\u90e8\u5206\uff0c\u4e1a\u52a1\u5904\u7406\u903b\u8f91\u590d\u6742</li> </ul>"},{"location":"go/socket/#socket_6","title":"socket \u5173\u95ed","text":""},{"location":"go/socket/#_1","title":"\u6709\u6570\u636e\u5173\u95ed","text":"<ul> <li>\u6709\u6570\u636e\u5173\u95ed\u201d\u662f\u6307\u5728\u5ba2\u6237\u7aef\u5173\u95ed\u8fde\u63a5\uff08Socket\uff09\u65f6\uff0cSocket \u4e2d\u8fd8\u6709\u670d\u52a1\u7aef\u5c1a\u672a\u8bfb\u53d6\u7684\u6570\u636e</li> <li>\u670d\u52a1\u7aef\u7684 Read \u4f1a\u6210\u529f\u5c06\u5269\u4f59\u6570\u636e\u8bfb\u53d6\u51fa\u6765</li> <li>\u6700\u540e\u4e00\u6b21 Read \u64cd\u4f5c\u5c06\u5f97\u5230io.EOF\u9519\u8bef\u7801</li> </ul>"},{"location":"go/socket/#_2","title":"\u65e0\u6570\u636e\u5173\u95ed","text":"<ul> <li>\u670d\u52a1\u7aef\u76f4\u63a5\u8bfb\u5230io.EOF <p>\u5ba2\u6237\u7aef\u5173\u95ed Socket \u540e\uff0c\u5982\u679c\u670d\u52a1\u7aef Socket \u5c1a\u672a\u5173\u95ed\uff0c\u8fd9\u4e2a\u65f6\u5019\u670d\u52a1\u7aef\u5411 Socket \u7684\u5199\u5165\u64cd\u4f5c\u4f9d\u7136\u53ef\u80fd\u4f1a\u6210\u529f\uff0c\u56e0\u4e3a\u6570\u636e\u4f1a\u6210\u529f\u5199\u5165\u5df1\u65b9\u7684\u5185\u6838 socket \u7f13\u51b2\u533a\u4e2d\uff0c\u5373\u4fbf\u6700\u7ec8\u53d1\u4e0d\u5230\u5bf9\u65b9 socket \u7f13\u51b2\u533a</p> </li> </ul>"},{"location":"go/string_type/","title":"\u5b57\u7b26\u4e32\u7c7b\u578b","text":""},{"location":"go/string_type/#string","title":"\u539f\u751f\u5b57\u7b26\u4e32 string\u7c7b\u578b","text":"<ul> <li>\u6570\u636e\u4e0d\u53ef\u53d8\uff0c\u63d0\u9ad8\u4e86\u5b57\u7b26\u4e32\u7684\u5e76\u53d1\u5b89\u5168\u6027\u548c\u5b58\u50a8\u5229\u7528\u7387</li> <li>\u6ca1\u6709\"\\0\"\u7ed3\u5c3e\uff0c\u83b7\u53d6\u957f\u5ea6\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f\u5e38\u6570\u65f6\u95f4</li> <li>\u539f\u751f\u5b57\u7b26\u4e32\u6240\u89c1\u5373\u6240\u5f97\uff0c\u6784\u9020\u591a\u884c\u5b57\u7b26\u4e32\u66f4\u52a0\u7b80\u5355\uff0c\u591a\u884c\u5b57\u7b26\u4e32\u7528\u53cd\u5f15\u53f7\u5305\u88f9</li> <li>\u91c7\u7528unicode\u5b57\u7b26\u96c6\uff0c\u5bf9\u975eASCII\u5b57\u7b26\u63d0\u4f9b\u539f\u751f\u65e5\u652f\u6301\uff0c\u6d88\u9664\u4e0d\u540c\u73af\u5883\u4e0b\u4e71\u7801\u95ee\u9898</li> </ul>"},{"location":"go/string_type/#go","title":"Go\u5b57\u7b26\u4e32\u7ec4\u6210","text":"<ul> <li>\u5b57\u8282\u89d2\u5ea6<ul> <li>Go \u8bed\u8a00\u4e2d\u7684\u5b57\u7b26\u4e32\u503c\u4e5f\u662f\u4e00\u4e2a\u53ef\u7a7a\u7684\u5b57\u8282\u5e8f\u5217\uff0c\u5b57\u8282\u5e8f\u5217\u4e2d\u7684\u5b57\u8282\u4e2a\u6570\u79f0\u4e3a\u8be5\u5b57\u7b26\u4e32\u7684\u957f\u5ea6</li> <li>len\u65b9\u6cd5\u8fd4\u56de\u5b57\u7b26\u4e32\u5b57\u8282\u957f\u5ea6</li> </ul> </li> <li>\u5b57\u7b26\u89c6\u89d2<ul> <li>\u5b57\u7b26\u4e32\u662f\u7531\u4e00\u4e2a\u53ef\u7a7a\u7684\u5b57\u7b26\u5e8f\u5217\u6784\u6210</li> <li>range \u5faa\u73af\u5b57\u7b26</li> <li>utf8.RuneCountInString(s)\u7edf\u8ba1\u5b57\u7b26\u4e2a\u6570</li> </ul> </li> </ul>"},{"location":"go/string_type/#rune","title":"rune\u7c7b\u578b\u4e0e\u5b57\u9762\u503c","text":"<ul> <li> <p>Go \u4f7f\u7528 rune \u8fd9\u4e2a\u7c7b\u578b\u6765\u8868\u793a\u4e00\u4e2a Unicode \u7801\u70b9\u3002rune \u672c\u8d28\u4e0a\u662f int32 \u7c7b\u578b\u7684\u522b\u540d\u7c7b\u578b\uff0c\u5b83\u4e0e int32 \u7c7b\u578b\u662f\u5b8c\u5168\u7b49\u4ef7\u7684</p> <p>Unicode \u7801\u70b9\uff0c\u5c31\u662f\u6307\u5c06 Unicode \u5b57\u7b26\u96c6\u4e2d\u7684\u6240\u6709\u5b57\u7b26\u201c\u6392\u6210\u4e00\u961f\u201d\uff0c\u5b57\u7b26\u5728\u8fd9\u4e2a\u201c\u961f\u4f0d\u201d\u4e2d\u7684\u4f4d\u6b21\uff0c\u5c31\u662f\u5b83\u5728 Unicode \u5b57\u7b26\u96c6\u4e2d\u7684\u7801\u70b9\u3002\u4e5f\u5c31\u8bf4\uff0c\u4e00\u4e2a\u7801\u70b9\u552f\u4e00\u5bf9\u5e94\u4e00\u4e2a\u5b57\u7b26</p> </li> <li> <p>\u4e00\u4e2a rune \u5b9e\u4f8b\u5c31\u662f\u4e00\u4e2a Unicode \u5b57\u7b26\uff0c\u4e00\u4e2a Go \u5b57\u7b26\u4e32\u4e5f\u53ef\u4ee5\u88ab\u89c6\u4e3a rune \u5b9e\u4f8b\u7684\u96c6\u5408</p> </li> <li>\u53ef\u4ee5\u901a\u8fc7\u5b57\u7b26\u5b57\u9762\u503c\u6765\u521d\u59cb\u5316\u4e00\u4e2a rune \u53d8\u91cf</li> </ul>"},{"location":"go/string_type/#_1","title":"\u5b57\u9762\u503c","text":"<ul> <li>\u901a\u8fc7\u5355\u5f15\u53f7\u62ec\u8d77\u7684\u5b57\u7b26\u5b57\u9762\u503c <pre><code>'a'  // ASCII\u5b57\u7b26\n'\u4e2d' // Unicode\u5b57\u7b26\u96c6\u4e2d\u7684\u4e2d\u6587\u5b57\u7b26\n'\\n' // \u6362\u884c\u5b57\u7b26\n'\\'' // \u5355\u5f15\u53f7\u5b57\u7b26\n</code></pre></li> <li>Unicode \u4e13\u7528\u7684\u8f6c\u4e49\u5b57\u7b26\\u \u6216\\U \u4f5c\u4e3a\u524d\u7f00\uff0c\u6765\u8868\u793a\u4e00\u4e2a Unicode \u5b57\u7b26<ul> <li>\\u \u540e\u9762\u63a5\u4e24\u4e2a\u5341\u516d\u8fdb\u5236\u6570\u3002\u5982\u679c\u662f\u7528\u4e24\u4e2a\u5341\u516d\u8fdb\u5236\u6570\u65e0\u6cd5\u8868\u793a\u7684 Unicode \u5b57\u7b26\uff0c\u53ef\u4ee5\u4f7f\u7528\\U</li> <li>\\U \u540e\u9762\u53ef\u4ee5\u63a5\u56db\u4e2a\u5341\u516d\u8fdb\u5236\u6570\u6765\u8868\u793a\u4e00\u4e2a Unicode \u5b57\u7b26 <pre><code>'\\u4e2d'     // \u5b57\u7b26\uff1a\u4e2d\n'\\U00004e2d' // \u5b57\u7b26\uff1a\u4e2d\n'\\u0027'     // \u5355\u5f15\u53f7\u5b57\u7b26\n</code></pre></li> </ul> </li> <li>\u76f4\u63a5\u7528\u6574\u578b\u503c\u6765\u7ed9rune\u8d4b\u503c <pre><code>'\\x27'  // \u4f7f\u7528\u5341\u516d\u8fdb\u5236\u8868\u793a\u7684\u5355\u5f15\u53f7\u5b57\u7b26\n'\\047'  // \u4f7f\u7528\u516b\u8fdb\u5236\u8868\u793a\u7684\u5355\u5f15\u53f7\u5b57\u7b26\n</code></pre></li> </ul>"},{"location":"go/string_type/#_2","title":"\u5b57\u7b26\u4e32\u5b57\u9762\u503c","text":"<ul> <li>\u4f7f\u7528\u53cc\u5f15\u53f7\u7ed9\u5b57\u7b26\u4e32\u8d4b\u503c</li> <li>\u5982\u679c\u9700\u8981\u8868\u793a\u539f\u59cb\u7684\u503c\u53ef\u4ee5\u4f7f\u7528\u8f6c\u4e49\u5b57\u7b26<code>\"\\\\xe4\\\\xb8\\\\xad\\xe5\\x9b\\xbd\\xe4\\xba\\xba\"</code> <pre><code>\"abc\\n\"\n\"\u4e2d\u56fd\u4eba\"\n\"\\u4e2d\\u56fd\\u4eba\" // \u4e2d\u56fd\u4eba\n\"\\U00004e2d\\U000056fd\\U00004eba\" // \u4e2d\u56fd\u4eba\n\"\u4e2d\\u56fd\\u4eba\" // \u4e2d\u56fd\u4eba\uff0c\u4e0d\u540c\u5b57\u7b26\u5b57\u9762\u503c\u5f62\u5f0f\u6df7\u5408\u5728\u4e00\u8d77\n\"\\xe4\\xb8\\xad\\xe5\\x9b\\xbd\\xe4\\xba\\xba\" // \u5341\u516d\u8fdb\u5236\u8868\u793a\u7684\u5b57\u7b26\u4e32\u5b57\u9762\u503c\uff1a\u4e2d\u56fd\u4eba\n</code></pre></li> </ul>"},{"location":"go/string_type/#go_1","title":"Go\u5b57\u7b26\u4e32\u5185\u90e8\u8868\u793a","text":"<ul> <li>\u672c\u8eab\u5e76\u4e0d\u771f\u6b63\u5b58\u50a8\u5b57\u7b26\u4e32\u6570\u636e</li> <li>\u7531\u4e00\u4e2a\u6307\u5411\u5e95\u5c42\u5b58\u50a8\u7684\u6307\u9488\u548c\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u5b57\u6bb5\u7ec4\u6210\u7684</li> <li>\u83b7\u53d6\u5b57\u7b26\u4e32\u957f\u5ea6\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(1)</li> <li>\u76f4\u63a5\u5c06 string \u7c7b\u578b\u901a\u8fc7\u51fd\u6570 / \u65b9\u6cd5\u53c2\u6570\u4f20\u5165\u4e5f\u4e0d\u4f1a\u5e26\u6765\u592a\u591a\u7684\u5f00\u9500 <pre><code>// $GOROOT/src/reflect/value.go\n// StringHeader\u662f\u4e00\u4e2astring\u7684\u8fd0\u884c\u65f6\u8868\u793a\ntype StringHeader struct {\nData uintptr\nLen  int\n}\n</code></pre></li> </ul> <pre><code>package main\nimport (\n\"fmt\"\n\"reflect\"\n\"unsafe\"\n)\nfunc dumpBytesArray(arr []byte) {\nfmt.Printf(\"[\")\nfor _, b := range arr {\nfmt.Printf(\"%c \", b)\n}\nfmt.Printf(\"]\\n\")\n}\nfunc main() {\nvar s = \"hello\"\nhdr := (*reflect.StringHeader)(unsafe.Pointer(&amp;s)) // \u5c06string\u7c7b\u578b\u53d8\u91cf\u5730\u5740\u663e\u5f0f\u8f6c\u578b\u4e3areflect.StringHeader\nfmt.Printf(\"0x%x\\n\", hdr.Data)                     // 0x495db9\np := (*[5]byte)(unsafe.Pointer(hdr.Data))          // \u83b7\u53d6Data\u5b57\u6bb5\u6240\u6307\u5411\u7684\u6570\u7ec4\u7684\u6307\u9488\ndumpBytesArray((*p)[:])                            // [h e l l o ]   // \u8f93\u51fa\u5e95\u5c42\u6570\u7ec4\u7684\u5185\u5bb9\n}\n</code></pre>"},{"location":"go/string_type/#_3","title":"\u5b57\u7b26\u4e32\u8f6c\u6362","text":"<ul> <li><code>string</code>\u3001<code>[]byte</code>\u548c<code>[]rune</code>\u4e92\u76f8\u8f6c\u6362 <pre><code>var s string = \"\u4e2d\u56fd\u4eba\"\n// string -&gt; []rune\nrs := []rune(s) fmt.Printf(\"%x\\n\", rs) // [4e2d 56fd 4eba]\n// string -&gt; []byte\nbs := []byte(s) fmt.Printf(\"%x\\n\", bs) // e4b8ade59bbde4baba\n// []rune -&gt; string\ns1 := string(rs)\nfmt.Println(s1) // \u4e2d\u56fd\u4eba\n// []byte -&gt; string\ns2 := string(bs)\nfmt.Println(s2) // \u4e2d\u56fd\u4eba\n</code></pre></li> </ul>"},{"location":"go/string_type/#_4","title":"\u5b57\u7b26\u4e32\u62fc\u63a5","text":"<ul> <li><code>+</code> \u64cd\u4f5c\u7b26</li> <li>fmt.Sprintf</li> <li>strings.Join</li> <li>strings.Builder</li> <li>bytes.Buffer</li> </ul> <pre><code>var sl []string = []string{\n\"Rob Pike \",\n\"Robert Griesemer \",\n\"Ken Thompson \",\n}\nfunc concatStringByOperator(sl []string) string {\nvar s string\nfor _, v := range sl {\ns += v\n}\nreturn s\n}\nfunc concatStringBySprintf(sl []string) string {\nvar s string\nfor _, v := range sl {\ns = fmt.Sprintf(\"%s%s\", s, v)\n}\nreturn s\n}\nfunc concatStringByJoin(sl []string) string {\nreturn strings.Join(sl, \"\")\n}\nfunc concatStringByStringsBuilder(sl []string) string {\nvar b strings.Builder\nfor _, v := range sl {\nb.WriteString(v)\n}\nreturn b.String()\n}\nfunc concatStringByStringsBuilderWithInitSize(sl []string) string {\nvar b strings.Builder\nb.Grow(64)\nfor _, v := range sl {\nb.WriteString(v)\n}\nreturn b.String()\n}\nfunc concatStringByBytesBuffer(sl []string) string {\nvar b bytes.Buffer\nfor _, v := range sl {\nb.WriteString(v)\n}\nreturn b.String()\n}\nfunc concatStringByBytesBufferWithInitSize(sl []string) string {\nbuf := make([]byte, 0, 64)\nb := bytes.NewBuffer(buf)\nfor _, v := range sl {\nb.WriteString(v)\n}\nreturn b.String()\n}\nfunc BenchmarkConcatStringByOperator(b *testing.B) {\nfor n := 0; n &lt; b.N; n++ {\nconcatStringByOperator(sl)\n}\n}\nfunc BenchmarkConcatStringBySprintf(b *testing.B) {\nfor n := 0; n &lt; b.N; n++ {\nconcatStringBySprintf(sl)\n}\n}\nfunc BenchmarkConcatStringByJoin(b *testing.B) {\nfor n := 0; n &lt; b.N; n++ {\nconcatStringByJoin(sl)\n}\n}\nfunc BenchmarkConcatStringByStringsBuilder(b *testing.B) {\nfor n := 0; n &lt; b.N; n++ {\nconcatStringByStringsBuilder(sl)\n}\n}\nfunc BenchmarkConcatStringByStringsBuilderWithInitSize(b *testing.B) {\nfor n := 0; n &lt; b.N; n++ {\nconcatStringByStringsBuilderWithInitSize(sl)\n}\n}\nfunc BenchmarkConcatStringByBytesBuffer(b *testing.B) {\nfor n := 0; n &lt; b.N; n++ {\nconcatStringByBytesBuffer(sl)\n}\n}\nfunc BenchmarkConcatStringByBytesBufferWithInitSize(b *testing.B) {\nfor n := 0; n &lt; b.N; n++ {\nconcatStringByBytesBufferWithInitSize(sl)\n}\n}\n</code></pre>"},{"location":"go/string_type/#bytestring","title":"[]byte\u548cstring\u4e92\u76f8\u8f6c\u6362\u4e0d\u62f7\u8d1d\u65b9\u6cd5","text":"<ul> <li>go 1.20\u4e4b\u524d <pre><code>func ByteArray2String(arr []byte) (str string) {\nsliceHeader := (*reflect.SliceHeader)(unsafe.Pointer(&amp;arr))\nstringHeader := (*reflect.StringHeader)(unsafe.Pointer(&amp;str))\nstringHeader.Data = sliceHeader.Data\nstringHeader.Len = sliceHeader.Len\nreturn\n}\nfunc String2ByteArray(str string) (arr []byte) {\nstringHeader := (*reflect.StringHeader)(unsafe.Pointer(&amp;str))\nsliceHeader := (*reflect.SliceHeader)(unsafe.Pointer(&amp;arr))\nsliceHeader.Data = stringHeader.Data\nsliceHeader.Len = stringHeader.Len\nsliceHeader.Cap = stringHeader.Len\nreturn\n}\n</code></pre></li> <li>go 1.20\u4e4b\u540e <p>\u5e38\u7528\u7684 reflect.SliceHeader \u548c reflect.StringHeader \u5c06\u4f1a\u88ab\u6807\u6ce8\u4e3a\u88ab\u5e9f\u5f03 <pre><code>func StringToBytes(s string) []byte {\nreturn unsafe.Slice(unsafe.StringData(s), len(s))\n}\nfunc BytesToString(b []byte) string {\nreturn unsafe.String(&amp;b[0], len(b))\n}\n</code></pre></p> </li> </ul>"},{"location":"go/struct/","title":"\u7ed3\u6784\u4f53","text":""},{"location":"go/struct/#_1","title":"\u81ea\u5b9a\u4e49\u65b0\u7c7b\u578b","text":"<ul> <li> <p>\u7528<code>type</code>\u5b9a\u4e49\u65b0\u7c7b\u578b</p> <ul> <li>\u57fa\u4e8e\u5df2\u6709\u7c7b\u578b\u5b9a\u4e49\u65b0\u7c7b\u578b <code>type NewType int</code></li> <li>\u5b57\u9762\u503c\u6765\u5b9a\u4e49\u65b0\u7c7b\u578b\uff0c\u591a\u7528\u4e8e\u81ea\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684\u590d\u5408\u7c7b\u578b<ul> <li><code>type M map[int]string</code></li> <li><code>type S []string</code></li> </ul> </li> <li>\u652f\u6301\u4f7f\u7528<code>type</code>\u5757\u8fdb\u884c\u6279\u91cf\u5b9a\u4e49 <pre><code>type (\nT1 int\nT2 T1\nT3 string\n)\n</code></pre></li> </ul> </li> <li> <p>\u7c7b\u578b\u522b\u540d\uff0c\u901a\u5e38\u7528\u5728\u9879\u76ee\u7684\u6e10\u8fdb\u5f0f\u91cd\u6784\uff0c\u8fd8\u6709\u5bf9\u5df2\u6709\u5305\u7684\u4e8c\u6b21\u5c01\u88c5\u65b9\u9762</p> <ul> <li><code>type MyInt = int</code> </li> <li>\u65b0\u7c7b\u578b\u4e0e\u539f\u7c7b\u578b\u5b8c\u5168\u7b49\u4ef7 <pre><code>type T = string var s string = \"hello\" var t T = s // ok\nfmt.Printf(\"%T\\n\", t) // string\n</code></pre></li> </ul> </li> </ul>"},{"location":"go/struct/#_2","title":"\u7ed3\u6784\u4f53\u7c7b\u578b\u5b9a\u4e49","text":"<ul> <li>\u7ed3\u6784\u4f53\u7684\u7c7b\u578b\u5b57\u9762\u503c\u7531\u82e5\u5e72\u4e2a\u5b57\u6bb5\uff08field\uff09\u805a\u5408\u800c\u6210\uff0c\u6bcf\u4e2a\u5b57\u6bb5\u6709\u81ea\u5df1\u7684\u540d\u5b57\u4e0e\u7c7b\u578b</li> <li>\u6bcf\u4e2a\u7ed3\u6784\u4f53\u7684field name \u90fd\u662f\u552f\u4e00\u7684</li> <li>\u5982\u679c\u7ed3\u6784\u4f53\u7c7b\u578b\u53ea\u5728\u5b83\u5b9a\u4e49\u7684\u5305\u5185\u4f7f\u7528\uff0c\u53ef\u4ee5\u5c06\u7c7b\u578b\u540d\u7684\u9996\u5b57\u6bcd\u5c0f\u5199</li> <li>\u5982\u679c\u4e0d\u60f3\u5c06\u7ed3\u6784\u4f53\u7c7b\u578b\u4e2d\u7684\u67d0\u4e2a\u5b57\u6bb5\u66b4\u9732\u7ed9\u5176\u4ed6\u5305\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e2a\u5b57\u6bb5\u540d\u5b57\u7684\u9996\u5b57\u6bcd\u5c0f\u5199</li> <li>\u53ef\u4ee5\u7528\u7a7a\u6807\u8bc6\u7b26\u201c_\u201d\u4f5c\u4e3a\u7ed3\u6784\u4f53\u7c7b\u578b\u5b9a\u4e49\u4e2d\u7684\u5b57\u6bb5\u540d\u79f0\uff0c\u4e0d\u80fd\u88ab\u5916\u90e8\u5305\u5f15\u7528\uff0c\u4e5f\u65e0\u6cd5\u88ab\u7ed3\u6784\u4f53\u6240\u5728\u7684\u5305\u4f7f\u7528 <pre><code>type T struct {\nField1 T1\nField2 T2\n... ...\nFieldN Tn\n}\n</code></pre></li> </ul>"},{"location":"go/struct/#_3","title":"\u7a7a\u7ed3\u6784\u4f53","text":"<ul> <li><code>type Empty struct{}</code> </li> <li>Empty\u662f\u4e00\u4e2a\u4e0d\u5305\u542b\u4efb\u4f55\u5b57\u6bb5\u7684\u7a7a\u7ed3\u6784\u4f53\u7c7b\u578b</li> <li>\u7a7a\u7ed3\u6784\u4f53\u7c7b\u578b\u53d8\u91cf\u7684\u5185\u5b58\u5360\u7528\u4e3a 0</li> <li>\u57fa\u4e8e\u7a7a\u7ed3\u6784\u4f53\u7c7b\u578b\u5185\u5b58\u96f6\u5f00\u9500\u8fd9\u6837\u7684\u7279\u6027\uff0c Go \u5f00\u53d1\u4e2d\u4f1a\u7ecf\u5e38\u4f7f\u7528\u7a7a\u7ed3\u6784\u4f53\u7c7b\u578b\u5143\u7d20\uff0c\u4f5c\u4e3a\u4e00\u79cd\u201c\u4e8b\u4ef6\u201d\u4fe1\u606f\u8fdb\u884c Goroutine \u4e4b\u95f4\u7684\u901a\u4fe1 <pre><code>var c = make(chan Empty) // \u58f0\u660e\u4e00\u4e2a\u5143\u7d20\u7c7b\u578b\u4e3aEmpty\u7684channel\nc&lt;-Empty{}               // \u5411channel\u5199\u5165\u4e00\u4e2a\u201c\u4e8b\u4ef6\u201d\n</code></pre></li> </ul>"},{"location":"go/struct/#_4","title":"\u7ed3\u6784\u4f53\u5d4c\u5957","text":"<ul> <li>\u5176\u4ed6\u7ed3\u6784\u4f53\u4f5c\u4e3a\u81ea\u5b9a\u4e49\u7ed3\u6784\u4f53\u4e2d\u5b57\u6bb5\u7684\u7c7b\u578b</li> <li>\u53ef\u4ee5\u53ea\u5f15\u5165\u7ed3\u6784\u4f53\u7c7b\u578b\uff0c\u800c\u4e0d\u547d\u540d</li> <li>\u4e0d\u652f\u6301\u5728\u7ed3\u6784\u4f53\u7c7b\u578b\u5b9a\u4e49\u4e2d\uff0c\u9012\u5f52\u7684\u653e\u5165\u81ea\u8eab\u7c7b\u578b\u5b57\u6bb5\u7684\u5b9a\u4e49\u65b9\u5f0f</li> <li>\u4e0d\u53ef\u5728\u81ea\u8eab\u4e2d\u51fa\u73b0\u81ea\u8eab\u7684\u5b57\u6bb5\uff0c\u4f46\u662f\u53ef\u4ee5\u62e5\u6709\u81ea\u8eab\u7684\u6307\u9488\u7c7b\u578b\u3001\u4ee5\u81ea\u8eab\u7c7b\u578b\u4e3a\u5143\u7d20\u7684\u5207\u7247\u7c7b\u578b\u548c\u4ee5\u81ea\u8eab\u7c7b\u578b\u4f5c\u4e3avalue\u7684map\u7c7b\u578b</li> <li>\u4e00\u4e2a\u7c7b\u578b\uff0c\u5b83\u6240\u5360\u7528\u7684\u5927\u5c0f\u662f\u56fa\u5b9a\u7684\uff0c\u56e0\u6b64\u4e00\u4e2a\u7ed3\u6784\u4f53\u5b9a\u4e49\u597d\u7684\u65f6\u5019\uff0c\u5176\u5927\u5c0f\u662f\u56fa\u5b9a\u7684\u3002\u4f46\u662f\uff0c\u5982\u679c\u7ed3\u6784\u4f53\u91cc\u9762\u5957\u7ed3\u6784\u4f53\uff0c\u90a3\u4e48\u5728\u8ba1\u7b97\u8be5\u7ed3\u6784\u4f53\u5360\u7528\u5927\u5c0f\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u6210\u6b7b\u5faa\u73af</li> <li>\u4f46\u5982\u679c\u662f\u6307\u9488\u3001\u5207\u7247\u3001map\u7b49\u7c7b\u578b\uff0c\u5176\u672c\u8d28\u90fd\u662f\u4e00\u4e2aint\u5927\u5c0f(\u6307\u9488\uff0c4\u5b57\u8282\u6216\u80058\u5b57\u8282\uff0c\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u6709\u5173)\uff0c\u56e0\u6b64\u8be5\u7ed3\u6784\u4f53\u7684\u5927\u5c0f\u662f\u56fa\u5b9a\u7684\uff0c\u7c7b\u578b\u5c31\u80fd\u51b3\u5b9a\u5360\u7528\u5185\u5b58\u5927\u5c0f <pre><code>type Person struct {\nName string\nPhone string\nAddr string\n}\ntype Book struct {\nTitle string\nAuthor Person\n... ...\n}\ntype BookV2 struct {\nTitle string\nPerson\n... ...\n}\ntype T struct {\nt  *T           // ok\nst []T          // ok\nm  map[string]T // ok\n}     </code></pre></li> </ul>"},{"location":"go/struct/#_5","title":"\u521d\u59cb\u5316","text":"<ul> <li>\u96f6\u503c\u521d\u59cb\u5316 </li> </ul> <p><pre><code>type Book struct {\n...\n}\nvar book Book\nvar book = Book{} // \u6807\u51c6\u53d8\u91cf\u58f0\u660e\nbook := Book{} // \u77ed\u53d8\u91cf\u58f0\u660e\n</code></pre> - \u590d\u5408\u5b57\u9762\u503c     - \u6309\u987a\u5e8f\u4e00\u6b21\u7ed9\u6bcf\u4e2a\u7ed3\u6784\u4f53\u5b57\u6bb5\u8fdb\u884c\u8d4b\u503c\uff0c\u7ed3\u6784\u4f53\u5b57\u6bb5\u8f83\u5c11\uff0c\u4e14\u6ca1\u6709\u975e\u5bfc\u51fa\u5b57\u6bb5     <pre><code>type Book struct {\nTitle string              // \u4e66\u540d\nPages int                 // \u4e66\u7684\u9875\u6570\nIndexes map[string]int    // \u4e66\u7684\u7d22\u5f15\n}\nvar book = Book{\"The Go Programming Language\", 700, make(map[string]int)}\n</code></pre>     - field:value\u201d\u5f62\u5f0f\u7684\u590d\u5408\u5b57\u9762\u503c</p> <ul> <li>\u4f7f\u7528\u6784\u9020\u51fd\u6570\u521d\u59cb\u5316\u7ed3\u6784\u4f53 <pre><code>// $GOROOT/src/time/sleep.go\nfunc NewTimer(d Duration) *Timer {\nc := make(chan Time, 1)\nt := &amp;Timer{\nC: c,\nr: runtimeTimer{\nwhen: when(d),\nf:    sendTime,\narg:  c,\n},\n}\nstartTimer(&amp;t.r)\nreturn t\n}\n</code></pre></li> </ul>"},{"location":"go/struct/#_6","title":"\u7ed3\u6784\u4f53\u7c7b\u578b\u7684\u5185\u5b58\u5e03\u5c40","text":"<ul> <li>\u5c06\u7ed3\u6784\u4f53\u5b57\u6bb5\u5e73\u94fa\u7684\u5f62\u5f0f\uff0c\u5b58\u653e\u5728\u4e00\u4e2a\u8fde\u7eed\u5185\u5b58\u5757\u4e2d\uff0c\u7406\u60f3\u60c5\u51b5 </li> <li>\u73b0\u5b9e\u5b9e\u9645\u5b58\u50a8\uff0c\u9700\u8981\u5728\u5b57\u6bb5\u4e4b\u95f4\u6dfb\u52a0padding\uff0c\u4e3a\u4e86\u5185\u5b58\u5bf9\u9f50 </li> <li>\u4f7f\u7528<code>unsafe.Sizeof(t)</code> \u83b7\u53d6\u7ed3\u6784\u4f53\u5360\u7528\u7a7a\u95f4\u5927\u5c0f</li> <li>\u4f7f\u7528<code>unsafe.Offsetof(t.Fn)</code> \u83b7\u53d6\u5b57\u6bb5Fn\u5728\u5185\u5b58\u4e2d\u76f8\u5bf9\u4e8et\u8d77\u59cb\u5730\u5740\u7684\u504f\u79fb\u91cf</li> </ul>"},{"location":"go/struct/#_7","title":"\u5185\u5b58\u5bf9\u9f50","text":"<ul> <li>\u51fa\u4e8e\u5bf9\u5904\u7406\u5668\u5b58\u53d6\u6570\u636e\u6548\u7387\u7684\u8003\u8651</li> <li>\u5bf9\u4e8e\u5404\u79cd\u57fa\u672c\u6570\u636e\u7c7b\u578b\u6765\u8bf4\uff0c\u5b83\u7684\u53d8\u91cf\u7684\u5185\u5b58\u5730\u5740\u503c\u5fc5\u987b\u662f\u5176\u7c7b\u578b\u672c\u8eab\u5927\u5c0f\u7684\u6574\u6570\u500d\uff0c\u6bd4\u5982\uff0c\u4e00\u4e2a int64 \u7c7b\u578b\u7684\u53d8\u91cf\u7684\u5185\u5b58\u5730\u5740\uff0c\u5e94\u8be5\u80fd\u88ab int64 \u7c7b\u578b\u81ea\u8eab\u7684\u5927\u5c0f\uff0c\u4e5f\u5c31\u662f 8 \u6574\u9664\uff1b\u4e00\u4e2a uint16 \u7c7b\u578b\u7684\u53d8\u91cf\u7684\u5185\u5b58\u5730\u5740\uff0c\u5e94\u8be5\u80fd\u88ab uint16 \u7c7b\u578b\u81ea\u8eab\u7684\u5927\u5c0f\uff0c\u4e5f\u5c31\u662f 2 \u6574\u9664</li> <li>\u5bf9\u4e8e\u7ed3\u6784\u4f53\u800c\u8a00\uff0c\u5b83\u7684\u53d8\u91cf\u7684\u5185\u5b58\u5730\u5740\uff0c\u53ea\u8981\u662f\u5b83\u6700\u957f\u5b57\u6bb5\u957f\u5ea6\u4e0e\u7cfb\u7edf\u5bf9\u9f50\u7cfb\u6570\u4e24\u8005\u4e4b\u95f4\u8f83\u5c0f\u7684\u90a3\u4e2a\u7684\u6574\u6570\u500d\u5c31\u53ef\u4ee5\u3002\u4f46\u5bf9\u4e8e\u7ed3\u6784\u4f53\u7c7b\u578b\u6765\u8bf4\uff0c\u8fd8\u8981\u8ba9\u5b83\u6bcf\u4e2a\u5b57\u6bb5\u7684\u5185\u5b58\u5730\u5740\u90fd\u4e25\u683c\u6ee1\u8db3\u5185\u5b58\u5bf9\u9f50\u8981\u6c42</li> <li>\u53ef\u4ee5\u4e3b\u52a8\u586b\u5145\u7ed3\u6784\u4f53\uff0c\u5185\u5b58\u5bf9\u9f50</li> </ul>"},{"location":"go/struct/#_8","title":"\u4e3e\u4f8b","text":"<ul> <li>64bit\u5e73\u53f0\u7cfb\u7edf\u5bf9\u9f50\u7cfb\u6570\u662f8 <pre><code>type T struct {\nb byte // 1\u5b57\u8282\uff0c\u5bf9\u9f50\u9700\u8981\u586b\u51457\u5b57\u8282\ni int64 // 8\u5b57\u8282\uff0c\u5bf9\u9f50\u4e0d\u9700\u8981\u586b\u5145\nu uint16 // 2\u5b57\u8282\uff0c\u5bf9\u9f50\u9700\u8981\u586b\u51456\u5b57\u8282\n}\n</code></pre> </li> </ul>"},{"location":"go/struct/#_9","title":"\u5185\u5b58\u5bf9\u9f50","text":"<ul> <li>CPU \u8bbf\u95ee\u5185\u5b58\u65f6\uff0c\u5e76\u4e0d\u662f\u9010\u4e2a\u5b57\u8282\u8bbf\u95ee\uff0c\u800c\u662f\u4ee5\u5b57\u957f\uff08word size\uff09\u4e3a\u5355\u4f4d\u8bbf\u95ee</li> <li>32\u4f4d\u7684CPU\uff0c\u5b57\u957f\u4e3a4\u5b57\u8282CPU\u8bbf\u95ee\u5185\u5b58\u7684\u5355\u4f4d\u662f4\u5b57\u8282</li> <li>64\u4e3a\u7684CPU\uff0c\u5b57\u957f\u4e3a8\u5b57\u8282CPU\u8bbf\u95ee\u5185\u5b58\u7684\u5355\u4f4d\u662f8\u5b57\u8282</li> <li>\u4e3a\u4e86\u51cf\u5c11 CPU \u8bbf\u95ee\u5185\u5b58\u7684\u6b21\u6570\uff0c\u52a0\u5927 CPU \u8bbf\u95ee\u5185\u5b58\u7684\u541e\u5410\u91cf\u3002\u540c\u6837\u8bfb\u53d6 8 \u4e2a\u5b57\u8282\u7684\u6570\u636e\uff0c\u4e00\u6b21\u8bfb\u53d6 4 \u4e2a\u5b57\u8282\u53ea\u9700\u8981\u8bfb\u53d6 2 \u6b21</li> <li>CPU \u59cb\u7ec8\u4ee5\u5b57\u957f\u8bbf\u95ee\u5185\u5b58\uff0c\u5982\u679c\u4e0d\u8fdb\u884c\u5185\u5b58\u5bf9\u9f50\uff0c\u5f88\u53ef\u80fd\u589e\u52a0 CPU \u8bbf\u95ee\u5185\u5b58\u7684\u6b21\u6570</li> <li>\u5185\u5b58\u5bf9\u9f50\u5bf9\u5b9e\u73b0\u53d8\u91cf\u7684\u539f\u5b50\u6027\u64cd\u4f5c\u4e5f\u6709\u597d\u5904\uff0c\u6bcf\u6b21\u5185\u5b58\u8bbf\u95ee\u662f\u539f\u5b50\u7684\uff0c\u5982\u679c\u53d8\u91cf\u7684\u5927\u5c0f\u4e0d\u8d85\u8fc7\u5b57\u957f\uff0c\u90a3\u4e48\u5185\u5b58\u5bf9\u9f50\u540e\uff0c\u5bf9\u8be5\u53d8\u91cf\u7684\u8bbf\u95ee\u5c31\u662f\u539f\u5b50\u7684 </li> </ul>"},{"location":"go/struct/#_10","title":"\u5185\u5b58\u5bf9\u9f50\u500d\u6570","text":"<ul> <li>unsafe.Alignof(\u53d8\u91cf)</li> <li>\u8868\u793a\u5185\u5b58\u5360\u7528\u7684\u91cf\u5fc5\u987b\u662f\u7ed3\u679c\u7684\u500d\u6570</li> </ul>"},{"location":"go/struct/#go","title":"Go\u5185\u5b58\u5bf9\u9f50\u500d\u6570","text":"<ul> <li>\u5bf9\u4e8e\u4efb\u610f\u7c7b\u578b\u7684\u53d8\u91cf x \uff0c<code>unsafe.Alignof(x)</code> \u81f3\u5c11\u4e3a 1\u3002</li> <li>\u5bf9\u4e8e struct \u7ed3\u6784\u4f53\u7c7b\u578b\u7684\u53d8\u91cf x\uff0c\u8ba1\u7b97 x \u6bcf\u4e00\u4e2a\u5b57\u6bb5 f \u7684 <code>unsafe.Alignof(x.f)</code>\uff0c<code>unsafe.Alignof(x)</code> \u7b49\u4e8e\u5176\u4e2d\u7684\u6700\u5927\u503c\u3002</li> <li>\u5bf9\u4e8e array \u6570\u7ec4\u7c7b\u578b\u7684\u53d8\u91cf x\uff0c<code>unsafe.Alignof(x)</code> \u7b49\u4e8e\u6784\u6210\u6570\u7ec4\u7684\u5143\u7d20\u7c7b\u578b\u7684\u5bf9\u9f50\u500d\u6570</li> </ul>"},{"location":"go/struct/#struct","title":"\u7a7astruct\u5185\u5b58\u5bf9\u9f50","text":"<ul> <li>\u7a7a struct{} \u5927\u5c0f\u4e3a 0\uff0c\u4f5c\u4e3a\u5176\u4ed6 struct \u7684\u5b57\u6bb5\u65f6\uff0c\u4e00\u822c\u4e0d\u9700\u8981\u5185\u5b58\u5bf9\u9f50</li> <li>\u6709\u4e00\u79cd\u60c5\u51b5\u9664\u5916\uff1a\u5373\u5f53 struct{} \u4f5c\u4e3a\u7ed3\u6784\u4f53\u6700\u540e\u4e00\u4e2a\u5b57\u6bb5\u65f6\uff0c\u9700\u8981\u5185\u5b58\u5bf9\u9f50\u3002\u56e0\u4e3a\u5982\u679c\u6709\u6307\u9488\u6307\u5411\u8be5\u5b57\u6bb5, \u8fd4\u56de\u7684\u5730\u5740\u5c06\u5728\u7ed3\u6784\u4f53\u4e4b\u5916</li> <li>\u5982\u679c\u6b64\u6307\u9488\u4e00\u76f4\u5b58\u6d3b\u4e0d\u91ca\u653e\u5bf9\u5e94\u7684\u5185\u5b58\uff0c\u5c31\u4f1a\u6709\u5185\u5b58\u6cc4\u9732\u7684\u95ee\u9898\uff08\u8be5\u5185\u5b58\u4e0d\u56e0\u7ed3\u6784\u4f53\u91ca\u653e\u800c\u91ca\u653e\uff09</li> <li>\u5f53 struct{} \u4f5c\u4e3a\u5176\u4ed6 struct \u6700\u540e\u4e00\u4e2a\u5b57\u6bb5\u65f6\uff0c\u9700\u8981\u586b\u5145\u989d\u5916\u7684\u5185\u5b58\u4fdd\u8bc1\u5b89\u5168 <pre><code>type demo3 struct {\nc int32\na struct{}\n}\ntype demo4 struct {\na struct{}\nc int32\n}\nfunc main() {\nfmt.Println(unsafe.Sizeof(demo3{})) // 8\nfmt.Println(unsafe.Sizeof(demo4{})) // 4\n}\n</code></pre></li> </ul>"},{"location":"go/sync/","title":"sync\u5305\u540c\u6b65\u539f\u8bed","text":""},{"location":"go/sync/#sync","title":"sync \u5305\u4f4e\u7ea7\u540c\u6b65\u539f\u8bed\u4f7f\u7528\u573a\u666f","text":"<ul> <li>\u9ad8\u6027\u80fd\u7684\u4e34\u754c\u533a\uff08critical section\uff09\u540c\u6b65\u673a\u5236\u573a\u666f</li> <li>\u4e0d\u60f3\u8f6c\u79fb\u7ed3\u6784\u4f53\u5bf9\u8c61\u6240\u6709\u6743\uff0c\u4f46\u53c8\u8981\u4fdd\u8bc1\u7ed3\u6784\u4f53\u5185\u90e8\u72b6\u6001\u6570\u636e\u7684\u540c\u6b65\u8bbf\u95ee\u7684\u573a\u666f</li> </ul>"},{"location":"go/sync/#sync_1","title":"sync\u5305\u539f\u8bed\u4f7f\u7528\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u4e0d\u8981\u5c06\u539f\u8bed\u590d\u5236\u540e\u4f7f\u7528</li> <li>\u7528\u95ed\u5305\u6216\u8005\u4f20\u9012\u539f\u8bed\u53d8\u91cf\u7684\u5730\u5740\uff08\u6307\u9488\uff09</li> </ul>"},{"location":"go/sync/#mutex","title":"mutex \u4e92\u65a5\u9501","text":"<ul> <li>\u96f6\u503c\u53ef\u7528\uff0c\u4e0d\u7528\u521d\u59cb\u5316</li> <li>Lock\uff0cUnlock</li> <li>lock\u72b6\u6001\u4e0b\u4efb\u4f55goroutine\u52a0\u9501\u90fd\u4f1a\u963b\u585e</li> </ul>"},{"location":"go/sync/#rwmutex","title":"RWMutex \u8bfb\u5199\u9501","text":"<ul> <li>\u96f6\u503c\u53ef\u7528\uff0c\u4e0d\u7528\u521d\u59cb\u5316</li> <li>RLock\uff0cRUnlock \u52a0\u8bfb\u9501\uff0c\u89e3\u8bfb\u9501</li> <li>Lock\uff0cUnlock \u52a0\u5199\u9501\uff0c\u89e3\u5199\u9501</li> <li>\u52a0\u8bfb\u9501\u72b6\u6001\u4e0b\uff0c\u4e0d\u4f1a\u963b\u585e\u52a0\u8bfb\u9501\uff0c\u4f1a\u963b\u585e\u52a0\u5199\u9501</li> <li>\u52a0\u5199\u9501\u72b6\u6001\u4e0b\uff0c\u4f1a\u963b\u585e\u52a0\u8bfb\u9501\u4e0e\u5199\u9501\u7684goroutine</li> </ul>"},{"location":"go/sync/#synccond","title":"sync.Cond \u6761\u4ef6\u53d8\u91cf","text":"<ul> <li>sync.Cond\u662f\u4f20\u7edf\u7684\u6761\u4ef6\u53d8\u91cf\u539f\u8bed\u6982\u5ff5\u5728 Go \u8bed\u8a00\u4e2d\u7684\u5b9e\u73b0</li> <li>\u53ef\u4ee5\u628a\u4e00\u4e2a\u6761\u4ef6\u53d8\u91cf\u7406\u89e3\u4e3a\u4e00\u4e2a\u5bb9\u5668\uff0c\u8fd9\u4e2a\u5bb9\u5668\u4e2d\u5b58\u653e\u7740\u4e00\u4e2a\u6216\u4e00\u7ec4\u7b49\u5f85\u7740\u67d0\u4e2a\u6761\u4ef6\u6210\u7acb\u7684 Goroutine</li> <li>\u5f53\u6761\u4ef6\u6210\u7acb\u540e\uff0c\u5904\u4e8e\u7b49\u5f85\u72b6\u6001\u7684 Goroutine \u5c06\u5f97\u5230\u901a\u77e5\uff0c\u5e76\u88ab\u5524\u9192\u7ee7\u7eed\u8fdb\u884c\u540e\u7eed\u7684\u5de5\u4f5c <pre><code>type signal struct{}\nvar ready bool\nfunc worker(i int) {\nfmt.Printf(\"worker %d: is working...\\n\", i)\ntime.Sleep(1 * time.Second)\nfmt.Printf(\"worker %d: works done\\n\", i)\n}\nfunc spawnGroup(f func(i int), num int, groupSignal *sync.Cond) &lt;-chan signal {\nc := make(chan signal)\nvar wg sync.WaitGroup\nfor i := 0; i &lt; num; i++ {\nwg.Add(1)\ngo func(i int) {\ngroupSignal.L.Lock()\nfor !ready {\ngroupSignal.Wait()\n}\ngroupSignal.L.Unlock()\nfmt.Printf(\"worker %d: start to work...\\n\", i)\nf(i)\nwg.Done()\n}(i + 1)\n}\ngo func() {\nwg.Wait()\nc &lt;- signal(struct{}{})\n}()\nreturn c\n}\nfunc main() {\nfmt.Println(\"start a group of workers...\")\ngroupSignal := sync.NewCond(&amp;sync.Mutex{})\nc := spawnGroup(worker, 5, groupSignal)\ntime.Sleep(5 * time.Second) // \u6a21\u62dfready\u524d\u7684\u51c6\u5907\u5de5\u4f5c\nfmt.Println(\"the group of workers start to work...\")\ngroupSignal.L.Lock()\nready = true\ngroupSignal.Broadcast()\ngroupSignal.L.Unlock()\n&lt;-c\nfmt.Println(\"the group of workers work done!\")\n}\n</code></pre></li> </ul>"},{"location":"go/sync_map/","title":"SyncMap","text":""},{"location":"go/sync_map/#sync-map","title":"sync Map \u603b\u7ed3","text":"<ul> <li>sync.map \u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u8bfb\u53d6\uff0c\u63d2\u5165\uff0c\u5220\u9664\u4e5f\u90fd\u4fdd\u6301\u7740\u5e38\u6570\u7ea7\u7684\u65f6\u95f4\u590d\u6742\u5ea6</li> <li>\u901a\u8fc7\u8bfb\u5199\u5206\u79bb\uff0c\u964d\u4f4e\u9501\u65f6\u95f4\u6765\u63d0\u9ad8\u6548\u7387\uff0c\u9002\u7528\u4e8e\u8bfb\u591a\u5199\u5c11\u7684\u573a\u666f</li> <li>Range \u64cd\u4f5c\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u51fd\u6570\uff0c\u53c2\u6570\u662f k,v\uff0c\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff1af func(key, value interface{}) bool</li> <li>\u8c03\u7528 Load \u6216 LoadOrStore \u51fd\u6570\u65f6\uff0c\u5982\u679c\u5728 read \u4e2d\u6ca1\u6709\u627e\u5230 key\uff0c\u5219\u4f1a\u5c06 misses \u503c\u539f\u5b50\u5730\u589e\u52a0 1\uff0c\u5f53 misses \u589e\u52a0\u5230\u548c dirty \u7684\u957f\u5ea6\u76f8\u7b49\u65f6\uff0c\u4f1a\u5c06 dirty \u63d0\u5347\u4e3a read\uff0c\u6765\u51cf\u5c11\u8bfbmiss</li> <li>\u65b0\u5199\u5165\u7684 key \u4f1a\u4fdd\u5b58\u5230 dirty \u4e2d\uff0c\u5982\u679c\u8fd9\u65f6 dirty \u4e3a nil\uff0c\u5c31\u4f1a\u5148\u65b0\u521b\u5efa\u4e00\u4e2a dirty\uff0c\u5e76\u5c06 read \u4e2d\u672a\u88ab\u5220\u9664\u7684\u5143\u7d20\u62f7\u8d1d\u5230 dirty\u3002</li> <li>\u5f53 dirty \u4e3a nil \u7684\u65f6\u5019\uff0cread \u5c31\u4ee3\u8868 map \u6240\u6709\u7684\u6570\u636e\uff1b\u5f53 dirty \u4e0d\u4e3a nil \u7684\u65f6\u5019\uff0cdirty \u624d\u4ee3\u8868 map \u6240\u6709\u7684\u6570\u636e</li> </ul>"},{"location":"go/sync_map/#syncmap","title":"sync.Map\u7ed3\u6784","text":"<pre><code>type Map struct {\nmu Mutex\n// read contains the portion of the map's contents that are safe for\n// concurrent access (with or without mu held).\n// read\u91cc\u8fb9\u5b58\u7684\u662f\u5e76\u53d1\u8bbf\u95ee\u5b89\u5168\u7684\uff08\u6301\u4e0d\u6301\u6709\u9501\u90fd\u662f\u53ef\u4ee5\u7684\uff09\n//\n// The read field itself is always safe to load, but must only be stored with\n// mu held.\n// load read\u91cc\u8fb9\u5185\u5bb9\u603b\u662f\u5b89\u5168\u7684\uff0c\u4f46\u662f\u5f53\u4f60\u60f3store\u8fdb\u53bb\u7684\u65f6\u5019\u5c31\u5fc5\u987b\u52a0mutex \u9501\n// Entries stored in read may be updated concurrently without mu, but updating\n// a previously-expunged entry requires that the entry be copied to the dirty\n// map and unexpunged with mu held.\n// \u5927\u81f4\u610f\u601d\u662f\u66f4\u65b0\u5df2\u7ecf\u5220\u9664\u7684key\u9700\u8981\u52a0\u9501\uff0c\u7136\u540e\u628akey\u653e\u5230dirty\u91cc\u8fb9\nread atomic.Value // readOnly\n// dirty contains the portion of the map's contents that require mu to be\n// held. To ensure that the dirty map can be promoted to the read map quickly,\n// it also includes all of the non-expunged entries in the read map.\n// \u4e3a\u4e86\u5feb\u901f\u63d0\u5347dirty\u4e3aread\uff0cdirty\u4e2d\u5b58\u50a8\u4e86read\u4e2d\u672a\u5220\u9664\u7684key\n//\n// Expunged entries are not stored in the dirty map. An expunged entry in the\n// clean map must be unexpunged and added to the dirty map before a new value\n// can be stored to it.\n//\n// If the dirty map is nil, the next write to the map will initialize it by\n// making a shallow copy of the clean map, omitting stale entries.\ndirty map[interface{}]*entry\n// misses counts the number of loads since the read map was last updated that\n// needed to lock mu to determine whether the key was present.\n//\n// \u4eceread\u4e2d\u8bfb\u53d6\u4e0d\u5230key\uff0cmiss\u5c31\u4f1a\u52a0\u4e00\uff0c\u52a0\u5230\u4e00\u5b9a\u9608\u503c\uff0cdirty\u5c06\u88ab\u63d0\u5347\u4e3aread\n// Once enough misses have occurred to cover the cost of copying the dirty\n// map, the dirty map will be promoted to the read map (in the unamended\n// state) and the next store to the map will make a new dirty copy.\nmisses int\n}\n// readOnly is an immutable struct stored atomically in the Map.read field.\n// \u4e0d\u53ef\u6539\u53d8\uff0c\u539f\u5b50\u6027\u7684\u5b58\u5728map\u7684read\u5b57\u6bb5\u91cc\ntype readOnly struct {\nm       map[interface{}]*entry\namended bool // true if the dirty map contains some key not in m.\n}\n// expunged is an arbitrary pointer that marks entries which have been deleted\n// from the dirty map.\n// \u4e13\u7528\u6765\u6807\u8bb0 entry\u5df2\u7ecf\u4ecedirty\u4e2d\u5220\u9664\nvar expunged = unsafe.Pointer(new(interface{}))\n// An entry is a slot in the map corresponding to a particular key.\n// entry\u5b58\u653e\u7684\u5c31\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u5411value\u7684\u5730\u5740\ntype entry struct {\n// p points to the interface{} value stored for the entry.\n//\n// If p == nil, the entry has been deleted, and either m.dirty == nil or\n// m.dirty[key] is e.\n// \u5730\u5740\u4e3anil\uff0c\u8868\u660ekey\u5df2\u7ecf\u88ab\u5220\u9664\uff0c\u8981\u4e48map\u7684dirty\u4e3a\u7a7a\uff0c\u8981\u4e48dirty[key]\u662f\u8fd9\u4e2aentry\n//\n// If p == expunged, the entry has been deleted, m.dirty != nil, and the entry\n// is missing from m.dirty.\n// \u5730\u5740\u662fexpunged\uff0c\u5c31\u8868\u793a\u8fd9\u4e2aentry\u5df2\u7ecf\u88ab\u5220\u4e86\uff0c\u5e76\u4e14dirty\u4e5f\u5df2\u7ecf \u4e0d\u5b58\u8fd9\u4e2a\u503c\u4e86\n//\n// Otherwise, the entry is valid and recorded in m.read.m[key] and, if m.dirty\n// != nil, in m.dirty[key].\n// \u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u5c31\u662f\u6ca1\u6709\u88ab\u5220\u9664\uff0cread[key]\u4e3a\u8fd9\u4e2ap\uff0c\u7136\u540e\u5982\u679cdirty\u4e0d\u4e3anil\uff0c\u5219ditry[key]\u4e5f\u4e3ap\n//\n// An entry can be deleted by atomic replacement with nil: when m.dirty is\n// next created, it will atomically replace nil with expunged and leave\n// m.dirty[key] unset.\n// \u5f53\u5220\u9664 key \u65f6\uff0c\u5e76\u4e0d\u5b9e\u9645\u5220\u9664\u3002\u4e00\u4e2a entry \u53ef\u4ee5\u901a\u8fc7\u539f\u5b50\u5730\uff08CAS \u64cd\u4f5c\uff09\u8bbe\u7f6e p \u4e3a nil \u88ab\u5220\u9664\u3002\n// \u5982\u679c\u4e4b\u540e\u521b\u5efa m.dirty\uff0cnil \u53c8\u4f1a\u88ab\u539f\u5b50\u5730\u8bbe\u7f6e\u4e3a expunged\uff0c\u4e14\u4e0d\u4f1a\u62f7\u8d1d\u5230 dirty \u4e2d\u3002\n//\n// An entry's associated value can be updated by atomic replacement, provided\n// p != expunged. If p == expunged, an entry's associated value can be updated\n// only after first setting m.dirty[key] = e so that lookups using the dirty\n// map find the entry.\n// \u5982\u679c p \u4e0d\u4e3a expunged\uff0c\u548c entry \u76f8\u5173\u8054\u7684\u8fd9\u4e2a value \u53ef\u4ee5\u88ab\u539f\u5b50\u5730\u66f4\u65b0\uff1b\n//\u5982\u679c p == expunged\uff0c\u90a3\u4e48\u4ec5\u5f53\u5b83\u521d\u6b21\u88ab\u8bbe\u7f6e\u5230 m.dirty \u4e4b\u540e\uff0c\u624d\u53ef\u4ee5\u88ab\u66f4\u65b0\np unsafe.Pointer // *interface{}\n}\n</code></pre> <p>\u5f15\u7528\u77e5\u4e4e\u56de\u7b54\u7684\u4e00\u5f20\u56fe https://zhuanlan.zhihu.com/p/344834329</p> <p></p>"},{"location":"go/sync_map/#load","title":"Load","text":"<ul> <li>\u8bfb\u4e0d\u5230\u8fd4\u56denil\uff0c\u548cfalse</li> <li>\u8bfb\u5230\u8fd4\u56de\u503c\u548cok</li> <li>read map\u4e2d\u4e0d\u5b58\u5728key\uff0c\u4f46\u662fditry map\u4e2d\u6709\u8fd9\u4e2akey\uff0c\u52a0\u9501\u9632\u6b62dirty\u5347\u7ea7\u4e3amap</li> <li>\u52a0\u9501\u4ece dirty\u4e2d\u8bfb\u53d6key\uff0c\u7136\u540eload\u51fd\u6570\u4f1a\u5224\u65ad\u8bfb\u53d6\u5230\u7684\u503c\u662f\u4e0d\u662fexpunged(\u4e5f\u5c31\u662f\u88ab\u5220\u9664\u7684\u60c5\u51b5)</li> <li>\u6807\u8bb0miss\uff0c\u4ee5\u4fbf\u540e\u7eeddirty\u5347\u7ea7\u4e3aread</li> <li>miss\u7684\u6570\u91cf\u5927\u4e8e\u7b49\u4e8edirty\u7684map\u7684\u6570\u91cf\u65f6\uff0cdirty\u5347\u7ea7\u4e3amap</li> </ul> <pre><code>func (m *Map) Load(key interface{}) (value interface{}, ok bool) {\nread, _ := m.read.Load().(readOnly)\ne, ok := read.m[key]\n// read map\u4e2d\u4e0d\u5b58\u5728key\uff0c\u4f46\u662fditry map\u4e2d\u6709\u8fd9\u4e2akey\uff0c\u52a0\u9501\u9632\u6b62dirty\u5347\u7ea7\u4e3amap\n// \u52a0\u9501\u4ece dirty\u4e2d\u8bfb\u53d6key\uff0c\u7136\u540eload\u51fd\u6570\u4f1a\u5224\u65ad\u8bfb\u53d6\u5230\u7684\u503c\u662f\u4e0d\u662fexpunged(\u4e5f\u5c31\u662f\u88ab\u5220\u9664\u7684\u60c5\u51b5)\n// \u6807\u8bb0miss\uff0c\u4ee5\u4fbf\u540e\u7eeddirty\u5347\u7ea7\u4e3aread\n// miss\u7684\u6570\u91cf\u5927\u4e8e\u7b49\u4e8edirty\u7684map\u7684\u6570\u91cf\u65f6\uff0cdirty\u5347\u7ea7\u4e3amap\nif !ok &amp;&amp; read.amended {\nm.mu.Lock()\n// Avoid reporting a spurious miss if m.dirty got promoted while we were\n// blocked on m.mu. (If further loads of the same key will not miss, it's\n// not worth copying the dirty map for this key.)\nread, _ = m.read.Load().(readOnly)\ne, ok = read.m[key]\nif !ok &amp;&amp; read.amended {\ne, ok = m.dirty[key]\n// Regardless of whether the entry was present, record a miss: this key\n// will take the slow path until the dirty map is promoted to the read\n// map.\nm.missLocked()\n}\nm.mu.Unlock()\n}\nif !ok {\nreturn nil, false\n}\nreturn e.load()\n}\nfunc (e *entry) load() (value interface{}, ok bool) {\np := atomic.LoadPointer(&amp;e.p)\n// key \u88ab\u5220\u9664\nif p == nil || p == expunged {\nreturn nil, false\n}\nreturn *(*interface{})(p), true\n}\nfunc (m *Map) missLocked() {\nm.misses++\nif m.misses &lt; len(m.dirty) {\nreturn\n}\nm.read.Store(readOnly{m: m.dirty})\nm.dirty = nil\nm.misses = 0\n}\n</code></pre>"},{"location":"go/sync_map/#store","title":"Store","text":"<ul> <li>\u5b58\u50a8\u4e00\u4e2akey\u5230sync Map</li> <li>key\u5b58\u5728\u66f4\u65b0</li> <li>\u6ca1\u8bfb\u5230\u5df2\u7ecf\u5b58\u5728read\u4e2d\u7684key\u8981\u52a0\u9501\u8fdb\u884c\u5b58\u50a8</li> </ul>"},{"location":"go/sync_map/#store_1","title":"store \u6d41\u7a0b","text":"<ul> <li>\u5982\u679c\u5728 read \u91cc\u80fd\u591f\u627e\u5230\u5f85\u5b58\u50a8\u7684 key\uff0c\u5e76\u4e14\u5bf9\u5e94\u7684 entry \u7684 p \u503c\u4e0d\u4e3a expunged\uff0c\u4e5f\u5c31\u662f\u6ca1\u88ab\u5220\u9664\u65f6\uff0c\u76f4\u63a5\u66f4\u65b0\u5bf9\u5e94\u7684 entry</li> <li>\u7b2c\u4e00\u6b65\u6ca1\u6709\u6210\u529f\uff1a\u8981\u4e48 read \u4e2d\u6ca1\u6709\u8fd9\u4e2a key\uff0c\u8981\u4e48 key \u88ab\u6807\u8bb0\u4e3a\u5220\u9664\u3002\u5219\u5148\u52a0\u9501\uff0c\u518d\u8fdb\u884c\u540e\u7eed\u7684\u64cd\u4f5c\u3002</li> <li>\u518d\u6b21\u5728 read \u4e2d\u67e5\u627e\u662f\u5426\u5b58\u5728\u8fd9\u4e2a key\uff0c\u4e5f\u5c31\u662f double check \u4e00\u4e0b</li> <li>\u5982\u679c read \u4e2d\u5b58\u5728\u8be5 key\uff0c\u4f46 p == expunged\uff0c\u8bf4\u660e m.dirty != nil \u5e76\u4e14 m.dirty \u4e2d\u4e0d\u5b58\u5728\u8be5 key \u503c \u6b64\u65f6: a. \u5c06 p \u7684\u72b6\u6001\u7531 expunged \u66f4\u6539\u4e3a nil\uff1bb. dirty map \u63d2\u5165 key\u3002\u7136\u540e\uff0c\u76f4\u63a5\u66f4\u65b0\u5bf9\u5e94\u7684 value\u3002</li> <li>\u5982\u679c read \u4e2d\u6ca1\u6709\u6b64 key\uff0c\u90a3\u5c31\u67e5\u770b dirty \u4e2d\u662f\u5426\u6709\u6b64 key\uff0c\u5982\u679c\u6709\uff0c\u5219\u76f4\u63a5\u66f4\u65b0\u5bf9\u5e94\u7684 value\uff0c\u8fd9\u65f6 read \u4e2d\u8fd8\u662f\u6ca1\u6709\u6b64 key</li> <li>\u6700\u540e\u4e00\u6b65\uff0c\u5982\u679c read \u548c dirty \u4e2d\u90fd\u4e0d\u5b58\u5728\u8be5 key\uff0c\u5219\uff1aa. \u5982\u679c dirty \u4e3a\u7a7a\uff0c\u5219\u9700\u8981\u521b\u5efa dirty\uff0c\u5e76\u4ece read \u4e2d\u62f7\u8d1d\u672a\u88ab\u5220\u9664\u7684\u5143\u7d20\uff1bb. \u66f4\u65b0 amended \u5b57\u6bb5\uff0c\u6807\u8bc6 dirty map \u4e2d\u5b58\u5728 read map \u4e2d\u6ca1\u6709\u7684 key\uff1bc. \u5c06 k-v \u5199\u5165 dirty map \u4e2d\uff0cread.m \u4e0d\u53d8\u3002\u6700\u540e\uff0c\u66f4\u65b0\u6b64 key \u5bf9\u5e94\u7684 value</li> </ul> <pre><code>// Store sets the value for a key.\nfunc (m *Map) Store(key, value interface{}) {\n// read \u4e2d\u53ef\u4ee5\u8bfb\u5230\u8fd9\u4e2akey\nread, _ := m.read.Load().(readOnly)\nif e, ok := read.m[key]; ok &amp;&amp; e.tryStore(&amp;value) {\nreturn\n}\nm.mu.Lock()\nread, _ = m.read.Load().(readOnly)\nif e, ok := read.m[key]; ok {\nif e.unexpungeLocked() {\n// \u8fc7\u53bb\u88ab\u5220\u9664\u4e86\uff0c\u5c31\u5c06\u8fd9\u4e2akey\u5b58\u5230dirty\n// The entry was previously expunged, which implies that there is a\n// non-nil dirty map and this entry is not in it.\nm.dirty[key] = e\n}\n// \u539f\u5b50\u5b58\u6307\u9488\u7684\u503c\ne.storeLocked(&amp;value)  //dirty\u548cread\u90fd\u53ef\u4ee5\u8bfb\u5230\u65b0\u5b58\u8fdb\u53bb\u7684\u503c\n} else if e, ok := m.dirty[key]; ok {\ne.storeLocked(&amp;value) // dirty \u4e2d\u5b58\u5728\uff0c\u5c31\u76f4\u63a5\u5b58\u50a8\u503c\n} else {\n// \u4e24\u8fb9\u90fd\u6ca1\u8bfb\u5230\u8fd9\u4e2akey\nif !read.amended {\n// We're adding the first new key to the dirty map.\n// Make sure it is allocated and mark the read-only map as incomplete.\nm.dirtyLocked() // \u5982\u679cdirty\u4e3anil\uff0c\u5c31\u65b0\u5efa\u4e00\u4e2adirty\uff0c\u7136\u540e\u628aread\u4e2d\u6ca1\u5220\u9664\u7684key\u5b58\u5230dirty\nm.read.Store(readOnly{m: read.m, amended: true}) // \u6807\u8bb0dirtymap\u4e2d\u6709read\u4e2d\u4e0d\u5b58\u5728\u7684key\n}\nm.dirty[key] = newEntry(value) // \u503c\u5b58\u50a8\u5230dirty\uff0c\u4e0b\u6b21load\u53ef\u4ee5\u53d6\u5230\n}\nm.mu.Unlock()\n}\n// tryStore stores a value if the entry has not been expunged.\n//\n// If the entry is expunged, tryStore returns false and leaves the entry\n// unchanged.\n// \u5982\u679c\u8fd9\u4e2akey\u5df2\u7ecf\u88ab\u5220\u9664\u4e86\uff0c\u5c31\u8fd4\u56de\u4e86\n// key \u6ca1\u88ab\u5220\u9664\u539f\u5b50\u4ea4\u6362entry\u4e2dp\u7684\u503c\nfunc (e *entry) tryStore(i *interface{}) bool {\nfor {\np := atomic.LoadPointer(&amp;e.p)\nif p == expunged {\nreturn false\n}\nif atomic.CompareAndSwapPointer(&amp;e.p, p, unsafe.Pointer(i)) {\nreturn true\n}\n}\n}\n// \u5982\u679c\u6ca1\u6709dirtymap\u7684\u8bdd\u65b0\u5efa\u4e00\u4e2a\uff0c\u7136\u540e\u628aread\u4e2d\u6ca1\u6709\u5220\u9664\u7684\u5b58\u5230dirty\nfunc (m *Map) dirtyLocked() {\nif m.dirty != nil {\nreturn\n}\nread, _ := m.read.Load().(readOnly)\nm.dirty = make(map[interface{}]*entry, len(read.m))\nfor k, e := range read.m {\nif !e.tryExpungeLocked() {\nm.dirty[k] = e\n}\n}\n}\n// \u4e0d\u662fnil\uff0c\u4e5f\u4e0d\u662fexpunged\u7684\uff0c\u4e5f\u5c31\u662f\u6b63\u5e38\u503c\u624d\u4f1a\u88ab\u653e\u5230dirty\u4e2d\nfunc (e *entry) tryExpungeLocked() (isExpunged bool) {\np := atomic.LoadPointer(&amp;e.p)\nfor p == nil {\nif atomic.CompareAndSwapPointer(&amp;e.p, nil, expunged) {\nreturn true\n}\np = atomic.LoadPointer(&amp;e.p)\n}\nreturn p == expunged\n}\n</code></pre>"},{"location":"go/sync_map/#loadandstore","title":"LoadAndStore","text":"<pre><code>// LoadOrStore returns the existing value for the key if present.\n// Otherwise, it stores and returns the given value.\n// The loaded result is true if the value was loaded, false if stored.\nfunc (m *Map) LoadOrStore(key, value interface{}) (actual interface{}, loaded bool) {\n// Avoid locking if it's a clean hit.\n// \u6b63\u4ea7\u67e5\u8be2\nread, _ := m.read.Load().(readOnly)\nif e, ok := read.m[key]; ok {\nactual, loaded, ok := e.tryLoadOrStore(value)\nif ok {\nreturn actual, loaded\n}\n}\nm.mu.Lock()\nread, _ = m.read.Load().(readOnly)\nif e, ok := read.m[key]; ok {\nif e.unexpungeLocked() {\n// e \u4e3a nil\uff0ctryLoadOrStore \u53ef\u4ee5\u7ee7\u7eedstore\uff0c\u800c\u4e0d\u662f\u76f4\u63a5return\nm.dirty[key] = e\n}\nactual, loaded, _ = e.tryLoadOrStore(value)\n} else if e, ok := m.dirty[key]; ok {\nactual, loaded, _ = e.tryLoadOrStore(value)\nm.missLocked()\n} else {\nif !read.amended {\n// We're adding the first new key to the dirty map.\n// Make sure it is allocated and mark the read-only map as incomplete.\nm.dirtyLocked()\nm.read.Store(readOnly{m: read.m, amended: true})\n}\nm.dirty[key] = newEntry(value)\nactual, loaded = value, false\n}\nm.mu.Unlock()\nreturn actual, loaded\n}\n// tryLoadOrStore atomically loads or stores a value if the entry is not\n// expunged.\n//\n// If the entry is expunged, tryLoadOrStore leaves the entry unchanged and\n// returns with ok==false.\nfunc (e *entry) tryLoadOrStore(i interface{}) (actual interface{}, loaded, ok bool) {\np := atomic.LoadPointer(&amp;e.p)\nif p == expunged {\nreturn nil, false, false\n}\nif p != nil {\nreturn *(*interface{})(p), true, true\n}\n// Copy the interface after the first load to make this method more amenable\n// to escape analysis: if we hit the \"load\" path or the entry is expunged, we\n// shouldn't bother heap-allocating.\nic := i\nfor {\nif atomic.CompareAndSwapPointer(&amp;e.p, nil, unsafe.Pointer(&amp;ic)) {\nreturn i, false, true\n}\np = atomic.LoadPointer(&amp;e.p)\nif p == expunged {\nreturn nil, false, false\n}\nif p != nil {\nreturn *(*interface{})(p), true, true\n}\n}\n}\n</code></pre>"},{"location":"go/sync_map/#delete-loadanddelete","title":"Delete &amp;&amp; LoadAndDelete","text":"<ul> <li>\u67e5\u8be2\u6570\u636e\u7684\u903b\u8f91\u540cLoad</li> <li>\u4e3b\u8981\u8c03\u7528LoadAndDelete \u65b9\u6cd5</li> <li>\u8fd4\u56deval\uff0c\u548c\u4e00\u4e2abool</li> </ul> <pre><code>// LoadAndDelete deletes the value for a key, returning the previous value if any.\n// The loaded result reports whether the key was present.\nfunc (m *Map) LoadAndDelete(key interface{}) (value interface{}, loaded bool) {\nread, _ := m.read.Load().(readOnly)\ne, ok := read.m[key]\nif !ok &amp;&amp; read.amended {\nm.mu.Lock()\nread, _ = m.read.Load().(readOnly)\ne, ok = read.m[key]\nif !ok &amp;&amp; read.amended {\ne, ok = m.dirty[key]\ndelete(m.dirty, key)\n// Regardless of whether the entry was present, record a miss: this key\n// will take the slow path until the dirty map is promoted to the read\n// map.\nm.missLocked()\n}\nm.mu.Unlock()\n}\nif ok {\nreturn e.delete()\n}\nreturn nil, false\n}\n// \u76f4\u63a5\u6807\u8bb0\u6210nil\nfunc (e *entry) delete() (value interface{}, ok bool) {\nfor {\np := atomic.LoadPointer(&amp;e.p)\nif p == nil || p == expunged {\nreturn nil, false\n}\nif atomic.CompareAndSwapPointer(&amp;e.p, p, nil) {\nreturn *(*interface{})(p), true\n}\n}\n}\n</code></pre>"},{"location":"go/sync_map/#range","title":"Range","text":"<ul> <li>\u51fd\u6570\u4f20\u53c2\u4e00\u4e2a<code>func(key, value interface{}) bool</code></li> <li>\u51fd\u6570\u8fd4\u56defalse\uff0c\u7ed3\u675f\u5faa\u73af</li> <li>\u5982\u679cdirty\u4e2d\u5b58\u5728read\u4e2d\u6ca1\u6709\u7684key\uff0c\u52a0\u9501\u5c06dirty\u5347\u7ea7\u4e3aread</li> <li>\u7136\u540e\u5faa\u73af\u904d\u5386read</li> </ul> <pre><code>/ Range calls f sequentially for each key and value present in the map.\n// If f returns false, range stops the iteration.\n//\n// Range does not necessarily correspond to any consistent snapshot of the Map's\n// contents: no key will be visited more than once, but if the value for any key\n// is stored or deleted concurrently, Range may reflect any mapping for that key\n// from any point during the Range call.\n//\n// Range may be O(N) with the number of elements in the map even if f returns\n// false after a constant number of calls.\nfunc (m *Map) Range(f func(key, value interface{}) bool) {\n// We need to be able to iterate over all of the keys that were already\n// present at the start of the call to Range.\n// If read.amended is false, then read.m satisfies that property without\n// requiring us to hold m.mu for a long time.\nread, _ := m.read.Load().(readOnly)\nif read.amended {\n// m.dirty contains keys not in read.m. Fortunately, Range is already O(N)\n// (assuming the caller does not break out early), so a call to Range\n// amortizes an entire copy of the map: we can promote the dirty copy\n// immediately!\nm.mu.Lock()\nread, _ = m.read.Load().(readOnly)\nif read.amended {\nread = readOnly{m: m.dirty}\nm.read.Store(read)\nm.dirty = nil\nm.misses = 0\n}\nm.mu.Unlock()\n}\nfor k, e := range read.m {\nv, ok := e.load()\nif !ok {\ncontinue\n}\nif !f(k, v) {\nbreak\n}\n}\n}\n</code></pre>"},{"location":"go/system_command/","title":"\u8fd0\u884c\u7cfb\u7edf\u547d\u4ee4","text":""},{"location":"go/system_command/#_1","title":"\u8fd0\u884c\u7cfb\u7edf\u547d\u4ee4\uff0c\u83b7\u53d6\u7ed3\u679c\uff0c\u9519\u8bef\u4fe1\u606f","text":"<pre><code>func RunCommand(path, name string, arg ...string) (string, string, error) {\nvar err error\nvar msg string\ncmd := exec.Command(name, arg...)\nvar out bytes.Buffer\nvar stderr bytes.Buffer\ncmd.Stdout = &amp;out\ncmd.Stderr = &amp;stderr\ncmd.Dir = path\nerr = cmd.Run()\nlog.Println(cmd.Args)\nif err != nil {\nmsg = fmt.Sprint(err) + \": \" + stderr.String()\nerr = errors.New(msg)\nlog.Println(\"err\", err.Error(), \"cmd\", cmd.Args)\n}\nlog.Println(out.String())\nreturn msg, out.String(), nil\n}\n</code></pre>"},{"location":"go/uintptr_int_unsafe_pointer/","title":"Uintptr int unsafe pointer","text":""},{"location":"go/uintptr_int_unsafe_pointer/#uintptr","title":"uintptr","text":""},{"location":"go/uintptr_int_unsafe_pointer/#int","title":"int","text":""},{"location":"go/uintptr_int_unsafe_pointer/#unsafepointer","title":"unsafe.Pointer","text":""},{"location":"go/xianliu/","title":"\u9650\u6d41\u7b97\u6cd5&&\u9650\u6d41\u5668","text":"<p>\u7b14\u8bb0\u6765\u81ea\u5fae\u4fe1\u516c\u4f17\u53f7 </p> <p>\u5e38\u7528\u9650\u6d41\u7b97\u6cd5\u7684\u5e94\u7528\u573a\u666f\u548c\u5b9e\u73b0\u539f\u7406</p> <p>\u539f\u521b KevinYan11 \u7f51\u7ba1\u53e8bi\u53e8 2020-12-20 10:28</p> <p>\u5e38\u7528\u9650\u6d41\u7b97\u6cd5\u7684\u5e94\u7528\u573a\u666f\u548c\u5b9e\u73b0\u539f\u7406</p>"},{"location":"go/xianliu/#_1","title":"\u573a\u666f","text":"<ul> <li>\u5728\u9ad8\u5e76\u53d1\u4e1a\u52a1\u573a\u666f\u4e0b\uff0c\u4fdd\u62a4\u7cfb\u7edf\u65f6\uff0c\u5e38\u7528\u7684\"\u4e09\u677f\u65a7\"\u6709\uff1a\"\u7194\u65ad\u3001\u964d\u7ea7\u548c\u9650\u6d41\"\u3002</li> <li>\u4e1a\u52a1\u4ee3\u7801\u4e2d\u7684\u903b\u8f91\u9650\u6d41</li> </ul>"},{"location":"go/xianliu/#_2","title":"\u5e38\u89c1\u9650\u6d41\u7b97\u6cd5","text":"<ul> <li>\u8ba1\u6570\u5668</li> <li>\u6ed1\u52a8\u655e\u53e3</li> <li>\u6f0f\u6876</li> <li>\u4ee4\u724c\u6876</li> </ul>"},{"location":"go/xianliu/#_3","title":"\u8ba1\u6570\u5668","text":"<ul> <li>\u8ba1\u6570\u5668\u662f\u4e00\u79cd\u6bd4\u8f83\u7b80\u5355\u7c97\u66b4\u7684\u9650\u6d41\u7b97\u6cd5\uff0c\u601d\u60f3\u662f\u5728\u56fa\u5b9a\u65f6\u95f4\u7a97\u53e3\u5185\u5bf9\u8bf7\u6c42\u8fdb\u884c\u8ba1\u6570\uff0c\u4e0e\u9600\u503c\u8fdb\u884c\u6bd4\u8f83\u5224\u65ad\u662f\u5426\u9700\u8981\u9650\u6d41</li> <li>\u4e00\u65e6\u5230\u4e86\u65f6\u95f4\u4e34\u754c\u70b9\uff0c\u5c06\u8ba1\u6570\u5668\u6e05\u96f6</li> </ul>"},{"location":"go/xianliu/#_4","title":"\u7f3a\u9677","text":"<ul> <li>\u53ef\u4ee5\u5728\u6e05\u96f6\u7684\u524d\u4e00\u79d2\u548c\u540e\u4e00\u79d2\uff0c\u4e24\u79d2\u5185\u53d1\u9001\u9608\u503c\u4e582\u7684\u8bf7\u6c42</li> <li>\u4e00\u65e6\u8bf7\u6c42\u6570\u91cf\u77ac\u95f4\u53d8\u591a\uff0c\u8fd8\u662f\u4f1a\u6709\u5d29\u6e83\u7684\u98ce\u9669</li> </ul>"},{"location":"go/xianliu/#_5","title":"\u7b80\u5355\u4ee3\u7801\u5b9e\u73b0","text":"<pre><code>type LimitRate struct {\nrate  int           //\u9600\u503c\nbegin time.Time     //\u8ba1\u6570\u5f00\u59cb\u65f6\u95f4\ncycle time.Duration //\u8ba1\u6570\u5468\u671f\ncount int           //\u6536\u5230\u7684\u8bf7\u6c42\u6570\nlock  sync.Mutex    //\u9501\n}\nfunc (limit *LimitRate) Allow() bool {\nlimit.lock.Lock()\ndefer limit.lock.Unlock()\n// \u5224\u65ad\u6536\u5230\u8bf7\u6c42\u6570\u662f\u5426\u8fbe\u5230\u9600\u503c\nif limit.count == limit.rate-1 {\nnow := time.Now()\n// \u8fbe\u5230\u9600\u503c\u540e\uff0c\u5224\u65ad\u662f\u5426\u662f\u8bf7\u6c42\u5468\u671f\u5185\nif now.Sub(limit.begin) &gt;= limit.cycle {\nlimit.Reset(now)\nreturn true\n}\nreturn false\n} else {\nlimit.count++\nreturn true\n}\n}\nfunc (limit *LimitRate) Set(rate int, cycle time.Duration) {\nlimit.rate = rate\nlimit.begin = time.Now()\nlimit.cycle = cycle\nlimit.count = 0\n}\nfunc (limit *LimitRate) Reset(begin time.Time) {\nlimit.begin = begin\nlimit.count = 0\n}\n</code></pre>"},{"location":"go/xianliu/#_6","title":"\u6ed1\u52a8\u7a97\u53e3","text":"<ul> <li>\u6ed1\u52a8\u7a97\u53e3\u7b97\u6cd5\u5c06\u4e00\u4e2a\u5927\u7684\u65f6\u95f4\u7a97\u53e3\u5206\u6210\u591a\u4e2a\u5c0f\u7a97\u53e3\uff0c\u6bcf\u6b21\u5927\u7a97\u53e3\u5411\u540e\u6ed1\u52a8\u4e00\u4e2a\u5c0f\u7a97\u53e3\uff0c\u5e76\u4fdd\u8bc1\u5927\u7684\u7a97\u53e3\u5185\u6d41\u91cf\u4e0d\u4f1a\u8d85\u51fa\u6700\u5927\u503c</li> <li>\u6bd4\u56fa\u5b9a\u7a97\u53e3\u7684\u6d41\u91cf\u66f2\u7ebf\u66f4\u52a0\u5e73\u6ed1</li> <li>\u6ed1\u52a8\u65f6\u95f4\u7a97\u53e3\uff0c\u6211\u4eec\u53ef\u4ee5\u628a1s\u7684\u65f6\u95f4\u7a97\u53e3\u5212\u5206\u621010\u4e2a\u5c0f\u7a97\u53e3\uff0c\u6216\u8005\u60f3\u8c61\u7a97\u53e3\u670910\u4e2a\u65f6\u95f4\u63d2\u69fdtime slot, \u6bcf\u4e2atime slot\u7edf\u8ba1\u67d0\u4e2a100ms\u7684\u8bf7\u6c42\u6570\u91cf\u3002\u6bcf\u7ecf\u8fc7100ms\uff0c\u6709\u4e00\u4e2a\u65b0\u7684time slot\u52a0\u5165\u7a97\u53e3\uff0c\u65e9\u4e8e\u5f53\u524d\u65f6\u95f41s\u7684time slot\u51fa\u7a97\u53e3</li> <li>\u7a97\u53e3\u5185\u6700\u591a\u7ef4\u62a410\u4e2atime slot</li> </ul>"},{"location":"go/xianliu/#_7","title":"\u7f3a\u9677","text":"<ul> <li>\u6ed1\u52a8\u7a97\u53e3\u7b97\u6cd5\u662f\u56fa\u5b9a\u7a97\u53e3\u7684\u4e00\u79cd\u6539\u8fdb\uff0c\u4f46\u4ece\u6839\u672c\u4e0a\u5e76\u6ca1\u6709\u771f\u6b63\u89e3\u51b3\u56fa\u5b9a\u7a97\u53e3\u7b97\u6cd5\u7684\u4e34\u754c\u7a81\u53d1\u6d41\u91cf\u95ee\u9898</li> </ul>"},{"location":"go/xianliu/#_8","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<pre><code>package main\nimport (\n\"fmt\"\n\"sync\"\n\"time\"\n)\ntype timeSlot struct {\ntimestamp time.Time // \u8fd9\u4e2atimeSlot\u7684\u65f6\u95f4\u8d77\u70b9\ncount     int       // \u843d\u5728\u8fd9\u4e2atimeSlot\u5185\u7684\u8bf7\u6c42\u6570\n}\n// \u7edf\u8ba1\u6574\u4e2a\u65f6\u95f4\u7a97\u53e3\u4e2d\u5df2\u7ecf\u53d1\u751f\u7684\u8bf7\u6c42\u6b21\u6570\nfunc countReq(win []*timeSlot) int {\nvar count int\nfor _, ts := range win {\ncount += ts.count\n}\nreturn count\n}\ntype SlidingWindowLimiter struct {\nmu           sync.Mutex    // \u4e92\u65a5\u9501\u4fdd\u62a4\u5176\u4ed6\u5b57\u6bb5\nSlotDuration time.Duration // time slot\u7684\u957f\u5ea6\nWinDuration  time.Duration // sliding window\u7684\u957f\u5ea6\nnumSlots     int           // window\u5185\u6700\u591a\u6709\u591a\u5c11\u4e2aslot\nwindows      []*timeSlot\nmaxReq       int // \u5927\u7a97\u53e3\u65f6\u95f4\u5185\u5141\u8bb8\u7684\u6700\u5927\u8bf7\u6c42\u6570\n}\nfunc NewSliding(slotDuration time.Duration, winDuration time.Duration, maxReq int) *SlidingWindowLimiter {\nreturn &amp;SlidingWindowLimiter{\nSlotDuration: slotDuration,\nWinDuration:  winDuration,\nnumSlots:     int(winDuration / slotDuration),\nmaxReq:       maxReq,\n}\n}\nfunc (l *SlidingWindowLimiter) validate() bool {\nl.mu.Lock()\ndefer l.mu.Unlock()\nnow := time.Now()\n// \u5df2\u7ecf\u8fc7\u671f\u7684time slot\u79fb\u51fa\u65f6\u95f4\u7a97\ntimeoutOffset := -1\nfor i, ts := range l.windows {\nif ts.timestamp.Add(l.WinDuration).After(now) {\nbreak\n}\ntimeoutOffset = i\n}\nif timeoutOffset &gt; -1 {\nl.windows = l.windows[timeoutOffset+1:]\n}\n// \u5224\u65ad\u8bf7\u6c42\u662f\u5426\u8d85\u9650\nvar result bool\nif countReq(l.windows) &lt; l.maxReq {\nresult = true\n}\n// \u8bb0\u5f55\u8fd9\u6b21\u7684\u8bf7\u6c42\u6570\nvar lastSlot *timeSlot\nif len(l.windows) &gt; 0 {\nlastSlot = l.windows[len(l.windows)-1]\nif lastSlot.timestamp.Add(l.SlotDuration).Before(now) {\n// \u5982\u679c\u5f53\u524d\u65f6\u95f4\u5df2\u7ecf\u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\u63d2\u69fd\u7684\u8de8\u5ea6\uff0c\u90a3\u4e48\u65b0\u5efa\u4e00\u4e2a\u65f6\u95f4\u63d2\u69fd\nlastSlot = &amp;timeSlot{timestamp: now, count: 1}\nl.windows = append(l.windows, lastSlot)\n} else {\nlastSlot.count++\n}\n} else {\nlastSlot = &amp;timeSlot{timestamp: now, count: 1}\nl.windows = append(l.windows, lastSlot)\n}\nreturn result\n}\nfunc (l *SlidingWindowLimiter) LimitTest() string {\nif l.validate() {\nreturn \"Accepted\"\n} else {\nreturn \"Ignored\"\n}\n}\nfunc main() {\nlimiter := NewSliding(100*time.Millisecond, time.Second, 10)\nfor i := 0; i &lt; 5; i++ {\nfmt.Println(limiter.LimitTest())\n}\ntime.Sleep(100 * time.Millisecond)\nfor i := 0; i &lt; 5; i++ {\nfmt.Println(limiter.LimitTest())\n}\nfmt.Println(limiter.LimitTest())\nfor _, v := range limiter.windows {\nfmt.Println(v.timestamp, v.count)\n}\nfmt.Println(\"moments later...\")\ntime.Sleep(time.Second)\nfor i := 0; i &lt; 7; i++ {\nfmt.Println(limiter.LimitTest())\n}\nfor _, v := range limiter.windows {\nfmt.Println(v.timestamp, v.count)\n}\n}\n</code></pre>"},{"location":"go/xianliu/#_9","title":"\u6f0f\u6876","text":""},{"location":"go/xianliu/#_10","title":"\u7b97\u6cd5\u601d\u60f3","text":"<ul> <li>\u6f0f\u6876\u7b97\u6cd5\u662f\u9996\u5148\u60f3\u8c61\u6709\u4e00\u4e2a\u6728\u6876\uff0c\u6876\u7684\u5bb9\u91cf\u662f\u56fa\u5b9a\u7684\u3002\u5f53\u6709\u8bf7\u6c42\u5230\u6765\u65f6\u5148\u653e\u5230\u6728\u6876\u4e2d\uff0c\u5904\u7406\u8bf7\u6c42\u7684worker\u4ee5\u56fa\u5b9a\u7684\u901f\u5ea6\u4ece\u6728\u6876\u4e2d\u53d6\u51fa\u8bf7\u6c42\u8fdb\u884c\u76f8\u5e94</li> <li>\u5982\u679c\u6728\u6876\u5df2\u7ecf\u6ee1\u4e86\uff0c\u76f4\u63a5\u8fd4\u56de\u8bf7\u6c42\u9891\u7387\u8d85\u9650\u7684\u9519\u8bef\u7801\u6216\u8005\u9875\u9762</li> </ul>"},{"location":"go/xianliu/#_11","title":"\u4f7f\u7528\u573a\u666f","text":"<ul> <li>\u6f0f\u6876\u7b97\u6cd5\u662f\u6d41\u91cf\u6700\u5747\u5300\u7684\u9650\u6d41\u5b9e\u73b0\u65b9\u5f0f\uff0c\u4e00\u822c\u7528\u4e8e\u6d41\u91cf\u201c\u6574\u5f62\u201d</li> <li>\u4f8b\u5982\u4fdd\u62a4\u6570\u636e\u5e93\u7684\u9650\u6d41\uff0c\u5148\u628a\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\u52a0\u5165\u5230\u6728\u6876\u4e2d\uff0cworker\u518d\u4ee5db\u80fd\u591f\u627f\u53d7\u7684qps\u4ece\u6728\u6876\u4e2d\u53d6\u51fa\u8bf7\u6c42\uff0c\u53bb\u8bbf\u95ee\u6570\u636e\u5e93</li> </ul>"},{"location":"go/xianliu/#_12","title":"\u7f3a\u9677","text":"<ul> <li>\u6728\u6876\u6d41\u5165\u8bf7\u6c42\u7684\u901f\u7387\u662f\u4e0d\u56fa\u5b9a\u7684\uff0c\u4f46\u662f\u6d41\u51fa\u7684\u901f\u7387\u662f\u6052\u5b9a\u7684\u3002\u80fd\u4fdd\u62a4\u7cfb\u7edf\u8d44\u6e90\u4e0d\u88ab\u6253\u6ee1</li> <li>\u9762\u5bf9\u7a81\u53d1\u6d41\u91cf\u65f6\u4f1a\u6709\u5927\u91cf\u8bf7\u6c42\u5931\u8d25\uff0c\u4e0d\u9002\u5408\u7535\u5546\u62a2\u8d2d\u548c\u5fae\u535a\u51fa\u73b0\u70ed\u70b9\u4e8b\u4ef6\u7b49\u573a\u666f\u7684\u9650\u6d41</li> </ul>"},{"location":"go/xianliu/#_13","title":"\u7b80\u5355\u4ee3\u7801\u5b9e\u73b0","text":"<pre><code>// \u4e00\u4e2a\u56fa\u5b9a\u5927\u5c0f\u7684\u6876\uff0c\u8bf7\u6c42\u6309\u7167\u56fa\u5b9a\u7684\u901f\u7387\u6d41\u51fa\n// \u8bf7\u6c42\u6570\u5927\u4e8e\u6876\u7684\u5bb9\u91cf\uff0c\u5219\u629b\u5f03\u591a\u4f59\u8bf7\u6c42\ntype LeakyBucket struct {\nrate       float64    // \u6bcf\u79d2\u56fa\u5b9a\u6d41\u51fa\u901f\u7387\ncapacity   float64    // \u6876\u7684\u5bb9\u91cf\nwater      float64    // \u5f53\u524d\u6876\u4e2d\u8bf7\u6c42\u91cf\nlastLeakMs int64      // \u6876\u4e0a\u6b21\u6f0f\u6c34\u5fae\u79d2\u6570\nlock       sync.Mutex // \u9501\n}\nfunc (leaky *LeakyBucket) Allow() bool {\nleaky.lock.Lock()\ndefer leaky.lock.Unlock()\nnow := time.Now().UnixNano() / 1e6\n// \u8ba1\u7b97\u5269\u4f59\u6c34\u91cf,\u4e24\u6b21\u6267\u884c\u65f6\u95f4\u4e2d\u9700\u8981\u6f0f\u6389\u7684\u6c34\nleakyWater := leaky.water - (float64(now-leaky.lastLeakMs) * leaky.rate / 1000)\nleaky.water = math.Max(0, leakyWater)\nleaky.lastLeakMs = now\nif leaky.water+1 &lt;= leaky.capacity {\nleaky.water++\nreturn true\n} else {\nreturn false\n}\n}\nfunc (leaky *LeakyBucket) Set(rate, capacity float64) {\nleaky.rate = rate\nleaky.capacity = capacity\nleaky.water = 0\nleaky.lastLeakMs = time.Now().UnixNano() / 1e6\n}\n</code></pre>"},{"location":"go/xianliu/#_14","title":"\u4ee4\u724c\u6876","text":""},{"location":"go/xianliu/#_15","title":"\u7b97\u6cd5\u601d\u60f3","text":"<ul> <li>\u5012\u7740\u7684\u6f0f\u6876</li> <li>\u4ee5\u6052\u5b9a\u7684\u901f\u7387\u5411\u6876\u4e2d\u6dfb\u52a0\u4ee4\u724c</li> <li>\u6728\u6876\u6ee1\u4e86\u5219\u4e0d\u518d\u52a0\u5165\u4ee4\u724c\u3002\u670d\u52a1\u6536\u5230\u8bf7\u6c42\u65f6\u5c1d\u8bd5\u4ece\u6728\u6876\u4e2d\u53d6\u51fa\u4e00\u4e2a\u4ee4\u724c</li> <li>\u4ee4\u724c\u6876\u7a7a\u95f2\u65f6\uff0c\u53ef\u4ee5\u6512\u7740\u6700\u9ad8\u7684\u9650\u989d\u6570\u7684\u4ee4\u724c</li> <li>\u7531\u4e8e\u6728\u6876\u5185\u53ea\u8981\u6709\u4ee4\u724c\uff0c\u8bf7\u6c42\u5c31\u53ef\u4ee5\u88ab\u5904\u7406\uff0c\u6240\u4ee5\u4ee4\u724c\u6876\u7b97\u6cd5\u53ef\u4ee5\u652f\u6301\u7a81\u53d1\u6d41\u91cf</li> </ul>"},{"location":"go/xianliu/#_16","title":"\u53c2\u6570\u8bbe\u7f6e","text":"<ul> <li>\u6728\u6876\u7684\u5bb9\u91cf  - \u8003\u8651\u4e1a\u52a1\u903b\u8f91\u7684\u8d44\u6e90\u6d88\u8017\u548c\u673a\u5668\u80fd\u627f\u8f7d\u5e76\u53d1\u5904\u7406\u591a\u5c11\u4e1a\u52a1\u903b\u8f91\u3002</li> <li>\u751f\u6210\u4ee4\u724c\u7684\u901f\u5ea6 - \u592a\u6162\u7684\u8bdd\u8d77\u4e0d\u5230\u201c\u6512\u201d\u4ee4\u724c\u5e94\u5bf9\u7a81\u53d1\u6d41\u91cf\u7684\u6548\u679c</li> </ul>"},{"location":"go/xianliu/#_17","title":"\u7b80\u5355\u4ee3\u7801\u5b9e\u73b0","text":"<pre><code>type TokenBucket struct {\nrate         int64 //\u56fa\u5b9a\u7684token\u653e\u5165\u901f\u7387, r/s\ncapacity     int64 //\u6876\u7684\u5bb9\u91cf\ntokens       int64 //\u6876\u4e2d\u5f53\u524dtoken\u6570\u91cf\nlastTokenSec int64 //\u4e0a\u6b21\u5411\u6876\u4e2d\u653e\u4ee4\u724c\u7684\u65f6\u95f4\u7684\u65f6\u95f4\u6233\uff0c\u5355\u4f4d\u4e3a\u79d2\nlock sync.Mutex\n}\nfunc (bucket *TokenBucket) Take() bool {\nbucket.lock.Lock()\ndefer bucket.lock.Unlock()\nnow := time.Now().Unix()\nbucket.tokens = bucket.tokens + (now-bucket.lastTokenSec)*bucket.rate // \u5148\u6dfb\u52a0\u4ee4\u724c\nif bucket.tokens &gt; bucket.capacity {\nbucket.tokens = bucket.capacity\n}\nbucket.lastTokenSec = now\nif bucket.tokens &gt; 0 {\n// \u8fd8\u6709\u4ee4\u724c\uff0c\u9886\u53d6\u4ee4\u724c\nbucket.tokens--\nreturn true\n} else {\n// \u6ca1\u6709\u4ee4\u724c,\u5219\u62d2\u7edd\nreturn false\n}\n}\nfunc (bucket *TokenBucket) Init(rate, cap int64) {\nbucket.rate = rate\nbucket.capacity = cap\nbucket.tokens = 0\nbucket.lastTokenSec = time.Now().Unix()\n}\n</code></pre>"},{"location":"go/xianliu/#_18","title":"\u5b98\u65b9\u9650\u6d41\u5668","text":"<ul> <li><code>golang.org/x/time/rate</code></li> <li>\u57fa\u4e8e\u4ee4\u724c\u6876\u5b9e\u73b0</li> </ul> <pre><code>type Limiter struct {\nmu     sync.Mutex\nlimit  Limit\nburst  int\ntokens float64\n// last is the last time the limiter's tokens field was updated\nlast time.Time\n// lastEvent is the latest time of a rate-limited event (past or future)\nlastEvent time.Time\n}\n</code></pre>"},{"location":"go/xianliu/#_19","title":"\u521d\u59cb\u5316","text":"<ul> <li><code>limiter := rate.NewLimiter(10, 100);</code></li> <li>\u4e24\u4e2a\u53c2\u6570<ul> <li>\u7b2c\u4e00\u4e2a\u53c2\u6570\u6bcf\u79d2\u5411\u6876\u4e2d\u653e\u4ee4\u724c\u7684\u4e2a\u6570</li> <li>\u4ee4\u724c\u6876\u7684\u5bb9\u91cf\uff0c\u4ee4\u724c\u6700\u591a\u7684\u4e2a\u6570</li> </ul> </li> <li>\u8fd8\u53ef\u4ee5\u7528<code>every</code>\u65b9\u6cd5\u6307\u5b9a\u5411\u6876\u4e2d\u653e\u7f6etoken\u7684\u95f4\u9694 <pre><code>limit := rate.Every(100 * time.Millisecond);\nlimiter := rate.NewLimiter(limit, 100);\n</code></pre></li> </ul>"},{"location":"go/xianliu/#_20","title":"\u52a8\u6001\u8c03\u6574","text":"<ul> <li><code>SetLimit(Limit)</code> \u6539\u53d8\u653e\u5165 Token \u7684\u901f\u7387</li> <li><code>SetBurst(int)</code> \u6539\u53d8 Token \u6876\u5927\u5c0f</li> </ul>"},{"location":"go/xianliu/#_21","title":"\u4f7f\u7528","text":"<ul> <li>\u4e09\u7c7b\u65b9\u6cd5\u4f9b\u7a0b\u5e8f\u6d88\u8d39 token</li> <li>\u53ef\u4ee5\u540c\u6b65\u7b49\u5f85token\u751f\u6210\uff0c\u4e5f\u53ef\u4ee5\u6ca1\u6709token\u65f6\u8fd4\u56detoken\u83b7\u53d6\u5931\u8d25</li> <li><code>Wait/WaitN</code></li> <li><code>Allow/AllowN</code></li> <li><code>Reserve/ReserveN</code></li> </ul>"},{"location":"go/xianliu/#waitwaitn","title":"Wait/WaitN","text":"<ul> <li>Wait \u76f8\u5f53\u4e8e WaitN(ctx, 1)</li> <li>\u5982\u679c\u6b64\u65f6\u6876\u5185 Token \u6570\u7ec4\u4e0d\u8db3 (\u5c0f\u4e8e N)\uff0c Wait \u65b9\u6cd5\u5c06\u4f1a\u963b\u585e\u4e00\u6bb5\u65f6\u95f4\uff0c\u76f4\u81f3 Token \u6ee1\u8db3\u6761\u4ef6</li> <li>\u5982\u679c\u5145\u8db3\u5219\u76f4\u63a5\u8fd4\u56de</li> <li>\u53ef\u4ee5\u8bbe\u7f6e context \u7684 Deadline \u6216\u8005 Timeout\uff0c\u6765\u51b3\u5b9a\u6b64\u6b21 Wait \u7684\u6700\u957f\u65f6\u95f4</li> </ul>"},{"location":"go/xianliu/#allowallown","title":"Allow/AllowN","text":"<ul> <li>Allow \u5b9e\u9645\u4e0a\u5c31\u662f\u5bf9 AllowN(time.Now(),1) \u8fdb\u884c\u7b80\u5316\u7684\u51fd\u6570</li> <li>AllowN \u65b9\u6cd5\u8868\u793a\uff0c\u622a\u6b62\u5230\u67d0\u4e00\u65f6\u523b\uff0c\u76ee\u524d\u6876\u4e2d\u6570\u76ee\u662f\u5426\u81f3\u5c11\u4e3a n \u4e2a\uff0c\u6ee1\u8db3\u5219\u8fd4\u56de true\uff0c\u540c\u65f6\u4ece\u6876\u4e2d\u6d88\u8d39 n \u4e2a token\u3002\u53cd\u4e4b\u4e0d\u6d88\u8d39\u6876\u4e2d\u7684Token\uff0c\u8fd4\u56defalse</li> <li>\u5bf9\u5e94\u7ebf\u4e0a\u7684\u4f7f\u7528\u573a\u666f\u662f\uff0c\u5982\u679c\u8bf7\u6c42\u901f\u7387\u8d85\u8fc7\u9650\u5236\uff0c\u5c31\u76f4\u63a5\u4e22\u5f03\u8d85\u9891\u540e\u7684\u8bf7\u6c42</li> </ul>"},{"location":"go/xianliu/#reservereserven","title":"Reserve/ReserveN","text":"<ul> <li>Reserve \u76f8\u5f53\u4e8e ReserveN(time.Now(), 1)\u3002</li> <li>ReserveN \u7684\u7528\u6cd5\u5c31\u76f8\u5bf9\u6765\u8bf4\u590d\u6742\u4e00\u4e9b\uff0c\u5f53\u8c03\u7528\u5b8c\u6210\u540e\uff0c\u65e0\u8bba Token \u662f\u5426\u5145\u8db3\uff0c\u90fd\u4f1a\u8fd4\u56de\u4e00\u4e2a *Reservation \u5bf9\u8c61</li> <li>\u53ef\u4ee5\u8c03\u7528\u8be5\u5bf9\u8c61\u7684Delay()\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u8fd4\u56de\u7684\u53c2\u6570\u7c7b\u578b\u4e3atime.Duration\uff0c\u53cd\u6620\u4e86\u9700\u8981\u7b49\u5f85\u7684\u65f6\u95f4\uff0c\u5fc5\u987b\u7b49\u5230\u7b49\u5f85\u65f6\u95f4\u4e4b\u540e\uff0c\u624d\u80fd\u8fdb\u884c\u63a5\u4e0b\u6765\u7684\u5de5\u4f5c</li> <li>\u5982\u679c\u4e0d\u60f3\u7b49\u5f85\uff0c\u53ef\u4ee5\u8c03\u7528Cancel()\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u4f1a\u5c06 Token \u5f52\u8fd8</li> </ul>"},{"location":"go/xianliu/#_22","title":"\u4e3b\u8981\u903b\u8f91\u4ee3\u7801","text":"<pre><code>// reserveN is a helper method for AllowN, ReserveN, and WaitN.\n// maxFutureReserve specifies the maximum reservation wait duration allowed.\n// reserveN returns Reservation, not *Reservation, to avoid allocation in AllowN and WaitN.\nfunc (lim *Limiter) reserveN(now time.Time, n int, maxFutureReserve time.Duration) Reservation {\nlim.mu.Lock()\ndefer lim.mu.Unlock()\n// Inf \u4e00\u4e2a\u7279\u522b\u5927\u7684\u503c\uff0c\u4ea7\u751f\u4ee4\u724c\u7684\u901f\u7387\u6700\u5927\uff0c\u4ee3\u8868\u4e00\u76f4\u6709\u4ee4\u724c\nif lim.limit == Inf {\nreturn Reservation{\nok:        true,\nlim:       lim,\ntokens:    n,\ntimeToAct: now,\n}\n// \u4e0d\u4ea7\u751f\u4ee4\u724c\uff0c\u6876\u5185\u7684\u7528\u5149\u5c31\u6ca1\u6709\u4e86\n} else if lim.limit == 0 {\nvar ok bool\nif lim.burst &gt;= n {\nok = true\nlim.burst -= n\n}\nreturn Reservation{\nok:        ok,\nlim:       lim,\ntokens:    lim.burst,\ntimeToAct: now,\n}\n}\n// \u8fd0\u884c\u68c0\u67e5\u770b\u662f\u4e0d\u662f\u9700\u8981\u751f\u6210\u4ee4\u724c\uff0c\u548climit\u751f\u6210\u4ee4\u724c\u7684\u65f6\u95f4\n// now \u5c31\u662f\u4f20\u8fdb\u53bb\u7684\u65f6\u95f4\n// last \u5982\u679c\u4e3anow\uff0c\u672c\u8f6e\u6ca1\u6709\u751f\u6210\u4ee4\u724c\uff0c\u5426\u5219\u751f\u6210\u65b0\u4ee4\u724c\u4e86\n// tokens \u672c\u8f6e\u4ee4\u724c\u603b\u6570\nnow, last, tokens := lim.advance(now)\n// Calculate the remaining number of tokens resulting from the request.\n// \u6263\u9664\u9700\u8981\u4f7f\u7528\u7684\u4ee4\u724c\ntokens -= float64(n)\n// Calculate the wait duration\n// \u6839\u636e\u4ee4\u724c\u6570\u673a\u9009\u9700\u8981\u7b49\u5f85\u65f6\u95f4\nvar waitDuration time.Duration\nif tokens &lt; 0 {\nwaitDuration = lim.limit.durationFromTokens(-tokens)\n}\n// Decide result\n// \u672c\u8f6e\u662f\u4e0d\u662f\u80fd\u62ff\u5230\u4ee4\u724c\nok := n &lt;= lim.burst &amp;&amp; waitDuration &lt;= maxFutureReserve\n// Prepare reservation\nr := Reservation{\nok:    ok,\nlim:   lim,\nlimit: lim.limit,\n}\nif ok {\nr.tokens = n\nr.timeToAct = now.Add(waitDuration)\n}\n// Update state\nif ok {\nlim.last = now\nlim.tokens = tokens\nlim.lastEvent = r.timeToAct\n} else {\nlim.last = last\n}\nreturn r\n}\n// advance calculates and returns an updated state for lim resulting from the passage of time.\n// lim is not changed.\n// advance requires that lim.mu is held.\nfunc (lim *Limiter) advance(now time.Time) (newNow time.Time, newLast time.Time, newTokens float64) {\nlast := lim.last\nif now.Before(last) {\nlast = now\n}\n// Calculate the new number of tokens, due to time that passed.\nelapsed := now.Sub(last)\ndelta := lim.limit.tokensFromDuration(elapsed)\ntokens := lim.tokens + delta\nif burst := float64(lim.burst); tokens &gt; burst {\ntokens = burst\n}\nreturn now, last, tokens\n}\n// durationFromTokens is a unit conversion function from the number of tokens to the duration\n// of time it takes to accumulate them at a rate of limit tokens per second.\nfunc (limit Limit) durationFromTokens(tokens float64) time.Duration {\nif limit &lt;= 0 {\nreturn InfDuration\n}\nseconds := tokens / float64(limit)\nreturn time.Duration(float64(time.Second) * seconds)\n}\n// tokensFromDuration is a unit conversion function from a time duration to the number of tokens\n// which could be accumulated during that duration at a rate of limit tokens per second.\nfunc (limit Limit) tokensFromDuration(d time.Duration) float64 {\nif limit &lt;= 0 {\nreturn 0\n}\nreturn d.Seconds() * float64(limit)\n}\n</code></pre>"},{"location":"go/zaxiang/","title":"\u6742\u9879","text":""},{"location":"go/zaxiang/#_1","title":"\u5fae\u4fe1\u6587\u7ae0\u5f85\u6574\u7406","text":"<ul> <li>Go \u4f9d\u8d56\u6ce8\u5165 https://mp.weixin.qq.com/s/Do-kTTbyKT4rsAGD3ujKwQ</li> <li>\u7ed3\u6784\u4f53\u591a\u5b57\u6bb5\u539f\u5b50\u64cd\u4f5c https://mp.weixin.qq.com/s/Wa1l4M5P89rQ2pyB_KnMxg</li> <li>\u51fd\u6570\u8c03\u7528\u76f8\u5173 https://mp.weixin.qq.com/s/Ekx9JpclqLaa4baB6V5rLw https://mp.weixin.qq.com/s/QGp1H6-__pus1Kbb7U8CHw</li> <li>\u6cdb\u578b https://mp.weixin.qq.com/s/s9SITQB2xQb4tqmoLaJUpw</li> </ul>"},{"location":"go/zaxiang/#nil","title":"\u5404\u79cdnil\u5224\u65ad","text":"<ul> <li> <p>\u5207\u7247\u5b9a\u4e49\u4f46\u4e0d\u521d\u59cb\u5316\uff0c\u5219\u4e3anil <pre><code>func main() {\nvar s []int\nfmt.Println(s == nil)\n}\n</code></pre></p> </li> <li> <p>map\u5b9a\u4e49\u4f46\u662f\u4e0d\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u5219\u4e3anil <pre><code>func main() {\nvar m map[string]int\nfmt.Println(m == nil)\n}\n</code></pre></p> </li> <li> <p>\u63a5\u53e3\u53d8\u91cf\u5b9a\u4e49\u4f46\u662f\u4e0d\u8d4b\u521d\u503c <pre><code>type MyInterface interface {\nM1(string)\n}\nfunc main() {\nvar m MyInterface\nfmt.Println(m == nil)\n}\n</code></pre></p> </li> <li> <p>channel\u5b9a\u4e49\u4f46\u662f\u4e0d\u521d\u59cb\u5316 <pre><code>func main() {\nvar ch chan int\nfmt.Println(ch == nil)\n}\n</code></pre></p> </li> <li> <p>\u6307\u9488\u7c7b\u578b\u53d8\u91cf\u6ca1\u6709\u88ab\u663e\u5f0f\u8d4b\u4e88\u521d\u503c <pre><code>type Book struct{}\nfunc main() {\nvar b *Book\nfmt.Println(b == nil)\n}\n</code></pre></p> </li> </ul>"},{"location":"http/https/","title":"HTTPS","text":""},{"location":"http/https/#https","title":"HTTPS","text":"<ul> <li>\u8d85\u6587\u672c\u4f20\u8f93\u5b89\u5168\u534f\u8bae</li> <li>HyperText Transfer Protocol Secure</li> <li>HTTP over TLS\uff0c HTTP over SSL</li> <li>\u9ed8\u8ba4\u5360\u7528\u7aef\u53e3443</li> </ul>"},{"location":"http/https/#tlsssl","title":"TLS\u3001SSL","text":"<ul> <li>TLS Transport Layer Security\u4f20\u8f93\u5c42\u5b89\u5168\u534f\u8bae</li> <li>SSL Secure Socket Layer \u5b89\u5168\u5957\u63a5\u5c42</li> <li>\u5de5\u4f5c\u5728\u4f20\u8f93\u5c42\u548c\u5e94\u7528\u5c42\u4e4b\u95f4</li> </ul>"},{"location":"http/https/#tls","title":"TLS \u6d41\u7a0b","text":""},{"location":"http/https/#client-hello","title":"\u5ba2\u6237\u7aef\u53d1\u9001 <code>client hello</code>","text":"<ul> <li>TLS \u7248\u672c\u53f7</li> <li>\u652f\u6301\u7684\u52a0\u5bc6\u7ec4\u4ef6\u5217\u8868</li> <li>\u4f7f\u7528\u7684\u52a0\u5bc6\u7b97\u6cd5\u4ee5\u53ca\u79d8\u94a5\u957f\u5ea6</li> <li>\u4e00\u4e2a\u968f\u673a\u6570\u5b57 client random\uff08\u7528\u9014\uff1a\u9632\u6b62\u8fde\u63a5\u91cd\u653e\uff09</li> </ul>"},{"location":"http/https/#server-hello","title":"\u670d\u52a1\u53d1\u9001 <code>server hello</code>","text":"<ul> <li>TLS\u7248\u672c\u53f7</li> <li>\u4ece\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u52a0\u5bc6\u7ec4\u4ef6\u5217\u8868\u4e2d\u9009\u62e9\u7684\u52a0\u5bc6\u65b9\u5f0f</li> <li>\u4e00\u4e2a\u968f\u673a\u6570 server random</li> </ul>"},{"location":"http/https/#certificate","title":"\u670d\u52a1\u7aef\u53d1\u9001 <code>Certificate</code>","text":"<ul> <li>\u670d\u52a1\u5668\u88abCA\u7b7e\u540d\u8fc7\u7684\u516c\u94a5\u8bc1\u4e66</li> </ul>"},{"location":"http/https/#server-key-exchange","title":"\u670d\u52a1\u7aef\u53d1\u9001 <code>Server Key Exchange</code>","text":"<ul> <li>\u5b9e\u73b0<code>ECHDE</code>\u7b97\u6cd5\u7684\u5176\u4e2d\u4e00\u4e2a\u53c2\u6570\uff08Server Params\uff09</li> <li>Server Params \u7ecf\u8fc7\u4e86\u670d\u52a1\u7aef\u79c1\u94a5\u7b7e\u540d</li> </ul>"},{"location":"http/https/#server-hello-done","title":"\u670d\u52a1\u7aef <code>Server Hello Done</code>","text":"<ul> <li>\u544a\u77e5\u5ba2\u6237\u7aef\uff0c\u670d\u52a1\u7aef\u53d1\u9001\u5b8c\u6bd5\uff0c\u534f\u5546\u8fc7\u7a0b\u7ed3\u675f</li> <li>\u660e\u6587\u5171\u4eab<ul> <li>client random</li> <li>server random</li> <li>server params</li> <li>\u670d\u52a1\u7aef\u516c\u94a5\u8bc1\u4e66</li> </ul> </li> </ul>"},{"location":"http/https/#client-key-exchange","title":"\u5ba2\u6237\u7aef\u53d1\u9001 <code>Client Key Exchange</code>","text":"<ul> <li>\u5b9e\u73b0<code>ECHDE</code>\u7b97\u6cd5\u4e2d\u7684\u53e6\u4e00\u4e2a\u53c2\u6570\uff08Client Params\uff09</li> <li>\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u6b64\u65f6\u90fd\u6709\u4e86 Client Params \u548c Server Params</li> <li>\u7528 ECHDE \u7b97\u6cd5\u548c\u4e24\u4e2aParams \u751f\u6210\u968f\u673a\u79d8\u94a5\u4e32 pre-master</li> <li>\u7528client random\uff0cserver random\u548cpre-master\u751f\u6210\u4e3b\u79d8\u94a5</li> <li>\u4e3b\u5bc6\u94a5\u884d\u751f\u51fa\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u53d1\u9001\u7528\u7684\u4f1a\u8bdd\u79d8\u94a5</li> </ul>"},{"location":"http/https/#change-ciper-spec","title":"\u5ba2\u6237\u7aef\u53d1\u9001 <code>Change Ciper Spec</code>","text":"<ul> <li>\u544a\u77e5\u670d\u52a1\u7aef\u4e4b\u540e\u7684\u901a\u4fe1\u4f1a\u91c7\u7528\u8ba1\u7b97\u51fa\u6765\u7684\u79d8\u94a5\u8fdb\u884c\u52a0\u5bc6\u901a\u4fe1</li> </ul>"},{"location":"http/https/#finished","title":"\u5ba2\u6237\u7aef\u53d1\u9001 <code>Finished</code>","text":"<ul> <li>\u8fde\u63a5\u81f3\u4eca\u5168\u90e8\u62a5\u6587\u7684\u6574\u4f53\u6821\u9a8c\u503c\uff08\u6458\u8981\uff09\uff0c\u52a0\u5bc6\u4e4b\u540e\u53d1\u9001\u7ed9\u670d\u52a1\u7aef</li> </ul>"},{"location":"http/https/#change-ciper-specfinished","title":"\u670d\u52a1\u7aef\u53d1\u9001 <code>Change Ciper Spec</code>\u548c<code>Finished</code>","text":"<ul> <li>\u670d\u52a1\u7aef\u89e3\u5bc6\u68c0\u67e5\u62a5\u6587\u6ca1\u6709\u95ee\u9898\uff0c\u7136\u540eTLS\u5b8c\u6bd5</li> <li>\u540e\u7eed\u6240\u6709\u6570\u636e\u91c7\u7528\u52a0\u5bc6\u4f20\u8f93</li> </ul>"},{"location":"http/http%E5%8D%87%E7%BA%A7%E6%94%B9%E9%80%A0/","title":"HTTP\u5347\u7ea7\u6539\u8fdb","text":""},{"location":"http/http%E5%8D%87%E7%BA%A7%E6%94%B9%E9%80%A0/#http11","title":"HTTP1.1 \u534f\u8bae\u4e0d\u8db3","text":"<ul> <li>\u540c\u4e00\u65f6\u95f4\uff0c\u4e00\u4e2a\u8fde\u63a5\u53ea\u80fd\u5bf9\u5e94\u4e00\u4e2a\u8bf7\u6c42</li> <li>\u53ea\u5141\u8bb8\u5ba2\u6237\u7aef\u4e3b\u52a8\u53d1\u8d77\u8fde\u63a5</li> <li>\u540c\u4e00\u4e2a\u4f1a\u8bdd\u7684\u591a\u6b21\u8bf7\u6c42\u4e2d\uff0c\u5934\u4fe1\u606f\u4f1a\u88ab\u91cd\u590d\u4f20\u8f93</li> </ul>"},{"location":"http/http%E5%8D%87%E7%BA%A7%E6%94%B9%E9%80%A0/#spdy","title":"SPDY","text":"<ul> <li>\u57fa\u4e8eTCP\u7684\u5e94\u7528\u5c42\u534f\u8bae\uff0c\u5f3a\u5236\u4f7f\u7528TLS/SSL</li> <li>\u4fee\u6539\u4e86HTTP\u8bf7\u6c42\u4e0e\u54cd\u5e94\u7684\u4f20\u8f93\u65b9\u5f0f</li> <li>SPDY\u662fHTTP2\u7684\u524d\u8eab</li> </ul>"},{"location":"http/http%E5%8D%87%E7%BA%A7%E6%94%B9%E9%80%A0/#http2","title":"HTTP2","text":"<ul> <li>\u5e95\u5c42\u4f20\u8f93\u505a\u4e86\u4f18\u5316\u548c\u6539\u8fdb\uff0c\u5728\u8bed\u610f\u4e0a\u5b8c\u5168\u517c\u5bb9HTTP1.1</li> <li>HTTP2\u91c7\u7528\u4e86\u4e8c\u8fdb\u5236\u4f20\u8f93\uff0c\u800cHTTP1.1\u91c7\u7528\u4e86\u6587\u672c\u4f20\u8f93</li> </ul>"},{"location":"http/http%E5%8D%87%E7%BA%A7%E6%94%B9%E9%80%A0/#http2_1","title":"HTTP2\u5e38\u7528\u6982\u5ff5","text":""},{"location":"http/http%E5%8D%87%E7%BA%A7%E6%94%B9%E9%80%A0/#_1","title":"\u6570\u636e\u6d41","text":"<ul> <li>\u5df2\u5efa\u7acb\u7684\u8fde\u63a5\u7684\u53cc\u5411\u5b57\u8282\u6d41\uff0c\u53ef\u4ee5\u627f\u8f7d\u4e00\u6761\u6216\u591a\u6761\u6d88\u606f</li> <li>\u6240\u6709\u901a\u4fe1\u90fd\u5728\u4e00\u4e2aTCP\u8fde\u63a5\u4e0a\u5b8c\u6210\uff0c\u6b64\u8fde\u63a5\u53ef\u4ee5\u627f\u8f7d\u4efb\u610f\u6570\u91cf\u7684\u53cc\u5411\u6570\u636e\u6d41</li> </ul>"},{"location":"http/http%E5%8D%87%E7%BA%A7%E6%94%B9%E9%80%A0/#_2","title":"\u6d88\u606f","text":"<ul> <li>\u4e0e\u903b\u8f91HTTP\u8bf7\u6c42\u6216\u54cd\u5e94\u6d88\u606f\u5bf9\u5e94\uff0c\u7531\u4e00\u7cfb\u5217\u5e27\u7ec4\u6210</li> </ul>"},{"location":"http/http%E5%8D%87%E7%BA%A7%E6%94%B9%E9%80%A0/#_3","title":"\u5e27","text":"<ul> <li>HTTP2\u901a\u4fe1\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u6bcf\u4e2a\u5e27\u90fd\u5305\u542b\u5e27\u5934\uff0c\u6807\u8bc6\u51fa\u5f53\u524d\u5e27\u6240\u5c5e\u7684\u6570\u636e\u6d41</li> <li>\u6765\u81ea\u4e0d\u540c\u6570\u636e\u6d41\u7684\u5e27\u53ef\u4ee5\u4ea4\u9519\u53d1\u9001\uff0c\u7136\u540e\u518d\u6839\u636e\u6bcf\u4e2a\u5e27\u5934\u7684\u6570\u636e\u6d41\u6807\u8bc6\u7b26\u91cd\u65b0\u7ec4\u88c5</li> </ul>"},{"location":"http/http%E5%8D%87%E7%BA%A7%E6%94%B9%E9%80%A0/#multiplexing","title":"\u591a\u8def\u590d\u7528 Multiplexing","text":"<ul> <li>\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u53ef\u4ee5\u5c06\u6d88\u606f\u5206\u89e3\u6210\u4e92\u4e0d\u4f9d\u8d56\u7684\u5e27\uff0c\u4ea4\u9519\u53d1\u9001\uff0c\u7136\u540e\u6536\u5230\u540e\u91cd\u65b0\u7ec4\u88c5\u8d77\u6765</li> <li>\u5e76\u884c\u4ea4\u9519\u53d1\u9001\u591a\u4e2a\u8bf7\u6c42\uff0c\u8bf7\u6c42\u4e4b\u95f4\u4e92\u4e0d\u5f71\u54cd</li> <li>\u5e76\u884c\u4ea4\u9519\u53d1\u9001\u591a\u4e2a\u54cd\u5e94\uff0c\u54cd\u5e94\u4e4b\u95f4\u4e92\u4e0d\u5f71\u54cd</li> <li>\u4f7f\u7528\u4e00\u4e2a\u8fde\u63a5\u53d1\u9001\u8bf7\u6c42\u548c\u54cd\u5e94</li> </ul>"},{"location":"http/http%E5%8D%87%E7%BA%A7%E6%94%B9%E9%80%A0/#_4","title":"\u4f18\u5148\u7ea7","text":"<ul> <li>HTTP2\u5141\u8bb8\u6bcf\u4e2a\u6570\u636e\u6d41\u6709\u4e00\u4e2a\u6743\u91cd\u548c\u4f18\u5148\u7ea7</li> <li>\u5ba2\u6237\u7aef\u53ef\u4ee5\u8bbe\u7f6e\u6bcf\u4e2a\u4f18\u5148\u7ea7</li> <li>\u670d\u52a1\u7aef\u6839\u636e\u4f18\u5148\u7ea7\u8fdb\u884c\u54cd\u5e94\uff0c\u9ad8\u4f18\u5148\u7ea7\u7684\u4f18\u5148\u4f20\u8f93\u7ed9\u5ba2\u6237\u7aef</li> </ul>"},{"location":"http/http%E5%8D%87%E7%BA%A7%E6%94%B9%E9%80%A0/#_5","title":"\u5934\u90e8\u538b\u7f29","text":"<ul> <li>\u4f7f\u7528HPACK\u538b\u7f29\u8bf7\u6c42\u5934\u548c\u54cd\u5e94\u5934</li> <li>\u51cf\u5c11\u5f00\u9500\uff0c\u63d0\u9ad8\u6027\u80fd</li> </ul>"},{"location":"http/http%E5%8D%87%E7%BA%A7%E6%94%B9%E9%80%A0/#server-push","title":"\u670d\u52a1\u5668\u63a8\u9001 Server Push","text":"<ul> <li>\u670d\u52a1\u5668\u9664\u4e86\u54cd\u5e94\u5ba2\u6237\u7aef\u7684\u9700\u6c42\u5916\uff0c\u8fd8\u53ef\u4ee5\u4e3b\u52a8\u63a8\u9001\u5185\u5bb9\u7ed9\u5ba2\u6237\u7aef</li> </ul>"},{"location":"http/http%E5%8D%87%E7%BA%A7%E6%94%B9%E9%80%A0/#http2_2","title":"HTTP2\u95ee\u9898","text":"<ul> <li>\u961f\u5934\u963b\u585e</li> <li>\u63e1\u624b\u5ef6\u8fdf</li> </ul>"},{"location":"http/nav/","title":"Nav","text":"<ul> <li>\u6570\u636e\u94fe\u8def\u5c42</li> <li>\u7f51\u7edc\u5c42</li> <li>\u4f20\u8f93\u5c42</li> <li>\u7f51\u7edc\u5b89\u5168</li> <li>HTTPS</li> <li>HTTP\u5347\u7ea7\u6539\u8fdb</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/","title":"\u4f20\u8f93\u5c42","text":""},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#_1","title":"\u4f20\u8f93\u5c42\u6709\u4e24\u4e2a\u534f\u8bae","text":"<ul> <li>TCP Transmission Control Protocol \u4f20\u8f93\u63a7\u5236\u534f\u8bae</li> <li>UDP User Datagram Protocol \u7528\u6237\u6570\u636e\u62a5\u534f\u8bae </li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#udp","title":"UDP","text":"<ul> <li>\u65e0\u8fde\u63a5\uff0c\u51cf\u5c11\u4e86\u5efa\u7acb\u548c\u91ca\u653e\u94fe\u63a5\u7684\u5f00\u9500</li> <li>\u5c3d\u6700\u5927\u80fd\u529b\u4ea4\u4ed8\uff0c\u4e0d\u4fdd\u8bc1\u53ef\u9760\u4f20\u8f93</li> <li>\u9996\u90e8\u8f83\u5c0f\uff0cUDP\u9996\u90e8\u53ea\u67098\u4e2a\u5b57\u8282 </li> <li>UDP\u957f\u5ea6\uff1a\u9996\u90e8\u7684\u957f\u5ea6 + \u6570\u636e\u90e8\u5206\u7684\u957f\u5ea6</li> <li>UDP\u68c0\u9a8c\u548c\uff1a\u8ba1\u7b97\u7684\u662f\u4f2a\u9996\u90e8\uff0812\u5b57\u8282\uff09 + \u9996\u90e8\uff088\u5b57\u8282\uff09  + \u6570\u636e</li> <li> <p>\u4f2a\u9996\u90e8\uff1a\u4ec5\u5728\u8ba1\u7b97\u68c0\u9a8c\u548c\u65f6\u8d77\u4f5c\u7528\uff0c\u5e76\u4e0d\u4f1a\u4f20\u9012\u7ed9\u7f51\u7edc\u5c42 </p> </li> <li> <p>UDP\uff1a\u5ba2\u6237\u7aef\u6e90\u7aef\u53e3\u65f6\u4e34\u65f6\u5f00\u542f\u7684\u968f\u673a\u7aef\u53e3</p> </li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#_2","title":"\u4f2a\u9996\u90e8","text":"<ul> <li>\u6e90IP 4\u5b57\u8282</li> <li>\u76ee\u6807IP 4\u5b57\u8282</li> <li>\u96f6\u586b\u5145 + \u534f\u8bae + \u957f\u5ea6\uff08\u9996\u90e8 + \u6570\u636e\u90e8\u5206\uff09 4\u5b57\u8282</li> <li>TCP\u4e0eUDP\u4f2a\u9996\u90e8\u662f\u4e00\u6837\u7684</li> <li>\u4ec5\u5728\u8ba1\u7b97\u68c0\u9a8c\u548c\u65f6\u8d77\u4f5c\u7528</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#tcp","title":"TCP","text":"<ul> <li>TCP\u9996\u90e8\u7684\u7a7a\u95f4\u81f3\u5c11\u662f20\u5b57\u8282\uff0c\u6700\u592760\u5b57\u8282</li> <li>\u548cUDP\u4e00\u6837 \u4e5f\u670912\u4e2a\u5b57\u8282\u7684\u4f2a\u9996\u90e8\uff0c\u4e0d\u4f1a\u4f20\u9012\u5230\u7f51\u7edc\u5c42</li> <li>\u6570\u636e\u504f\u79fb\u53604\u4f4d\uff0c\u53d6\u503c\u8303\u56f4 0x0101~0x1111\uff0c\u4e584\u4ee3\u8868\u9996\u90e8\u957f\u5ea6\uff0c\u6700\u5c0f\u503c\u662f5\uff0c\u6700\u5927\u503c\u662f15</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#tcp_1","title":"TCP\u8981\u70b9","text":"<ul> <li>\u53ef\u9760\u4f20\u8f93</li> <li>\u6d41\u91cf\u63a7\u5236</li> <li>\u62e5\u585e\u63a7\u5236</li> <li>\u8fde\u63a5\u7ba1\u7406</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#_3","title":"\u6570\u636e\u957f\u5ea6","text":"<ul> <li>UDP\u9996\u90e8\u752816\u4f4d\u8bb0\u5f55\u6574\u4e2aUDP\u6570\u636e\u52a0\u9996\u90e8\u7684\u957f\u5ea6</li> <li>TCP\u75284\u4f4d\u6807\u8bb0\u4e86TCP\u62a5\u6587\u9996\u90e8\u957f\u5ea6\uff0c\u5e76\u6ca1\u6709\u8bb0\u5f55\u6570\u636e\u957f\u5ea6 </li> <li>\u4f20\u8f93\u5c42\u7684\u6570\u636e\u957f\u5ea6 = \u7f51\u7edc\u5c42\u7684\u6570\u636e\u957f\u5ea6 - \u7f51\u7edc\u5c42\u7684\u9996\u90e8\u957f\u5ea6 - \u4f20\u8f93\u5c42\u7684\u9996\u90e8\u957f\u5ea6</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#tcp-flag","title":"TCP flag\u542b\u4e49","text":"<ul> <li>URG\uff1aUrgent\uff0c\u7d27\u6025\u5b57\u6bb5\uff0c\u4e3a1\u65f6\uff0c\u8868\u793a\u5f53\u524d\u62a5\u6587\u6bb5\u4e2d\u6709\u7d27\u6025\u6570\u636e\uff0c\u9700\u8981\u4f18\u5148\u4f20\u8f93\uff0c\u5c3d\u5feb\u4f20\u9001</li> <li>ACK\uff1aAcknowledgment \u786e\u8ba4\u5b57\u6bb5\uff0c\u5f53ack\u4e3a1\u65f6\uff0c\u9996\u90e8\u4e2d\u7684\u786e\u8ba4\u53f7\u5b57\u6bb5\u624d\u6709\u6548</li> <li>PSH\uff1aPush \u4ea4\u4e92\u5f0f\u7f51\u7edc</li> <li>RST\uff1aReset\uff0c\u4e3a1\u65f6\uff0c\u8868\u660e\u94fe\u63a5\u4e2d\u51fa\u73b0\u4e25\u91cd\u5dee\u9519\uff0c\u5fc5\u987b\u91ca\u653e\u8fde\u63a5\uff0c\u7136\u540e\u91cd\u65b0\u521b\u5efa\u8fde\u63a5</li> <li>SYN\uff1aSynchronization</li> <li>SYN = 1\uff0cACK = 0\u65f6\uff0c\u8868\u660e\u8fd9\u662f\u4e00\u4e2a\u5efa\u7acb\u8fde\u63a5\u7684\u8bf7\u6c42</li> <li>SYN = 1\uff0cACK = 1\u65f6\uff0c\u8868\u660e\u5bf9\u65b9\u540c\u610f\u5efa\u7acb\u8fde\u63a5</li> <li>FIN\uff1aFinish\uff0c\u4e3a1\u65f6\uff0c\u8868\u660e\u6570\u636e\u5df2\u7ecf\u53d1\u9001\u5b8c\u6bd5\uff0c\u8981\u6c42\u91ca\u653e\u8fde\u63a5</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#_4","title":"\u5e8f\u53f7","text":"<ul> <li>4\u4e2a\u5b57\u8282</li> <li>\u4f20\u8f93\u8fc7\u7a0b\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u5b57\u8282\u90fd\u4f1a\u6709\u4e00\u4e2a\u7f16\u53f7</li> <li>\u5efa\u7acb\u8fde\u63a5\u540e\uff0c\u5e8f\u53f7\u4ee3\u8868\uff1a\u8fd9\u4e00\u6b21\u4f20\u7ed9\u5bf9\u65b9\u7684TCP\u6570\u636e\u90e8\u5206\u7684\u7b2c\u4e00\u4e2a\u5b57\u8282\u7684\u7f16\u53f7</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#_5","title":"\u786e\u8ba4\u53f7","text":"<ul> <li>4\u4e2a\u5b57\u8282</li> <li>\u5efa\u7acb\u8fde\u63a5\u540e\uff0c\u786e\u8ba4\u53f7\u4ee3\u8868\uff1a\u671f\u671b\u5bf9\u65b9\u4e0b\u4e00\u6b21\u4f20\u8fc7\u6765\u7684TCP\u6570\u636e\u90e8\u5206\u7684\u7b2c\u4e00\u4e2a\u5b57\u8282\u7684\u7f16\u53f7</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#tcp_2","title":"TCP \u53ef\u9760\u4f20\u8f93","text":"<ul> <li>\u4e09\u6b21\u63e1\u624b</li> <li>\u56db\u6b21\u6325\u624b</li> <li> <p>ARQ\u534f\u8bae\uff08Automatic Repeat Request\uff09 \u81ea\u52a8\u91cd\u4f20\u534f\u8bae\uff0c\u8d85\u65f6\u91cd\u4f20</p> <ul> <li>\u6bcf\u4e2a\u5305\u91cd\u8bd5\u6b21\u6570\u8fc7\u591a\u4f1a\u53d1\u9001reset\u62a5\u6587\uff0c\u91cd\u65b0\u521b\u5efa\u8fde\u63a5</li> </ul> </li> <li> <p>\u6ed1\u52a8\u7a97\u53e3\u534f\u8bae\uff1a\u6279\u91cf\u53d1\u9001\uff0c\u6279\u91cf\u786e\u8ba4\uff0c\u4ece\u786e\u8ba4\u7684\u62a5\u6587\u7684\u4e0b\u4e00\u4e2a\u5f00\u59cb\u91cd\u65b0\u53d1\u9001</p> <ul> <li>SACK(selective acknowledgment)\uff0c\u9009\u62e9\u786e\u8ba4\uff0c\u653e\u5728TCP\u9996\u90e8\u7684\u9009\u9879\u90e8\u5206</li> </ul> </li> <li>\u62e5\u585e\u63a7\u5236</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#sack","title":"SACK \u9009\u62e9\u786e\u8ba4","text":"<ul> <li>\u653e\u5728TCP\u9996\u90e8\u7684\u9009\u9879\u90e8\u5206</li> <li>kind 1\u5b57\u8282\uff0c\u503c\u4e3a5\u4ee3\u8868\u662fsack</li> <li>length 1\u5b57\u8282\uff0c\u4ee3\u8868sack\u90e8\u5206\u7684\u957f\u5ea6\u5360\u7528\u591a\u5c11\u5b57\u8282</li> <li>left range \u5de6\u8fb9\u754c 4\u5b57\u8282</li> <li>right range \u53f3\u8fb9\u754c 4\u5b57\u8282</li> <li>\u6bcf\u4e2a\u9009\u9879\u90e8\u5206\u6700\u591a\u643a\u5e264\u7ec4\u8fb9\u754c\u503c<ul> <li>\u9009\u9879\u90e8\u5206\u6700\u957f40\u5b57\u8282</li> <li>4 * 8 + 2 = 34</li> </ul> </li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#tcp_3","title":"TCP \u6d41\u91cf\u63a7\u5236","text":"<ul> <li>\u4e0d\u8fdb\u884c\u6d41\u91cf\u63a7\u5236\u63a5\u6536\u65b9\u5df2\u7ecf\u65e0\u6cd5\u63a5\u53d7\u4e86\uff0c\u53d1\u9001\u65b9\u8fd8\u5728\u53d1\u9001\uff0c\u9020\u6210\u6d6a\u8d39</li> <li><code>\u70b9\u5bf9\u70b9</code>\u7684\u63a7\u5236\u53d1\u9001\u65b9\u7684\u53d1\u9001\u901f\u7387</li> <li>\u901a\u8fc7\u8bfb\u53d6\u63a5\u6536\u65b9\u7684\u7a97\u53e3\u5927\u5c0f\uff0c\u6765\u63a7\u5236\u53d1\u9001\u65b9\u53d1\u9001\u6570\u636e\u7684\u591a\u5c11</li> <li>\u53d1\u9001\u65b9\u7684\u7a97\u53e3 <code>&lt;=</code> \u63a5\u6536\u65b9\u7684\u7a97\u53e3\u5927\u5c0f</li> <li>\u63a5\u6536\u65b9\u7a97\u53e3\u4e3a0\uff0c\u53d1\u9001\u65b9\u505c\u6b62\u53d1\u9001\uff0c\u5982\u679c\u8fd8\u6709\u62a5\u6587\u8981\u53d1\u9001\uff0c\u5c31\u5b9a\u65f6\u8be2\u95ee\u63a5\u6536\u65b9\u7684\u7a97\u53e3\u5927\u5c0f</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#tcp_4","title":"TCP \u62e5\u585e\u63a7\u5236","text":"<ul> <li>\u9632\u6b62\u8fc7\u591a\u7684\u6570\u636e\u6ce8\u5165\u5230\u7f51\u7edc\u4e2d</li> <li>\u9632\u6b62\u94fe\u8def\u8fc7\u8f7d\u6216\u7f51\u7edc\u4e2d\u4f20\u8f93\u7684\u786c\u4ef6\u8fc7\u8f7d</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#_6","title":"\u65b9\u6cd5","text":"<ul> <li>\u6162\u5f00\u59cb\uff1acwnd \u6307\u6570\u7ea7\u589e\u957f</li> <li>\u62e5\u585e\u907f\u514d\uff1a\u5230\u8fbe\u6162\u5f00\u59cb\u9608\u503c\u540e\uff0ccwdn\u7ebf\u6027\u589e\u957f</li> <li>\u5feb\u901f\u91cd\u4f20\uff1a\u8fde\u7eed\u6536\u5230\u540c\u4e00\u4e2a\u62a5\u6587\u76843\u6b21\u786e\u8ba4\u540e\uff0c\u7acb\u5373\u91cd\u65b0\u53d1\u9001\u4e0b\u4e00\u4e2a\u62a5\u6587</li> <li>\u5feb\u901f\u6062\u590d\uff1a\u9047\u5230\u7f51\u7edc\u62e5\u585e\uff0c\u7136\u540ecwnd\u7684\u8d77\u59cb\u503c\u53d8\u4e3a\u6162\u5f00\u59cb\u9608\u503c\u7684\u4e00\u534a\uff0c\u7ebf\u6027\u589e\u957f</li> </ul> <ul> <li>MSS: Maximum Segment Size \u6bcf\u4e2a\u6570\u636e\u6bb5\u7684\u6570\u636e\u6700\u5927\u5927\u5c0f</li> <li>cwnd congestion window \u62e5\u585e\u7a97\u53e3</li> <li>rwnd receive window \u63a5\u6536\u7a97\u53e3</li> <li>swnd send window \u53d1\u9001\u7a97\u53e3</li> <li>swnd = min(cwnd, rwnd)</li> <li>slow start threshold \u6162\u5f00\u59cb\u9608\u503c\uff0c\u5230\u8fbe\u9608\u503c\u540e\uff0ccwdn \u7ebf\u6027\u589e\u957f</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#tcp_5","title":"TCP \u8fde\u63a5\u7ba1\u7406","text":"<ul> <li>\u8fde\u63a5\u65f6\u4e09\u6b21\u63e1\u624b</li> <li>\u65ad\u5f00\u8fde\u63a5\u65f6\u56db\u6b21\u6325\u624b</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#tcp_6","title":"TCP \u5efa\u7acb\u8fde\u63a5 \u4e09\u6b21\u63e1\u624b","text":"<ul> <li>closed \u5ba2\u6237\u7aef\u5904\u4e8e\u5173\u95ed\u72b6\u6001</li> <li>listen server\u5904\u4e8e\u76d1\u542c\u72b6\u6001\uff0c\u7b49\u5f85\u5ba2\u6237\u7aef\u8fde\u63a5</li> <li>syn-rcvd server\u7aef\u6536\u5230\u4e86\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u5efa\u7acb\u94fe\u63a5\u62a5\u6587\u540e\u7684\u72b6\u6001</li> <li>syn-sent client\u7aef\u53d1\u9001\u4e86\u5efa\u7acb\u8fde\u63a5\u62a5\u6587\u540e\u7684\u72b6\u6001</li> <li>established \u8fde\u63a5\u5efa\u7acb\u72b6\u6001<ul> <li>client\u6536\u5230\u4e86server\u8fd4\u56de\u7684\u786e\u8ba4\u5efa\u7acb\u8fde\u63a5\u62a5\u6587\u7684\u72b6\u6001</li> <li>server\u7aef\u6536\u5230\u4e86client\u8fd4\u56de\u7684\u5bf9\u5efa\u7acb\u8fde\u63a5\u62a5\u6587\u8fdb\u884c\u786e\u8ba4\u7684\u62a5\u6587\u540e\u7684\u72b6\u6001</li> </ul> </li> </ul> <ul> <li>\u524d\u4e24\u6b21\u5efa\u7acb\u8fde\u63a5\u7684\u7279\u70b9<ul> <li>\u6570\u636e\u90e8\u5206\u957f\u5ea6\u90fd\u4e3a0</li> <li>SYN\u90fd\u8bbe\u7f6e\u4e3a1</li> <li>\u9996\u90e8\u957f\u5ea6\u4e3a32\u5b57\u8282\uff0820\u5b57\u8282\u9996\u90e8 + 12\u5b57\u8282\u9009\u7ebf\u90e8\u5206\uff09</li> <li>\u4f1a\u4ea4\u6362MSS\uff0c\u662f\u5426\u652f\u6301SACK\uff0c\u548c\u7a97\u53e3\u5927\u5c0f</li> </ul> </li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#2","title":"\u4e3a\u4ec0\u4e48\u4e0d\u91c7\u75282\u6b21\u63e1\u624b","text":"<ul> <li>\u4e24\u6b21\u63e1\u624b\uff0c\u670d\u52a1\u7aef\u6536\u5230\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u5c31\u5efa\u7acb\u8fde\u63a5\uff0c\u5bb9\u6613\u9020\u6210\u6d6a\u8d39\u8d44\u6e90</li> <li>\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u94fe\u63a5\u5efa\u7acb\u8bf7\u6c42\u56e0\u4e3a\u7f51\u7edc\u6ce2\u52a8\uff0c\u5bfc\u81f4\u8d85\u65f6\u9001\u8fbe\uff0c\u6b64\u65f6\u94fe\u63a5\u5df2\u7ecf\u91ca\u653e</li> <li>\u5982\u679c\u91c7\u7528\u4e24\u6b21\u63e1\u624b\uff0c\u670d\u52a1\u7aef\u4f1a\u5bf9\u8fd9\u4e2a\u5ef6\u8fdf\u7684\u62a5\u6587\u8fdb\u884c\u786e\u8ba4\u5efa\u7acb\u8fde\u63a5\uff0c\u4f46\u662f\u5ba2\u6237\u7aef\u5e76\u65e0\u94fe\u63a5\u610f\u613f\uff0c\u5c31\u4f1a\u9020\u6210\u670d\u52a1\u7aef\u8fde\u63a5\u6d6a\u8d39</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#3","title":"\u7b2c3\u6b21\u63e1\u624b\u5931\u8d25\u4e86\uff0c\u600e\u4e48\u5904\u7406","text":"<ul> <li>\u56e0\u4e3a\u7f51\u7edc\u95ee\u9898\uff0c\u5bfc\u81f4server\u5e76\u6ca1\u6709\u6536\u5230client\u7aef\u76843\u6b21\u63e1\u624b</li> <li>\u670d\u52a1\u7aef\u8d85\u65f6\u65f6\u95f4\u5185\uff0c\u91cd\u65b0\u53d1\u9001SYN + ACK\u786e\u8ba4\u5305</li> <li>\u5982\u679c\u53d1\u9001\u591a\u6b21\u786e\u8ba4\u5305\u90fd\u6ca1\u6709\u6536\u5230\u56de\u590d\uff0c\u5219\u4f1a\u53d1\u9001RST\u5305\uff0c\u5f3a\u5236\u5173\u95ed\u8fde\u63a5</li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#tcp_7","title":"TCP \u65ad\u5f00\u8fde\u63a5 \u56db\u6b21\u6325\u624b","text":"<ul> <li><code>fin_wait1</code> \u4e3b\u52a8\u5173\u95ed\u94fe\u63a5\uff0c\u5e76\u4e14\u5411\u5bf9\u65b9\u53d1\u9001\u4e86\u5173\u95ed\u94fe\u63a5\u62a5\u6587</li> <li><code>fin_wait2</code> \u6536\u5230\u5bf9\u65b9\u53d1\u9001\u7684ACK\u786e\u8ba4\u62a5\u6587\uff0c\u7136\u540e\u7b49\u5f85\u5bf9\u65b9\u53d1\u9001\u5173\u95ed\u8fde\u63a5\u62a5\u6587</li> <li> <p><code>close_wait</code> \u6536\u5230\u5bf9\u65b9\u53d1\u9001\u7684\u5173\u95ed\u94fe\u63a5\u62a5\u6587\uff0c\u5e76\u5411\u5bf9\u65b9\u56de\u590d\u4e86ACK\u786e\u8ba4\u62a5\u6587</p> <ul> <li>\u5224\u65ad\u5bf9\u65b9\u81ea\u5df1\u662f\u5426\u8fd8\u6709\u6570\u636e\u8981\u53d1\u7ed9\u5bf9\u65b9\uff0c\u6709\u5c31\u7ee7\u7eed\u53d1\u9001\u6570\u636e</li> <li>\u6ca1\u6709\u5c31\u53d1\u9001FIN\u62a5\u6587\u8868\u793a\u81ea\u5df1\u4e5f\u60f3\u5173\u95ed\u8fde\u63a5</li> </ul> </li> <li> <p><code>closing</code> \u53cc\u65b9\u540c\u65f6\u6536\u5230\u4e86\u5bf9\u65b9\u53d1\u9001\u7684FIN\u62a5\u6587</p> </li> <li><code>last_ack</code> \u88ab\u52a8\u5173\u95ed\u7684\u4e00\u65b9\uff0c\u5728\u53d1\u9001\u5b8cFIN\u62a5\u6587\u540e\uff0c\u7b49\u5f85\u53e6\u4e00\u65b9\u786e\u8ba4</li> <li><code>time_wait</code> \u6536\u5230\u4e86\u5bf9\u65b9\u7684FIN\u62a5\u6587\uff0c\u5e76\u56de\u590d\u4e86ACK\uff0c\u7b492MSL\u65f6\u95f4\u540e\u5c31\u81ea\u52a8\u8fdb\u5165<code>closed</code>\u72b6\u6001</li> <li>\u5982\u679c\u5728<code>fin_wait1</code>\u72b6\u6001\u636e\u6536\u5230\u4e86\u5bf9\u65b9\u7684FIN\u548cACK\u4e00\u8d77\u7684\u62a5\u6587\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165\u5230<code>time_wait</code>\u72b6\u6001</li> <li><code>closed</code> \u5173\u95ed\u72b6\u6001</li> </ul> <p></p>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#tcp_8","title":"TCP \u65ad\u5f00\u8fde\u63a5\u7ec6\u8282","text":"<ul> <li>\u8fde\u63a5\u53cc\u65b9\u4efb\u610f\u4e00\u65b9\u90fd\u53ef\u4ee5\u4e3b\u52a8\u5173\u95ed\u8fde\u63a5</li> <li>\u5168\u53cc\u5de5\u901a\u4fe1\uff0c\u53cc\u5411\u5173\u95ed\u8fde\u63a5</li> <li>\u4e3b\u52a8\u5173\u95ed\u4e00\u65b9\u53d1\u9001\u5bf9\u53e6\u4e00\u65b9\u7684FIN\u62a5\u6587\u786e\u8ba4\u7684ACK\u540e\uff0c\u9700\u8981\u7b49\u5f852MSL<ul> <li>MSL\uff08Maximum Segment Lifetime\uff09TCP\u62a5\u6587\u5728internet\u4e2d\u6700\u5927\u751f\u5b58\u65f6\u95f4</li> </ul> </li> </ul>"},{"location":"http/%E4%BC%A0%E8%BE%93%E5%B1%82/#ack","title":"\u4e00\u65b9\u53d1\u9001ACK\u540e\uff0c\u65ad\u5f00\u8fde\u63a5","text":"<ul> <li>\u5982\u679c\u7f51\u7edc\u6ce2\u52a8\uff0c\u9020\u6210\u53e6\u4e00\u65b9\u6ca1\u6709\u6536\u5230ACK\uff0c\u5c31\u4f1a\u91cd\u590d\u53d1\u9001FIN</li> <li>\u5ffd\u7565FIN\uff0c\u9020\u6210\u53e6\u4e00\u65b9\u8d44\u6e90\u6d6a\u8d39</li> <li>\u63a5\u6536FIN\uff0c\u9020\u6210\u7aef\u53e3\u76f8\u540c\u7684\u65b0\u8fde\u63a5\u5728\u6536\u5230\u62a5\u6587\u540e\u54cd\u5e94\u5173\u95ed\u8fde\u63a5</li> </ul>"},{"location":"http/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/","title":"\u6570\u636e\u94fe\u8def\u5c42","text":""},{"location":"http/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#data-link","title":"\u6570\u636e\u94fe\u8def\u5c42 Data Link","text":"<ul> <li>\u94fe\u8def\uff1a \u4ece\u4e00\u4e2a\u8282\u70b9\u5230\u76f8\u90bb\u8282\u70b9\u5230\u4e00\u6bb5\u7269\u7406\u7ebf\u8def\uff08\u6709\u7ebf\u6216\u65e0\u7ebf\uff09\uff0c\u4e2d\u95f4\u6ca1\u6709\u5176\u4ed6\u4ea4\u6362\u8282\u70b9\uff08\u7f51\u6865\u548c\u96c6\u7ebf\u5668\u9664\u5916\uff09</li> <li>\u6570\u636e\u94fe\u8def\u5c42\u7684\u6570\u636e\u53eb <code>\u5e27</code></li> <li>\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u94fe\u8def\uff0c\u6240\u7528\u7684\u901a\u4fe1\u534f\u8bae\u53ef\u80fd\u662f\u4e0d\u540c\u7684</li> <li>\u5e7f\u64ad\u4fe1\u9053\uff1a CSMA/CD\u534f\u8bae\uff0c\u6bd4\u5982\u540c\u8f74\u7535\u7f06\uff0c\u96c6\u7ebf\u5668\u7b49\u7ec4\u6210\u7684\u7535\u8def</li> <li>\u70b9\u5bf9\u70b9\u4fe1\u9053\uff1a PPP\u534f\u8bae\uff0c\u6bd4\u5982\u4e24\u4e2a\u8def\u7531\u5668\u4e4b\u95f4\u7684\u4fe1\u9053</li> </ul>"},{"location":"http/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#3","title":"\u6570\u636e\u94fe\u8def\u5c42\u76843\u4e2a\u57fa\u672c\u95ee\u9898","text":"<ul> <li>\u5c01\u88c5\u6210\u5e27</li> <li>\u900f\u660e\u4f20\u8f93</li> <li>\u5dee\u9519\u68c0\u9a8c</li> </ul>"},{"location":"http/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#_1","title":"\u5c01\u88c5\u6210\u5e27","text":"<ul> <li>\u5e27\u7684\u6570\u636e\u90e8\u5206\u5c31\u662f\u7f51\u7edc\u5c42\u4f20\u9012\u4e0b\u6765\u7684\u6570\u636e\u5305</li> <li>\u6700\u5927\u4f20\u8f93\u5355\u5143MTU\uff0c\u6bcf\u4e00\u79cd\u6570\u636e\u94fe\u8def\u5c42\u534f\u8bae\u90fd\u89c4\u5b9a\u4e86\u6240\u80fd\u4f20\u9001\u7684\u5e27\u7684\u6570\u636e\u957f\u5ea6\u4e0a\u9650</li> <li>\u4ee5\u592a\u7f51\u7684MTU\u4e3a1500\u5b57\u8282 </li> </ul>"},{"location":"http/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#_2","title":"\u900f\u660e\u4f20\u8f93","text":"<ul> <li>SOH\u5e27\u5f00\u59cb\u7b26</li> <li>EOT\u5e27\u7ed3\u675f\u7b26</li> <li>\u6570\u636e\u90e8\u5206\u4e00\u65e6\u51fa\u73b0\u5e27\u5f00\u59cb\u6216\u8005\u5e27\u7ed3\u675f\u7b26\u5c31\u8fdb\u884c\u8f6c\u4e49 </li> </ul>"},{"location":"http/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#_3","title":"\u5dee\u9519\u68c0\u9a8c","text":"<ul> <li>FCS\u662f\u6839\u636e\u6570\u636e\u90e8\u5206 + \u9996\u90e8\u8ba1\u7b97\u5f97\u51fa\u6765\u7684</li> </ul>"},{"location":"http/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#csmacd","title":"CSMA/CD\u534f\u8bae","text":"<ul> <li>Carrier Sense Multiple Access wich Collision Detectio \u8f7d\u6ce2\u76d1\u542c\u591a\u8def\u8bbf\u95ee/\u51b2\u7a81\u68c0\u6d4b</li> <li>\u4f7f\u7528\u8fd9\u4e2a\u534f\u8bae\u7684\u7f51\u7edc\u53ef\u4ee5\u79f0\u4e3a\u662f\u4ee5\u592a\u7f51\uff0c\u5b83\u4f20\u8f93\u7684\u662f\u4ee5\u592a\u7f51\u5e27\uff0c\u683c\u5f0f\u6709Ethernet V2\u6807\u51c6\uff0cIEEE\u7684802.3\u6807\u51c6\uff0c\u4f7f\u7528\u6700\u591a\u7684\u662f\u524d\u8005</li> <li>\u4e3a\u4e86\u80fd\u591f\u6b63\u5e38\u68c0\u6d4b\u6b63\u5728\u53d1\u9001\u7684\u5e27\u662f\u5426\u4ea7\u751f\u4e86\u51b2\u7a81\uff0c\u4ee5\u592a\u7f51\u7684\u5e27\u81f3\u5c11\u898164\u5b57\u8282 </li> <li>\u7528\u4ea4\u6362\u673a\u7ec4\u5efa\u7684\u7f51\u7edc\uff0c\u652f\u6301\u5168\u53cc\u5de5\u901a\u4fe1\uff0c\u4e0d\u9700\u8981\u4f7f\u7528CSMA/CD\u534f\u8bae\uff0c\u4f46\u662f\u4f20\u8f93\u7684\u5e27\u4f9d\u7136\u662f\u4ee5\u592a\u7f51\u5e27\uff0c\u7ec4\u5efa\u7684\u7f51\u7edc\u4f9d\u7136\u53ef\u4ee5\u53eb\u4ee5\u592a\u7f51</li> <li>\u6570\u636e\u7684\u957f\u5ea6\u81f3\u5c11\u662f46\u5b57\u8282\uff0c\u6570\u636e\u957f\u5ea6\u4e0d\u591f\u65f6\u6570\u636e\u94fe\u8def\u5c42\u4f1a\u8fdb\u884c\u586b\u5145\uff0c\u63a5\u6536\u7aef\u4f1a\u53bb\u6389\u586b\u5145\u7684\u5b57\u8282</li> <li>\u4ee5\u592a\u7f51\u5e27\u7684\u6570\u636e\u957f\u5ea6\u65f646-1500\uff0c\u6574\u4e2a\u4ee5\u592a\u7f51\u5e27\u7684\u957f\u5ea6\u65f664-1518  </li> </ul>"},{"location":"http/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#ppppoint-to-point-protocol","title":"\u70b9\u5bf9\u70b9PPP\u534f\u8bae\uff08Point to Point Protocol\uff09","text":"<ul> <li>Address\u5b57\u6bb5\uff0c 0xFF\uff0c\u70b9\u5230\u70b9\u901a\u4fe1\u4e0d\u9700\u8981\u6e90mac\u5730\u5740\u548c\u76ee\u6807mac\u5730\u5740</li> <li>Control\u5b57\u6bb5\uff0c0x03 \u76ee\u524d\u6ca1\u6709\u7528\u5230</li> <li>Protocal PPP\u534f\u8bae\u4f7f\u7528\u5230\u7684\u5185\u90e8\u534f\u8bae</li> <li>\u5e27\u5f00\u59cb\u7b26\u548c\u5e27\u7ed3\u675f\u7b26 0x7E</li> <li>PPP\u5e27\u5c01\u88c5\u7684\u7f51\u7edc\u5c42\u6570\u636e\u548c\u4ee5\u592a\u7f51\u5e27\u662f\u4e00\u6837</li> </ul>"},{"location":"http/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#_4","title":"\u7269\u7406\u8bbe\u5907","text":"<ul> <li>\u7f51\u5361\uff1a\u5de5\u4f5c\u5728\u7269\u7406\u5c42\uff0c\u8d1f\u8d23fcs\u5dee\u9519\u68c0\u9a8c\uff0c\u901a\u8fc7\u540e\u4f1a\u5220\u9664fcs\u5185\u5bb9</li> <li>\u4ea4\u6362\u673a\uff1a\u4e8c\u5c42\u4ea4\u6362\u673a\uff0c\u6570\u636e\u94fe\u8def\u5c42\uff0c\u77e5\u9053\u53cc\u65b9\u7684mac\u5730\u5740</li> <li>\u96c6\u7ebf\u5668\uff1a\u5de5\u4f5c\u5728\u7269\u7406\u5c42</li> <li>\u8def\u7531\u5668\uff1a\u4e09\u5c42\uff0c\u7f51\u7edc\u5c42\uff0c\u77e5\u9053\u53cc\u65b9\u7684ip\u5730\u5740</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/","title":"\u7f51\u7edc\u5b89\u5168","text":""},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#_1","title":"\u7f51\u7edc\u5b89\u5168\u5a01\u80c1","text":"<ul> <li>\u7a83\u542c\u901a\u4fe1\u5185\u5bb9</li> <li>\u4e2d\u65ad\u7f51\u7edc\u901a\u4fe1</li> <li>\u7be1\u6539\u901a\u4fe1\u5185\u5bb9</li> <li>\u4f2a\u9020\u901a\u4fe1\u5185\u5bb9</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#arp","title":"\u7f51\u7edc\u5c42 ARP\u6b3a\u9a97","text":"<ul> <li>ARP spoofing \u53c8\u79f0\u4e3aARP\u6bd2\u5316</li> <li>\u53ef\u4ee5\u8ba9\u653b\u51fb\u8005\u83b7\u53d6\u5c40\u57df\u7f51\u5185\u7684\u6570\u636e\u5305</li> <li>\u53ef\u4ee5\u8ba9\u7f51\u7edc\u4e2d\u7279\u5b9a\u7684\u7535\u8111\u4e4b\u95f4\u65e0\u6cd5\u901a\u4fe1</li> <li>\u8ba9\u9001\u81f3\u67d0\u4e00\u4e2aip\u7684\u6d41\u91cf\u9001\u5230\u653b\u51fb\u8005\u7684\u7535\u8111\u4e0a</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#arp_1","title":"ARP\u89e3\u51b3","text":"<ul> <li>\u9759\u6001ARP</li> <li>DHCP Snooping</li> <li>\u8f6f\u4ef6\u76d1\u542cARP\u4e0d\u6b63\u5e38\u53d8\u52a8</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#dos-ddos","title":"DoS DDoS","text":""},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#dos-denial-of-service-attack","title":"DoS \u62d2\u7edd\u670d\u52a1\u653b\u51fb\uff0cDenial of Service Attack","text":"<ul> <li>\u4f7f\u76ee\u6807\u7535\u8111\u7684\u7f51\u7edc\u8d44\u6e90\u6216\u7cfb\u7edf\u8d44\u6e90\u8017\u5c3d\uff0c\u65e0\u6cd5\u63d0\u4f9b\u670d\u52a1</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#ddos-distributed-denial-of-service-attack","title":"DDoS Distributed Denial of Service Attack","text":"<ul> <li>\u4f7f\u7528\u591a\u4e2a\u50f5\u5c38\u7535\u8111\u5bf9\u7edf\u4e00\u76ee\u6807\u8fdb\u884cDoS\u653b\u51fb</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#_2","title":"\u653b\u51fb\u5206\u7c7b","text":"<ul> <li>\u5e26\u5bbd\u6d88\u8017\u578b UDP\u6d2a\u6c34\u653b\u51fb\uff0cICMP\u6d2a\u6c34\u653b\u51fb</li> <li>\u8d44\u6e90\u6d88\u8017\u578b SYN\u6d2a\u6c34\u653b\u51fb\uff0cLAND \u653b\u51fb</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#_3","title":"\u9632\u5fa1","text":"<ul> <li>\u5165\u4fb5\u68c0\u6d4b</li> <li>\u6d41\u91cf\u8fc7\u6ee4</li> <li>\u591a\u91cd\u9a8c\u8bc1</li> <li>\u9632\u706b\u5899</li> <li>\u4ea4\u6362\u673a</li> <li>\u8def\u7531\u5668</li> <li>\u9ed1\u6d1e\u5f15\u5bfc \u653b\u51fb\u6d41\u91cf\u5f15\u5bfc\u5230\u7a7a\u5730\u5740\u6216\u4e0d\u5b58\u5728\u7684\u8ba1\u7b97\u673a</li> <li>\u6d41\u91cf\u6e05\u6d17 \u901a\u8fc7DDoS\u6d41\u91cf\u6e05\u6d17\u8f6f\u4ef6\uff0c\u533a\u5206\u653b\u51fb\u6d41\u91cf\u548c\u6b63\u5e38\u6d41\u91cf</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#syn","title":"\u4f20\u8f93\u5c42 SYN \u6d2a\u6c34\u653b\u51fb","text":"<ul> <li>\u653b\u51fb\u8005\u53d1\u9001\u4e00\u7cfb\u5217\u7684SYN\u8bf7\u6c42\u5230\u76ee\u6807\u4e3b\u673a\uff0c\u4f46\u662f\u4e0d\u7136\u76ee\u6807\u4e3b\u673a\u6536\u5230ACK\u786e\u8ba4\uff08\u7b2c\u4e09\u6b21\u63e1\u624b\uff09</li> <li>\u9020\u6210\u76ee\u6807\u4e3b\u673a\u7b49\u5f85\uff0c\u8d44\u6e90\u6d6a\u8d39</li> <li>\u4f2a\u9020ACK\u786e\u8ba4\u7684\u4e3b\u673aip\u5730\u5740\uff0c\u8ba9\u76ee\u6807\u4e3b\u673a\u53d1\u9001SYN=1\uff0cACK=1\u5230\u4e00\u4e2a\u4e0d\u5b58\u5728\u6216\u8005\u4e0d\u80fd\u56de\u590d\u7684ip\u5730\u5740</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#land","title":"\u4f20\u8f93\u5c42 LAND\u653b\u51fb","text":"<ul> <li>LAND\u653b\u51fb\uff08\u5c40\u57df\u7f51\u62d2\u7edd\u670d\u52a1\u653b\u51fb\uff09</li> <li>Local Area Network Denial attack</li> <li>\u901a\u8fc7\u6301\u7eed\u53d1\u9001\u76f8\u540c\u6e90\u5730\u5740\u548c\u76ee\u6807\u5730\u5740\u7684\u6b3a\u9a97\u6570\u636e\u5305\uff0c\u4f7f\u76ee\u6807\u89c6\u56fe\u4e0e\u81ea\u5df1\u5efa\u7acb\u8fde\u63a5\uff0c\u6d88\u8017\u7cfb\u7edf\u8d44\u6e90\u76f4\u81f3\u5d29\u6e83</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#_4","title":"\u9632\u62a4","text":"<ul> <li>\u6dfb\u52a0\u9632\u706b\u5899</li> <li>\u64cd\u4f5c\u7cfb\u7edf\u6253\u8865\u4e01</li> <li>\u8def\u7531\u5668\u914d\u7f6e\u7b56\u7565\uff0c\u5c4f\u853d\u6e90\u5730\u5740\u4e0e\u76ee\u6807\u5730\u5740\u76f8\u540c\u7684\u6570\u636e\u5305</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#dns","title":"\u5e94\u7528\u5c42 DNS\u52ab\u6301","text":"<ul> <li>DNS\u52ab\u6301\uff0c\u53c8\u79f0\u57df\u540d\u52ab\u6301</li> <li>\u653b\u51fb\u8005\u7be1\u6539\u4e86\u67d0\u4e2a\u57df\u540d\u7684\u89e3\u6790\u7ed3\u679c\uff0c\u4f7f\u5f97\u57df\u540d\u6307\u5411\u4e86\u53e6\u4e00\u4e2aip</li> <li>\u88ab\u653b\u51fb\u8005\u8bbf\u95ee\u4e86\u4e0d\u53ef\u8fbe\u6216\u5047\u5192\u7684\u7f51\u7ad9</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#http","title":"HTTP \u52ab\u6301","text":"<ul> <li>\u5bf9HTTP\u6570\u636e\u5305\u8fdb\u884c\u62e6\u622a\u5904\u7406\uff0c\u6bd4\u5982\u63d2\u5165JS\u4ee3\u7801</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#_5","title":"\u5e38\u89c1\u52a0\u5bc6\u65b9\u5f0f","text":"<ul> <li>\u4e0d\u53ef\u9006\u52a0\u5bc6 \u5355\u5411\u6563\u5217\u51fd\u6570\u52a0\u5bc6 MD5\uff0cSHA</li> <li>\u53ef\u9006\u52a0\u5bc6<ul> <li>\u5bf9\u79f0\u52a0\u5bc6 DES\uff0c3DES\uff0cAES</li> <li>\u975e\u5bf9\u79f0\u52a0\u5bc6 RSA</li> </ul> </li> <li>\u5176\u4ed6<ul> <li>\u6df7\u5408\u5bc6\u7801\u7cfb\u7edf</li> <li>\u6570\u5b57\u7b7e\u540d</li> <li>\u8bc1\u4e66</li> </ul> </li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#_6","title":"\u5355\u5411\u6563\u5217\u51fd\u6570","text":"<ul> <li>\u5355\u5411\u6563\u5217\u51fd\u6570\u4e5f\u88ab\u79f0\u4e3a<code>\u6d88\u606f\u6458\u8981\u51fd\u6570</code>\u6216\u8005<code>\u54c8\u5e0c\u51fd\u6570</code></li> <li>\u8f93\u51fa\u7684\u503c\u4e5f\u88ab\u79f0\u4e3a<code>\u6d88\u606f\u6458\u8981</code>\u6216<code>\u6307\u7eb9</code></li> <li>\u6839\u636e\u4efb\u610f\u957f\u5ea6\u7684\u6d88\u606f\uff0c\u8ba1\u7b97\u51fa<code>\u56fa\u5b9a\u957f\u5ea6</code>\u7684\u6563\u5217\u503c</li> <li>\u8ba1\u7b97\u901f\u5ea6\u5feb\uff0c\u80fd\u5feb\u901f\u8ba1\u7b97\u51fa\u6563\u5217\u503c</li> <li>\u6d88\u606f\u4e0d\u540c\uff0c\u6563\u5217\u503c\u4e5f\u4e0d\u540c</li> <li>\u5177\u5907<code>\u5355\u5411\u6027</code></li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#_7","title":"\u5e38\u89c1\u5355\u5411\u6563\u5217\u51fd\u6570","text":"<ul> <li>MD4\uff0cMD5 \u4ea7\u751f128bit\u7684\u6563\u5217\u503c</li> <li>SHA-1 \u4ea7\u751f160bit\u7684\u6563\u5217\u503c</li> <li>SHA-2 SHA-256 SHA-384 SHA-512 \u6563\u5217\u503c\u957f\u5ea6\u5206\u522b\u662f256bit\uff0c384bit\u548c512bit</li> <li>SHA-3</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#aes","title":"AES \u5bf9\u79f0\u52a0\u5bc6","text":"<ul> <li>Advanced Enryption Standard</li> <li>\u5bc6\u94a5\u957f\u5ea6\u6709128bit\uff0c192bit\uff0c256bit</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#_8","title":"\u975e\u5bf9\u79f0\u52a0\u5bc6","text":"<ul> <li>Asymmetric Cryptography</li> <li>\u5bc6\u94a5\u5206\u4e3a\u52a0\u5bc6\u5bc6\u94a5\u548c\u89e3\u5bc6\u5bc6\u94a5\uff0c\u4e24\u8005\u4e0d\u4e00\u6837</li> <li>\u52a0\u5bc6\u5bc6\u94a5\u4e00\u822c\u662f\u516c\u5f00\u7684\u4e5f\u79f0\u4e3a\u516c\u94a5</li> <li>\u89e3\u5bc6\u5bc6\u94a5\u4e0d\u516c\u5f00\uff0c\u4e5f\u88ab\u79f0\u4e3a\u79c1\u94a5</li> <li>\u516c\u94a5\u4e0e\u79c1\u94a5\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\uff0c\u4e0d\u80fd\u5355\u72ec\u751f\u6210</li> <li>\u516c\u94a5\u8d1f\u8d23\u52a0\u5bc6\uff0c\u79c1\u94a5\u8d1f\u8d23\u89e3\u5bc6</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#rsa","title":"RSA\u52a0\u5bc6\u7b97\u6cd5","text":"<pre><code>- \u7531\u7f57\u7eb3\u5fb7\u00b7\u674e\u7ef4\u65af\u7279\uff08Ron Rivest\uff09\u3001\u963f\u8fea\u00b7\u8428\u83ab\u5c14\uff08Adi Shamir\uff09\u548c\u4f26\u7eb3\u5fb7\u00b7\u963f\u5fb7\u66fc\uff08Leonard Adleman\uff09\u4e00\u8d77\u63d0\u51fa\u7684\u3002\u5f53\u65f6\u4ed6\u4eec\u4e09\u4eba\u90fd\u5728\u9ebb\u7701\u7406\u5de5\u5b66\u9662\u5de5\u4f5c\u3002RSA\u5c31\u662f\u4ed6\u4eec\u4e09\u4eba\u59d3\u6c0f\u5f00\u5934\u5b57\u6bcd\u62fc\u5728\u4e00\u8d77\u7ec4\u6210\u7684\n</code></pre>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#_9","title":"\u6570\u5b57\u7b7e\u540d","text":"<ul> <li>\u7528\u53d1\u6d88\u606f\u7684\u4eba\u7684\u79c1\u94a5\u8fdb\u884c\u7b7e\u540d</li> <li>\u6570\u5b57\u7b7e\u540d\u4e0d\u4fdd\u8bc1\u6d88\u606f\u7684\u673a\u5bc6\u6027\uff0c\u53ea\u4fdd\u8bc1\u6d88\u606f\u5185\u5bb9\u6ca1\u6709\u88ab\u7be1\u6539</li> <li>\u9632\u6b62\u6d88\u606f\u53d1\u9001\u4eba\u5426\u8ba4\u53d1\u9001\u6d88\u606f</li> <li>\u516c\u94a5\u8d1f\u8d23\u9a8c\u7b7e\uff0c\u79c1\u94a5\u8d1f\u8d23\u7b7e\u540d</li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#ca","title":"CA\u8bc1\u4e66","text":"<ul> <li>\u6570\u5b57\u7b7e\u540d\u4e0e\u975e\u5bf9\u79f0\u52a0\u5bc6\u7b7e\u540d </li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%B1%82/","title":"\u7f51\u7edc\u5c42","text":""},{"location":"http/%E7%BD%91%E7%BB%9C%E5%B1%82/#ippacket","title":"\u7f51\u7edc\u5c42\u6570\u636e\u5305\uff08IP\u6570\u636e\u5305\uff0cpacket\uff09\u7531\u4e24\u90e8\u5206\u7ec4\u6210\uff0c\u9996\u90e8\u52a0\u6570\u636e","text":""},{"location":"http/%E7%BD%91%E7%BB%9C%E5%B1%82/#segment","title":"\u6570\u636e\uff1a\u5927\u90e8\u5206\u662f\u7531\u4f20\u8f93\u5c42\u4f20\u4e0b\u6765\u7684\u6570\u636e\u6bb5\uff08Segment\uff09","text":""},{"location":"http/%E7%BD%91%E7%BB%9C%E5%B1%82/#_1","title":"\u5b57\u6bb5\u542b\u4e49","text":"<ul> <li>\u7248\u672c\uff1a4\u4f4d\uff0cipv4\uff0cipv6</li> <li>\u9996\u90e8\u957f\u5ea6\uff1a4\u4f4d\uff0c\u4e584\u8868\u793a\u9996\u90e8\u957f\u5ea6\uff0c\u6700\u592760\uff0c\u56fa\u5b9a20 + \u53ef\u53d8\u90e8\u5206 40 </li> <li>\u603b\u957f\u5ea6\uff1a16\u4f4d\uff0c\u6700\u592765535\u5b57\u8282\uff0c\u9996\u90e8\u52a0\u6570\u636e\u90e8\u5206\u957f\u5ea6\u603b\u548c</li> <li>\u533a\u5206\u670d\u52a1\uff1a\u8bbe\u7f6e\u6807\u8bb0\uff0c\u63d0\u9ad8\u4f18\u5148\u7ea7\uff0c\u7528\u4e8e\u63d0\u9ad8\u7f51\u7edc\u8d28\u91cf</li> <li>\u6807\u8bc6\uff1a\u6570\u636e\u5305\u7684ID\uff0c\u536016\u4f4d\uff0c\u5f53\u6570\u636e\u5305\u8fc7\u5927\u8d85\u8fc7\u6570\u636e\u94fe\u8def\u5c42MTU\u8fdb\u884c\u5206\u7247\u65f6\uff0c\u540c\u4e00\u4e2a\u6570\u636e\u5305\u7684\u6240\u6709\u7247\u7684\u6807\u8bc6\u90fd\u662f\u4e00\u6837\u7684\uff0c\u6bcf\u53d1\u51fa\u4e00\u4e2a\u6570\u636e\u5305\uff0cID\u5c31+1  </li> <li>\u6807\u5fd7\uff1a\u53603\u4f4d\uff0c\u7b2c\u4e00\u4f4d\u4fdd\u7559\uff0c\u7b2c\u4e8c\u4f4d1\u4ee3\u8868\u4e0d\u5141\u8bb8\u5206\u7247\uff0c0\u4ee3\u8868\u5141\u8bb8\u5206\u7247\uff0c\u7b2c\u4e09\u4f4d1\u4ee3\u8868\u4e0d\u662f\u6700\u540e\u4e00\u7247\uff0c0\u4ee3\u8868\u662f\u6700\u540e\u4e00\u7247</li> <li>\u7247\u504f\u79fb\uff1a\u536013\u4f4d\uff0c\u4e588\u4ee3\u8868\u5b57\u8282\u504f\u79fb\uff0c\u53ef\u4ee5\u662f\u603b\u5171\u5b57\u8282\u6570\u91cf\u76f8\u6bd413\u4f4d\u4e8c\u8fdb\u5236\u6269\u59278\u500d</li> <li> <p>TTL\uff1a\u53608\u4f4d\uff0c\u6bcf\u4e2a\u8def\u7531\u5668\u5728\u8f6c\u53d1\u4e4b\u524d\u4f1a\u5c06TTL\u51cf\u4e00\uff0c\u4e00\u65e6\u53d1\u73b0TTL\u4e3a0\uff0c\u8def\u7531\u5668\u5c31\u4f1a\u8fd4\u56de\u9519\u8bef\u62a5\u544a\uff0c\u63a7\u5236\u6570\u636e\u5305\u5728\u7f51\u7edc\u4e2d\u7684\u751f\u5b58\u65f6\u95f4\uff0c\u53ef\u4ee5\u9632\u6b62\u8def\u7531\u6b7b\u5faa\u73af </p> </li> <li> <p>\u534f\u8bae\uff1a\u53608\u4f4d\uff0c\u8868\u660e\u5c01\u88c5\u7684\u6570\u636e\u4f7f\u7528\u4e86\u4ec0\u4e48\u534f\u8bae </p> </li> <li> <p>\u9996\u90e8\u68c0\u9a8c\u548c\uff1a\u68c0\u67e5\u9996\u90e8\u662f\u5426\u6709\u9519\u8bef</p> </li> </ul>"},{"location":"http/%E7%BD%91%E7%BB%9C%E5%B1%82/#_2","title":"\u534f\u8bae\u4ee5\u53ca\u6240\u5728\u7684\u5c42","text":""},{"location":"http/%E7%BD%91%E7%BB%9C%E5%B1%82/#ping","title":"ping \u547d\u4ee4","text":"<ul> <li>ping /? \u67e5\u770b<code>ping</code>\u7684\u7528\u6cd5</li> <li>ping ip -l \u6570\u636e\u5305\u5927\u5c0f</li> <li>ping ip -f \u4e0d\u5141\u8bb8\u7f51\u7edc\u5c42\u5206\u7247</li> <li>ping ip -i TTL \u8bbe\u7f6e\u5b58\u6d3b\u65f6\u95f4</li> </ul>"},{"location":"ide/nav/","title":"Nav","text":"<ul> <li>VsCode\u80cc\u666f\u56fe</li> </ul>"},{"location":"ide/vscode_background/","title":"VsCode\u80cc\u666f\u56fe","text":"<pre><code>{\n\"background.enabled\": true,\n\"background.useDefault\": false,\n\"background.useFront\": false,\n\"background.customImages\": [\n\"file:///Users/sunqi/Pictures/filename_H128PIC.jpg\"\n],\n\"background.style\": {\n\"-webkit-background-size\": \"cover\",\n\"-moz-background-size\": \"cover\",\n\"-o-background-size\": \"cover\",\n\"background-size\": \"cover\",\n\"opacity\":0.6 //\u900f\u660e\u5ea6\n},\n}\n</code></pre>"},{"location":"jsjzc/chengxuzhan/","title":"\u7a0b\u5e8f\u6808","text":"<p><pre><code>#include &lt;stdio.h&gt;\nint static add(int a, int b)\n{\nreturn a + b;\n}\nint main()\n{\nint x = 5;\nint y = 10;\nint u = add(x,  y);\n}\n</code></pre> <pre><code>chengxuzhan.o:     file format elf64-x86-64\nDisassembly of section .text:\n0000000000000000 &lt;add&gt;:\n#include &lt;stdio.h&gt;\nint static add(int a, int b)\n{\n0:   f3 0f 1e fa             endbr64 4:   55                      push   rbp\n5:   48 89 e5                mov    rbp,rsp\n8:   89 7d fc                mov    DWORD PTR [rbp-0x4],edi\nb:   89 75 f8                mov    DWORD PTR [rbp-0x8],esi\nreturn a + b;\ne:   8b 55 fc                mov    edx,DWORD PTR [rbp-0x4]\n11:   8b 45 f8                mov    eax,DWORD PTR [rbp-0x8]\n14:   01 d0                   add    eax,edx\n}\n16:   5d                      pop    rbp\n17:   c3                      ret    0000000000000018 &lt;main&gt;:\nint main()\n{\n18:   f3 0f 1e fa             endbr64 1c:   55                      push   rbp\n1d:   48 89 e5                mov    rbp,rsp\n20:   48 83 ec 10             sub    rsp,0x10\nint x = 5;\n24:   c7 45 f4 05 00 00 00    mov    DWORD PTR [rbp-0xc],0x5\nint y = 10;\n2b:   c7 45 f8 0a 00 00 00    mov    DWORD PTR [rbp-0x8],0xa\nint u = add(x,  y);\n32:   8b 55 f8                mov    edx,DWORD PTR [rbp-0x8]\n35:   8b 45 f4                mov    eax,DWORD PTR [rbp-0xc]\n38:   89 d6                   mov    esi,edx\n3a:   89 c7                   mov    edi,eax\n3c:   e8 bf ff ff ff          call   0 &lt;add&gt;\n41:   89 45 fc                mov    DWORD PTR [rbp-0x4],eax\n44:   b8 00 00 00 00          mov    eax,0x0\n49:   c9                      leave  4a:   c3                      ret    </code></pre></p>"},{"location":"jsjzc/chengxuzhan/#add","title":"add\u51fd\u6570","text":"<ul> <li>push\u6307\u4ee4\u548cmov\u6307\u4ee4\uff1a\u538b\u6808\u64cd\u4f5c</li> <li>pop \u6307\u4ee4\u548cret\u6307\u4ee4: \u51fa\u6808\u64cd\u4f5c</li> </ul>"},{"location":"jsjzc/chengxuzhan/#_1","title":"\u4e52\u4e53\u7403\u6876\u4e3e\u4f8b\u6808","text":""},{"location":"jsjzc/chengxuzhan/#_2","title":"\u5b9e\u9645\u7a0b\u5e8f","text":"<ul> <li>\u5b9e\u9645\u7684\u7a0b\u5e8f\u6808\u5e03\u5c40\uff0c\u9876\u548c\u5e95\u4e0e\u6211\u4eec\u7684\u4e52\u4e53\u7403\u6876\u76f8\u6bd4\u662f\u5012\u8fc7\u6765\u7684\u3002\u5e95\u5728\u6700\u4e0a\u9762\uff0c\u9876\u5728\u6700\u4e0b\u9762</li> <li>\u8fd9\u6837\u7684\u5e03\u5c40\u662f\u56e0\u4e3a\u6808\u5e95\u7684\u5185\u5b58\u5730\u5740\u662f\u5728\u4e00\u5f00\u59cb\u5c31\u56fa\u5b9a\u7684\u3002\u800c\u4e00\u5c42\u5c42\u538b\u6808\u4e4b\u540e\uff0c\u6808\u9876\u7684\u5185\u5b58\u5730\u5740\u662f\u5728\u9010\u6e10\u53d8\u5c0f\u800c\u4e0d\u662f\u53d8\u5927 </li> </ul>"},{"location":"jsjzc/chengxuzhan/#_3","title":"\u51fd\u6570\u5185\u8054","text":"<ul> <li>\u5df2\u77e5\u4e0d\u4f1a\u6709\u5d4c\u5957\u8c03\u7528\u51fd\u6570\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06<code>call</code>\u6307\u4ee4\u66ff\u6362\u4e3a\u8c03\u7528\u51fd\u6570\u7684\u5730\u5740</li> <li>\u5185\u8054\u5e26\u6765\u7684\u4f18\u5316\u662f\uff0cCPU \u9700\u8981\u6267\u884c\u7684\u6307\u4ee4\u6570\u53d8\u5c11\u4e86\uff0c\u6839\u636e\u5730\u5740\u8df3\u8f6c\u7684\u8fc7\u7a0b\u4e0d\u9700\u8981\u4e86\uff0c\u538b\u6808\u548c\u51fa\u6808\u7684\u8fc7\u7a0b\u4e5f\u4e0d\u7528\u4e86</li> <li>\u5185\u8054\u610f\u5473\u7740\uff0c\u6211\u4eec\u628a\u53ef\u4ee5\u590d\u7528\u7684\u7a0b\u5e8f\u6307\u4ee4\u5728\u8c03\u7528\u5b83\u7684\u5730\u65b9\u5b8c\u5168\u5c55\u5f00\u4e86\u3002\u5982\u679c\u4e00\u4e2a\u51fd\u6570\u5728\u5f88\u591a\u5730\u65b9\u90fd\u88ab\u8c03\u7528\u4e86\uff0c\u90a3\u4e48\u5c31\u4f1a\u5c55\u5f00\u5f88\u591a\u6b21\uff0c\u6574\u4e2a\u7a0b\u5e8f\u5360\u7528\u7684\u7a7a\u95f4\u5c31\u4f1a\u53d8\u5927</li> </ul> <p>\u8fd9\u6837\u6ca1\u6709\u8c03\u7528\u5176\u4ed6\u51fd\u6570\uff0c\u53ea\u4f1a\u88ab\u8c03\u7528\u7684\u51fd\u6570\uff0c\u4e00\u822c\u79f0\u4e4b\u4e3a\u53f6\u5b50\u51fd\u6570\uff08\u6216\u53f6\u5b50\u8fc7\u7a0b\uff09</p>"},{"location":"jsjzc/chengxuzhan/#_4","title":"\u4e3e\u4f8b","text":"<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\nint static add(int a, int b)\n{\nreturn a+b;\n}\nint main()\n{\nsrand(time(NULL));\nint x = rand() % 5;\nint y = rand() % 10;\nint u = add(x, y);\nprintf(\"u = %d\\n\", u);\n}\n</code></pre>"},{"location":"jsjzc/chengxuzhan/#_5","title":"\u7f16\u8bd1\u7ed3\u679c","text":"<ul> <li><code>call</code>\u88ab\u8f6c\u6362\u6210\u4e86<code>add</code> <pre><code>Disassembly of section .text:\n0000000000000000 &lt;main&gt;:\n{\nreturn a+b;\n}\nint main()\n{\n0:   f3 0f 1e fa             endbr64 4:   53                      push   rbx\nsrand(time(NULL));\n5:   bf 00 00 00 00          mov    edi,0x0\na:   e8 00 00 00 00          call   f &lt;main+0xf&gt;\nf:   48 89 c7                mov    rdi,rax\n12:   e8 00 00 00 00          call   17 &lt;main+0x17&gt;\nint x = rand() % 5;\n17:   e8 00 00 00 00          call   1c &lt;main+0x1c&gt;\n1c:   89 c3                   mov    ebx,eax\nint y = rand() % 10;\n1e:   e8 00 00 00 00          call   23 &lt;main+0x23&gt;\n23:   89 c2                   mov    edx,eax\nint x = rand() % 5;\n25:   48 63 cb                movsxd rcx,ebx\n28:   48 69 c9 67 66 66 66    imul   rcx,rcx,0x66666667\n2f:   48 c1 f9 21             sar    rcx,0x21\n33:   89 d8                   mov    eax,ebx\n35:   c1 f8 1f                sar    eax,0x1f\n38:   29 c1                   sub    ecx,eax\n3a:   8d 04 89                lea    eax,[rcx+rcx*4]\n3d:   29 c3                   sub    ebx,eax\nint y = rand() % 10;\n3f:   48 63 ca                movsxd rcx,edx\n42:   48 69 c9 67 66 66 66    imul   rcx,rcx,0x66666667\n49:   48 c1 f9 22             sar    rcx,0x22\n4d:   89 d0                   mov    eax,edx\n4f:   c1 f8 1f                sar    eax,0x1f\n52:   29 c1                   sub    ecx,eax\n54:   8d 04 89                lea    eax,[rcx+rcx*4]\n// \u76f4\u63a5\u8f6c\u6362\u6210\u4e86add\n57:   01 c0                   add    eax,eax\n59:   29 c2                   sub    edx,eax\nreturn a+b;\n5b:   01 da                   add    edx,ebx\n}\n__fortify_function int\nprintf (const char *__restrict __fmt, ...)\n{\nreturn __printf_chk (__USE_FORTIFY_LEVEL - 1, __fmt, __va_arg_pack ());\n5d:   48 8d 35 00 00 00 00    lea    rsi,[rip+0x0]        # 64 &lt;main+0x64&gt;\n64:   bf 01 00 00 00          mov    edi,0x1\n69:   b8 00 00 00 00          mov    eax,0x0\n6e:   e8 00 00 00 00          call   73 &lt;main+0x73&gt;\nint u = add(x, y);\nprintf(\"u = %d\\n\", u);\n73:   b8 00 00 00 00          mov    eax,0x0\n78:   5b                      pop    rbx\n79:   c3                      ret\n</code></pre></li> </ul>"},{"location":"jsjzc/cpu/","title":"CPU","text":""},{"location":"jsjzc/cpu/#instruction-cycle","title":"\u6307\u4ee4\u5468\u671f Instruction Cycle","text":"<ol> <li>Fetch\uff08\u53d6\u5f97\u6307\u4ee4\uff09\uff0c\u4e5f\u5c31\u662f\u4ece PC \u5bc4\u5b58\u5668\u91cc\u627e\u5230\u5bf9\u5e94\u7684\u6307\u4ee4\u5730\u5740\uff0c\u6839\u636e\u6307\u4ee4\u5730\u5740\u4ece\u5185\u5b58\u91cc\u628a\u5177\u4f53\u7684\u6307\u4ee4\uff0c\u52a0\u8f7d\u5230\u6307\u4ee4\u5bc4\u5b58\u5668\u4e2d\uff0c\u7136\u540e\u628a PC \u5bc4\u5b58\u5668\u81ea\u589e\uff0c\u597d\u5728\u672a\u6765\u6267\u884c\u4e0b\u4e00\u6761\u6307\u4ee4</li> <li>Decode\uff08\u6307\u4ee4\u8bd1\u7801\uff09\uff0c\u4e5f\u5c31\u662f\u6839\u636e\u6307\u4ee4\u5bc4\u5b58\u5668\u91cc\u9762\u7684\u6307\u4ee4\uff0c\u89e3\u6790\u6210\u8981\u8fdb\u884c\u4ec0\u4e48\u6837\u7684\u64cd\u4f5c\uff0c\u662f R\u3001I\u3001J \u4e2d\u7684\u54ea\u4e00\u79cd\u6307\u4ee4\uff0c\u5177\u4f53\u8981\u64cd\u4f5c\u54ea\u4e9b\u5bc4\u5b58\u5668\u3001\u6570\u636e\u6216\u8005\u5185\u5b58\u5730\u5740</li> <li>Execute\uff08\u6267\u884c\u6307\u4ee4\uff09\uff0c\u4e5f\u5c31\u662f\u5b9e\u9645\u8fd0\u884c\u5bf9\u5e94\u7684 R\u3001I\u3001J \u8fd9\u4e9b\u7279\u5b9a\u7684\u6307\u4ee4\uff0c\u8fdb\u884c\u7b97\u672f\u903b\u8f91\u64cd\u4f5c\u3001\u6570\u636e\u4f20\u8f93\u6216\u8005\u76f4\u63a5\u7684\u5730\u5740\u8df3\u8f6c</li> <li>\u91cd\u590d\u8fdb\u884c 1\uff5e3 \u7684\u6b65\u9aa4</li> </ol>"},{"location":"jsjzc/cpu/#_1","title":"\u8fd0\u884c\u7ec4\u4ef6","text":"<ul> <li>\u5b58\u50a8\u5668\uff1a\u5b58\u50a8\u6307\u4ee4</li> <li>\u63a7\u5236\u5668\uff1a\u4ecePC\u5bc4\u5b58\u5668\u6216\u8005\u6307\u4ee4\u5bc4\u5b58\u5668\u53d6\u51fa\u6307\u4ee4\u7684\u64cd\u4f5c\u4ee5\u53ca\u6307\u4ee4\u7684\u89e3\u7801\u64cd\u4f5c\u90fd\u662f\u63a7\u5236\u5668\u5b8c\u6210\u7684</li> <li>ALU \u8fd0\u7b97\u5668\uff1a\u6307\u4ee4\u8fd0\u7b97\uff0c\u6570\u636e\u4f20\u8f93 </li> </ul>"},{"location":"jsjzc/cpu/#clock-cycle","title":"Clock Cycle \u65f6\u949f\u5468\u671f","text":"<ul> <li>\u65f6\u949f\u5468\u671f\u4ee5\u53ca\u6211\u4eec\u673a\u5668\u7684\u4e3b\u9891</li> </ul>"},{"location":"jsjzc/cpu/#cpumachine-cycle","title":"CPU\u5468\u671f\uff0c\u673a\u5668\u5468\u671f\u6216Machine Cycle","text":"<ul> <li>\u4e00\u6761\u6307\u4ee4\u90fd\u9700\u8981\u4ece\u5185\u5b58\u91cc\u9762\u52a0\u8f7d\u800c\u6765\uff0c\u4e00\u822c\u628a\u4ece\u5185\u5b58\u91cc\u9762\u8bfb\u53d6\u4e00\u6761\u6307\u4ee4\u7684\u6700\u77ed\u65f6\u95f4\u53eb\u505aCPU\u5468\u671f</li> <li>\u4e00\u4e2a CPU \u5468\u671f\uff0c\u901a\u5e38\u4f1a\u7531\u51e0\u4e2a\u65f6\u949f\u5468\u671f\u7d2f\u79ef\u8d77\u6765\u3002\u4e00\u4e2a CPU \u5468\u671f\u7684\u65f6\u95f4\uff0c\u5c31\u662f\u8fd9\u51e0\u4e2a Clock Cycle \u7684\u603b\u548c</li> </ul>"},{"location":"jsjzc/cpu/#_2","title":"\u6307\u4ee4\u5468\u671f","text":"<ul> <li>\u5bf9\u4e8e\u4e00\u4e2a\u6307\u4ee4\u5468\u671f\u6765\u8bf4\uff0c\u53d6\u51fa\u4e00\u6761\u6307\u4ee4\uff0c\u7136\u540e\u6267\u884c\u5b83\uff0c\u81f3\u5c11\u9700\u8981\u4e24\u4e2a CPU \u5468\u671f\u3002\u53d6\u51fa\u6307\u4ee4\u81f3\u5c11\u9700\u8981\u4e00\u4e2a CPU \u5468\u671f\uff0c\u6267\u884c\u81f3\u5c11\u4e5f\u9700\u8981\u4e00\u4e2a CPU \u5468\u671f\uff0c\u590d\u6742\u7684\u6307\u4ee4\u5219\u9700\u8981\u66f4\u591a\u7684 CPU \u5468\u671f</li> <li>\u4e00\u4e2a\u6307\u4ee4\u5468\u671f\uff0c\u5305\u542b\u591a\u4e2a CPU \u5468\u671f\uff0c\u800c\u4e00\u4e2a CPU \u5468\u671f\u5305\u542b\u591a\u4e2a\u65f6\u949f\u5468\u671f </li> </ul>"},{"location":"jsjzc/cpu/#_3","title":"\u6570\u636e\u901a\u8def","text":"<ul> <li>\u5904\u7406\u5668\u5355\u5143</li> <li>\u7531<code>\u64cd\u4f5c\u539f\u4ef6</code>\u548c<code>\u5b58\u50a8\u539f\u4ef6</code>\u7ec4\u6210</li> <li>\u901a\u8fc7\u6570\u636e\u603b\u7ebf\u7684\u65b9\u5f0f\uff0c\u628a\u5b83\u4eec\u8fde\u63a5\u8d77\u6765\uff0c\u5c31\u53ef\u4ee5\u5b8c\u6210\u6570\u636e\u7684\u5b58\u50a8\u3001\u5904\u7406\u548c\u4f20\u8f93\u4e86\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u7684<code>\u5efa\u7acb\u6570\u636e\u901a\u8def</code></li> </ul>"},{"location":"jsjzc/cpu/#_4","title":"\u64cd\u4f5c\u539f\u4ef6","text":"<ul> <li>\u7ec4\u5408\u903b\u8f91\u5143\u4ef6\uff08Combinational Element\uff09</li> <li>\u5176\u5b9e\u5c31\u662fALU\u3002\u5b83\u4eec\u7684\u529f\u80fd\u5c31\u662f\u5728\u7279\u5b9a\u7684\u8f93\u5165\u4e0b\uff0c\u6839\u636e\u4e0b\u9762\u7684\u7ec4\u5408\u7535\u8def\u7684\u903b\u8f91\uff0c\u751f\u6210\u7279\u5b9a\u7684\u8f93\u51fa</li> </ul>"},{"location":"jsjzc/cpu/#_5","title":"\u5b58\u50a8\u539f\u4ef6","text":"<ul> <li>\u4e5f\u53eb\u72b6\u6001\u5143\u4ef6\uff08State Element\uff09</li> <li>\u6bd4\u5982\u5728\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u9700\u8981\u7528\u5230\u7684\u5bc4\u5b58\u5668\uff0c\u65e0\u8bba\u662f\u901a\u7528\u5bc4\u5b58\u5668\u8fd8\u662f\u72b6\u6001\u5bc4\u5b58\u5668</li> </ul>"},{"location":"jsjzc/cpu/#cpu","title":"\u6784\u5efaCPU\u6240\u9700\u8981\u7684\u786c\u4ef6\u7535\u8def","text":"<ul> <li>\u9700\u8981ALU\uff1a\u903b\u8f91\u8ba1\u7b97\u5355\u5143\uff0c\u5b9e\u9645\u5c31\u662f\u4e00\u4e2a\u6ca1\u6709\u72b6\u6001\u7684\uff0c\u6839\u636e\u8f93\u5165\u8ba1\u7b97\u8f93\u51fa\u7ed3\u679c\u7684\u7535\u8def</li> <li>\u9700\u8981\u6709\u4e00\u4e2a\u80fd\u591f\u8fdb\u884c\u72b6\u6001\u8bfb\u5199\u7684\u7535\u8def\u5143\u4ef6\uff0c\u80fd\u90fd\u5b58\u50a8\u6570\u636e\u5e76\u968f\u65f6\u53ef\u4ee5\u62ff\u51fa\u6765\u4f7f\u7528\uff0c\u5e38\u89c1\u7684\u80fd\u591f\u8fdb\u884c\u72b6\u6001\u8bfb\u5199\u7684\u7535\u8def\uff0c\u5c31\u6709\u9501\u5b58\u5668\uff08Latch\uff09\uff0c\u4ee5\u53ca D \u89e6\u53d1\u5668\uff08Data/Delay Flip-flop\uff09\u7684\u7535\u8def</li> <li>\u9700\u8981\u6709\u4e00\u4e2a\u201c\u81ea\u52a8\u201d\u7684\u7535\u8def\uff0c\u6309\u7167\u56fa\u5b9a\u7684\u5468\u671f\uff0c\u4e0d\u505c\u5730\u5b9e\u73b0 PC \u5bc4\u5b58\u5668\u81ea\u589e\uff0c\u81ea\u52a8\u5730\u53bb\u6267\u884c\u201cFetch - Decode - Execute\u201c\u7684\u6b65\u9aa4</li> <li>\u9700\u8981\u6709\u4e00\u4e2a\u201c\u8bd1\u7801\u201d\u7684\u7535\u8def\u3002\u65e0\u8bba\u662f\u5bf9\u4e8e\u6307\u4ee4\u8fdb\u884c decode\uff0c\u8fd8\u662f\u5bf9\u4e8e\u62ff\u5230\u7684\u5185\u5b58\u5730\u5740\u53bb\u83b7\u53d6\u5bf9\u5e94\u7684\u6570\u636e\u6216\u8005\u6307\u4ee4\uff0c\u90fd\u9700\u8981\u901a\u8fc7\u4e00\u4e2a\u7535\u8def\u627e\u5230\u5bf9\u5e94\u7684\u6570\u636e </li> </ul>"},{"location":"jsjzc/cpu/#_6","title":"\u65f6\u5e8f\u903b\u8f91\u7535\u8def","text":"<ul> <li>\u4e3a\u4e86\u8ba9CPU\u4e2d\u7684\u7535\u8def\u81ea\u52a8\u5de5\u4f5c\u5f15\u5165\u65f6\u5e8f\u903b\u8f91\u7535\u8def</li> <li>\u81ea\u52a8\u8fd0\u884c\uff1a\u65f6\u5e8f\u7535\u8def\u63a5\u901a\u4e4b\u540e\u53ef\u4ee5\u4e0d\u505c\u5730\u5f00\u542f\u548c\u5173\u95ed\u5f00\u5173\uff0c\u8fdb\u5165\u4e00\u4e2a\u81ea\u52a8\u8fd0\u884c\u7684\u72b6\u6001</li> <li>\u5b58\u50a8\uff1a\u901a\u8fc7\u65f6\u5e8f\u7535\u8def\u5b9e\u73b0\u7684\u89e6\u53d1\u5668\uff0c\u80fd\u628a\u8ba1\u7b97\u7ed3\u679c\u5b58\u50a8\u5728\u7279\u5b9a\u7684\u7535\u8def\u91cc\u9762\uff0c\u800c\u4e0d\u662f\u50cf\u7ec4\u5408\u903b\u8f91\u7535\u8def\u90a3\u6837\uff0c\u4e00\u65e6\u8f93\u5165\u6709\u4efb\u4f55\u6539\u53d8\uff0c\u5bf9\u5e94\u7684\u8f93\u51fa\u4e5f\u4f1a\u6539\u53d8</li> <li>\u65f6\u5e8f\u534f\u8c03\uff1a\u65e0\u8bba\u662f\u7a0b\u5e8f\u5b9e\u73b0\u7684\u8f6f\u4ef6\u6307\u4ee4\uff0c\u8fd8\u662f\u5230\u786c\u4ef6\u5c42\u9762\uff0c\u5404\u79cd\u6307\u4ee4\u7684\u64cd\u4f5c\u90fd\u6709\u5148\u540e\u7684\u987a\u5e8f\u8981\u6c42\u3002\u65f6\u5e8f\u7535\u8def\u4f7f\u5f97\u4e0d\u540c\u7684\u4e8b\u4ef6\u6309\u7167\u65f6\u95f4\u987a\u5e8f\u53d1\u751f</li> </ul>"},{"location":"jsjzc/cpu/#_7","title":"\u65f6\u949f\u7535\u8def\u7684\u786c\u4ef6\u5b9e\u73b0","text":"<ul> <li>\u4e00\u4e2a\u5f00\u5173 A\uff0c\u4e00\u5f00\u59cb\u662f\u65ad\u5f00\u7684\uff0c\u7531\u6211\u4eec\u624b\u5de5\u63a7\u5236\uff1b\u53e6\u5916\u4e00\u4e2a\u5f00\u5173 B\uff0c\u4e00\u5f00\u59cb\u662f\u5408\u4e0a\u7684\uff0c\u78c1\u6027\u7ebf\u5708\u5bf9\u51c6\u4e00\u5f00\u59cb\u5c31\u5408\u4e0a\u7684\u5f00\u5173 B</li> <li>\u4e00\u65e6\u6211\u4eec\u5408\u4e0a\u5f00\u5173 A\uff0c\u78c1\u6027\u7ebf\u5708\u5c31\u4f1a\u901a\u7535\uff0c\u4ea7\u751f\u78c1\u6027\uff0c\u5f00\u5173 B \u5c31\u4f1a\u4ece\u5408\u4e0a\u53d8\u6210\u65ad\u5f00\u3002\u4e00\u65e6\u8fd9\u4e2a\u5f00\u5173\u65ad\u5f00\u4e86\uff0c\u7535\u8def\u5c31\u4e2d\u65ad\u4e86\uff0c\u78c1\u6027\u7ebf\u5708\u5c31\u5931\u53bb\u4e86\u78c1\u6027\u3002\u4e8e\u662f\uff0c\u5f00\u5173 B \u53c8\u4f1a\u5f39\u56de\u5230\u5408\u4e0a\u7684\u72b6\u6001\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u7535\u8def\u63a5\u901a\uff0c\u7ebf\u5708\u53c8\u6709\u4e86\u78c1\u6027\u3002\u7535\u8def\u5c31\u4f1a\u6765\u56de\u4e0d\u65ad\u5730\u5728\u5f00\u542f\u3001\u5173\u95ed\u8fd9\u4e24\u4e2a\u72b6\u6001\u4e2d\u5207\u6362 <p>\u6309\u7167\u56fa\u5b9a\u7684\u5468\u671f\u4e0d\u65ad\u5728 0 \u548c 1 \u4e4b\u95f4\u5207\u6362\u7684\u4fe1\u53f7\uff0c\u5c31\u662f<code>\u65f6\u949f\u4fe1\u53f7\uff08Clock Signal\uff09</code> \u628a\u7535\u8def\u7684\u8f93\u51fa\u4fe1\u53f7\u4f5c\u4e3a\u8f93\u5165\u4fe1\u53f7\uff0c\u518d\u56de\u5230\u5f53\u524d\u7535\u8def\u3002\u8fd9\u6837\u7684\u7535\u8def\u6784\u9020\u65b9\u5f0f\u53eb\u4f5c<code>\u53cd\u9988\u7535\u8def</code></p> </li> </ul> <p></p>"},{"location":"jsjzc/cpu/#d","title":"D\u89e6\u53d1\u5668","text":"<ul> <li>\u4e24\u4e2a\u6216\u975e\u95e8\u7ec4\u5408\u800c\u6210</li> <li> <p>\u6216\u975e\u95e8\u771f\u503c\u8868 </p> </li> <li> <p>D\u89e6\u53d1\u5668\u7535\u8def </p> </li> </ul>"},{"location":"jsjzc/cpu%E5%8A%A0%E9%80%9F/","title":"CPU\u52a0\u901f","text":""},{"location":"jsjzc/cpu%E5%8A%A0%E9%80%9F/#_1","title":"\u591a\u53d1\u5c04&amp;&amp;\u8d85\u6807\u91cf","text":"<ul> <li>\u589e\u52a0\u786c\u4ef6\uff0c\u5e76\u884c\u7684\u8fdb\u884c\u53d6\u6307\u4ee4\u548c\u6307\u4ee4\u8bd1\u7801</li> <li>\u7136\u540e\u4ea4\u7ed9\u591a\u4e2a\u4e0d\u540c\u7684\u529f\u80fd\u5355\u5143\u53bb\u5904\u7406</li> <li>\u540c\u65f6\u628a\u591a\u6761\u6307\u4ee4\u53d1\u9001\u5230\u4e0d\u540c\u7684\u8bd1\u7801\u5668\u6216\u8005\u540e\u7eed\u5904\u7406\u7684\u6d41\u6c34\u7ebf\u4e2d\u53eb<code>\u591a\u53d1\u5c04</code></li> <li> <p>CPU\u91cc\u8fb9\u6709\u5f88\u591a\u5e76\u884c\u7684\u6d41\u6c34\u7ebf\uff0c\u4e00\u4e2a\u65f6\u949f\u5468\u671f\uff0c\u5728<code>\u591a\u53d1\u5c04</code>\u7684\u60c5\u51b5\u4e0b\u5c31\u80fd\u8fdb\u884c\u591a\u6b21\u8fd0\u7b97\uff0c\u53eb<code>\u8d85\u6807\u91cf</code> </p> </li> <li> <p>\u6267\u884c\u8fc7\u7a0b </p> </li> </ul>"},{"location":"jsjzc/cpu%E5%8A%A0%E9%80%9F/#vliw","title":"VLIW","text":"<ul> <li>\u8d85\u957f\u6307\u4ee4\u5b57\u8bbe\u8ba1</li> <li>Very Long Instruction Word</li> <li>\u4ee3\u8868\u67b6\u6784intel\u5b89\u817e\u5904\u7406\u5668</li> <li>\u5224\u65ad\u6307\u4ee4\u524d\u540e\u4f9d\u8d56\u5173\u7cfb\uff0c\u4eceCPU\u7535\u8def\u786c\u4ef6\u5c42\u9762\uff0c\u8c03\u6574\u5230\u7f16\u8bd1\u5668\u8fd9\u4e2a\u8f6f\u4ef6</li> <li>\u591a\u6761\u6307\u4ee4\u6253\u5305\u6210\u4e00\u4e2a\u6307\u4ee4\u5305 </li> </ul>"},{"location":"jsjzc/cpu%E5%8A%A0%E9%80%9F/#vliw_1","title":"VLIW\u95ee\u9898","text":"<ul> <li>\u4e0d\u517c\u5bb9\u524d\u4ee3\u6307\u4ee4\uff0c\u4e0d\u517c\u5bb9x86\u6307\u4ee4\u96c6\uff0c\u6240\u6709\u8f6f\u4ef6\u8fd0\u884c\u5fc5\u987b\u91cd\u65b0\u7f16\u8bd1</li> <li>\u6307\u4ee4\u5305\u8c03\u6574\u540e\u4e0d\u517c\u5bb9\u524d\u4ee3\u5904\u7f16\u8bd1\u5668\uff0c\u9700\u8981\u91cd\u5199\u7f16\u8bd1\u5668</li> </ul>"},{"location":"jsjzc/cpu%E5%8A%A0%E9%80%9F/#_2","title":"\u8d85\u7ebf\u7a0b","text":"<ul> <li>Hyper Threading\u6280\u672f</li> <li>\u4e5f\u53eb <code>\u540c\u65f6\u591a\u7ebf\u7a0b\u6280\u672f Simultaneous Multi-Threading</code></li> <li>\u5c06\u4e00\u4e2a\u7269\u7406\u5c42\u9762\u7684CPU\u6838\u5fc3\uff0c\u4f2a\u88c5\u6210\u4e24\u4e2a\u903b\u8f91\u5c42\u9762\u7684CPU\u6838\u5fc3</li> <li>\u589e\u52a0\u786c\u4ef6\u7535\u8def\uff0c\u4f7f\u5f97\u53ef\u4ee5\u5728\u4e00\u4e2aCPU\u6838\u5fc3\u5185\u90e8\uff0c\u7ef4\u62a4\u4e24\u4e2a\u4e0d\u540c\u7ebf\u7a0b\u7684\u6307\u4ee4\u72b6\u6001\u4fe1\u606f</li> </ul>"},{"location":"jsjzc/cpu%E5%8A%A0%E9%80%9F/#_3","title":"\u8d85\u7ebf\u7a0b\u5b9e\u9645\u5b9e\u73b0","text":"<ul> <li>\u6ca1\u6709\u63d0\u4f9b\u53cc\u4efd\u786c\u4ef6\u8d44\u6e90</li> <li>\u8fde\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u6ca1\u6709\u4efb\u4f55\u4f9d\u8d56\u5173\u7cfb</li> <li>\u5728\u4e00\u4e2a\u6307\u4ee4\u6d41\u6c34\u7ebf\u505c\u987f\u7684\u65f6\u5019\uff0c\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u7684\u6307\u4ee4\u7ee7\u7eed\u6267\u884c</li> <li>\u589e\u52a0\u5207\u6362\u7ebf\u7a0b\u7684\u903b\u8f91\u529f\u80fd\uff0c\u589e\u52a0\u4fdd\u7559\u5bc4\u5b58\u5668\u6570\u636e\u7684\u6676\u4f53\u7ba1</li> <li>\u6bcf\u4e2a\u7ebf\u7a0b\u7b49\u5f85\u65f6\u95f4\u957f\u7684\u60c5\u51b5\u4e0b\u4f1a\u6bd4\u8f83\u9002\u5408\u8d85\u7ebf\u7a0b\u4f7f\u7528</li> </ul>"},{"location":"jsjzc/cpu%E5%8A%A0%E9%80%9F/#_4","title":"\u5355\u6307\u4ee4\u591a\u6570\u636e\u6d41","text":"<ul> <li>SIMD\uff08Single Instruction Multiple Data\uff09</li> <li>SIMD \u5728\u83b7\u53d6\u6570\u636e\u548c\u6267\u884c\u6307\u4ee4\u7684\u65f6\u5019\uff0c\u505a\u5230\u4e86\u5e76\u884c\uff0c\u5728\u5185\u5b58\u91cc\u8fb9\u8bfb\u53d6\u6570\u636e\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4e00\u6b21\u8bfb\u53d6\u591a\u4e2a\u6570\u636e</li> <li>\u5728\u8fdb\u884c\u5904\u7406\u7684\u65f6\u5019\uff0c\u56e0\u4e3a\u6ca1\u6709\u6570\u636e\u4f9d\u8d56\u5173\u7cfb\uff0c\u53ef\u4ee5\u5e76\u884c\u5904\u7406</li> <li>\u663e\u8457\u63d0\u9ad8\u7a0b\u5e8f\u6548\u7387\uff0c\u6bd4\u5982\u5411\u91cf\u8fd0\u7b97\uff0c\u77e9\u9635\u8fd0\u7b97\u548c\u673a\u5668\u5b66\u4e60\u7b97\u6cd5</li> </ul>"},{"location":"jsjzc/cxzz/","title":"\u7a0b\u5e8f\u88c5\u8f7d","text":""},{"location":"jsjzc/cxzz/#_1","title":"\u7a0b\u5e8f\u88c5\u8f7d\u4e24\u4e2a\u8981\u6c42","text":"<ul> <li>\u53ef\u6267\u884c\u7a0b\u5e8f\u52a0\u8f7d\u540e\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4\u5e94\u8be5\u662f\u8fde\u7eed\u7684</li> <li>\u9700\u8981\u540c\u65f6\u52a0\u8f7d\u5f88\u591a\u4e2a\u7a0b\u5e8f\uff0c\u5e76\u4e14\u4e0d\u80fd\u8ba9\u7a0b\u5e8f\u81ea\u5df1\u89c4\u5b9a\u5728\u5185\u5b58\u4e2d\u52a0\u8f7d\u7684\u4f4d\u7f6e <p>\u8981\u6ee1\u8db3\u8fd9\u4e24\u4e2a\u57fa\u672c\u7684\u8981\u6c42\uff0c\u6211\u4eec\u5f88\u5bb9\u6613\u60f3\u5230\u4e00\u4e2a\u529e\u6cd5\u3002\u90a3\u5c31\u662f\u6211\u4eec\u53ef\u4ee5\u5728\u5185\u5b58\u91cc\u9762\uff0c\u627e\u5230\u4e00\u6bb5\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u7136\u540e\u5206\u914d\u7ed9\u88c5\u8f7d\u7684\u7a0b\u5e8f\uff0c\u7136\u540e\u628a\u8fd9\u6bb5\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\u5730\u5740\uff0c\u548c\u6574\u4e2a\u7a0b\u5e8f\u6307\u4ee4\u91cc\u6307\u5b9a\u7684\u5185\u5b58\u5730\u5740\u505a\u4e00\u4e2a\u6620\u5c04</p> </li> </ul>"},{"location":"jsjzc/cxzz/#_2","title":"\u5185\u5b58\u5206\u7c7b","text":"<ul> <li><code>\u865a\u62df\u5185\u5b58\u5730\u5740</code>\uff1a\u6307\u4ee4\u91cc\u7528\u5230\u7684\u5185\u5b58\u5730\u5740</li> <li><code>\u7269\u7406\u5185\u5b58\u5730\u5740</code>\uff1a\u5b9e\u9645\u5728\u5185\u5b58\u786c\u4ef6\u91cc\u9762\u7684\u7a7a\u95f4\u5730\u5740</li> </ul>"},{"location":"jsjzc/cxzz/#_3","title":"\u5185\u5b58\u5206\u6bb5","text":"<ul> <li>\u627e\u51fa\u4e00\u6bb5\u8fde\u7eed\u7684\u7269\u7406\u5185\u5b58\u548c\u865a\u62df\u5185\u5b58\u5730\u5740\u8fdb\u884c\u6620\u5c04\u7684\u65b9\u6cd5\uff0c\u53eb\u505a<code>\u5206\u6bb5</code></li> <li><code>\u6bb5</code>\uff0c\u5c31\u662f\u6307\u7cfb\u7edf\u5206\u914d\u51fa\u6765\u7684\u90a3\u4e2a\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4 </li> </ul>"},{"location":"jsjzc/cxzz/#-","title":"\u5185\u5b58\u5206\u6bb5\u7f3a\u9677-\u5185\u5b58\u788e\u7247","text":"<ul> <li>\u603b\u4f53\u5185\u5b58\u5269\u4f59\u7a7a\u95f4\u5927\u4e8e\u65b0\u7a0b\u5e8f\u9700\u8981\u5206\u914d\u7684\u5185\u5b58</li> <li>\u5355\u4e2a\u5185\u5b58\u5269\u4f59\u5927\u5c0f\u4e0d\u591f\u7ed9\u65b0\u7a0b\u5e8f\u5206\u914d </li> </ul>"},{"location":"jsjzc/cxzz/#_4","title":"\u5185\u5b58\u4ea4\u6362","text":"<ul> <li>\u5c06\u73b0\u6709\u7684\u5185\u5b58\u4e2d\u7684\u6570\u636e\u5199\u5165\u5230\u786c\u76d8</li> <li>\u91cd\u65b0\u5c06\u786c\u76d8\u6570\u636e\u5199\u5165\u5230\u5185\u5b58\u7684\u65b0\u533a\u57df</li> <li>\u5185\u5b58\u7a7a\u51fa\u8fde\u7eed\u533a\u57df</li> <li>\u4f1a\u6709\u6027\u80fd\u95ee\u9898\uff0c\u7a0b\u5e8f\u963b\u585e\u5361\u987f\uff0c\u786c\u76d8\u8bfb\u5199\u901f\u5ea6\u6162\u4e8e\u5185\u5b58</li> <li><code>swap</code>\u5206\u533a\u7684\u4f5c\u7528\uff0c\u5185\u5b58\u4ea4\u6362</li> </ul>"},{"location":"jsjzc/cxzz/#_5","title":"\u5185\u5b58\u5206\u9875","text":"<ul> <li>\u89e3\u51b3\u5185\u5b58\u5206\u6bb5\u7684\u5185\u5b58\u788e\u7247\u95ee\u9898</li> <li>\u548c\u5206\u6bb5\u8fd9\u6837\u5206\u914d\u4e00\u6574\u6bb5\u8fde\u7eed\u7684\u7a7a\u95f4\u7ed9\u5230\u7a0b\u5e8f\u76f8\u6bd4\uff0c\u5206\u9875\u662f\u628a\u6574\u4e2a\u7269\u7406\u5185\u5b58\u7a7a\u95f4\u5207\u6210\u4e00\u6bb5\u6bb5\u56fa\u5b9a\u5c3a\u5bf8\u7684\u5927\u5c0f</li> <li>\u800c\u5bf9\u5e94\u7684\u7a0b\u5e8f\u6240\u9700\u8981\u5360\u7528\u7684\u865a\u62df\u5185\u5b58\u7a7a\u95f4\uff0c\u4e5f\u4f1a\u540c\u6837\u5207\u6210\u4e00\u6bb5\u6bb5\u56fa\u5b9a\u5c3a\u5bf8\u7684\u5927\u5c0f\u3002\u8fd9\u6837\u4e00\u4e2a\u8fde\u7eed\u5e76\u4e14\u5c3a\u5bf8\u56fa\u5b9a\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u53eb\u9875\uff08Page\uff09</li> <li>\u4ece\u865a\u62df\u5185\u5b58\u5230\u7269\u7406\u5185\u5b58\u7684\u6620\u5c04\uff0c\u4e0d\u518d\u662f\u62ff\u6574\u6bb5\u8fde\u7eed\u7684\u5185\u5b58\u7684\u7269\u7406\u5730\u5740\uff0c\u800c\u662f\u6309\u7167\u4e00\u4e2a\u4e00\u4e2a\u9875\u6765\u7684\u3002\u9875\u7684\u5c3a\u5bf8\u4e00\u822c\u8fdc\u8fdc\u5c0f\u4e8e\u6574\u4e2a\u7a0b\u5e8f\u7684\u5927\u5c0f</li> <li>\u53d1\u751f\u5185\u5b58\u4ea4\u6362\u65f6\uff0c\u9700\u8981\u5199\u5165\u786c\u76d8\u7684\u6570\u636e\u51cf\u5c11\uff0c\u76f8\u5bf9\u901f\u5ea6\u53d8\u5feb </li> </ul>"},{"location":"jsjzc/dma/","title":"DMA","text":""},{"location":"jsjzc/dma/#_1","title":"\u4e3b\u8bbe\u5907\u548c\u4ece\u8bbe\u5907","text":"<ul> <li>\u603b\u7ebf\u4e0a\u7684\u8bbe\u5907\u7684\u4e24\u79cd\u7c7b\u578b</li> <li>\u8981\u60f3\u53d1\u8d77\u6570\u636e\u4f20\u8f93\uff0c\u5fc5\u987b\u8981\u662f\u4e00\u4e2a\u4e3b\u8bbe\u5907\u624d\u884c</li> <li>CPU\u5c31\u662f\u4e3b\u8bbe\u5907\uff0c\u4ece\u8bbe\u5907\uff08\u786c\u76d8\uff09\u53ea\u80fd\u63a5\u53d7\u6570\u636e\u4f20\u8f93</li> <li>io\u8bbe\u5907\u4e0d\u80fd\u5411\u4e3b\u8bbe\u5907\u53d1\u53d1\u8d77\u6570\u636e\u4f20\u9001\uff0c\u800c\u662f\u53d1\u9001\u4e00\u4e2a\u63a7\u5236\u4fe1\u53f7\uff0c\u544a\u77e5\u4e3b\u8bbe\u5907\u8fdb\u884c\u6570\u636e\u62c9\u53d6</li> <li>\u8981\u4e48\u662fCPU\u5411io\u8bbe\u5907\u5199\u6570\u636e\uff0c\u8981\u4e48\u662fCPU\u4eceio\u8bbe\u5907\u62c9\u6570\u636e</li> </ul>"},{"location":"jsjzc/dma/#_2","title":"\u76f4\u63a5\u5185\u5b58\u8bbf\u95ee","text":"<ul> <li>Direct Memory Access</li> <li>\u51cf\u5c11iowait\u65f6\uff0ccpu\u7b49\u5f85\u7684\u65f6\u95f4</li> <li>DMA\u6280\u672f\u5c31\u662f\u72ec\u7acb\u5728\u4e3b\u677f\u4e0a\u653e\u4e00\u4e2a\u82af\u7247</li> <li>\u8fdb\u884c\u5185\u5b58\u548cIO\u8bbe\u5907\u6570\u636e\u4f20\u8f93\u7684\u65f6\u5019\uff0c\u4e0d\u518d\u901a\u8fc7CPU\u63a7\u5236\u6570\u636e\u4f20\u8f93\uff0c\u800c\u662f\u901a\u8fc7DMA\u63a7\u5236\u5668 DMA Controller \u7b80\u79f0DMAC</li> <li>DMAC \u662f\u4e00\u79cd\u7279\u6b8a\u7684IO\u8bbe\u5907\uff0c\u5b83\u548cCPU\u901a\u4fe1\u548c\u5176\u4ed6io\u8bbe\u5907\u4e00\u6837\uff0c\u90fd\u662f\u901a\u8fc7\u603b\u7ebf\u8fdb\u884c\u5b9e\u9645\u7684\u6570\u636e\u4f20\u8f93</li> </ul>"},{"location":"jsjzc/dma/#dmac","title":"DMAC","text":"<ul> <li>\u76f8\u5bf9CPU\u662f\u4ece\u8bbe\u5907</li> <li>\u76f8\u5bf9\u786c\u76d8\u662f\u4e3b\u8bbe\u5907</li> </ul>"},{"location":"jsjzc/dma/#_3","title":"\u4f20\u8f93\u8fc7\u7a0b","text":"<ol> <li>\u9996\u5148\uff0cCPU \u8fd8\u662f\u4f5c\u4e3a\u4e00\u4e2a\u4e3b\u8bbe\u5907\uff0c\u5411 DMAC \u8bbe\u5907\u53d1\u8d77\u8bf7\u6c42\u3002\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u5176\u5b9e\u5c31\u662f\u5728 DMAC \u91cc\u9762\u4fee\u6539\u914d\u7f6e\u5bc4\u5b58\u5668</li> <li>CPU \u4fee\u6539 DMAC \u7684\u914d\u7f6e\u7684\u65f6\u5019\uff0c\u4f1a\u544a\u8bc9 DMAC \u8fd9\u6837\u51e0\u4e2a\u4fe1\u606f\uff1a<ul> <li>\u9996\u5148\u662f\u6e90\u5730\u5740\u7684\u521d\u59cb\u503c\u4ee5\u53ca\u4f20\u8f93\u65f6\u5019\u7684\u5730\u5740\u589e\u51cf\u65b9\u5f0f\u3002\u5c31\u662f\u6570\u636e\u8981\u4ece\u54ea\u91cc\u4f20\u8f93\u8fc7\u6765</li> <li>\u5982\u679c\u6211\u4eec\u8981\u4ece\u5185\u5b58\u91cc\u9762\u5199\u5165\u6570\u636e\u5230\u786c\u76d8\u4e0a\uff0c\u90a3\u4e48\u5c31\u662f\u8981\u8bfb\u53d6\u7684\u6570\u636e\u5728\u5185\u5b58\u91cc\u9762\u7684\u5730\u5740</li> <li>\u5982\u679c\u662f\u4ece\u786c\u76d8\u8bfb\u53d6\u6570\u636e\u5230\u5185\u5b58\u91cc\uff0c\u90a3\u5c31\u662f\u786c\u76d8\u7684 I/O \u63a5\u53e3\u7684\u5730\u5740\u3002</li> <li>I/O \u7684\u5730\u5740\u53ef\u4ee5\u662f\u4e00\u4e2a\u5185\u5b58\u5730\u5740\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u7aef\u53e3\u5730\u5740\u3002\u800c\u5730\u5740\u7684\u589e\u51cf\u65b9\u5f0f\u5c31\u662f\u8bf4\uff0c\u6570\u636e\u662f\u4ece\u5927\u7684\u5730\u5740\u5411\u5c0f\u7684\u5730\u5740\u4f20\u8f93\uff0c\u8fd8\u662f\u4ece\u5c0f\u7684\u5730\u5740\u5f80\u5927\u7684\u5730\u5740\u4f20\u8f93</li> <li>\u5176\u6b21\u662f\u76ee\u6807\u5730\u5740\u521d\u59cb\u503c\u548c\u4f20\u8f93\u65f6\u5019\u7684\u5730\u5740\u589e\u51cf\u65b9\u5f0f\u3002\u76ee\u6807\u5730\u5740\u81ea\u7136\u5c31\u662f\u548c\u6e90\u5730\u5740\u5bf9\u5e94\u7684\u8bbe\u5907\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u6570\u636e\u4f20\u8f93\u7684\u76ee\u7684\u5730</li> <li>\u7b2c\u4e09\u4e2a\u662f\u8981\u4f20\u8f93\u7684\u6570\u636e\u957f\u5ea6\uff0c\u4e5f\u5c31\u662f\u4e00\u5171\u8981\u4f20\u8f93\u591a\u5c11\u6570\u636e</li> </ul> </li> <li>\u8bbe\u7f6e\u5b8c\u8fd9\u4e9b\u4fe1\u606f\u4e4b\u540e\uff0cDMAC \u5c31\u4f1a\u53d8\u6210\u4e00\u4e2a\u7a7a\u95f2\u7684\u72b6\u6001\uff08Idle\uff09</li> <li>\u5982\u679c\u6211\u4eec\u8981\u4ece\u786c\u76d8\u4e0a\u5f80\u5185\u5b58\u91cc\u9762\u52a0\u8f7d\u6570\u636e\uff0c\u8fd9\u4e2a\u65f6\u5019\uff0c\u786c\u76d8\u5c31\u4f1a\u5411 DMAC \u53d1\u8d77\u4e00\u4e2a\u6570\u636e\u4f20\u8f93\u8bf7\u6c42\u3002\u8fd9\u4e2a\u8bf7\u6c42\u5e76\u4e0d\u662f\u901a\u8fc7\u603b\u7ebf\uff0c\u800c\u662f\u901a\u8fc7\u4e00\u4e2a\u989d\u5916\u7684\u8fde\u7ebf</li> <li>DMAC\u9700\u8981\u518d\u901a\u8fc7\u4e00\u4e2a\u989d\u5916\u7684\u8fde\u7ebf\u54cd\u5e94\u8fd9\u4e2a\u7533\u8bf7</li> <li>DMAC\u5c31\u5411\u786c\u76d8\u7684\u63a5\u53e3\u53d1\u8d77\u8981\u603b\u7ebf\u8bfb\u7684\u4f20\u8f93\u8bf7\u6c42\u3002\u6570\u636e\u5c31\u4ece\u786c\u76d8\u91cc\u9762\uff0c\u8bfb\u5230\u4e86 DMAC \u7684\u63a7\u5236\u5668\u91cc\u9762</li> <li>DMAC\u518d\u5411\u6211\u4eec\u7684\u5185\u5b58\u53d1\u8d77\u603b\u7ebf\u5199\u7684\u6570\u636e\u4f20\u8f93\u8bf7\u6c42\uff0c\u628a\u6570\u636e\u5199\u5165\u5230\u5185\u5b58\u91cc\u9762</li> <li>DMAC \u4f1a\u53cd\u590d\u8fdb\u884c\u4e0a\u9762\u7b2c 6\u30017 \u6b65\u7684\u64cd\u4f5c\uff0c\u76f4\u5230 DMAC \u7684\u5bc4\u5b58\u5668\u91cc\u9762\u8bbe\u7f6e\u7684\u6570\u636e\u957f\u5ea6\u4f20\u8f93\u5b8c\u6210</li> <li>\u6570\u636e\u4f20\u8f93\u5b8c\u6210\u4e4b\u540e\uff0cDMAC \u91cd\u65b0\u56de\u5230\u7b2c 3 \u6b65\u7684\u7a7a\u95f2\u72b6\u6001 </li> </ol>"},{"location":"jsjzc/dma/#kafkadma","title":"kafka\u7528DMA\u52a0\u901f","text":"<ul> <li>\u672c\u5730\u786c\u76d8\u4f20\u8f93\u5230\u7f51\u5361\u8bbe\u5907</li> <li>\u56db\u6b21\u4f20\u8f93\uff0c\u4e24\u6b21DMA\u63a7\u5236\u7684\u4f20\u8f93\uff0c\u4e24\u6b21CPU\u63a7\u5236\u7684\u4f20\u8f93</li> <li>\u7b2c\u4e00\u6b21\u4f20\u8f93\uff0c\u662f\u4ece\u786c\u76d8\u4e0a\uff0c\u8bfb\u5230\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u7684\u7f13\u51b2\u533a\u91cc\u3002\u8fd9\u4e2a\u4f20\u8f93\u662f\u901a\u8fc7 DMA \u642c\u8fd0\u7684</li> <li>\u7b2c\u4e8c\u6b21\u4f20\u8f93\uff0c\u9700\u8981\u4ece\u5185\u6838\u7f13\u51b2\u533a\u91cc\u9762\u7684\u6570\u636e\uff0c\u590d\u5236\u5230\u6211\u4eec\u5e94\u7528\u5206\u914d\u7684\u5185\u5b58\u91cc\u9762\u3002\u8fd9\u4e2a\u4f20\u8f93\u662f\u901a\u8fc7 CPU \u642c\u8fd0\u7684</li> <li>\u7b2c\u4e09\u6b21\u4f20\u8f93\uff0c\u8981\u4ece\u6211\u4eec\u5e94\u7528\u7684\u5185\u5b58\u91cc\u9762\uff0c\u518d\u5199\u5230\u64cd\u4f5c\u7cfb\u7edf\u7684 Socket \u7684\u7f13\u51b2\u533a\u91cc\u9762\u53bb\u3002\u8fd9\u4e2a\u4f20\u8f93\uff0c\u8fd8\u662f\u7531 CPU \u642c\u8fd0\u7684</li> <li>\u6700\u540e\u4e00\u6b21\u4f20\u8f93\uff0c\u9700\u8981\u518d\u4ece Socket \u7684\u7f13\u51b2\u533a\u91cc\u9762\uff0c\u5199\u5230\u7f51\u5361\u7684\u7f13\u51b2\u533a\u91cc\u9762\u53bb\u3002\u8fd9\u4e2a\u4f20\u8f93\u53c8\u662f\u901a\u8fc7 DMA \u642c\u8fd0\u7684 </li> </ul>"},{"location":"jsjzc/dma/#kafka-zero-copy","title":"kafka\u52a0\u901f\u2014\u2014\u96f6\u62f7\u8d1d zero copy","text":"<pre><code>@Override\npublic long transferFrom(FileChannel fileChannel, long position, long count) throws IOException {\nreturn fileChannel.transferTo(position, count, socketChannel);\n}\n</code></pre> <ul> <li>\u8c03\u7528 Java \u7684NIO\u5e93</li> <li>\u786c\u76d8\u7684\u6570\u636e\u5e76\u6ca1\u6709\u5199\u5230\u4e2d\u95f4\u7684\u5e94\u7528\u5185\u5b58</li> <li>\u76f4\u63a5\u901a\u8fc7Channel\u5199\u5165\u5230\u5bf9\u5e94\u7684\u7f51\u7edc\u8bbe\u5907\u91cc</li> <li>socker\u7684\u5185\u5bb9\u4e5f\u4e0d\u662f\u5199\u5165\u5230socker\u7684buffer\u4e2d</li> <li>\u76f4\u63a5\u6839\u636e\u63cf\u8ff0\u7b26\u5199\u5230\u7f51\u5361\u7684\u7f13\u51b2\u533a\u91cc</li> <li>\u6ca1\u6709\u5728\u5185\u5b58\u5c42\u9762\u53bb\u201c\u590d\u5236\uff08Copy\uff09\u201d\u6570\u636e </li> </ul>"},{"location":"jsjzc/fds%26%26dds/","title":"\u6d6e\u70b9\u6570\u548c\u5b9a\u70b9\u6570","text":""},{"location":"jsjzc/fds%26%26dds/#_1","title":"\u5b9a\u70b9\u6570\u8868\u793a","text":"<ul> <li><code>BCD \u7f16\u7801</code></li> </ul>"},{"location":"jsjzc/fds%26%26dds/#bcd","title":"BCD \u7f16\u7801","text":"<ul> <li>\u7528 4 \u4e2a\u6bd4\u7279\u6765\u8868\u793a 0\uff5e9 \u7684\u6574\u6570\uff0c\u90a3\u4e48 32 \u4e2a\u6bd4\u7279\u5c31\u53ef\u4ee5\u8868\u793a 8 \u4e2a\u8fd9\u6837\u7684\u6574\u6570</li> <li>\u628a\u6700\u53f3\u8fb9\u7684 2 \u4e2a 0\uff5e9 \u7684\u6574\u6570\uff0c\u5f53\u6210\u5c0f\u6570\u90e8\u5206\uff1b\u628a\u5de6\u8fb9 6 \u4e2a 0\uff5e9 \u7684\u6574\u6570\uff0c\u5f53\u6210\u6574\u6570\u90e8\u5206</li> <li>\u5c31\u53ef\u4ee5\u7528 32 \u4e2a\u6bd4\u7279\uff0c\u6765\u8868\u793a\u4ece 0 \u5230 999999.99 \u8fd9\u6837 1 \u4ebf\u4e2a\u5b9e\u6570</li> <li>\u7528\u4e8c\u8fdb\u5236\u6765\u8868\u793a\u5341\u8fdb\u5236\u6570\u5b57\u7684\u65b9\u5f0f\u53eb\u505a <code>BCD</code>\u7f16\u7801</li> </ul>"},{"location":"jsjzc/fds%26%26dds/#bcd_1","title":"BCD\u7f3a\u70b9","text":"<ul> <li>\u6d6a\u8d39\u6570\u636e\u8303\u56f4\uff0c32 \u4e2a\u6bd4\u7279\u6211\u4eec\u53ef\u4ee5\u8868\u793a 40 \u4ebf\u4e2a\u4e0d\u540c\u7684\u6570\uff0c\u4f46\u662f\u5728 BCD \u7f16\u7801\u4e0b\uff0c\u53ea\u80fd\u8868\u793a 1 \u4ebf\u4e2a\u6570</li> <li>\u6ca1\u529e\u6cd5\u540c\u65f6\u8868\u793a\u5f88\u5927\u7684\u6570\u5b57\u548c\u5f88\u5c0f\u7684\u6570\u5b57</li> </ul>"},{"location":"jsjzc/fds%26%26dds/#_2","title":"\u6d6e\u70b9\u6570\u8868\u793a","text":"<ul> <li>\u79d1\u5b66\u8ba1\u6570\u6cd5</li> <li>32\u4f4d\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570 <code>float</code>\u6216<code>float32</code></li> <li>64\u4f4d\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570 <code>double</code>\u6216<code>float64</code></li> </ul>"},{"location":"jsjzc/fds%26%26dds/#_3","title":"\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570","text":"<ul> <li>IEEE754\u56fd\u9645\u6807\u51c6\u89c4\u5b9a\uff0c32\u4f4d\u7684\u6d6e\u70b9\u6570\uff0c\u6700\u9ad8\u76841\u4f4d\u662f\u7b26\u53f7\u4f4ds\uff0c\u63a5\u7740\u76848\u4f4d\u662f\u6307\u6570E\uff0c\u5269\u4e0b\u768423\u4f4d\u4e3a\u6709\u6548\u6570\u5b57M</li> </ul> <ul> <li>(-1)^s\u8868\u793a\u7b26\u53f7\u4f4d\uff0c\u5f53s=0\uff0cV\u4e3a\u6b63\u6570\uff1b\u5f53s=1\uff0cV\u4e3a\u8d1f\u6570</li> <li>M\u8868\u793a\u6709\u6548\u6570\u5b57\uff0c\u5927\u4e8e\u7b49\u4e8e1\uff0c\u5c0f\u4e8e2</li> <li>2^E\u8868\u793a\u6307\u6570\u4f4d</li> </ul>"},{"location":"jsjzc/fds%26%26dds/#_4","title":"\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570","text":"<ul> <li>\u5bf9\u4e8e64\u4f4d\u7684\u6d6e\u70b9\u6570\uff0c\u6700\u9ad8\u76841\u4f4d\u662f\u7b26\u53f7\u4f4dS\uff0c\u63a5\u7740\u768411\u4f4d\u662f\u6307\u6570E\uff0c\u5269\u4e0b\u768452\u4f4d\u4e3a\u6709\u6548\u6570\u5b57M </li> </ul>"},{"location":"jsjzc/fds%26%26dds/#ieeem","title":"IEEE\u89c4\u5b9a\u5bf9M\u7684\u89c4\u5b9a","text":"<ul> <li>1\u2264M&lt;2\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0cM\u53ef\u4ee5\u5199\u62101.xxxxxx\u7684\u5f62\u5f0f\uff0c\u5176\u4e2dxxxxxx\u8868\u793a\u5c0f\u6570\u90e8\u5206\u3002IEEE 754\u89c4\u5b9a\uff0c\u5728\u8ba1\u7b97\u673a\u5185\u90e8\u4fdd\u5b58M\u65f6\uff0c\u9ed8\u8ba4\u8fd9\u4e2a\u6570\u7684\u7b2c\u4e00\u4f4d\u603b\u662f1\uff0c\u56e0\u6b64\u53ef\u4ee5\u88ab\u820d\u53bb\uff0c\u53ea\u4fdd\u5b58\u540e\u9762\u7684xxxxxx\u90e8\u5206</li> <li>\u6bd4\u5982\u4fdd\u5b581.01\u7684\u65f6\u5019\uff0c\u53ea\u4fdd\u5b5801\uff0c\u7b49\u5230\u8bfb\u53d6\u7684\u65f6\u5019\uff0c\u518d\u628a\u7b2c\u4e00\u4f4d\u76841\u52a0\u4e0a\u53bb\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\uff0c\u662f\u8282\u77011\u4f4d\u6709\u6548\u6570\u5b57\u3002\u4ee532\u4f4d\u6d6e\u70b9\u6570\u4e3a\u4f8b\uff0c\u7559\u7ed9M\u53ea\u670923\u4f4d\uff0c\u5c06\u7b2c\u4e00\u4f4d\u76841\u820d\u53bb\u4ee5\u540e\uff0c\u7b49\u4e8e\u53ef\u4ee5\u4fdd\u5b5824\u4f4d\u6709\u6548\u6570\u5b57</li> </ul>"},{"location":"jsjzc/fds%26%26dds/#ieeee","title":"IEEE\u5bf9E\u7684\u89c4\u5b9a","text":"<ul> <li>E\u4e3a\u4e00\u4e2a\u65e0\u7b26\u53f7\u6574\u6570\uff08unsigned int\uff09</li> <li>\u5982\u679cE\u4e3a8\u4f4d\uff0c\u5b83\u7684\u53d6\u503c\u8303\u56f4\u4e3a0~255\uff1b\u5982\u679cE\u4e3a11\u4f4d\uff0c\u5b83\u7684\u53d6\u503c\u8303\u56f4\u4e3a0~2047</li> <li>\u79d1\u5b66\u8ba1\u6570\u6cd5\u4e2d\u7684E\u662f\u53ef\u4ee5\u51fa\u73b0\u8d1f\u6570\u7684\uff0c\u6240\u4ee5IEEE 754\u89c4\u5b9a\uff0cE\u7684\u771f\u5b9e\u503c\u5fc5\u987b\u518d\u51cf\u53bb\u4e00\u4e2a\u4e2d\u95f4\u6570</li> <li>\u5bf9\u4e8e8\u4f4d\u7684E\uff0c\u8fd9\u4e2a<code>\u4e2d\u95f4\u6570\u662f127</code>\uff1b\u5bf9\u4e8e11\u4f4d\u7684E\uff0c\u8fd9\u4e2a<code>\u4e2d\u95f4\u6570\u662f1023</code></li> <li>2^10\u7684E\u662f10\uff0c\u6240\u4ee5\u4fdd\u5b58\u621032\u4f4d\u6d6e\u70b9\u6570\u65f6\uff0c\u5fc5\u987b\u4fdd\u5b58\u621010+127=137\uff0c\u537310001001</li> </ul>"},{"location":"jsjzc/fds%26%26dds/#e","title":"E\u7684\u989d\u5916\u60c5\u51b5","text":"<ul> <li>E\u4e0d\u5168\u4e3a0\u6216\u4e0d\u5168\u4e3a1\u3002\u8fd9\u65f6\uff0c\u6d6e\u70b9\u6570\u5c31\u91c7\u7528\u4e0a\u9762\u7684\u89c4\u5219\u8868\u793a\uff0c\u5373\u6307\u6570E\u7684\u8ba1\u7b97\u503c\u51cf\u53bb127\uff08\u62161023\uff09\uff0c\u5f97\u5230\u771f\u5b9e\u503c\uff0c\u518d\u5c06\u6709\u6548\u6570\u5b57M\u524d\u52a0\u4e0a\u7b2c\u4e00\u4f4d\u76841</li> <li>E\u5168\u4e3a0\u3002\u8fd9\u65f6\uff0c\u6d6e\u70b9\u6570\u7684\u6307\u6570E\u7b49\u4e8e1-127\uff08\u6216\u80051-1023\uff09\uff0c\u6709\u6548\u6570\u5b57M\u4e0d\u518d\u52a0\u4e0a\u7b2c\u4e00\u4f4d\u76841\uff0c\u800c\u662f\u8fd8\u539f\u4e3a0.xxxxxx\u7684\u5c0f\u6570\u3002\u8fd9\u6837\u505a\u662f\u4e3a\u4e86\u8868\u793a\u00b10\uff0c\u4ee5\u53ca\u63a5\u8fd1\u4e8e0\u7684\u5f88\u5c0f\u7684\u6570\u5b57</li> <li>E\u5168\u4e3a1\u3002\u8fd9\u65f6\uff0c\u5982\u679c\u6709\u6548\u6570\u5b57M\u5168\u4e3a0\uff0c\u8868\u793a\u00b1\u65e0\u7a77\u5927\uff08\u6b63\u8d1f\u53d6\u51b3\u4e8e\u7b26\u53f7\u4f4ds\uff09\uff1b\u5982\u679c\u6709\u6548\u6570\u5b57M\u4e0d\u5168\u4e3a0\uff0c\u8868\u793a\u8fd9\u4e2a\u6570\u4e0d\u662f\u4e00\u4e2a\u6570\uff08NaN\uff09 </li> </ul>"},{"location":"jsjzc/fds%26%26dds/#_5","title":"\u5c0f\u6570\u6362\u6210\u4e8c\u8fdb\u5236\u65b9\u5f0f","text":"<ul> <li>\u5c0f\u6570\u90e8\u5206\u8f6c\u6362\u6210\u4e8c\u8fdb\u5236\u662f\u7528\u4e00\u4e2a\u76f8\u4f3c\u7684\u53cd\u65b9\u5411\u64cd\u4f5c\uff0c\u5c31\u662f\u4e58\u4ee5 2\uff0c\u7136\u540e\u770b\u770b\u662f\u5426\u8d85\u8fc7 1</li> <li>\u5982\u679c\u8d85\u8fc7 1\uff0c\u6211\u4eec\u5c31\u8bb0\u4e0b 1\uff0c\u5e76\u628a\u7ed3\u679c\u51cf\u53bb 1\uff0c\u8fdb\u4e00\u6b65\u5faa\u73af\u64cd\u4f5c</li> <li>\u5982\u679c\u4e0d\u8d85\u8fc71\uff0c\u5c31\u8bb0\u4e0b0</li> </ul>"},{"location":"jsjzc/fds%26%26dds/#01","title":"0.1\u8f6c\u6210\u4e8c\u8fdb\u5236","text":""},{"location":"jsjzc/fds%26%26dds/#91","title":"9.1 \u4e8c\u8fdb\u5236","text":"<ul> <li>1001.000110011\u2026\u8fd9\u6837\u4e00\u4e2a\u4e8c\u8fdb\u5236\u8868\u793a</li> <li>\u8f6c\u6210\u6d6e\u70b9\u6570\u8868\u793a\u65b9\u5f0f<code>1.001000110011...*2^3</code></li> <li>\u6307\u6570\u4e3a3\uff0c\u7136\u540e\u52a0127\u4e3a8\u4f4d\u6307\u6570\u4f4d</li> <li>010000010 0010 0011001100110011 001</li> </ul>"},{"location":"jsjzc/fds%26%26dds/#_6","title":"\u6d6e\u70b9\u6570\u76f8\u52a0","text":"<ul> <li>\u5148\u5bf9\u9f50\u6307\u6570\u4f4d\u3001\u518d\u8ba1\u7b97</li> <li>\u5bf9\u5e94\u7684\u6709\u6548\u4f4d\u4e5f\u8981\u8c03\u6574</li> </ul> <p>\u6bd4\u5982 0.5\uff0c\u8868\u793a\u6210\u6d6e\u70b9\u6570\uff0c\u5bf9\u5e94\u7684\u6307\u6570\u4f4d\u662f -1\uff0c\u6709\u6548\u4f4d\u662f 00\u2026\uff08\u540e\u9762\u5168\u662f 0\uff0c\u8bb0\u4f4f f \u524d\u9ed8\u8ba4\u6709\u4e00\u4e2a 1\uff09\u30020.125 \u8868\u793a\u6210\u6d6e\u70b9\u6570\uff0c\u5bf9\u5e94\u7684\u6307\u6570\u4f4d\u662f -3\uff0c\u6709\u6548\u4f4d\u4e5f\u8fd8\u662f 00\u2026\uff08\u540e\u9762\u5168\u662f 0\uff0c\u8bb0\u4f4f f \u524d\u9ed8\u8ba4\u6709\u4e00\u4e2a 1\uff09</p> <p>\u8ba1\u7b97 0.5+0.125 \u7684\u6d6e\u70b9\u6570\u8fd0\u7b97\u7684\u65f6\u5019\uff0c\u9996\u5148\u8981\u628a\u4e24\u4e2a\u7684\u6307\u6570\u4f4d\u5bf9\u9f50\uff0c\u4e5f\u5c31\u662f\u628a\u6307\u6570\u4f4d\u90fd\u7edf\u4e00\u6210\u4e24\u4e2a\u5176\u4e2d\u8f83\u5927\u7684 -1\u3002\u5bf9\u5e94\u7684\u6709\u6548\u4f4d 1.00\u2026\u4e5f\u8981\u5bf9\u5e94\u53f3\u79fb\u4e24\u4f4d\uff0c\u56e0\u4e3a f \u524d\u9762\u6709\u4e00\u4e2a\u9ed8\u8ba4\u7684 1\uff0c\u6240\u4ee5\u5c31\u4f1a\u53d8\u6210 0.01\u3002\u7136\u540e\u6211\u4eec\u8ba1\u7b97\u4e24\u8005\u76f8\u52a0\u7684\u6709\u6548\u4f4d 1.f\uff0c\u5c31\u53d8\u6210\u4e86\u6709\u6548\u4f4d 1.01\uff0c\u800c\u6307\u6570\u4f4d\u662f -1</p>"},{"location":"jsjzc/fnym/","title":"\u51af\u8bfa\u4f9d\u66fc\u4f53\u7cfb\u7ed3\u6784","text":""},{"location":"jsjzc/fnym/#_1","title":"\u51af\u8bfa\u4f9d\u66fc\u4f53\u7cfb\u7ed3\u6784","text":"<ul> <li>\u5904\u7406\u5668\u5355\u5143(Processing Unit)\uff1a\u5305\u542b\u7b97\u672f\u903b\u8f91\u5355\u5143(Arithmetic Logic Unit, ALU)\u548c\u5904\u7406\u5668\u5bc4\u5b58\u5668(Processor Register)</li> <li>\u63a7\u5236\u5668\u5355\u5143\uff1a\u5305\u542b\u6307\u4ee4\u5bc4\u5b58\u5668(Instruction Register)\u548c\u7a0b\u5e8f\u8ba1\u6570\u5668(Program Counter)</li> <li>\u5b58\u50a8\u5668\uff1a\u5185\u5b58&amp;&amp;\u5b58\u50a8\uff0c\u5b58\u50a8\u6570\u636e\u548c\u6307\u4ee4\u7684\u5185\u5b58\uff0c\u4ee5\u53ca\u66f4\u5927\u5bb9\u91cf\u7684\u5916\u90e8\u5b58\u50a8</li> <li>\u8f93\u5165\u8f93\u51fa\u8bbe\u5907\uff1a\u8f93\u5165\u548c\u8f93\u51fa\u8bbe\u5907\uff0c\u4ee5\u53ca\u8f93\u5165\u548c\u8f93\u51fa\u673a\u5236 </li> </ul>"},{"location":"jsjzc/gpu/","title":"GPU","text":""},{"location":"jsjzc/gpu/#_1","title":"\u56fe\u5f62\u6e32\u67d3","text":"<ul> <li>\u73b0\u5728\u7535\u8111\u91cc\u9762\u663e\u793a\u51fa\u6765\u7684 3D \u7684\u753b\u9762\uff0c\u5176\u5b9e\u662f\u901a\u8fc7\u591a\u8fb9\u5f62\u7ec4\u5408\u51fa\u6765\u7684</li> <li>\u4f60\u5728\u73a9\u7684\u5404\u79cd\u6e38\u620f\uff0c\u91cc\u9762\u7684\u4eba\u7269\u7684\u8138\uff0c\u5e76\u4e0d\u662f\u90a3\u4e2a\u76f8\u673a\u6216\u8005\u6444\u50cf\u5934\u62cd\u51fa\u6765\u7684\uff0c\u800c\u662f\u901a\u8fc7\u591a\u8fb9\u5f62\u5efa\u6a21\uff08Polygon Modeling\uff09\u521b\u5efa\u51fa\u6765\u7684 </li> </ul>"},{"location":"jsjzc/gpu/#_2","title":"\u56fe\u5f62\u5b9e\u65f6\u6e32\u67d3\u6b65\u9aa4\uff08\u56fe\u5f62\u6d41\u6c34\u7ebf\uff09","text":"<ol> <li>\u9876\u70b9\u5904\u7406 Vertex Processing</li> <li>\u56fe\u5143\u5904\u7406 Primitive Processing</li> <li>\u6805\u683c\u5316 Rasterization</li> <li>\u7247\u6bb5\u5904\u7406 Fragment Processing</li> <li>\u50cf\u7d20\u64cd\u4f5c Pixel Operations</li> </ol>"},{"location":"jsjzc/gpu/#_3","title":"\u9876\u70b9\u5904\u7406","text":"<ul> <li>\u6784\u6210\u591a\u8fb9\u5f62\u5efa\u6a21\u7684\u6bcf\u4e2a\u591a\u8fb9\u5f62\u90fd\u6709\u591a\u4e2a\u9876\u70b9</li> <li>\u6bcf\u4e2a\u9876\u70b9\u5728\u4e09\u7ef4\u7a7a\u95f4\u91cc\u6709\u4e00\u4e2a\u5750\u6807</li> <li>\u56e0\u4e3a\u5c4f\u5e55\u662f\u4e8c\u7ef4\u7684\uff0c\u6240\u4ee5\u9700\u8981\u628a\u9876\u70b9\u7684\u4e09\u7ef4\u7a7a\u95f4\u91cc\u8fb9\u7684\u4f4d\u7f6e\uff0c\u8f6c\u5316\u5230\u5c4f\u5e55\u8fd9\u4e2a\u4e8c\u7ef4\u7a7a\u95f4\u91cc\u8fb9\u7684\u64cd\u4f5c\u53eb\u9876\u70b9\u5904\u7406</li> <li>\u901a\u8fc7\u7ebf\u6027\u4ee3\u6570\u8ba1\u7b97</li> <li><code>\u6bcf\u4e2a\u9876\u70b9\u4f4d\u7f6e\u7684\u8f6c\u6362\uff0c\u4e92\u76f8\u4e4b\u95f4\u6ca1\u6709\u4f9d\u8d56\u5173\u7cfb\uff0c\u53ef\u4ee5\u5e76\u884c\u72ec\u7acb\u8ba1\u7b97</code> </li> </ul>"},{"location":"jsjzc/gpu/#_4","title":"\u56fe\u5143\u5904\u7406","text":"<ul> <li>\u628a\u9876\u70b9\u5904\u7406\u5b8c\u6210\u4e4b\u540e\u7684\u5404\u4e2a\u9876\u70b9\u8fde\u8d77\u6765\uff0c\u53d8\u6210\u591a\u8fb9\u5f62</li> <li>\u8f6c\u5316\u540e\u7684\u9876\u70b9\uff0c\u4ecd\u7136\u662f\u5728\u4e00\u4e2a\u4e09\u7ef4\u7a7a\u95f4\u91cc\uff0c\u53ea\u662f\u7b2c\u4e09\u7ef4\u7684 Z \u8f74\uff0c\u662f\u6b63\u5bf9\u5c4f\u5e55\u7684\u201c\u6df1\u5ea6\u201d</li> <li>\u9488\u5bf9\u8fd9\u4e9b\u591a\u8fb9\u5f62\uff0c\u9700\u8981\u505a\u4e00\u4e2a\u64cd\u4f5c\uff0c\u53eb\u5254\u9664\u548c\u88c1\u526a\uff08Cull and Clip\uff09\uff0c\u4e5f\u5c31\u662f\u628a\u4e0d\u5728\u5c4f\u5e55\u91cc\u9762\uff0c\u6216\u8005\u4e00\u90e8\u5206\u4e0d\u5728\u5c4f\u5e55\u91cc\u9762\u7684\u5185\u5bb9\u7ed9\u53bb\u6389\uff0c\u51cf\u5c11\u63a5\u4e0b\u6765\u6d41\u7a0b\u7684\u5de5\u4f5c\u91cf </li> </ul>"},{"location":"jsjzc/gpu/#_5","title":"\u6805\u683c\u5316","text":"<ul> <li>\u628a\u591a\u8fb9\u5f62\u8f6c\u6362\u6210\u5c4f\u5e55\u91cc\u9762\u7684\u4e00\u4e2a\u4e2a\u50cf\u7d20\u70b9</li> <li>\u6bcf\u4e00\u4e2a\u56fe\u5143\u90fd\u53ef\u4ee5\u5e76\u884c\u5904\u7406 </li> </ul>"},{"location":"jsjzc/gpu/#_6","title":"\u7247\u6bb5\u5904\u7406","text":"<ul> <li>\u6805\u683c\u5316\u540e\u7684\u56fe\u50cf\u662f\u9ed1\u767d\u7684</li> <li>\u9700\u8981\u8ba1\u7b97\u6bcf\u4e2a\u50cf\u7d20\u7684\u989c\u8272\u548c\u900f\u660e\u5ea6\uff0c\u7ed9\u50cf\u7d20\u4e0a\u8272</li> <li>\u540c\u6837\u53ef\u4ee5\u5e76\u884c\uff0c\u72ec\u7acb\u8fdb\u884c </li> </ul>"},{"location":"jsjzc/gpu/#_7","title":"\u50cf\u7d20\u64cd\u4f5c","text":"<ul> <li>\u628a\u4e0d\u540c\u7684\u50cf\u7d20\u70b9\u6df7\u5408\u5230\u4e00\u8d77\uff0c\u6700\u7ec8\u8f93\u51fa\u5230\u663e\u793a\u8bbe\u5907</li> </ul>"},{"location":"jsjzc/gpu/#gpu","title":"\u73b0\u4ee3GPU\u7edf\u4e00\u7740\u8272\u67b6\u6784","text":"<ul> <li>Unified Shader Architecture</li> <li>GPU\u91cc\u653e\u5f88\u591a\u4e2a\u4e00\u6837\u7684Shader\u7535\u8def\uff0c\u901a\u8fc7\u7edf\u4e00\u8c03\u5ea6</li> <li>\u9876\u70b9\u5904\u7406\uff0c\u56fe\u5143\u5904\u7406\uff0c\u7247\u6bb5\u5904\u7406\uff0c\u90fd\u4ea4\u7ed9Shader\u53bb\u5904\u7406 </li> </ul>"},{"location":"jsjzc/gpu/#gpu_1","title":"\u73b0\u4ee3GPU\u4e3a\u4ec0\u4e48\u6df1\u5ea6\u5b66\u4e60\u5feb","text":"<ul> <li>\u82af\u7247\u7626\u8eab</li> <li>\u591a\u6838\u5e76\u884c\u548cSIMT</li> <li>GPU\u91cc\u7684\u8d85\u7ebf\u7a0b</li> <li>GPU\u8fd8\u662f\u4e00\u4e2a\u53ef\u4ee5\u8fdb\u884c\u7f16\u7a0b\u7684\u901a\u7528\u8ba1\u7b97\u7684\u6846\u67b6\uff0c\u53ef\u4ee5\u5728GPU\u4e0a\u5b9e\u73b0\u4e0d\u540c\u7684\u7b97\u6cd5</li> <li>\u6df1\u5ea6\u5b66\u4e60\u7684\u5927\u91cf\u5411\u91cf\u548c\u77e9\u9635\u8ba1\u7b97\uff0c\u6ca1\u6709\u590d\u6742\u7684\u903b\u8f91\u548c\u5206\u652f\uff0c\u975e\u5e38GPU\u5e76\u884c\u8ba1\u7b97\u67b6\u6784</li> </ul>"},{"location":"jsjzc/gpu/#_8","title":"\u82af\u7247\u7626\u8eab","text":"<ul> <li>GPU\u5de5\u4f5c\u8fc7\u7a0b\u662f\u4e00\u4e2a\u6d41\u5f0f\u5904\u7406\u8fc7\u7a0b</li> <li>\u76f8\u6bd4CPU\u53bb\u6389\u590d\u6742\u7684\u4e71\u5e8f\u6267\u884c\uff0c\u6d41\u6c34\u7ebf\uff0c\u5206\u652f\u9884\u7b97\u4ee5\u53ca\u9ad8\u901f\u7f13\u5b58\u7b49\u529f\u80fd\u53ca\u90e8\u4ef6</li> <li>\u53ea\u7559\u4e0b\u53d6\u6307\u4ee4\uff0c\u6307\u4ee4\u8bd1\u7801\u548cALU\u4ee5\u53ca\u9700\u8981\u7684\u5bc4\u5b58\u5668\u548c\u7f13\u5b58 </li> </ul>"},{"location":"jsjzc/gpu/#simt","title":"\u591a\u6838\u5e76\u884c\u548cSIMT","text":"<ul> <li>\u4e00\u4e2aGPU\u91cc\u8fb9\u53ef\u4ee5\u585e\u5165\u591a\u4e2a\u5e76\u884c\u7684GPU\u7535\u8def </li> <li>SIMT\uff0c\u7c7b\u4f3cCPU\u7684SIMD\uff08\u4e00\u6b21\u6027\u53d6\u51fa\u591a\u4e2a\u6570\u636e\uff0c\u653e\u5230\u5bc4\u5b58\u5668\u91cc\uff0c\u7528\u4e00\u4e2a\u6307\u4ee4\u53bb\u8fd0\u884c\uff09\uff0c\u4f46\u662f\u4e00\u6b21\u53d6\u51fa\u591a\u4e2a\u6570\u636e\uff0c\u7136\u540e\u4ea4\u7ed9\u4e0d\u540c\u7684\u7ebf\u7a0b\u53bb\u5904\u7406</li> <li>\u53d6\u6307\u4ee4\u548c\u6307\u4ee4\u8bd1\u7801\u9636\u6bb5\uff0c\u53d6\u51fa\u7684\u6307\u4ee4\u53ef\u4ee5\u7ed9\u5230\u540e\u9762\u591a\u4e2a\u4e0d\u540c\u7684ALU\u5e76\u884c\u8fdb\u884c\u8fd0\u7b97 </li> </ul>"},{"location":"jsjzc/gpu/#gpu_2","title":"GPU\u91cc\u7684\u8d85\u7ebf\u7a0b","text":"<ul> <li>GPU\u91cc\u4e5f\u5b58\u5728\u6d41\u6c34\u7ebf\u505c\u987f\u95ee\u9898</li> <li>\u5f53\u6d41\u6c34\u7ebf\u9047\u5230\u505c\u987f\u65f6\uff0c\u5c31\u4f1a\u8c03\u5ea6\u4e00\u4e9b\u522b\u7684\u4efb\u52a1\u5230\u5f53\u524d\u7684ALU</li> <li>\u9700\u8981\u5bf9\u522b\u7684\u8c03\u5ea6\u8fc7\u6765\u7684\u4efb\u52a1\u63d0\u4f9b<code>\u6267\u884c\u4e0a\u4e0b\u6587</code>\uff0c\u6240\u4ee5\u4e00\u4e2aCore\u91cc\u8fb9\u7684\u6267\u884c\u4e0a\u4e0b\u6587\u8981\u6bd4ALU\u591a </li> </ul>"},{"location":"jsjzc/gshc/","title":"\u9ad8\u901f\u7f13\u5b58","text":""},{"location":"jsjzc/gshc/#_1","title":"\u9ad8\u901f\u7f13\u5b58","text":"<ul> <li>CPU Cache</li> <li>\u5f25\u8865CPU\u4e0e\u5185\u5b58\u7684\u901f\u5ea6\u5dee\u5f02</li> <li>\u5185\u5b58\u4e2d\u7684\u6307\u4ee4\uff0c\u6570\u636e\u4f1a\u88ab\u52a0\u8f7d\u5230L1-L3Cache\u4e2d\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u7531CPU\u8bbf\u95ee\u5185\u5b58\u53bb\u62ff</li> <li>\u7531\u7279\u5b9a\u7684SRAM\uff08\u9759\u6001\u968f\u673a\u5b58\u50a8\u5668\uff09\u7ec4\u6210\u7684\u7269\u7406\u82af\u7247</li> <li>\u73b0\u4ee3 CPU \u4e2d\u5927\u91cf\u7684\u7a7a\u95f4\u5df2\u7ecf\u88ab SRAM \u5360\u636e\uff0c\u56fe\u4e2d\u7528\u7ea2\u8272\u6846\u51fa\u7684\u90e8\u5206\u5c31\u662f CPU \u7684 L3 Cache \u82af\u7247 </li> </ul>"},{"location":"jsjzc/gshc/#cache-line","title":"Cache Line","text":"<ul> <li>\u7f13\u5b58\u5757</li> <li>CPU\u51b2\u5185\u5b58\u4e2d\u8bfb\u53d6\u6570\u636e\u662f\u4e00\u5757\u4e00\u5757\u8bfb\u7684\uff0c\u7136\u540e\u5b58\u8fdbCPU cache\u4e2d</li> </ul>"},{"location":"jsjzc/gshc/#cache","title":"Cache\u7684\u6570\u636e\u7ed3\u6784\u548c\u8bfb\u53d6\u8fc7\u7a0b","text":"<ul> <li>\u65e0\u8bba\u6570\u636e\u662f\u5426\u5728cache\u4e2d\uff0cCPU\u90fd\u4f1a\u5148\u8bbf\u95eecache</li> <li>\u53ea\u6709cache\u4e2d\u627e\u4e0d\u5230\u6570\u636e\u65f6\uff0c\u624d\u4f1a\u8bbf\u95ee\u5185\u5b58</li> </ul>"},{"location":"jsjzc/gshc/#cache_1","title":"Cache\u4e2d\u7f13\u5b58\u653e\u7f6e\u7b56\u7565","text":"<ul> <li>\u76f4\u63a5\u6620\u5c04Cache Direct Mapped Cache</li> <li>\u5168\u76f8\u8fdeCache Fully Associative Cache</li> <li>\u7ec4\u76f8\u8fdeCache  Set Associative Cache</li> </ul>"},{"location":"jsjzc/gshc/#cache_2","title":"\u76f4\u63a5\u6620\u5c04Cache","text":"<ul> <li>Direct Mapped Cache</li> <li>\u786e\u4fdd\u4efb\u4f55\u4e00\u4e2a\u5185\u5b58\u5757\u7684\u5730\u5740\uff0c\u59cb\u7ec8\u6620\u5c04\u5230\u4e00\u4e2a\u56fa\u5b9a\u7684CPU Cache\u5730\u5740</li> <li>\u8fd9\u4e2a\u6620\u5c04\u5173\u7cfb\uff0c\u901a\u5e38\u7528mod\uff0c\u6c42\u4f59\u64cd\u4f5c\u8ba1\u7b97</li> <li>\u4e00\u4e2a\u5185\u5b58\u7684\u8bbf\u95ee\u5730\u5740\uff0c\u6700\u7ec8\u5305\u62ec\u9ad8\u4f4d\u4ee3\u8868\u7684\u7ec4\u6807\u8bb0\u3001\u4f4e\u4f4d\u4ee3\u8868\u7684\u7d22\u5f15\uff0c\u4ee5\u53ca\u5728\u5bf9\u5e94\u7684 Data Block \u4e2d\u5b9a\u4f4d\u5bf9\u5e94\u5b57\u7684\u4f4d\u7f6e\u504f\u79fb\u91cf</li> </ul>"},{"location":"jsjzc/gshc/#_2","title":"\u4e3e\u4f8b","text":"<ul> <li>\u4e3b\u5185\u5b58\u88ab\u5206\u4e3a32\u5757\uff0c\u7136\u540ecache\u4e2d\u67098\u4e2a\u7f13\u5b58\u5757</li> <li>\u8bbf\u95ee\u7b2c21\u53f7\u5185\u5b58\u5757\uff0c\u5c31\u56de\u53bb\u67e5\u8be2<code>21mod8</code>\u4e5f\u5c31\u662f\u7b2c5\u5757\u7f13\u5b58\u5757\u7684\u4f4d\u7f6e </li> </ul>"},{"location":"jsjzc/gshc/#_3","title":"\u4f18\u5316","text":"<ul> <li>\u5b9e\u9645\u7f13\u5b58\u5757\u4f1a\u5206\u914d2\u7684N\u6b21\u65b9\u4e2a</li> <li>\u67e5\u8be2\u7f13\u5b58\u5757\u7684\u4f4d\u7f6e\u5c31\u662f\u5185\u5b58\u5757\u7684\u4f4eN\u4e3a\u5c31\u53ef\u4ee5 </li> </ul>"},{"location":"jsjzc/gshc/#_4","title":"\u786e\u5b9a\u7f13\u5b58\u5757\u7684\u5730\u5740\u6765\u81ea\u786e\u5b9a\u7684\u5185\u5b58\u5757","text":"<ul> <li>21\uff0c 13\uff0c 5 mod8\u4f59\u6570\u90fd\u662f5</li> <li>\u5728\u5bf9\u5e94\u7684\u7f13\u5b58\u5757\u4e2d\u5b58\u50a8\u4e00\u4e2a\u7ec4\u6807\u8bb0Tag</li> <li>\u7f13\u5b58\u5757\u672c\u8eab\u5b58\u50a8\u7684\u662f\u5185\u5b58\u5757\u7684\u4f4eN\u4f4d</li> <li>\u7ec4tag\u5b58\u7684\u5c31\u662f\u5185\u5b58\u5757\u5269\u4f59\u7684\u9ad8\u4f4d</li> </ul>"},{"location":"jsjzc/gshc/#_5","title":"\u7f13\u5b58\u5757\u4e2d\u7684\u6570\u636e\u662f\u4e0d\u662f\u6709\u6548","text":"<ul> <li>\u7f13\u5b58\u5757\u5b58\u7ec4\u6807\u8bb0\u8fd8\u6709\u5185\u5b58\u5757\u4e2d\u7684\u6570\u636e</li> <li>\u8fd8\u5b58\u4e86\u4e00\u4e2a\u6709\u6548\u4f4d valid bit</li> <li>\u7528\u6765\u6807\u8bb0\u5bf9\u5e94\u7684\u7f13\u5b58\u5757\u4e2d\u7684\u6570\u636e\u662f\u5426\u6709\u6548</li> <li>\u6709\u6548\u4f4d\u662f0\uff0cCPU\u4f1a\u5ffd\u7565Cache Line\u4e2d\u7684\u6570\u636e\uff0c\u76f4\u63a5\u8bbf\u95ee\u5185\u5b58\uff0c\u91cd\u65b0\u52a0\u8f7d\u7f13\u5b58\u6570\u636e</li> </ul>"},{"location":"jsjzc/gshc/#_6","title":"\u8bbf\u5b58\u504f\u79fb\u91cf","text":"<ul> <li>CPU \u5728\u8bfb\u53d6\u6570\u636e\u7684\u65f6\u5019\uff0c\u5e76\u4e0d\u662f\u8981\u8bfb\u53d6\u4e00\u6574\u4e2a Block\uff0c\u800c\u662f\u8bfb\u53d6\u4e00\u4e2a\u4ed6\u9700\u8981\u7684\u6570\u636e\u7247\u6bb5\u3002\u8fd9\u6837\u7684\u6570\u636e\uff0c\u6211\u4eec\u53eb\u4f5c CPU \u91cc\u7684\u4e00\u4e2a\u5b57\uff08Word\uff09</li> <li>\u5177\u4f53\u662f\u54ea\u4e2a\u5b57\uff0c\u5c31\u7528\u8fd9\u4e2a\u5b57\u5728\u6574\u4e2a Block \u91cc\u9762\u7684\u4f4d\u7f6e\u6765\u51b3\u5b9a\uff0c\u8fd9\u4e2a\u4f4d\u7f6e\u5c31\u662f\u504f\u79fb\u91cf </li> </ul>"},{"location":"jsjzc/gshc/#cpu","title":"CPU\u9ad8\u901f\u7f13\u5b58\u5c42\u7ea7\u7ed3\u6784","text":""},{"location":"jsjzc/gshc/#_7","title":"\u9ad8\u901f\u7f13\u5b58\u5199\u5165\u7b56\u7565","text":"<ul> <li>\u5199\u76f4\u8fbe</li> <li>\u5199\u56de</li> </ul>"},{"location":"jsjzc/gshc/#_8","title":"\u5199\u76f4\u8fbe","text":"<ul> <li>\u5199\u76f4\u8fbe Write-Through</li> <li>\u6bcf\u6b21\u6570\u636e\u5199\u5165\u90fd\u8981\u5199\u5165\u5230\u4e3b\u5185\u5b58\u91cc\u9762</li> <li>\u5199\u6570\u636e\u65f6\u5224\u65adcache\u91cc\u6709\u6ca1\u6709\u547d\u4e2d\uff0c\u6709\u7684\u8bdd\u66f4\u65b0cache\u4e2d\u7684\u6570\u636e\u540e\u7ee7\u7eed\u5199\u5165\u5230\u4e3b\u5185\u5b58</li> <li>\u6bcf\u6b21\u90fd\u8981\u5199\u4e3b\u5185\u5b58\uff0c\u8fd9\u4e2a\u5199\u7b56\u7565\u5f88\u6162 </li> </ul>"},{"location":"jsjzc/gshc/#_9","title":"\u5199\u56de","text":"<ul> <li>Write-Back</li> <li>\u6bcf\u6b21\u53ea\u5199CacheBlock</li> <li>\u5f53CacheBlock\u8981\u88ab\u66ff\u6362\u65f6\u624d\u4f1a\u5199\u56de\u5230\u4e3b\u5185\u5b58</li> <li>\u6570\u636e\u5199\u5165\u5230CacheBlock\u65f6\uff0c\u540c\u65f6\u4f1a\u6807\u8bb0Block\u4e3a\u810f\u72b6\u6001</li> <li>\u4e0b\u6b21\u518d\u5199\u5165\u65f6\uff0c\u4f1a\u88ab\u5237\u5230\u4e3b\u5185\u5b58</li> <li>\u52a0\u8f7d\u5185\u5b58\u5230Block\u65f6\uff0c\u4e5f\u4f1a\u52a0\u4e00\u4e2a\u540c\u6b65\u810f\u6570\u636e\u5230\u4e3b\u5185\u5b58\u7684\u8fc7\u7a0b </li> </ul>"},{"location":"jsjzc/gshc/#_10","title":"\u7f13\u5b58\u4e00\u81f4\u6027\u95ee\u9898","text":"<ul> <li>CPU\u6838\u5fc3\u8fdb\u884c\u6570\u636e\u66f4\u6539\u540e\uff0c\u5176\u4ed6\u6838\u5fc3\u4e0e\u66f4\u6539\u7684\u6838\u5fc3\u7684cache\u4e2d\u6570\u636e\u662f\u4e0d\u4e00\u81f4\u7684 </li> </ul>"},{"location":"jsjzc/gshc/#_11","title":"\u7f13\u5b58\u4e0d\u4e00\u81f4\u89e3\u51b3","text":"<ul> <li>\u5199\u4f20\u64ad Write Propagation\uff1a\u4e00\u4e2aCPU\u6838\u5fc3\u91cc\u7684cache\u66f4\u65b0\uff0c\u5fc5\u987b\u80fd\u591f\u4f20\u64ad\u5230\u5176\u4ed6\u7684\u5bf9\u5e94\u8282\u70b9\u7684cache line\u91cc</li> <li>\u4e8b\u52a1\u7684\u4e32\u884c\u5316 Transaction Serialization\uff1a\u4e00\u4e2aCPU\u6838\u5fc3\u91cc\u9762\u7684\u8bfb\u53d6\u548c\u5199\u5165\uff0c\u5728\u5176\u4ed6\u8282\u70b9\u770b\u8d77\u6765\u662f\u987a\u5e8f\u662f\u4e00\u6837\u7684\uff0c\u5982\u679c\u4e24\u4e2aCPU\u6838\u5fc3\u7684cache\u4e2d\u6709\u76f8\u540c\u7684\u6570\u636e\u65f6\uff0c\u66f4\u65b0\u6570\u636e\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u52a0\u9501\u673a\u5236\uff0c\u53ea\u6709\u62ff\u5230\u4e86\u5bf9\u5e94\u7684cache block\u7684\u6838\u5fc3\u624d\u80fd\u66f4\u65b0\u6570\u636e <p>\u4e24\u4e2aCPU\u6838\u5fc3\u5bf9\u6570\u636e\u7684\u66f4\u65b0\uff0c\u4f20\u64ad\u5230\u5176\u4ed6CPU\u6838\u5fc3\u7684\u987a\u5e8f\u5e94\u8be5\u662f\u4e00\u6837\u7684\uff0c\u5148\u540e\u987a\u5e8f\u8981\u4e00\u81f4</p> </li> </ul> <p></p>"},{"location":"jsjzc/gshc/#_12","title":"\u603b\u7ebf\u55c5\u63a2\u673a\u5236","text":"<ul> <li>\u603b\u7ebf\u55c5\u63a2\u673a\u5236\u89e3\u51b3\u591a\u4e2aCPU\u6838\u5fc3\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u64ad\u673a\u5236</li> <li>\u672c\u8d28\u4e0a\u5c31\u662f\u628a\u6240\u6709\u8bfb\u5199\u8bf7\u6c42\u90fd\u901a\u8fc7\u603b\u7ebf\u5e7f\u64ad\u7ed9\u6240\u6709CPU\u6838\u5fc3\uff0c\u7136\u540e\u5404\u4e2a\u6838\u5fc3\u63a5\u6536\u4fe1\u606f\uff0c\u6839\u636e\u672c\u5730\u7f13\u5b58\u7684\u60c5\u51b5\u8fdb\u884c\u6570\u636e\u5904\u7406</li> </ul>"},{"location":"jsjzc/gshc/#mesi","title":"MESI\u534f\u8bae","text":"<ul> <li>\u5199\u5931\u6548\u534f\u8bae\uff08Write Invalidate\uff09\uff0c\u53ea\u6709\u4e00\u4e2a\u6838\u5fc3\u8d1f\u8d23\u5199\u5165\u6570\u636e\uff0c\u5176\u4ed6\u6838\u5fc3\u540c\u6b65\u8bfb\u53d6\u5230\u8fd9\u4e2a\u5199\u5165</li> <li>CPU\u6838\u5fc3\u5199\u5165Cache\u4e4b\u540e\uff0c\u4f1a\u5e7f\u64ad\u4e00\u4e2a\u5931\u6548\u8bf7\u6c42\u544a\u8bc9\u5176\u4ed6CPU\u6838\u5fc3\uff0c\u5176\u4ed6CPU\u6838\u5fc3\uff0c\u6839\u636e\u5185\u5bb9\u6807\u8bb0\u81ea\u5df1\u672c\u5730\u7684Cache\u4e2d\u7684\u7f13\u5b58\u6570\u636e\u4e3a\u5931\u6548\u72b6\u6001</li> <li>\u5199\u5e7f\u64ad\uff08Write Broadcast\uff09\u7684\u534f\u8bae\u3002\u4e00\u4e2a\u5199\u5165\u8bf7\u6c42\u5e7f\u64ad\u5230\u6240\u6709\u7684 CPU \u6838\u5fc3\uff0c\u540c\u65f6\u66f4\u65b0\u5404\u4e2a\u6838\u5fc3\u91cc\u7684 Cache</li> <li>\u5199\u5e7f\u64ad\u5728\u5b9e\u73b0\u4e0a\u5f88\u7b80\u5355\uff0c\u4f46\u662f\u5199\u5e7f\u64ad\u9700\u8981\u5360\u7528\u66f4\u591a\u7684\u603b\u7ebf\u5e26\u5bbd\u3002\u5199\u5931\u6548\u53ea\u9700\u8981\u544a\u8bc9\u5176\u4ed6\u7684 CPU \u6838\u5fc3\uff0c\u54ea\u4e00\u4e2a\u5185\u5b58\u5730\u5740\u7684\u7f13\u5b58\u5931\u6548\u4e86\uff0c\u4f46\u662f\u5199\u5e7f\u64ad\u8fd8\u9700\u8981\u628a\u5bf9\u5e94\u7684\u6570\u636e\u4f20\u8f93\u7ed9\u5176\u4ed6 CPU \u6838\u5fc3 </li> </ul>"},{"location":"jsjzc/gshc/#mesi_1","title":"MESI \u5185\u5bb9","text":"<ul> <li>M\uff1a\u4ee3\u8868\u5df2\u4fee\u6539 Modified\uff0ccache line\u4e2d\u7684\u810f\u7684block\uff0c\u91cc\u8fb9\u7684\u6570\u636e\u66f4\u65b0\u4e86\uff0c\u4f46\u662f\u6ca1\u6709\u5199\u56de\u5230\u4e3b\u5185\u5b58</li> <li>E\uff1a\u4ee3\u8868\u72ec\u5360 Exclusive\uff0ccache line\u53ea\u52a0\u8f7d\u4e86\u5f53\u524dCPU\u6838\u6240\u62e5\u6709\u7684Cache\u91cc\uff0c\u5176\u4ed6\u7684CPU\u6838\u5e76\u6ca1\u6709\u52a0\u8f7d\u5bf9\u5e94\u7684\u6570\u636e\u5230\u81ea\u5df1\u7684Cache\u91cc\uff0c\u8fd9\u4e2a\u65f6\u5019\uff0c\u66f4\u65b0cache block\u5199\u5165\u6570\u636e\uff0c\u4e0d\u9700\u8981\u66f4\u65b0\u5230\u5176\u4ed6CPU\u6838\u5fc3</li> <li>S\uff1a\u4ee3\u8868\u5171\u4eab Shared\uff0c\u72ec\u5360\u72b6\u6001\u4e0b\uff0c\u6838\u5fc3\u63a5\u6536\u5230\u4e3b\u7ebf\u7684\u5176\u4ed6CPU\u4e5f\u8bfb\u53d6\u6570\u636e\u5230\u81ea\u5df1\u7684Cache\u4e2d\u7684\u8bf7\u6c42\uff0c\u5c31\u4f1a\u53d8\u6210\u5171\u4eab\u72b6\u6001\u3002\u5f53\u8981\u66f4\u65b0cache\u4e2d\u7684\u6570\u636e\u65f6\uff0c\u9700\u8981\u83b7\u53d6\u5f53\u524d\u5bf9\u5e94\u7684cache block\u6570\u636e\u7684\u6240\u6709\u6743\uff0c\u4e00\u822c\u53d1\u9001\u4e00\u4e2a\u5e7f\u64ad\u64cd\u4f5c<code>RFO\uff08Request For Ownership\uff09</code>\uff0c\u901a\u77e5\u5176\u4ed6CPU\u6838\u5fc3\u5c06\u5bf9\u5e94\u7684Cache\u6807\u8bb0\u4e3a\u5931\u6548\u72b6\u6001</li> <li>I\uff1a\u4ee3\u8868\u5df2\u5931\u6548 Invalidated\uff0ccache line\u4e2d\u7684block\uff0c\u6570\u636e\u5df2\u7ecf\u5931\u6548\u4e86\uff0c\u6570\u636e\u4e0d\u53ef\u4fe1 </li> </ul>"},{"location":"jsjzc/jbx/","title":"\u5c40\u90e8\u6027\u539f\u7406","text":""},{"location":"jsjzc/jbx/#_1","title":"\u5c40\u90e8\u6027\u539f\u7406","text":"<ul> <li>\u65f6\u95f4\u5c40\u90e8\u6027</li> <li>\u7a7a\u95f4\u5c40\u90e8\u6027</li> </ul>"},{"location":"jsjzc/jbx/#_2","title":"\u65f6\u95f4\u5c40\u90e8\u6027","text":"<ul> <li>\u4e00\u4e2a\u6570\u636e\u88ab\u8bbf\u95ee\u4e86\uff0c\u90a3\u4e48\u5b83\u5728\u77ed\u65f6\u95f4\u5185\u8fd8\u4f1a\u88ab\u518d\u6b21\u8bbf\u95ee </li> </ul>"},{"location":"jsjzc/jbx/#_3","title":"\u7a7a\u95f4\u5c40\u90e8\u6027","text":"<ul> <li>\u4e00\u4e2a\u6570\u636e\u88ab\u8bbf\u95ee\u4e86\uff0c\u90a3\u4e48\u548c\u5b83\u76f8\u90bb\u7684\u6570\u636e\u4e5f\u5f88\u5feb\u4f1a\u88ab\u8bbf\u95ee </li> </ul>"},{"location":"jsjzc/jicunqi/","title":"\u5bc4\u5b58\u5668","text":""},{"location":"jsjzc/jicunqi/#pc","title":"PC\u5bc4\u5b58\u5668","text":"<ul> <li>Porgram Counter Register \u6307\u4ee4\u5730\u5740\u5bc4\u5b58\u5668</li> <li>\u7528\u6765\u5b58\u653e\u4e0b\u4e00\u6761\u9700\u8981\u6267\u884c\u7684\u8ba1\u7b97\u673a\u6307\u4ee4\u7684\u5185\u5b58\u5730\u5740</li> </ul>"},{"location":"jsjzc/jicunqi/#_1","title":"\u6307\u4ee4\u5bc4\u5b58\u5668","text":"<ul> <li>Instruction Register</li> <li>\u5b58\u653e\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u6307\u4ee4</li> </ul>"},{"location":"jsjzc/jicunqi/#_2","title":"\u6761\u4ef6\u7801\u5bc4\u5b58\u5668","text":"<ul> <li>Status Register</li> <li>\u91cc\u8fb9\u7684\u4e00\u4e2a\u4e00\u4e2a\u6807\u8bb0\u4e3a\uff0c\u5b58\u653eCPU\u8fdb\u884c\u7b97\u672f\u6216\u8005\u903b\u8f91\u8ba1\u7b97\u7684\u7ed3\u679c</li> </ul>"},{"location":"jsjzc/jicunqi/#_3","title":"\u6574\u6570\u5bc4\u5b58\u5668","text":""},{"location":"jsjzc/jicunqi/#_4","title":"\u6d6e\u70b9\u6570\u5bc4\u5b58\u5668","text":""},{"location":"jsjzc/jicunqi/#_5","title":"\u5411\u91cf\u5bc4\u5b58\u5668","text":""},{"location":"jsjzc/jicunqi/#_6","title":"\u5730\u5740\u5bc4\u5b58\u5668","text":""},{"location":"jsjzc/jicunqi/#_7","title":"\u901a\u7528\u5bc4\u5b58\u5668","text":"<p>\u4e00\u4e2a\u7a0b\u5e8f\u7684\u4e00\u6761\u6761\u6307\u4ee4\uff0c\u5728\u5185\u5b58\u91cc\u8fb9\u662f\u8fde\u7eed\u4fdd\u5b58\u7684\uff0c\u4e5f\u4f1a\u4e00\u6761\u6761\u987a\u5e8f\u52a0\u8f7d</p> <p>\u8df3\u8f6c\u6307\u4ee4\uff0c\u4f1a\u4fee\u6539PC\u5bc4\u5b58\u5668\u91cc\u8fb9\u7684\u5730\u5740\u503c\uff0c\u8fd9\u6837\u4e0b\u4e00\u6761\u8981\u6267\u884c\u7684\u6307\u4ee4\u5c31\u4e0d\u662f\u4ece\u5185\u5b58\u91cc\u8fb9\u987a\u5e8f\u52a0\u8f7d\u7684\u4e86</p>"},{"location":"jsjzc/lsx/","title":"\u6d41\u6c34\u7ebf","text":""},{"location":"jsjzc/lsx/#_1","title":"\u5355\u6307\u4ee4\u5468\u671f\u5904\u7406\u5668","text":"<p>\u4e00\u6761 CPU \u6307\u4ee4\u7684\u6267\u884c\uff0c\u662f\u7531\u201c\u53d6\u5f97\u6307\u4ee4\uff08Fetch\uff09- \u6307\u4ee4\u8bd1\u7801\uff08Decode\uff09- \u6267\u884c\u6307\u4ee4\uff08Execute\uff09 \u201d\u8fd9\u6837\u4e09\u4e2a\u6b65\u9aa4\u7ec4\u6210\u7684</p> <p>\u8fd9\u4e2a\u6267\u884c\u8fc7\u7a0b\uff0c\u81f3\u5c11\u9700\u8981\u82b1\u8d39\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u3002\u56e0\u4e3a\u5728\u53d6\u6307\u4ee4\u7684\u65f6\u5019\uff0c\u4eec\u9700\u8981\u901a\u8fc7\u65f6\u949f\u5468\u671f\u7684\u4fe1\u53f7\uff0c\u6765\u51b3\u5b9a\u8ba1\u6570\u5668\u7684\u81ea\u589e</p> <ul> <li>\u5728\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5185\uff0c\u5904\u7406\u5668\u6b63\u597d\u80fd\u5904\u7406\u4e00\u6761\u6307\u4ee4</li> <li>\u6bcf\u4e2a\u6307\u4ee4\u7684\u64cd\u4f5c\u4e0d\u4e00\u6837\uff0c\u51b3\u5b9a\u4e86\u6267\u884c\u65f6\u957f\u4e5f\u4e0d\u4e00\u6837</li> <li>\u4e8e\u662f\u5355\u6307\u4ee4\u5468\u671f\u5904\u7406\u5668\u7684\u65f6\u949f\u5468\u671f\u5c31\u662f\u6700\u957f\u7684\u6307\u4ee4\u8fd0\u884c\u6240\u9700\u8981\u7684\u65f6\u95f4</li> <li>\u5feb\u901f\u6267\u884c\u5b8c\u6210\u7684\u6307\u4ee4\uff0c\u9700\u8981\u7b49\u5f85\u6ee1\u4e00\u4e2a\u65f6\u949f\u5468\u671f\uff0c\u624d\u80fd\u6267\u884c\u4e0b\u4e00\u6761\u6307\u4ee4 </li> </ul>"},{"location":"jsjzc/lsx/#-","title":"\u6307\u4ee4\u6d41\u6c34\u94b1-\u63d0\u9ad8\u6267\u884c\u901f\u5ea6","text":"<ul> <li>\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5185\uff0c\u5b8c\u6210\u591a\u6761\u6307\u4ee4\u7684\u4e0d\u540c\u9636\u6bb5\uff0c\u63d0\u9ad8cpu\u541e\u5410\u7387\uff0c\u95f4\u63a5\u7684\u4e5f\u53ef\u4ee5\u63d0\u9ad8CPU\u7684\u65f6\u949f\u9891\u7387</li> <li>\u4e0d\u9700\u8981\u786e\u4fdd\u6700\u590d\u6742\u7684\u90a3\u6761\u6307\u4ee4\u5728\u65f6\u949f\u5468\u671f\u91cc\u9762\u6267\u884c\u5b8c\u6210\uff0c\u800c\u53ea\u8981\u4fdd\u969c\u4e00\u4e2a\u6700\u590d\u6742\u7684\u6d41\u6c34\u7ebf\u7ea7\u7684\u64cd\u4f5c\uff0c\u5728\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5185\u5b8c\u6210\u5c31\u53ef\u4ee5\u4e86</li> <li>\u4e09\u7ea7\u6d41\u6c34\u7ebf\uff1a\u6307\u4ee4\u62c6\u5206\u6210\u201c\u53d6\u6307\u4ee4 - \u6307\u4ee4\u8bd1\u7801 - \u6267\u884c\u6307\u4ee4\u201d\u8fd9\u6837\u4e09\u4e2a\u90e8\u5206</li> <li>\u4e94\u7ea7\u6d41\u6c34\u7ebf\uff1a\u628a\u201c\u6267\u884c\u6307\u4ee4\u201d\u62c6\u5206\u6210\u201cALU \u8ba1\u7b97\uff08\u6307\u4ee4\u6267\u884c\uff09- \u5185\u5b58\u8bbf\u95ee - \u6570\u636e\u5199\u56de\u201d</li> <li>\u5982\u679c\u67d0\u4e00\u4e2a\u64cd\u4f5c\u6b65\u9aa4\u7684\u65f6\u95f4\u592a\u957f\uff0c\u5c31\u53ef\u4ee5\u8003\u8651\u628a\u8fd9\u4e2a\u6b65\u9aa4\uff0c\u62c6\u5206\u6210\u66f4\u591a\u7684\u6b65\u9aa4\uff0c\u8ba9\u6240\u6709\u6b65\u9aa4\u9700\u8981\u6267\u884c\u7684\u65f6\u95f4\u5c3d\u91cf\u90fd\u5dee\u4e0d\u591a\u957f</li> <li>\u73b0\u4ee3\u7684 ARM \u6216\u8005 Intel \u7684 CPU\uff0c\u6d41\u6c34\u7ebf\u7ea7\u6570\u90fd\u5df2\u7ecf\u5230\u4e86 14 \u7ea7  </li> </ul>"},{"location":"jsjzc/lsx/#_2","title":"\u6d41\u6c34\u7ebf\u7ea7\u6570\u589e\u591a\u5e26\u6765\u7684\u95ee\u9898","text":"<ul> <li>\u6bcf\u4e00\u7ea7\u6d41\u6c34\u7ebf\u5bf9\u5e94\u7684\u8f93\u51fa\uff0c\u90fd\u8981\u653e\u5230\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\uff08Pipeline Register\uff09\u91cc\u9762</li> <li>\u5728\u4e0b\u4e00\u4e2a\u65f6\u949f\u5468\u671f\uff0c\u4ea4\u7ed9\u4e0b\u4e00\u4e2a\u6d41\u6c34\u7ebf\u7ea7\u53bb\u5904\u7406\u3002\u6240\u4ee5\uff0c\u6bcf\u589e\u52a0\u4e00\u7ea7\u7684\u6d41\u6c34\u7ebf\uff0c\u5c31\u8981\u591a\u4e00\u7ea7\u5199\u5165\u5230\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u7684\u64cd\u4f5c</li> <li>\u7ea7\u6570\u53d8\u591a\u540e\uff0c\u5199\u5165\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u7684\u65f6\u95f4\u5360\u6bd4\u4f1a\u8d8a\u6765\u8d8a\u9ad8\uff0c\u63d0\u5347\u6027\u80fd\u6027\u4ef7\u6bd4\u4e0d\u9ad8</li> <li>\u6307\u4ee4\u4f9d\u8d56\u95ee\u9898\u5e7f\u6cdb\u5b58\u5728 </li> </ul>"},{"location":"jsjzc/lsx/#_3","title":"\u6d41\u6c34\u7ebf\u4e09\u5927\u5192\u9669","text":"<ul> <li>\u7ed3\u6784\u5192\u9669 Structural Hazard</li> <li>\u6570\u636e\u5192\u9669 Data Hazard</li> <li>\u63a7\u5236\u5192\u9669 Control Hazard</li> </ul>"},{"location":"jsjzc/lsx/#_4","title":"\u7ed3\u6784\u5192\u9669","text":"<ul> <li>\u786c\u4ef6\u7535\u8def\u5c42\u9762\u95ee\u9898</li> <li>\u8bbf\u95ee\u5185\u5b58\u548c\u53d6\u6307\u4ee4\u90fd\u9700\u8981\u8fdb\u884c\u5185\u5b58\u6570\u636e\u7684\u8bfb\u53d6\uff0c\u4f46\u662f\u53ea\u6709\u4e00\u4e2a\u5730\u5740\u8bd1\u7801\u5668\uff0c\u505a\u4e3a\u8f93\u5165\uff0c\u4e8e\u662f\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5185\uff0c\u53ea\u80fd\u8fdb\u884c\u4e00\u4e2a\u5185\u5b58\u6570\u636e\u64cd\u4f5c</li> </ul> <p>\u5bf9\u4e8e\u8bbf\u95ee\u5185\u5b58\u6570\u636e\u548c\u53d6\u6307\u4ee4\u7684\u51b2\u7a81\uff0c\u4e00\u4e2a\u76f4\u89c2\u7684\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u628a\u6211\u4eec\u7684\u5185\u5b58\u5206\u6210\u4e24\u90e8\u5206\uff0c\u8ba9\u5b83\u4eec\u5404\u6709\u5404\u7684\u5730\u5740\u8bd1\u7801\u5668\u3002\u8fd9\u4e24\u90e8\u5206\u5206\u522b\u662f\u5b58\u653e\u6307\u4ee4\u7684\u7a0b\u5e8f\u5185\u5b58\u548c\u5b58\u653e\u6570\u636e\u7684\u6570\u636e\u5185\u5b58\u3002\u8fd9\u79cd\u628a\u5185\u5b58\u62c6\u6210\u4e24\u90e8\u5206\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u5728\u8ba1\u7b97\u673a\u4f53\u7cfb\u7ed3\u6784\u91cc\u53eb\u4f5c\u54c8\u4f5b\u67b6\u6784\uff08Harvard Architecture\uff09</p> <p></p> <ul> <li>\u73b0\u4ee3CPU\u6df7\u5408\u67b6\u6784</li> <li>\u501f\u9274\u4e86\u54c8\u4f5b\u7ed3\u6784\u7684\u601d\u8def\uff0c\u73b0\u4ee3\u7684 CPU \u867d\u7136\u6ca1\u6709\u5728\u5185\u5b58\u5c42\u9762\u8fdb\u884c\u5bf9\u5e94\u7684\u62c6\u5206\uff0c\u5374\u5728 CPU \u5185\u90e8\u7684\u9ad8\u901f\u7f13\u5b58\u90e8\u5206\u8fdb\u884c\u4e86\u533a\u5206\uff0c\u628a\u9ad8\u901f\u7f13\u5b58\u5206\u6210\u4e86\u6307\u4ee4\u7f13\u5b58\uff08Instruction Cache\uff09\u548c\u6570\u636e\u7f13\u5b58\uff08Data Cache\uff09\u4e24\u90e8\u5206 </li> </ul>"},{"location":"jsjzc/lsx/#_5","title":"\u6570\u636e\u5192\u9669","text":"<ul> <li>\u540c\u65f6\u5728\u6267\u884c\u7684\u591a\u4e2a\u6307\u4ee4\u4e4b\u95f4\uff0c\u6709\u6570\u636e\u4f9d\u8d56\u7684\u60c5\u51b5</li> <li>\u5148\u5199\u540e\u8bfb Read After Write\uff0cRAW \u6570\u636e\u4f9d\u8d56\uff0c\u4e5f\u5c31\u662f Data Dependency</li> <li>\u5148\u8bfb\u540e\u5199 Write After Read\uff0cWAR \u53cd\u4f9d\u8d56\uff0c\u4e5f\u5c31\u662f Anti-Dependency</li> <li>\u5199\u540e\u518d\u5199 Write After Write\uff0cWAW \u8f93\u51fa\u4f9d\u8d56\uff0c\u4e5f\u5c31\u662f Output Dependency</li> </ul>"},{"location":"jsjzc/lsx/#_6","title":"\u6d41\u6c34\u7ebf\u505c\u987f","text":"<ul> <li>\u89e3\u51b3\u6570\u636e\u5192\u9669</li> <li>\u4e5f\u53eb\u6d41\u6c34\u7ebf\u5192\u6ce1</li> <li>\u8ba9\u6574\u4e2a\u6d41\u6c34\u7ebf\u505c\u987f\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u5468\u671f</li> <li>\u5b9e\u9645cpu\u662f\u5728\u6267\u884c\u540e\u9762\u7684\u64cd\u4f5c\u6b65\u9aa4\u524d\u9762\uff0c\u63d2\u5165\u4e00\u4e2a NOP \u64cd\u4f5c\uff0c\u4e5f\u5c31\u662f\u6267\u884c\u4e00\u4e2a\u5176\u5b9e\u4ec0\u4e48\u90fd\u4e0d\u5e72\u7684\u64cd\u4f5c </li> </ul>"},{"location":"jsjzc/lsx/#nop","title":"NOP\u6d6a\u8d39\u65f6\u949f\u5468\u671f\u793a\u610f","text":"<p><pre><code>add $t0, $s2,$s1\nadd $s2, $s1,$t0\n</code></pre> - \u7b2c\u4e00\u6761\u6307\u4ee4\uff0c\u628a s1 \u548c s2 \u5bc4\u5b58\u5668\u91cc\u9762\u7684\u6570\u636e\u76f8\u52a0\uff0c\u5b58\u5165\u5230 t0 \u8fd9\u4e2a\u5bc4\u5b58\u5668\u91cc\u9762 - \u7b2c\u4e8c\u6761\u6307\u4ee4\uff0c\u628a s1 \u548c t0 \u5bc4\u5b58\u5668\u91cc\u9762\u7684\u6570\u636e\u76f8\u52a0\uff0c\u5b58\u5165\u5230 s2 \u8fd9\u4e2a\u5bc4\u5b58\u5668\u91cc\u9762 - \u4e24\u4e2a\u6307\u4ee4\u662f\u6709\u539f\u6765\u5173\u7cfb\u7684\uff0c\u7b2c\u4e8c\u6761\u6307\u4ee4\u4f9d\u8d56\u7b2c\u4e00\u6761\u6307\u4ee4\u5c06\u7ed3\u679c\u5199\u56de\u5230\u5bc4\u5b58\u5668t0\uff0c\u4e8e\u662f\u901a\u8fc7\u63d2\u5165nop\uff0c\u5bfc\u81f4\u6d41\u6c34\u7ebf\u505c\u987f\uff0c\u6765\u89e3\u51b3\u6570\u636e\u5192\u9669 </p>"},{"location":"jsjzc/lsx/#_7","title":"\u64cd\u4f5c\u6570\u524d\u63a8\u6216\u8005\u64cd\u4f5c\u6570\u65c1\u8def","text":"<ul> <li>\u901a\u8fc7 NOP \u64cd\u4f5c\u8fdb\u884c\u5bf9\u9f50\uff0c\u5728\u6d41\u6c34\u7ebf\u91cc\uff0c\u5c31\u4e0d\u4f1a\u9047\u5230\u8d44\u6e90\u7ade\u4e89\u4ea7\u751f\u7684\u7ed3\u6784\u5192\u9669\u95ee\u9898\u4e86\uff0c\u9664\u4e86\u53ef\u4ee5\u89e3\u51b3\u7ed3\u6784\u5192\u9669\u4e4b\u5916\uff0c\u8fd9\u4e2a NOP \u64cd\u4f5c\uff0c\u4e5f\u5c31\u662f\u6d41\u6c34\u7ebf\u505c\u987f\u63d2\u5165\u7684\u5bf9\u5e94\u64cd\u4f5c</li> <li>\u63d2\u5165\u8fc7\u591a\u7684 NOP \u64cd\u4f5c\uff0c\u610f\u5473\u7740 CPU \u603b\u662f\u5728\u7a7a\u8f6c</li> <li>\u5b8c\u5168\u53ef\u4ee5\u5728\u7b2c\u4e00\u6761\u6307\u4ee4\u7684\u6267\u884c\u9636\u6bb5\u5b8c\u6210\u4e4b\u540e\uff0c\u76f4\u63a5\u5c06\u7ed3\u679c\u6570\u636e\u4f20\u8f93\u7ed9\u5230\u4e0b\u4e00\u6761\u6307\u4ee4\u7684 ALU</li> <li>\u4e0b\u4e00\u6761\u6307\u4ee4\u4e0d\u9700\u8981\u518d\u63d2\u5165\u4e24\u4e2a NOP \u9636\u6bb5\uff0c\u5c31\u53ef\u4ee5\u7ee7\u7eed\u6b63\u5e38\u8d70\u5230\u6267\u884c\u9636\u6bb5</li> <li>\u5728\u786c\u4ef6\u5c42\u9762\u5236\u9020\u4e00\u6761\u65c1\u8def\uff0c\u8ba9\u4e00\u6761\u6307\u4ee4\u7684\u8ba1\u7b97\u7ed3\u679c\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f20\u8f93\u7ed9\u4e0b\u4e00\u6761\u6307\u4ee4 </li> </ul>"},{"location":"jsjzc/lsx/#_8","title":"\u6307\u4ee4\u4e71\u5e8f\u6267\u884c","text":"<ul> <li>\u4e0d\u4f9d\u8d56\u524d\u9762\u6307\u4ee4\u6267\u884c\u7ed3\u679c\u7684\u6307\u4ee4\uff0c\u53ef\u4ee5\u5728\u6d41\u6c34\u7ebf\u4e2d\u4e0e\u5176\u4ed6\u6307\u4ee4\u5e76\u884c\u8fd0\u884c</li> <li>\u51cf\u5c11\u4e0d\u4f9d\u8d56\u6307\u4ee4\u7b49\u5f85\u65f6\u95f4 <pre><code>a = b + c\nd = a * e\nx = y * z\n</code></pre> </li> </ul>"},{"location":"jsjzc/lsx/#cpu","title":"\u4e71\u5e8f\u6267\u884cCPU\u6d41\u6c34\u7ebf","text":"<ul> <li>\u53d6\u503c\u548c\u8bd1\u7801\u8fd8\u662f\u987a\u5e8f\u6267\u884c\u7684</li> <li>\u6bcf\u4e2a\u8bd1\u7801\u540e\u7684\u6307\u4ee4\u4f1a\u6392\u961f\u7b49\u5f85\u4f9d\u8d56\u6570\u636e\u7684\u8f93\u5165</li> <li>\u7b26\u5408\u6267\u884c\u6761\u4ef6\u7684\u6307\u4ee4\u4f1a\u5230\u529f\u80fd\u5355\u5143\u5c31\u662fALU\u4e2d\u8fdb\u884c\u6307\u4ee4\u6267\u884c</li> <li>\u6267\u884c\u5b8c\u6210\u540e\u4f1a\u5230\u91cd\u62cd\u7f13\u51b2\u533a\u8fdb\u884c\u6307\u4ee4\u7ed3\u679c\u987a\u5e8f\u91cd\u6392 </li> </ul>"},{"location":"jsjzc/lsx/#_9","title":"\u5206\u652f\u9884\u6d4b","text":""},{"location":"jsjzc/lsx/#_10","title":"\u9759\u6001\u5206\u652f\u9884\u6d4b","text":"<ul> <li>\u6700\u7b80\u5355\u7684\u5206\u652f\u9884\u6d4b\u6280\u672f\uff0c\u53eb\u4f5c\u201c\u5047\u88c5\u5206\u652f\u4e0d\u53d1\u751f\u201d</li> <li>\u987e\u540d\u601d\u4e49\uff0c\u81ea\u7136\u5c31\u662f\u4ecd\u7136\u6309\u7167\u987a\u5e8f\uff0c\u628a\u6307\u4ee4\u5f80\u4e0b\u6267\u884c\u3002\u5176\u5b9e\u5c31\u662f CPU \u9884\u6d4b\uff0c\u6761\u4ef6\u8df3\u8f6c\u4e00\u5b9a\u4e0d\u53d1\u751f\u3002\u8fd9\u6837\u7684\u9884\u6d4b\u65b9\u6cd5\uff0c\u5176\u5b9e\u4e5f\u662f\u4e00\u79cd\u9759\u6001\u9884\u6d4b\u6280\u672f</li> <li>\u5982\u679c\u5206\u652f\u9884\u6d4b\u5931\u8d25\u4e86\uff0c\u90a3\u5c31\u628a\u540e\u9762\u5df2\u7ecf\u53d6\u51fa\u6307\u4ee4\u5df2\u7ecf\u6267\u884c\u7684\u90e8\u5206\uff0c\u7ed9\u4e22\u5f03\u6389\u3002\u8fd9\u4e2a\u4e22\u5f03\u7684\u64cd\u4f5c\uff0c\u5728\u6d41\u6c34\u7ebf\u91cc\u9762\uff0c\u53eb\u4f5c Zap \u6216\u8005 Flush</li> <li>CPU \u4e0d\u4ec5\u8981\u6267\u884c\u540e\u9762\u7684\u6307\u4ee4\uff0c\u5bf9\u4e8e\u8fd9\u4e9b\u5df2\u7ecf\u5728\u6d41\u6c34\u7ebf\u91cc\u9762\u6267\u884c\u5230\u4e00\u534a\u7684\u6307\u4ee4\uff0c\u8fd8\u9700\u8981\u505a\u5bf9\u5e94\u7684\u6e05\u9664\u64cd\u4f5c\u3002\u6bd4\u5982\uff0c\u6e05\u7a7a\u5df2\u7ecf\u4f7f\u7528\u7684\u5bc4\u5b58\u5668\u91cc\u9762\u7684\u6570\u636e\u7b49 </li> </ul>"},{"location":"jsjzc/lsx/#_11","title":"\u52a8\u6001\u5206\u652f\u9884\u6d4b","text":""},{"location":"jsjzc/lsx/#_12","title":"\u4e00\u7ea7\u5206\u652f\u9884\u6d4b","text":"<ul> <li>\u4e5f\u53eb 1 \u6bd4\u7279\u9884\u6d4b</li> <li>\u7528\u4e00\u4e2a\u6bd4\u7279\uff0c\u53bb\u8bb0\u5f55\u5f53\u524d\u5206\u652f\u7684\u6bd4\u8f83\u60c5\u51b5\uff0c\u76f4\u63a5\u7528\u5f53\u524d\u5206\u652f\u7684\u6bd4\u8f83\u60c5\u51b5\uff0c\u6765\u9884\u6d4b\u4e0b\u4e00\u6b21\u5206\u652f\u65f6\u5019\u7684\u6bd4\u8f83\u60c5\u51b5</li> </ul>"},{"location":"jsjzc/lsx/#_13","title":"\u53cc\u6a21\u6001\u5206\u652f\u9884\u6d4b","text":"<ul> <li>\u4e5f\u53eb 2 \u6bd4\u7279\u9971\u548c\u8ba1\u6570</li> <li>\u6dfb\u52a0\u72b6\u6001\u673a </li> </ul>"},{"location":"jsjzc/mdl/","title":"\u95e8\u7535\u8def","text":""},{"location":"jsjzc/mdl/#_1","title":"\u793a\u610f\u56fe","text":""},{"location":"jsjzc/mdl/#_2","title":"\u534a\u52a0\u5668","text":"<ul> <li>\u4e00\u4e2a\u5f02\u6216\u95e8\u5b9e\u73b0\u52a0\u6cd5</li> <li>\u4e00\u4e2a\u4e0e\u95e8\u5224\u65ad\u662f\u4e0d\u662f\u9700\u8981\u8fdb\u4f4d</li> <li>\u4e24\u4e2a\u95e8\u7535\u8def\u6253\u5305\u5230\u4e00\u8d77\u7684\u7535\u8def\u53eb\u534a\u52a0\u5668 </li> </ul>"},{"location":"jsjzc/mdl/#_3","title":"\u5168\u52a0\u5668","text":"<ul> <li>\u4e24\u4e2a\u534a\u52a0\u5668\u548c\u4e00\u4e2a\u6216\u95e8\u7ec4\u6210\u5168\u52a0\u5668</li> <li>\u7b2c\u4e00\u4e2a\u534a\u52a0\u5668\uff0c\u7528\u548c\u4e2a\u4f4d\u7684\u52a0\u6cd5\u4e00\u6837\u7684\u65b9\u5f0f\uff0c\u5f97\u5230\u662f\u5426\u8fdb\u4f4d X \u548c\u5bf9\u5e94\u7684\u4e8c\u4e2a\u6570\u52a0\u548c\u540e\u7684\u7ed3\u679c Y\uff0c\u8fd9\u6837\u4e24\u4e2a\u8f93\u51fa\u3002</li> <li>\u628a\u8fd9\u4e2a\u52a0\u548c\u540e\u7684\u7ed3\u679c Y\uff0c\u548c\u4e2a\u4f4d\u6570\u76f8\u52a0\u540e\u8f93\u51fa\u7684\u8fdb\u4f4d\u4fe1\u606f U\uff0c\u518d\u8fde\u63a5\u5230\u4e00\u4e2a\u534a\u52a0\u5668\u4e0a\uff0c\u5c31\u4f1a\u518d\u62ff\u5230\u4e00\u4e2a\u662f\u5426\u8fdb\u4f4d\u7684\u4fe1\u53f7 V \u548c\u5bf9\u5e94\u7684\u52a0\u548c\u540e\u7684\u7ed3\u679c W </li> </ul>"},{"location":"jsjzc/mdl/#_4","title":"\u52a0\u6cd5\u6ea2\u51fa","text":"<ul> <li>\u5bf9\u4e8e\u8fd9\u4e2a\u5168\u52a0\u5668\uff0c\u5728\u4e2a\u4f4d\uff0c\u53ea\u9700\u8981\u7528\u4e00\u4e2a\u534a\u52a0\u5668\uff0c\u6216\u8005\u8ba9\u5168\u52a0\u5668\u7684\u8fdb\u4f4d\u8f93\u5165\u59cb\u7ec8\u662f 0\u3002\u56e0\u4e3a\u4e2a\u4f4d\u6ca1\u6709\u6765\u81ea\u66f4\u53f3\u4fa7\u7684\u8fdb\u4f4d\u3002</li> <li>\u6700\u5de6\u4fa7\u7684\u4e00\u4f4d\u8f93\u51fa\u7684\u8fdb\u4f4d\u4fe1\u53f7\uff0c\u8868\u793a\u7684\u5e76\u4e0d\u662f\u518d\u8fdb\u4e00\u4f4d\uff0c\u800c\u662f\u8868\u793a\u52a0\u6cd5\u662f\u5426\u6ea2\u51fa\u4e86</li> </ul>"},{"location":"jsjzc/mdl/#-","title":"\u52a0\u6cd5\u5668\u52a0\u901f-\u8d85\u524d\u8fdb\u4f4d\u52a0\u6cd5\u5668","text":"<ul> <li>\u901a\u8fc7\u7ed9\u52a0\u6cd5\u5668\u589e\u52a0\u4e86\u4e00\u4e2a\u4e0d\u662f\u5341\u5206\u590d\u6742\u7684\u903b\u8f91\u7535\u8def\u6765\u5b9e\u73b0</li> <li>\u901a\u8fc7\u9884\u7b97\u51fa\u8fdb\u4f4d\u4fe1\u606f\u6765\u8fbe\u5230\u51cf\u5c11\u5ef6\u65f6\u7684\u529f\u80fd</li> </ul>"},{"location":"jsjzc/mdl/#_5","title":"\u4e58\u6cd5\u5668","text":"<ul> <li>\u4e8c\u8fdb\u5236\u4e58\u6cd5\u5217\u5f0f\u8ba1\u7b97 </li> <li>\u5b9e\u9645\u7684\u4e58\u6cd5\uff0c\u5c31\u9000\u5316\u6210\u4e86\u4f4d\u79fb\u548c\u52a0\u6cd5</li> <li>\u901a\u8fc7cpu\u7684\u65f6\u949f\u5468\u671f\u63a7\u5236\u6bcf\u6b21\u52a0\u6cd5\u8fdb\u4f4d\u548c\u4f4d\u79fb\u987a\u5e8f </li> <li>\u4e00\u4e2a\u52a0\u6cd5\u5668\u3001\u4e00\u4e2a\u53ef\u4ee5\u5de6\u79fb\u4e00\u4f4d\u7684\u7535\u8def\u548c\u4e00\u4e2a\u53f3\u79fb\u4e00\u4f4d\u7684\u7535\u8def </li> </ul>"},{"location":"jsjzc/mdl/#_6","title":"\u4e58\u6cd5\u5668\u52a0\u901f","text":"<ul> <li>\u5e76\u884c\u8ba1\u7b97 </li> </ul>"},{"location":"jsjzc/nav/","title":"Nav","text":"<ul> <li>\u51af\u8bfa\u4f9d\u66fc\u4f53\u7cfb\u7ed3\u6784</li> <li>\u5bc4\u5b58\u5668</li> <li>\u7a0b\u5e8f\u6808</li> <li>\u7a0b\u5e8f\u88c5\u8f7d</li> <li>\u95e8\u7535\u8def</li> <li>\u6d6e\u70b9\u6570\u548c\u5b9a\u70b9\u6570</li> <li>CPU</li> <li>\u6d41\u6c34\u7ebf</li> <li>CPU\u52a0\u901f</li> <li>\u5f02\u5e38&amp;&amp;\u4e2d\u65ad</li> <li>\u6307\u4ee4\u96c6CISC\u548cRISC</li> <li>GPU</li> <li>\u5c40\u90e8\u6027\u539f\u7406</li> <li>\u9ad8\u901f\u7f13\u5b58</li> <li>\u5185\u5b58</li> <li>\u603b\u7ebf</li> <li>DMA</li> </ul>"},{"location":"jsjzc/neicun/","title":"\u5185\u5b58","text":""},{"location":"jsjzc/neicun/#_1","title":"\u5185\u5b58","text":"<ul> <li>\u865a\u62df\u5185\u5b58\u5730\u5740 Virtual Address</li> <li>\u7269\u7406\u5185\u5b58\u5730\u5740 Physical Address</li> <li>\u5185\u5b58\u88ab\u5212\u5206\u6210\u56fa\u5b9a\u5927\u5c0f\u7684<code>\u9875Page</code>\uff0c\u7136\u540e\u901a\u8fc7\u865a\u62df\u5185\u5b58\u5730\u5740\u5230\u7269\u7406\u5185\u5b58\u5730\u5740\u7684\u8f6c\u6362\uff0c\u624d\u80fd\u5230\u8fbe\u5b9e\u9645\u5b58\u653e\u6570\u636e\u7684\u7269\u7406\u5185\u5b58\u5730\u5740</li> <li>\u7a0b\u5e8f\u770b\u5230\u7684\u5185\u5b58\u5730\u5740\uff0c\u90fd\u662f\u865a\u62df\u5185\u5b58\u5730\u5740</li> </ul>"},{"location":"jsjzc/neicun/#_2","title":"\u7b80\u5355\u9875\u8868","text":"<ul> <li>\u865a\u62df\u5185\u5b58\u5730\u5740\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\u5730\u5740\uff0c\u6700\u76f4\u89c2\u7684\u65b9\u5f0f\u5c31\u662f\u5efa\u7acb\u4e00\u5f20\u6620\u5c04\u8868</li> <li>\u80fd\u591f\u5b9e\u73b0\u865a\u62df\u5185\u5b58\u91cc\u9762\u7684\u9875\uff0c\u5230\u7269\u7406\u5185\u5b58\u91cc\u9762\u7684\u9875\u7684<code>\u6620\u5c04</code>\uff0c\u5728\u8ba1\u7b97\u673a\u91cc\u8fb9\u53eb\u505a<code>\u9875\u8868Page Table</code></li> <li>\u628a\u4e00\u4e2a\u5185\u5b58\u5730\u5740\u5206\u6210<code>\u9875\u53f7 Directory</code>\u548c<code>\u504f\u79fb\u91cf Offset</code></li> </ul>"},{"location":"jsjzc/neicun/#_3","title":"\u9875\u8868\u4e3e\u4f8b","text":"<ul> <li>\u5185\u5b58\u5730\u5740\u524d\u9762\u7684\u9ad8\u4f4d\uff0c\u5c31\u662f\u5185\u5b58\u5730\u5740\u7684\u9875\u53f7</li> <li>\u5185\u5b58\u5730\u5740\u540e\u9762\u7684\u5730\u4f4d\uff0c\u5c31\u662f\u5185\u5b58\u5730\u5740\u91cc\u9762\u7684\u504f\u79fb\u91cf</li> <li>\u505a\u5730\u5740\u8f6c\u6362\u7684\u9875\u8868\uff0c\u53ea\u9700\u8981\u4fdd\u7559\u865a\u62df\u5185\u5b58\u5730\u5740\u7684\u9875\u53f7\u548c\u7269\u7406\u5185\u5b58\u5730\u5740\u7684\u9875\u53f7\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u5c31\u53ef\u4ee5</li> <li>\u540c\u4e00\u4e2a\u9875\u91cc\u7684\u5185\u5b58\uff0c\u5728\u7269\u7406\u5c42\u9762\u662f\u8fde\u7eed\u7684</li> <li>32\u4f4d\u7684\u5185\u5b58\u5730\u5740\uff0c\u7136\u540e\u6bcf\u4e2a\u9875\u7684\u5927\u5c0f\u662f4KB\uff0c\u4e5f\u5c31\u662f4K\u5b57\u8282\uff0c\u9700\u8981\u9ad820\u4f4d\uff0c\u4f4e12\u4e3a</li> <li>32\u4e3a\u7684\u5185\u5b58\u5730\u5740\uff0c\u6bcf\u4e2a\u9875\u8868\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4\u90fd\u662f4MB\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6301\u6709\u4e00\u4e2a\u9875\u8868\uff0c\u5bfc\u81f4\u4e25\u91cd\u7684\u7a7a\u95f4\u6d6a\u8d39 </li> </ul>"},{"location":"jsjzc/neicun/#_4","title":"\u5730\u5740\u8f6c\u6362\u6d41\u7a0b","text":"<ul> <li>\u628a\u865a\u62df\u5185\u5b58\u5730\u5740\uff0c\u5207\u5206\u6210\u9875\u53f7\u548c\u504f\u79fb\u91cf\u7684\u7ec4\u5408</li> <li>\u4ece\u9875\u8868\u91cc\u9762\uff0c\u67e5\u8be2\u51fa\u865a\u62df\u9875\u53f7\u5bf9\u5e94\u7684\u7269\u7406\u9875\u53f7</li> <li>\u76f4\u63a5\u62ff\u7269\u7406\u9875\u53f7\u52a0\u4e0a\u504f\u79fb\u91cf\uff0c\u5c31\u5f97\u5230\u4e86\u7269\u7406\u5185\u5b58\u5730\u5740 </li> </ul>"},{"location":"jsjzc/neicun/#_5","title":"\u591a\u7ea7\u9875\u8868","text":"<ul> <li>\u6574\u4e2a\u8fdb\u7a0b\u7684\u5185\u5b58\u5730\u5740\u7a7a\u95f4\u901a\u5e38\u90fd\u662f \u4e24\u5934\u5b9e\u3002\u4e2d\u95f4\u7a7a</li> <li>\u7a0b\u5e8f\u8fd0\u884c\u7684\u65f6\u5019\uff0c\u5185\u5b58\u5730\u5740\u4ece\u9876\u90e8\u5f80\u4e0b\uff0c\u4e0d\u65ad\u5206\u914d\u5360\u7528\u7684\u6808\u7684\u7a7a\u95f4\uff0c\u4ece\u5e95\u90e8\u5f80\u4e0a\uff0c\u4e0d\u65ad\u5206\u914d\u5360\u7528\u7684\u5806\u7684\u7a7a\u95f4 </li> </ul>"},{"location":"jsjzc/neicun/#_6","title":"\u9875\u8868\u6811","text":""},{"location":"jsjzc/neicun/#_7","title":"\u52a0\u901f\u5730\u5740\u8f6c\u6362","text":"<ul> <li>\u5c40\u90e8\u6027\u539f\u7406\uff08\u7a7a\u95f4\u5c40\u90e8\u6027\u548c\u65f6\u95f4\u5c40\u90e8\u6027\uff09\uff0c\u8fde\u7eed\u6267\u884c\u7684\u6307\u4ee4\u901a\u5e38\u90fd\u5728\u4e00\u4e2a\u5185\u5b58\u9875\u4e2d </li> <li>CPU\u91cc\u653e\u7f6e\u4e00\u4e2a\u7f13\u5b58\u82af\u7247\uff0c\u7f13\u5b58\u8bbf\u95ee\u8fc7\u7684\u9875\uff0c\u51cf\u5c11\u53cd\u590d\u53bb\u8bbf\u95ee\u5185\u5b58\u6765\u8fdb\u884c\u5730\u5740\u8f6c\u6362\u7684\u5f00\u9500</li> <li>\u7f13\u5b58\u82af\u7247\u53eb<code>TLB \u5730\u5740\u53d8\u6362\u9ad8\u901f\u7f13\u51b2 Translation-Lookaside Buffer</code></li> <li>\u6307\u4ee4TLB <code>ITLB</code></li> <li>\u6570\u636eTLB <code>DTLB</code></li> <li>TLB\u53ef\u4ee5\u6839\u636e\u5927\u5c0f\u8fdb\u884c\u5206\u7ea7</li> <li>\u9700\u8981\u7528<code>\u810f\u9875</code>\u8fd9\u6837\u7684\u6807\u8bb0\u4f4d\uff0c\u5b9e\u73b0\u5199\u56de\u8fd9\u6837\u7f13\u5b58\u7ba1\u7406\u7b56\u7565</li> <li>\u5c01\u88c5\u4e86\u5185\u5b58\u7ba1\u7406\u5355\u5143 <code>MMU Memory Management Unit</code> \u82af\u7247\u548cTLB\u8fdb\u884c\u4ea4\u4e92 </li> </ul>"},{"location":"jsjzc/neicun/#memory-protection","title":"\u5185\u5b58\u4fdd\u62a4 Memory Protection","text":"<ul> <li>\u53ef\u6267\u884c\u7a7a\u95f4\u4fdd\u62a4</li> <li>\u5730\u5740\u7a7a\u95f4\u5e03\u5c40\u968f\u673a\u5316</li> </ul>"},{"location":"jsjzc/neicun/#_8","title":"\u53ef\u6267\u884c\u7a7a\u95f4\u4fdd\u62a4","text":"<ul> <li>\u5bf9\u4e8e\u4e00\u4e2a\u8fdb\u7a0b\u4f7f\u7528\u7684\u5185\u5b58\uff0c\u53ea\u628a\u5176\u4e2d\u7684\u6307\u4ee4\u90e8\u5206\u8bbe\u7f6e\u6210\u201c\u53ef\u6267\u884c\u201d\u7684\uff0c\u5bf9\u4e8e\u5176\u4ed6\u90e8\u5206\uff0c\u6bd4\u5982\u6570\u636e\u90e8\u5206\uff0c\u4e0d\u7ed9\u4e88\u201c\u53ef\u6267\u884c\u201d\u7684\u6743\u9650</li> </ul>"},{"location":"jsjzc/neicun/#_9","title":"\u5730\u5740\u7a7a\u95f4\u5e03\u5c40\u968f\u673a\u5316","text":"<ul> <li>Address Space Layout Randomization </li> </ul>"},{"location":"jsjzc/yc%26%26zd/","title":"\u5f02\u5e38&&\u4e2d\u65ad","text":""},{"location":"jsjzc/yc%26%26zd/#_1","title":"\u5f02\u5e38\u6765\u6e90","text":"<ul> <li>\u786c\u4ef6\u6765\u6e90\uff1a\u7b97\u672f\u6ea2\u51fa\uff0c\u952e\u76d8\u4fe1\u53f7\u8f93\u5165</li> <li>\u8f6f\u4ef6\u6765\u6e90\uff1a\u5e94\u7528\u7a0b\u5e8f\u7cfb\u7edf\u8c03\u7528</li> </ul>"},{"location":"jsjzc/yc%26%26zd/#_2","title":"\u5f02\u5e38","text":"<ul> <li>\u4e00\u4e2a\u786c\u4ef6\u548c\u8f6f\u4ef6\u7ec4\u5408\u5230\u4e00\u8d77\u7684\u5904\u7406\u8fc7\u7a0b</li> <li>\u5f02\u5e38\u7684\u53d1\u751f\u548c\u6355\u6349\u662f\u53d1\u751f\u5728\u786c\u4ef6\u5c42\u9762</li> <li>\u5f02\u5e38\u7684\u5904\u7406\u662f\u7531\u8f6f\u4ef6\u5b8c\u6210\u7684</li> </ul>"},{"location":"jsjzc/yc%26%26zd/#_3","title":"\u5f02\u5e38\u4ee3\u7801","text":"<ul> <li>\u4e5f\u53eb\u4e2d\u65ad\u5411\u91cf</li> <li>\u8ba1\u7b97\u673a\u4f1a\u4e3a\u6bcf\u4e00\u79cd\u5f02\u5e38\uff0c\u5206\u914d\u4e00\u4e2a\u5f02\u5e38\u4ee3\u7801</li> <li>\u5f02\u5e38\u53d1\u751f\u7684\u65f6\u5019\uff0c\u901a\u5e38\u662fCPU\u68c0\u6d4b\u5230\u4e86\u4e00\u4e2a\u8f93\u51fa\u7684\u5f02\u5e38\u4ee3\u7801\uff08\u4fe1\u53f7\uff09</li> <li>I/O\u53d1\u51fa\u7684\u4fe1\u53f7\u7684\u5f02\u5e38\u4ee3\u7801\u662f\u64cd\u4f5c\u7cfb\u7edf\u6765\u5206\u914d\u7684\uff0c\u4e5f\u5c31\u662f\u7531\u8f6f\u4ef6\u6765\u5b8c\u6210\u8bbe\u5b9a\u7684</li> <li>\u52a0\u6cd5\u6ea2\u51fa\u8fd9\u79cd\u5f02\u5e38\uff0c\u662fCPU\u9884\u5148\u5206\u914d\u597d\u7684\uff0c\u7531\u786c\u4ef6\u5206\u914d</li> </ul>"},{"location":"jsjzc/yc%26%26zd/#_4","title":"\u5f02\u5e38\u8868","text":"<ul> <li>expection table</li> <li>\u4e5f\u53eb\u4e2d\u65ad\u5411\u91cf\u8868</li> <li>\u5b58\u50a8\u5f02\u5e38\u4ee3\u7801\u5408\u5bf9\u5e94\u7684\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u7684\u5730\u5740</li> <li>\u62ff\u5230\u5f02\u5e38\u4ee3\u7801\u540e\uff0cCPU\u4f1a\u89e6\u53d1\u5f02\u5e38\u5904\u7406\u6d41\u7a0b\uff0c\u7136\u540e\u6839\u636e\u5f02\u5e38\u4ee3\u7801\uff0c\u67e5\u8be2\u5f02\u5e38\u8868</li> <li>\u627e\u5230\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u6240\u5728\u7684\u5730\u5740 </li> </ul>"},{"location":"jsjzc/yc%26%26zd/#_5","title":"\u5f02\u5e38\u5206\u7c7b","text":"<ul> <li>\u4e2d\u65ad Interrupt</li> <li>\u9677\u9631 Trap</li> <li>\u6545\u969c Fault</li> <li>\u4e2d\u6b62 Abort</li> </ul>"},{"location":"jsjzc/yc%26%26zd/#_6","title":"\u4e2d\u65ad","text":"<ul> <li>\u7a0b\u5e8f\u6267\u884c\u8fc7\u7a0b\u4e2d\u88ab\u6253\u65ad</li> <li>\u6253\u65ad\u6267\u884c\u7684\u4fe1\u53f7\u6765\u81ea\u4e8eCPU\u5916\u90e8\u7684io\u8bbe\u5907</li> </ul>"},{"location":"jsjzc/yc%26%26zd/#_7","title":"\u9677\u9631","text":"<ul> <li>\u6545\u610f\u4e3b\u52a8\u89e6\u53d1\u7684\u5f02\u5e38</li> <li>\u7a0b\u5e8f\u53d1\u751f\u7cfb\u7edf\u8c03\u7528\u7684\u65f6\u5019\uff0c\u4e5f\u5c31\u662f\u7a0b\u5e8f\u4ece\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\u7684\u65f6\u5019\u4f1a\u4ea7\u751f\u7f3a\u9677</li> <li>\u5e94\u7528\u7a0b\u5e8f\u8bfb\u53d6\u6587\u4ef6\uff0c\u521b\u5efa\u8fdb\u7a0b\uff0c\u4e5f\u662f\u901a\u8fc7\u89e6\u53d1\u4e00\u4e2a\u9677\u9631\u6765\u8fdb\u884c\u7684\uff0c\u5e94\u4e3a\u7528\u6237\u6001\u7684\u7a0b\u5e8f\u6ca1\u6709\u6743\u9650\uff0c\u53ea\u80fd\u901a\u8fc7\u9677\u9631\u5904\u7406\u7a0b\u5e8f\u6765\u8fdb\u884c\u9ad8\u6743\u9650\u64cd\u4f5c</li> </ul>"},{"location":"jsjzc/yc%26%26zd/#_8","title":"\u6545\u969c","text":"<ul> <li>\u4e0d\u662f\u6545\u610f\u4e3b\u52a8\u89e6\u53d1\u7684\uff0c</li> <li>\u4e0d\u5728\u5f00\u53d1\u8ba1\u5212\u5185\u7684\u5f02\u5e38</li> <li>\u5f02\u5e38\u7a0b\u5e8f\u5904\u7406\u5b8c\u4e4b\u540e\uff0c\u4ecd\u7136\u56de\u6765\u5904\u7406\u5f53\u524d\u7684\u6307\u4ee4\uff0c\u800c\u4e0d\u662f\u53bb\u6267\u884c\u4e0b\u4e00\u6761\u6307\u4ee4</li> </ul>"},{"location":"jsjzc/yc%26%26zd/#_9","title":"\u4e2d\u6b62","text":"<ul> <li>CPU\u9047\u5230\u4e86\u6545\u969c\uff0c\u5e76\u4e14\u6545\u969c\u65e0\u6cd5\u6062\u590d</li> </ul>"},{"location":"jsjzc/yc%26%26zd/#-","title":"\u5f02\u5e38\u5904\u7406-\u4e0a\u4e0b\u6587\u5207\u6362","text":"<ul> <li>\u5207\u6362\u5230\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u7684\u65f6\u5019\uff0c\u50cf\u662f\u53bb\u8c03\u7528\u4e00\u4e2a\u5f02\u5e38\u5904\u7406\u51fd\u6570</li> <li>\u6307\u4ee4\u7684\u63a7\u5236\u6743\u88ab\u5207\u6362\u5230\u4e86\u53e6\u5916\u4e00\u4e2a\"\u51fd\u6570\"\u91cc\u9762\uff0c\u8981\u628a\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u6307\u4ee4\u53bb\u538b\u6808</li> <li>\u5728\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u6267\u884c\u5b8c\u6210\u4e4b\u540e\uff0c\u91cd\u65b0\u56de\u5230\u5f53\u524d\u7684\u6307\u4ee4\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c</li> <li>\u6bd4\u5982\u4e2d\u65ad\u3001\u6545\u969c\u53d1\u751f\u7684\u65f6\u5019\uff0c\u9664\u4e86\u672c\u6765\u7a0b\u5e8f\u538b\u6808\u8981\u505a\u7684\u4e8b\u60c5\u4e4b\u5916\uff0c\u8fd8\u9700\u8981\u628a CPU \u5185\u5f53\u524d\u8fd0\u884c\u7a0b\u5e8f\u7528\u5230\u7684\u6240\u6709\u5bc4\u5b58\u5668\uff0c\u90fd\u653e\u5230\u6808\u91cc\u9762</li> <li>\u50cf\u9677\u9631\u8fd9\u6837\u7684\u5f02\u5e38\uff0c\u6d89\u53ca\u7a0b\u5e8f\u6307\u4ee4\u5728\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u4e4b\u95f4\u7684\u5207\u6362\u3002\u5bf9\u5e94\u538b\u6808\u7684\u65f6\u5019\uff0c\u5bf9\u5e94\u7684\u6570\u636e\u662f\u538b\u5230\u5185\u6838\u6808\u91cc\uff0c\u800c\u4e0d\u662f\u7a0b\u5e8f\u6808\u91cc</li> <li>\u50cf\u6545\u969c\u8fd9\u6837\u7684\u5f02\u5e38\uff0c\u5728\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u6267\u884c\u5b8c\u6210\u4e4b\u540e\u3002\u4ece\u6808\u91cc\u8fd4\u56de\u51fa\u6765\uff0c\u7ee7\u7eed\u6267\u884c\u7684\u4e0d\u662f\u987a\u5e8f\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\uff0c\u800c\u662f\u6545\u969c\u53d1\u751f\u7684\u5f53\u524d\u6307\u4ee4\u3002\u56e0\u4e3a\u5f53\u524d\u6307\u4ee4\u56e0\u4e3a\u6545\u969c\u6ca1\u6709\u6b63\u5e38\u6267\u884c\u6210\u529f\uff0c\u5fc5\u987b\u91cd\u65b0\u53bb\u6267\u884c\u4e00\u6b21</li> </ul>"},{"location":"jsjzc/zlj/","title":"\u6307\u4ee4\u96c6CISC\u548cRISC","text":""},{"location":"jsjzc/zlj/#cisc","title":"CISC \u590d\u6742\u6307\u4ee4\u96c6","text":"<ul> <li>Complex Instruction Set Computing</li> <li>\u76f4\u63a5\u5728\u786c\u4ef6\u5c42\u9762\u5c31\u80fd\u6267\u884c\u590d\u6742\u7684\u6307\u4ee4</li> <li>\u4f18\u5316\u6267\u884c\u7684\u6307\u4ee4\u6570\uff0c\u51cf\u5c11CPU\u7684\u6267\u884c\u65f6\u95f4</li> </ul>"},{"location":"jsjzc/zlj/#risc","title":"RISC \u590d\u6742\u6307\u4ee4\u96c6","text":"<ul> <li>Reduced Instruction Set Computing</li> <li>\u53ea\u4f7f\u7528\u5e38\u7528\u768420%\u7684\u6307\u4ee4</li> <li>\u5c06\u590d\u6742\u7684\u6307\u4ee4\u7528\u5e38\u7528\u7684\u6307\u4ee4\u7ec4\u5408\u66ff\u4ee3</li> <li>\u4f18\u5316\u5355\u4e2a\u6307\u4ee4\u7684\u6267\u884c\u65f6\u95f4\uff0c\u63d0\u5347\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5185\u6267\u884c\u7684\u6307\u4ee4\u6570</li> <li>CPU\u7535\u8def\u7b80\u5355\uff0c\u901a\u7528\u5bc4\u5b58\u5668\u6570\u91cf\u8f83\u591a\uff0c\u66f4\u597d\u7684\u8fdb\u884c\u5206\u652f\u9884\u6d4b</li> </ul> <p>AMD\uff0c\u8d81\u7740 Intel \u7814\u53d1\u5b89\u817e\u7684\u65f6\u5019\uff0c\u63a8\u51fa\u4e86\u517c\u5bb9 32 \u4f4d x86 \u6307\u4ee4\u96c6\u7684 64 \u4f4d\u67b6\u6784\uff0c\u4e5f\u5c31\u662f\u73b0\u5728\u5e38\u770b\u5230\u7684 amd64</p> <p></p>"},{"location":"jsjzc/zlj/#_1","title":"\u5fae\u6307\u4ee4","text":"<ul> <li>Micro-Instructions/Micro-Ops</li> <li>intel\u501f\u9274RISC\u5904\u7406\u5668\u7684\u8bbe\u8ba1\u601d\u60f3\uff0c\u8ba9CISC\u6307\u4ee4\u8fd0\u884c\u5728RISC\u5904\u7406\u5668\u4e2d</li> <li>\u7f16\u8bd1\u51fa\u7684\u673a\u5668\u7801\u548c\u6c47\u7f16\u4ee3\u7801\u5e76\u6ca1\u6709\u53d8\u5316</li> <li>\u6307\u4ee4\u8bd1\u7801\u5668\u5728\u7ffb\u8bd1\u6307\u4ee4\u65f6\uff0c\u7ffb\u8bd1\u51fa\u7684\u4e0d\u518d\u662f\u4e00\u6761\u6307\u4ee4\uff0c\u800c\u662f\u51e0\u4e2aRISC\u98ce\u683c\u7684\u5fae\u6307\u4ee4</li> <li>\u7ffb\u8bd1\u51fa\u7684\u5fae\u6307\u4ee4\u88ab\u653e\u5230\u5fae\u6307\u4ee4\u7f13\u51b2\u533a\u4e2d\uff0c\u7136\u540e\u4ece\u7f13\u51b2\u533a\u53d1\u9001\u5230\u8d85\u6807\u91cf\uff0c\u5e76\u4e14\u662f\u4e71\u5e8f\u7684\u7cbe\u7b80\u6307\u4ee4\u6d41\u6c34\u7ebf\u67b6\u6784</li> </ul>"},{"location":"jsjzc/zlj/#_2","title":"\u5fae\u6307\u4ee4\u56f0\u96be","text":"<ul> <li>\u8bd1\u7801\u5668\u7531\u539f\u6765\u7684\u7ffb\u8bd1\u6307\u4ee4\u53d8\u6210\u7ffb\u8bd1RISC\u5fae\u6307\u4ee4\uff0c\u589e\u52a0\u7535\u8def\u548c\u7ffb\u8bd1\u96be\u5ea6</li> <li>\u590d\u6742\u7684\u7535\u8def\u548c\u66f4\u957f\u7684\u8bd1\u7801\u65f6\u95f4\uff0c\u5bfc\u81f4\u7ffb\u8bd1\u6027\u80fd\u4e0b\u964d</li> </ul>"},{"location":"jsjzc/zlj/#_3","title":"\u89e3\u51b3","text":"<ul> <li>\u589e\u52a0L0 cache</li> <li>\u4fdd\u5b58\u6307\u4ee4\u8bd1\u7801\u5668\u628aCISC\u6307\u4ee4\u7ffb\u8bd1\u6210RISC\u5fae\u6307\u4ee4\u7684\u7ed3\u679c</li> <li>\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u90fd\u53ef\u4ee5\u5728\u7f13\u5b58\u4e2d\u76f4\u63a5\u53d6\u5230\u7ffb\u8bd1\u540e\u7684\u7ed3\u679c</li> </ul>"},{"location":"jsjzc/zlj/#arm","title":"ARM","text":"<ul> <li>Advanced RISC Machines</li> <li>\u57fa\u4e8eRISC\u67b6\u6784</li> <li>\u4e3b\u9891\u6bd4Intel x86\u66f4\u4f4e\uff0c\u6676\u4f53\u7ba1\u66f4\u5c11\uff0c\u9ad8\u901f\u7f13\u5b58\u66f4\u5c0f\uff0c\u4e71\u5e8f\u6267\u884c\u80fd\u529b\u66f4\u5f31\uff0c\u4f46\u662f\u51cf\u4f4e\u4e86\u529f\u8017</li> <li>\u4f4e\u4ef7\uff0c\u6ca1\u6709\u8fdb\u884c\u884c\u4e1a\u5784\u65ad\uff0c\u53ea\u8fdb\u884cCPU\u8bbe\u8ba1</li> </ul>"},{"location":"jsjzc/zongxian/","title":"\u603b\u7ebf","text":""},{"location":"jsjzc/zongxian/#_1","title":"\u603b\u7ebf","text":"<ul> <li>Bus</li> <li>\u4e00\u4e2a\u516c\u7528\u7684\u7ebf\u8def\uff0cCPU\u3001\u5185\u5b58\u4ee5\u53ca\u8f93\u5165\u548c\u8f93\u51fa\u8bbe\u5907\uff0c\u90fd\u662f\u901a\u8fc7\u8fd9\u7ec4\u7ebf\u8def\uff0c\u8fdb\u884c\u76f8\u4e92\u95f4\u901a\u4fe1\u7684</li> <li>CPU \u60f3\u8981\u548c\u4ec0\u4e48\u8bbe\u5907\u901a\u4fe1\uff0c\u901a\u4fe1\u7684\u6307\u4ee4\u662f\u4ec0\u4e48\uff0c\u5bf9\u5e94\u7684\u6570\u636e\u662f\u4ec0\u4e48\uff0c\u90fd\u53d1\u9001\u5230\u8fd9\u4e2a\u7ebf\u8def\u4e0a</li> <li>\u8bbe\u5907\u8981\u5411 CPU \u53d1\u9001\u4ec0\u4e48\u4fe1\u606f\u5462\uff0c\u4e5f\u53d1\u9001\u5230\u8fd9\u4e2a\u7ebf\u8def\u4e0a</li> <li>\u6ce8\u518c\u5728\u603b\u7ebf\u4e0a\u7684\u5404\u4e2a\u6a21\u5757\u5c31\u662f\u677e\u8026\u5408\u7684\u3002\u6a21\u5757\u4e92\u76f8\u4e4b\u95f4\u5e76\u6ca1\u6709\u4f9d\u8d56\u5173\u7cfb</li> <li>\u603b\u7ebf\u4e0d\u80fd\u540c\u65f6\u7ed9\u591a\u4e2a\u8bbe\u5907\u63d0\u4f9b\u901a\u4fe1\u529f\u80fd</li> </ul>"},{"location":"jsjzc/zongxian/#_2","title":"\u4e09\u79cd\u7ebf\u8def","text":"<ul> <li>\u6570\u636e\u7ebf Data Bus \u4f20\u8f93\u5b9e\u9645\u7684\u6570\u636e\u4fe1\u606f</li> <li>\u5730\u5740\u7ebf Address Bus \u786e\u5b9a\u5230\u5e95\u628a\u6570\u636e\u4f20\u8f93\u5230\u54ea\u91cc\u53bb\uff0c\u662f\u5185\u5b58\u7684\u67d0\u4e2a\u4f4d\u7f6e\uff0c\u8fd8\u662f\u67d0\u4e00\u4e2a I/O \u8bbe\u5907</li> <li>\u63a7\u5236\u7ebf Control Bus \u63a7\u5236\u5bf9\u4e8e\u603b\u7ebf\u7684\u8bbf\u95ee</li> </ul>"},{"location":"jsjzc/zongxian/#_3","title":"\u53cc\u72ec\u7acb\u603b\u7ebf","text":"<ul> <li>CPU\u548c\u5185\u5b58\u4ee5\u53ca\u9ad8\u901f\u7f13\u5b58\u901a\u4fe1\u7684\u603b\u7ebf</li> <li>CPU\u91cc\u6709\u4e00\u4e2a\u5feb\u901f\u7684\u672c\u5730\u603b\u7ebf Local Bus\uff0cCPU \u5185\u90e8\u548c\u9ad8\u901f\u7f13\u5b58\u901a\u4fe1</li> <li>CPU\u91cc\u8fd8\u6709\u4e00\u4e2a\u76f8\u5bf9\u901f\u5ea6\u8f83\u6162\u7684\u524d\u7aef\u603b\u7ebf Front-side Bus\uff0c\u548c\u5916\u90e8 I/O \u8bbe\u5907\u4ee5\u53ca\u5185\u5b58\u901a\u4fe1</li> </ul>"},{"location":"jsjzc/zongxian/#_4","title":"\u603b\u7ebf\u88c1\u51b3","text":"<ul> <li>Bus Arbitraction</li> </ul>"},{"location":"jsjzc/zongxian/#_5","title":"\u5feb\u901f\u901a\u9053\u4e92\u8054","text":""},{"location":"kafka/kafka/","title":"Kafka","text":""},{"location":"kafka/kafka/#kafka","title":"kafka","text":""},{"location":"kafka/nav/","title":"Nav","text":"<ul> <li>Kafka</li> </ul>"},{"location":"kubernetes/cgroups/","title":"cgroup","text":""},{"location":"kubernetes/cgroups/#cgroups","title":"cgroups","text":""},{"location":"kubernetes/namespace/","title":"namespace","text":""},{"location":"kubernetes/namespace/#namespace","title":"namespace","text":""},{"location":"kubernetes/nav/","title":"Nav","text":"<ul> <li>cgroup</li> <li>namespace</li> <li>\u63a2\u9488</li> </ul>"},{"location":"kubernetes/probe/","title":"\u63a2\u9488","text":""},{"location":"kubernetes/probe/#livenessprobe","title":"\u5b58\u6d3b\u63a2\u9488 livenessProbe","text":"<ul> <li>HTTP GET\uff0c\u7aef\u53e3\u53f7\u548cAPI\uff0c\u8bf7\u6c42\u8fd4\u56de2XX\u62163XX\uff0c\u5bb9\u5668\u5b58\u6d3b\uff0c\u65e0\u54cd\u5e94\u6216\u72b6\u6001\u7801\u5f02\u5e38\uff0c\u91cd\u542f\u5bb9\u5668</li> <li>TCP\uff0c\u548c\u5bb9\u5668\u6307\u5b9a\u7aef\u53e3\uff0c\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u5efa\u7acb\u6210\u529f\uff0c\u5bb9\u5668\u5b58\u6d3b\uff0c\u5426\u5219\u91cd\u542f\u5bb9\u5668</li> <li>EXEC\uff0c\u5728\u5bb9\u5668\u5185\u6267\u884c\u4efb\u610f\u547d\u4ee4\uff0c\u68c0\u67e5\u660e\u5fb7\u9000\u51fa\u72b6\u6001\u7801\uff0c\u5982\u679c\u4e3a0\uff0c\u5bb9\u5668\u5b58\u6d3b\uff0c\u5426\u5219\u91cd\u542f\u5bb9\u5668</li> </ul>"},{"location":"kubernetes/probe/#httpget","title":"httpGet","text":"<pre><code>spec:\nlivenessProbe:\nhttpGet:\npath: /\nport: 808\n</code></pre>"},{"location":"kubernetes/probe/#_1","title":"\u5c31\u7eea\u63a2\u9488","text":""},{"location":"linux%26macos/dabao_yasuo/","title":"\u6253\u5305&&\u538b\u7f29","text":""},{"location":"linux%26macos/dabao_yasuo/#_1","title":"\u6253\u5305","text":"<ul> <li>\u547d\u4ee4 <code>tar</code></li> <li>tar cf \u751f\u6210\u7684\u6587\u4ef6\u540d \u6253\u5305\u7684\u76ee\u5f55\u540d</li> <li>tar cf /tmp/etc-backup.tar /etc</li> </ul>"},{"location":"linux%26macos/dabao_yasuo/#_2","title":"\u5355\u72ec\u538b\u7f29","text":"<ul> <li><code>gzip</code></li> <li><code>bizp2</code></li> </ul>"},{"location":"linux%26macos/dabao_yasuo/#_3","title":"\u7ec4\u5408\u6253\u5305\u538b\u7f29","text":"<ul> <li>tar czf /tmp/etc-backup.tar.gz /etc \u538b\u7f29\u901f\u5ea6\u5feb</li> <li>tar cjf /tmp/etc-backup.tar.bzip2 /etc \u538b\u7f29\u6bd4\u7387\u9ad8</li> </ul>"},{"location":"linux%26macos/dabao_yasuo/#_4","title":"\u89e3\u538b\u7f29","text":"<ul> <li>tar xzf /tmp/etc-backup.tar.gz -C /root \u89e3\u538b\u7f29\u7684\u6587\u4ef6\u548c\u89e3\u538b\u5230\u7684\u8def\u5f84</li> <li>tar xjf /tmp/etc-backup.tar.bzip2 -C root </li> </ul>"},{"location":"linux%26macos/macos_ssh/","title":"macOS 13 SSH","text":""},{"location":"linux%26macos/macos_ssh/#no-matching-host-key-type-found-their-offer-ssh-dssssh-rsa","title":"no matching host key type found. Their offer: ssh-dss,ssh-rsa","text":"<ul> <li>OpenSSH7.0\u4ee5\u540e\u7684\u7248\u672c\u4e0d\u518d\u652f\u6301ssh-dss(DSA)\u7b97\u6cd5</li> <li>\u547d\u4ee4\u884c\u6dfb\u52a0\u9009\u9879 <code>ssh -oHostKeyAlgorithms=+ssh-dss user@host -p port</code></li> <li>\u5728ssh\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u5168\u5c40\u9009\u9879 HostKeyAlgorithms +ssh-dss</li> <li>\u6dfb\u52a0\u5230\u914d\u7f6e ~/.ssh/config</li> <li>\u6dfb\u52a0\u5230 /etc/ssh/ssh_config</li> </ul>"},{"location":"linux%26macos/nav/","title":"Nav","text":"<ul> <li>\u6253\u5305&amp;&amp;\u538b\u7f29</li> <li>ssh\u914d\u7f6e\u6837\u4f8b</li> <li>\u6e90\u7801\u5b89\u88c5ZSH</li> <li>OHMYZSH</li> <li>macOS 13 SSH</li> <li>SSH\u5bc6\u94a5\u767b\u5f55</li> </ul>"},{"location":"linux%26macos/ohmyzsh/","title":"OHMYZSH","text":""},{"location":"linux%26macos/ohmyzsh/#ohmyzsh","title":"\u5b89\u88c5ohmyzsh","text":"<ol> <li><code>sh -c \"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"</code></li> </ol>"},{"location":"linux%26macos/ohmyzsh/#_1","title":"\u5b89\u88c5\u63d2\u4ef6","text":"<ol> <li><code>git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions</code></li> <li><code>git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting</code></li> <li><code>zsh-syntax-highlighting zsh-autosuggestions</code></li> </ol>"},{"location":"linux%26macos/ssh_demo/","title":"ssh\u914d\u7f6e\u6837\u4f8b","text":""},{"location":"linux%26macos/ssh_demo/#ssh-config","title":"ssh config \u914d\u7f6e","text":"<ul> <li>\u591a\u6b21\u8fde\u63a5\u540c\u4e00\u670d\u52a1\u5668\u5171\u4eab\u4e00\u4e2a\u8fde\u63a5</li> <li>ssh host</li> <li>\u6307\u5b9a\u5bc6\u94a5\u8def\u5f84 <pre><code>host *\nControlMaster auto\nControlPath ~/.ssh/master-%r@%h:%p\nServerAliveInterval 80\n\nHost tencent_ubuntu\n    Hostname **.**.**.**\n    Port 22\n    User ubuntu\n    IdentityFile ~/.ssh/tencent_ubuntu_rsa\n</code></pre></li> </ul>"},{"location":"linux%26macos/ssh_key_login/","title":"SSH\u5bc6\u94a5\u767b\u5f55","text":""},{"location":"linux%26macos/ssh_key_login/#ssh","title":"SSH \u8bbe\u7f6e\u5bc6\u94a5\u767b\u5f55","text":""},{"location":"linux%26macos/ssh_key_login/#_1","title":"\u670d\u52a1\u5668\u64cd\u4f5c","text":"<ul> <li>cat id_rsa.pub &gt;&gt; authorized_keys</li> <li>chmod 600 authorized_keys</li> <li>chmod 700 ~/.ssh</li> <li>vim /etc/ssh/sshd_config<ul> <li>RSAAuthentication yes</li> <li>PubkeyAuthentication yes</li> </ul> </li> <li>systemctl restart ssh</li> </ul>"},{"location":"linux%26macos/ssh_key_login/#_2","title":"\u767b\u5f55\u673a\u5668\u64cd\u4f5c","text":"<ul> <li>debian_rsa \u662f\u670d\u52a1\u5668\u751f\u6210\u7684\u79c1\u94a5\uff0c\u9700\u8981\u4f20\u9001\u5230\u767b\u5f55\u673a\u4e0a</li> </ul> <pre><code>Host debian\n   Hostname XXXX.com\n   Port 22\n   User debian\n   IdentityFile ~/.ssh/debian_rsa\n</code></pre>"},{"location":"linux%26macos/zsh_install/","title":"\u6e90\u7801\u5b89\u88c5ZSH","text":""},{"location":"linux%26macos/zsh_install/#zsh","title":"\u539f\u7801\u5b89\u88c5ZSH\u65b0\u7248","text":"<p>ubuntu 18.04 \u5b89\u88c5\u7684zsh\u7248\u672c\u8f83\u4f4e\uff085.4\uff09oh-my-zsh\u9700\u8981\u4f7f\u75285.8\u4ee5\u4e0a</p> <ol> <li>\u6e90\u7801\u7f51\u5740 https://zsh.sourceforge.io/Arc/source.html</li> <li><code>wget https://jaist.dl.sourceforge.net/project/zsh/zsh/5.8/zsh-5.8.tar.xz</code></li> <li><code>tar xvf zsh-5.8.tar.xz</code></li> <li>centos \u9700\u8981     <pre><code>yum install gcc perl-ExtUtils-MakeMaker\nyum install ncurses-devel\n</code></pre></li> <li><code>cd zsh-5.8</code></li> <li><code>./configure</code></li> <li><code>make &amp;&amp; make install</code></li> <li><code>vim /etc/shells</code> \u6dfb\u52a0 <code>/usr/local/bin/zsh</code></li> </ol>"},{"location":"mkdocs/https/","title":"Https","text":"<pre><code>sudo certbot certonly  -d \"*.heysq.com\" -d heysq.com --manual --preferred-challenges dns  --server https://acme-v02.api.letsencrypt.org/directory\n</code></pre>"},{"location":"mysql/binlog_redolog/","title":"binlog&&redolog","text":""},{"location":"mysql/binlog_redolog/#binlog","title":"binlog\u5199\u5165\u673a\u5236","text":"<ul> <li>\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5148\u5199\u5230<code>binlog cache</code> \uff0c\u4e8b\u52a1\u63d0\u4ea4\u540e\uff0cbinlog cache \u4e2d\u7684\u5185\u5bb9\u6301\u4e45\u5316\u5230\u78c1\u76d8</li> <li>\u4e00\u4e2a\u4e8b\u52a1\u7684binlog\uff0c\u662f\u4e0d\u80fd\u88ab\u62c6\u5f00\u7684\uff0c\u65e0\u8bba\u4e8b\u52a1\u591a\u5927\u4e5f\u8981\u786e\u4fdd\u4e00\u6b21\u6027\u5199\u5165</li> <li><code>binlog cache</code>\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u6301\u6709\u4e00\u7247\u5185\u5b58</li> <li>\u4e8b\u52a1\u63d0\u4ea4\u540e\uff0c\u7ebf\u7a0b\u628abinlog cache \u5199\u5165\u78c1\u76d8\uff0c\u7136\u540e\u6e05\u7a7acache</li> <li>write \u662f\u5c06binlog cache\u7684\u5185\u5bb9\u653e\u5165\u5230\u6587\u4ef6\u7cfb\u7edf\u7684page cache</li> <li>fsync \u4f1a\u5c06page cache \u6570\u636e\u6301\u4e45\u5316\u9053\u78c1\u76d8</li> </ul>"},{"location":"mysql/binlog_redolog/#sync_binlog","title":"sync_binlog","text":"<ul> <li>sync-binlog\u4e3a0\uff0c\u6bcf\u6b21\u4e8b\u52a1\u63d0\u4ea4\u90fd\u4f1awrite\u5230page cache\uff0c\u4e0d\u4f1afsync</li> <li>sync-binlog\u4e3a1\uff0c\u6bcf\u6b21\u63d0\u4ea4\u4e8b\u52a1\u90fd\u4f1a\u6267\u884cfsync</li> <li>sync-binlog&gt;1 \u65f6\uff0c\u8868\u793a\u6bcf\u6b21\u63d0\u4ea4\u4e8b\u52a1\u90fd\u4f1awrite\uff0c\u7d2f\u8ba1N\u4e2a\u4e8b\u52a1\u65f6\u624d\u4f1afsync</li> <li>sync-binlog\u4e3a1\uff0c\u6027\u80fd\u5f71\u54cd\u8f83\u5927</li> <li>sync-binlog\u4e3aN\u65f6\uff0c\u91cd\u542f\u4f1a\u4e22\u5931\u6700\u8fd1N\u4e2a\u4e8b\u52a1\u7684binlog\u65e5\u5fd7</li> </ul>"},{"location":"mysql/binlog_redolog/#redolog","title":"redolog\u5199\u5165\u673a\u5236","text":"<ul> <li>redo log buffer\uff0c\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5148\u5199buffer</li> <li>\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u90e8\u5206redo log buffer \u4f1a\u88ab\u5199\u5165\u5230\u78c1\u76d8</li> <li>innodb \u540e\u53f0\u7ebf\u7a0b\uff0c\u5b9a\u65f6\u5c06redo log buffer \u4e2d\u7684\u65e5\u5fd7\u5237\u5230\u78c1\u76d8</li> </ul>"},{"location":"mysql/binlog_redolog/#redolog-buffer","title":"redolog buffer \u4e0d\u9700\u8981\u6bcf\u6b21\u65b0\u589e\u90fd\u6301\u4e45\u5316\u5230\u78c1\u76d8","text":"<ul> <li>\u4e8b\u52a1\u6267\u884c\u4e2d\u8fd8\u6ca1\u63d0\u4ea4\uff0c\u91cd\u542f\u540e\u4e22\u5931\u4e86\u4e00\u90e8\u5206\u5c31\u56de\u6eda\u4e8b\u52a1</li> </ul>"},{"location":"mysql/binlog_redolog/#redo-log","title":"redo log \u72b6\u6001","text":"<ul> <li>\u5728redo log buffer\u4e2d</li> <li>\u5728\u6587\u4ef6\u7cfb\u7edfpage cache</li> <li>\u5728\u78c1\u76d8\u4e2d</li> </ul>"},{"location":"mysql/binlog_redolog/#redo-log-innodb_flush_log_at_trx_commit","title":"redo log \u5199\u5165\u7b56\u7565 innodb_flush_log_at_trx_commit\u914d\u7f6e\u53c2\u6570","text":"<ul> <li>0\uff1a\u6bcf\u6b21\u4e8b\u52a1\u63d0\u4ea4\u90fd\u7559\u5728redo log buffer</li> <li>1\uff1a\u6bcf\u6b21\u4e8b\u52a1\u63d0\u4ea4\u90fd\u5c06redo log\u6301\u4e45\u5230\u78c1\u76d8</li> <li>2\uff1a\u6bcf\u6b21\u4e8b\u52a1\u63d0\u4ea4\u90fd\u5199\u5230page cache</li> </ul>"},{"location":"mysql/binlog_redolog/#redo-log_1","title":"\u4e8b\u52a1\u7684\u90e8\u5206redo log\u5199\u5165\u5230\u78c1\u76d8","text":"<ul> <li>redo log buffer \u5360\u7528 innodb_log_buffer_size\u4e00\u534a\uff0c\u540e\u53f0\u7ebf\u7a0b\u4e3b\u52a8\u5199\u5230page cache</li> <li>\u5e76\u884c\u7684\u5176\u4ed6\u4e8b\u52a1\u63d0\u4ea4\uff0c\u5c06\u8fd9\u4e2a\u4e8b\u52a1\u7684redo log buffer\u4e2d\u7684\u5185\u5bb9\u5e26\u4e0a\uff0c\u4e14redo log \u914d\u7f6e\u53c2\u6570\u8bbe\u7f6e\u4e3a1\u65f6\uff0c\u5237\u5230\u78c1\u76d8</li> </ul>"},{"location":"mysql/binlog_redolog/#_1","title":"\u53cc\u4e00\u914d\u7f6e","text":"<ul> <li>sync-binlog \u8bbe\u7f6e\u4e3a1</li> <li>innodb_flush_log_at_trx_commit \u8bbe\u7f6e\u4e3a1</li> <li>\u4e00\u4e2a\u4e8b\u52a1\u63d0\u4ea4\u524d\uff0c\u4e24\u9636\u6bb5\u63d0\u4ea4\uff0credo log\u5237\u76d8\u4e00\u6b21\uff0cbinlog\u5237\u76d8\u4e00\u6b21</li> <li>redo log \u72b6\u6001\u6539\u4e3acommit\u7684\u65f6\u5019\u4e0d\u4f1a\u8fdb\u884cfsync\uff0c\u56e0\u4e3a\u53ea\u8981binlog \u5199\u78c1\u76d8\u6210\u529f\uff0c\u5c31\u7b97redo log \u7684\u72b6\u6001\u8fd8\u662fprepare\u4e5f\u6ca1\u6709\u5173\u7cfb\u4f1a\u88ab\u8ba4\u4e3a\u4e8b\u52a1\u5df2\u7ecf\u6267\u884c\u6210\u529f\uff0c\u6240\u4ee5\u53ea\u9700\u8981write \u5230page cache\u5c31ok\u4e86\uff0c\u6ca1\u5fc5\u8981\u518d\u6d6a\u8d39io\u4e3b\u52a8\u53bb\u8fdb\u884c\u4e00\u6b21fsync</li> </ul>"},{"location":"mysql/binlog_redolog/#_2","title":"\u7ec4\u63d0\u4ea4","text":"<ul> <li>\u6bcf\u6b21redo log \u843d\u76d8\u65f6\uff0c\u643a\u5e26\u591a\u4e2a\u63d0\u4ea4\u4e8b\u52a1\u7684redo log buffer</li> <li>binlog\u4e5f\u53ef\u4ee5\u7ec4\u63d0\u4ea4 </li> </ul>"},{"location":"mysql/binlog_redolog/#binlog_1","title":"binlog\u7ec4\u63d0\u4ea4","text":"<ul> <li>binlog_group_commit_sync_delay \u53c2\u6570\uff0c\u8868\u793a\u5ef6\u8fdf\u591a\u5c11\u5fae\u79d2\u540e\u624d\u8c03\u7528 fsync</li> <li>binlog_group_commit_sync_no_delay_count \u53c2\u6570\uff0c\u8868\u793a\u7d2f\u79ef\u591a\u5c11\u6b21\u4ee5\u540e\u624d\u8c03\u7528 fsync</li> </ul>"},{"location":"mysql/nav/","title":"Nav","text":"<ul> <li>\u67e5\u8be2\u8bed\u53e5</li> <li>\u66f4\u65b0\u8bed\u53e5</li> <li>\u4e8b\u52a1\u9694\u79bb</li> <li>\u7d22\u5f15</li> <li>\u5404\u79cd\u9501</li> <li>\u810f\u9875</li> <li>\u8868</li> <li>\u4e0d\u540c\u7684count</li> <li>\u4e24\u9636\u6bb5\u63d0\u4ea4</li> <li>order_by</li> <li>SQL\u6267\u884c\u5f02\u5e38</li> <li>\u5e7b\u8bfb</li> <li>\u53ef\u91cd\u590d\u8bfb</li> <li>binlog&amp;&amp;redolog</li> <li>\u4e3b\u5907\u4e00\u81f4</li> <li>\u4e3b\u5907\u5ef6\u8fdf</li> <li>\u6742\u9879</li> <li>\u4e34\u65f6\u63d0\u9ad8\u6027\u80fd</li> <li>\u521b\u5efa\u7528\u6237</li> </ul>"},{"location":"mysql/order_by/","title":"order_by","text":""},{"location":"mysql/order_by/#sort-buffer","title":"sort-buffer","text":"<ul> <li>sort-buffer-size: \u7528\u6765\u6392\u5e8f\u7684buffer\u5927\u5c0f</li> <li>\u9700\u8981\u6392\u5e8f\u7684\u5185\u5bb9\u5c0f\u4e8esort-buffer-size\uff0c\u57fa\u4e8e\u5185\u5b58\u6392\u5e8f</li> <li>\u9700\u8981\u6392\u5e8f\u7684\u5185\u5bb9\u5927\u4e8esort-buffer-size\uff0c\u7528\u4e34\u65f6\u78c1\u76d8\u6587\u4ef6\u8f85\u52a9\u6392\u5e8f</li> </ul>"},{"location":"mysql/order_by/#max_length_for_sort_data","title":"max_length_for_sort_data","text":"<ul> <li>\u7528\u6765\u63a7\u5236\u6392\u5e8f\u7684\u884c\u6570\u636e\u957f\u5ea6\u7684\u4e00\u4e2a\u53c2\u6570</li> <li>\u5982\u679c\u5355\u884c\u957f\u5ea6\u8d85\u8fc7\u8fd9\u4e2a\u503c\uff0c\u5219\u53ea\u53d6\u6392\u5e8f\u5b57\u6bb5\u548c\u4e3b\u952eid\uff0c\u6392\u5e8f\u540e\uff0c\u7528\u4e3b\u952eid\u67e5\u8be2\u6570\u636e\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef</li> <li>\u5982\u679c\u6392\u5e8f\u5355\u884c\u957f\u5ea6\u4e0d\u8d85\u8fc7\u8fd9\u4e2a\u503c\uff0c\u5c31\u91c7\u7528\u5168\u5b57\u6bb5\u6392\u5e8f\uff0c\u7136\u540e\u76f4\u63a5\u8fd4\u56de\u6392\u5e8f\u6570\u636e\u7ed9\u5ba2\u6237\u7aef\uff0c\u4e0d\u9700\u8981\u518d\u6b21\u67e5\u8be2\u4e3b\u952e</li> </ul>"},{"location":"mysql/order_by/#rowid","title":"rowid\u6392\u5e8f","text":"<ul> <li>\u6392\u5e8fsort-buffer\u91cc\u8fb9\u53ea\u6709\u6392\u5e8f\u5b57\u6bb5\u548c\u4e3b\u952eid</li> <li>\u6392\u5b8c\u5e8f\u540e\uff0c\u5982\u679c\u8981select\u5176\u4ed6\u5b57\u6bb5\uff0c\u5219\u9700\u8981\u7528\u4e3b\u952eid\u56de\u8868\u67e5\u8be2\u5176\u4ed6\u5b57\u6bb5</li> <li>\u6392\u5e8f\u540e\uff0c\u6309\u7167\u4e3b\u952e\u7d22\u5f15\uff0c\u67e5\u8be2\u6570\u636e\u67e5\u5230\u4e00\u4e2a\u5c31\u8fd4\u56de\u4e00\u4e2a\u7ed9\u5ba2\u6237\u7aef</li> </ul>"},{"location":"mysql/order_by/#_1","title":"\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\u53ef\u4ee5\u5355\u72ec\u5b8c\u6210\u7684\u6392\u5e8f\uff0c\u4e0d\u9700\u8981\u4f7f\u7528\u4e34\u65f6\u7a7a\u95f4","text":""},{"location":"mysql/order_by/#_2","title":"\u5185\u5b58\u4e34\u65f6\u8868\u548c\u78c1\u76d8\u4e34\u65f6\u8868","text":"<ul> <li>\u6392\u5e8f\u7684\u6570\u636e\u4e34\u65f6\u8868\u5c0f\u4e8etmp_table_size\u914d\u7f6e\u7684\u503c\uff08\u9ed8\u8ba4\u662f16M\uff09\u65f6\u4f7f\u7528\u5185\u5b58\u4e34\u65f6\u8868\uff0c\u5f15\u64ce\u662fmemory\u5f15\u64ce\uff0c\u66f4\u503e\u5411\u4e8e\u5185\u5b58\u4e34\u65f6\u8868\u6392\u5e8f</li> <li>\u5927\u4e8e\u914d\u7f6e\u7684\u503c\u65f6\uff0c\u4f7f\u7528\u78c1\u76d8\u4e34\u65f6\u8868\uff0c\u4f7f\u7528\u7684\u662fInnoDB\u5f15\u64ce\uff0c\u66f4\u503e\u5411\u4e8e\u5168\u5b57\u6bb5\u6392\u5e8f</li> </ul>"},{"location":"mysql/order_by/#order_by_rand","title":"order_by_rand","text":"<ul> <li>\u6392\u5e8f\u5b57\u6bb5\u52a00-1\u968f\u673a\u751f\u6210\u6570\u7684\u5b57\u6bb5</li> <li>sort-buffer \u653e\u7f6e\u968f\u673a\u6570\u548c\u8bb0\u5f55\u7684<code>\u4f4d\u7f6e\u4fe1\u606f</code></li> <li>\u7136\u540e\u6309\u7167\u968f\u673a\u6570\u5b57\u6bb5\u6392\u5e8f\uff0c\u7136\u540e\u7528\u524d\u51e0\u4e2a\u7684\u4f4d\u7f6e\u4fe1\u606f\u53bb\u5185\u5b58\u4e34\u65f6\u8868\u4e0a\u53d6\u51fa\u5b57\u6bb5\u7684\u503c</li> </ul>"},{"location":"mysql/order_by/#row-id","title":"\u4e3b\u952e row id\u6392\u5e8f","text":"<ul> <li>\u6709\u4e3b\u952e\u7684InnoDB\uff0crowid\u5c31\u662f\u4e3b\u952e</li> <li>\u65e0\u4e3b\u952e\u7684InnoDB\u8868\uff0c\u7cfb\u7edf\u751f\u6210rowid</li> <li>memory\u4e34\u65f6\u8868\uff0c\u6570\u7ec4\u6392\u5217\uff0c\u4e3b\u952e\u5c31\u662f\u6570\u7ec4\u4e0b\u6807</li> </ul>"},{"location":"mysql/order_by/#_3","title":"\u4f18\u5148\u961f\u5217\u6392\u5e8f\u7b97\u6cd5","text":"<ul> <li>\u5982\u679c\u8981\u6392\u5e8f\u7684\u6570\u636e\u91cf\u603b\u548c\u5927\u5c0f\u4e0d\u8d85\u8fc7sort-buffer-size\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u4f18\u5148\u961f\u5217\u6392\u5e8f\uff0c\u5426\u5219\u4f7f\u7528\u5f52\u5e76\u6392\u5e8f\uff0c\u4e5f\u5c31\u662f\u4e34\u65f6\u6587\u4ef6\u6392\u5e8f</li> <li>\u53d6\u524dN\u4e2a\u6392\u5e8f\u7684\u5143\u7d20\u6784\u6210\u5806\uff08\u5927\u6839\u5806\uff09</li> <li>\u4e00\u6b21\u904d\u5386\u540e\u8fb9\u7684\u6392\u5e8f\u6570\u636e\uff0c\u4e0d\u65ad\u8c03\u6574\u5806</li> <li>\u904d\u5386\u5b8c\u540e\u8fd4\u56de\u5806\u7684\u5143\u7d20</li> </ul>"},{"location":"mysql/sql%E6%89%A7%E8%A1%8C%E5%BC%82%E5%B8%B8/","title":"SQL\u6267\u884c\u5f02\u5e38","text":""},{"location":"mysql/sql%E6%89%A7%E8%A1%8C%E5%BC%82%E5%B8%B8/#_1","title":"\u67e5\u8be2\u957f\u65f6\u95f4\u4e0d\u8fd4\u56de","text":"<ul> <li>\u8868\u88ab\u9501\u4f4f\uff0c\u7b49MDL\u9501 <code>lock table t write</code></li> <li>\u8868\u7b49\u5f85Flush\uff0c\u5982\u679cflush\u963b\u585e\u7684\u65f6\u5019\uff0cselect\u4e5f\u4f1a\u963b\u585e<ul> <li><code>flush tables t with read lock</code></li> <li><code>flush tables with read lock</code></li> </ul> </li> <li>\u7b49\u5f85\u884c\u9501\uff0c\u5f53\u524d\u67e5\u8be2\u8bb0\u5f55\u6709\u884c\u9501\u65f6\uff0c\u5982\u679c\u67e5\u8be2\u8981\u52a0\u8bfb\u9501\u5c31\u4f1a\u963b\u585e\u5f53\u524d\u67e5\u8be2<ul> <li><code>select * from t where id = 1 lock in share mode;</code></li> </ul> </li> </ul>"},{"location":"mysql/sql%E6%89%A7%E8%A1%8C%E5%BC%82%E5%B8%B8/#_2","title":"\u67e5\u8be2\u6162","text":"<ul> <li>\u67e5\u8be2\u6761\u4ef6\u5b57\u6bb5\u6ca1\u6709\u547d\u4e2d\u7d22\u5f15\uff0c\u9020\u6210\u5168\u8868\u626b\u63cf</li> <li>\u67e5\u8be2\u7684\u884c\u6b63\u5728\u5176\u4ed6\u4e8b\u52a1\u88ab\u4e0d\u65ad\u66f4\u65b0\uff0c\u7136\u540e\u5feb\u7167\u8bfb\u9700\u8981\u4e0d\u65ad\u7684\u7528undo log \u53bb\u8fd8\u539f\u53ef\u89c1\u7684MVCC\u7248\u672c<ul> <li>lock in share mode \u8fd4\u56de\u7279\u522b\u5feb\uff0c\u56e0\u4e3a\u662f\u5f53\u524d\u8bfb </li> </ul> </li> <li>sql\u8bed\u53e5\u672c\u8eab\u95ee\u9898\uff0c\u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u91cd\u5199\u6765\u4fee\u6539</li> <li>mysql\u672c\u8eab\u9009\u9519\u4e86\u7d22\u5f15\uff0c<code>force index</code> \u4fee\u6b63\uff0c\u6216\u8005\u5220\u9664\u9009\u9519\u7684\u7d22\u5f15</li> </ul>"},{"location":"mysql/zaxiang/","title":"\u6742\u9879","text":""},{"location":"mysql/zaxiang/#_1","title":"\u5fae\u4fe1\u516c\u4f17\u53f7\u6587\u7ae0\u5f85\u6574\u7406","text":"<ul> <li>\u7d22\u5f15\u5931\u6548\u573a\u666f https://mp.weixin.qq.com/s/8p8ayURTMiyhZA07ogBv1Q</li> </ul>"},{"location":"mysql/%E4%B8%8D%E5%90%8C%E7%9A%84count/","title":"\u4e0d\u540c\u7684count","text":""},{"location":"mysql/%E4%B8%8D%E5%90%8C%E7%9A%84count/#innodb-count","title":"\u4e3a\u4ec0\u4e48InnoDB\u5f15\u64ce count(*) \u8fd9\u4e48\u6162\uff1f","text":"<ul> <li>\u6bcf\u6761\u8bb0\u5f55\u5728\u6570\u636e\u5e93\u4e2d\u90fd\u6709\u591a\u4e2a\u7248\u672c\uff0c\u591a\u4e2a\u4e8b\u52a1\u8fdb\u884ccount\u8ba1\u6570\u7684\u7ed3\u679c\u53ef\u80fd\u662f\u4e0d\u4e00\u6837\u7684</li> <li>\u9700\u8981\u53bb\u9664\u6240\u6709\u8bb0\u5f55\u4e00\u884c\u4e00\u884c\u68c0\u67e5\u8ba1\u6570</li> <li>count\u65f6\u904d\u5386\u6700\u5c0f\u7684\u6811</li> </ul>"},{"location":"mysql/%E4%B8%8D%E5%90%8C%E7%9A%84count/#show-table-status","title":"show table status","text":"<ul> <li>\u7ed3\u679c\u4e2d\u7684table_rows\u4e0d\u51c6\u786e\uff0c\u91c7\u6837\u4f30\u7b97\u8868\u4e2d\u6709\u591a\u5c11\u884c\u8bb0\u5f55</li> <li>\u8bef\u5dee40-50%</li> </ul>"},{"location":"mysql/%E4%B8%8D%E5%90%8C%E7%9A%84count/#count","title":"\u52a0\u901fcount\u901f\u5ea6\u548c\u51c6\u786e\u5ea6","text":"<ul> <li>\u8bbe\u7f6eredis\u7f13\u5b58\uff0c\u901f\u5ea6\u53ef\u4ee5\uff0c\u4f46\u662f\u6570\u636e\u603b\u6709\u8bef\u5dee\uff0c\u4e14\u6613\u4e22\u5931</li> <li>\u8fd9\u4e24\u4e2a\u4e0d\u540c\u7684\u5b58\u50a8\u6784\u6210\u7684\u7cfb\u7edf\uff0c\u4e0d\u652f\u6301\u5206\u5e03\u5f0f\u4e8b\u52a1\uff0c\u65e0\u6cd5\u62ff\u5230\u7cbe\u786e\u4e00\u81f4\u7684\u89c6\u56fe</li> <li>\u7528mysql\u7684\u8868\u5b58\uff0c\u5f00\u542f\u4e8b\u52a1\u8fdb\u884c\u64cd\u4f5c</li> </ul>"},{"location":"mysql/%E4%B8%8D%E5%90%8C%E7%9A%84count/#count_1","title":"\u4e0d\u540c\u7684count","text":"<ul> <li>count\u662f\u4e00\u4e2a\u805a\u5408\u51fd\u6570\uff0c\u5bf9\u4e00\u4e2a\u7ed3\u679c\u96c6\u8fd4\u56de\u7684\u6570\u636e\u4e00\u4e00\u8fdb\u884c\u5224\u65ad\uff0c\u5982\u679ccount\u7684\u53c2\u6570\u4e0d\u662fNULL\uff0c\u5c31\u8fdb\u884c\u7d2f\u52a01\uff0c\u7136\u540e\u8fd4\u56de\u7d2f\u8ba1\u503c</li> <li>count(*), count(id), count(1) \u90fd\u8868\u793a\u8fd4\u56de\u7ed3\u679c\u96c6\u4e2d\u8bb0\u5f55\u7684\u603b\u6570</li> <li>count(\u5b57\u6bb5)\u8868\u793a\u7ed3\u679c\u96c6\u4e2d\uff0c\u5b57\u6bb5\u90e8\u4f4dnull\u7684\u603b\u6570</li> <li>count(*) \u6bcf\u4e00\u884c\u80af\u5b9a\u4e0d\u662fnull\uff0c\u6309\u884c\u7d2f\u52a0</li> <li>count(id) \u904d\u5386\u8868\uff0c\u53d6\u51fa\u6bcf\u884c\u7684id\uff0cserver\u5c42\u5224\u65ad\u4e0d\u662fnull\uff0c\u5c31\u7d2f\u52a01</li> <li>count(1) \u904d\u5386\u8868\uff0c\u4e0d\u53d6\u503c\uff0cserver\u5c42\u5bf91\u8fdb\u884c\u7d2f\u8ba1</li> <li>count(\u5b57\u6bb5)<ul> <li>\u5b57\u6bb5\u5b9a\u4e49\u4e0d\u5141\u8bb8\u4e3anull\uff0c\u8fd9\u5224\u65ad\u4e0d\u662fnull\uff0c\u7d2f\u52a01</li> <li>\u5b57\u6bb5\u5b9a\u4e49\u5141\u8bb8\u4e3anull\uff0c\u5224\u65ad\u5230\u6709\u53ef\u80fd\u662f null\uff0c\u8fd8\u8981\u628a\u503c\u53d6\u51fa\u6765\u518d\u5224\u65ad\u4e00\u4e0b\uff0c\u4e0d\u662f null \u624d\u7d2f\u52a0</li> </ul> </li> <li>\u6309\u7167\u6548\u7387\u6392\u5e8fcount(\u5b57\u6bb5) &lt; count(id) &lt; count(1) \u2248 count(*)</li> </ul>"},{"location":"mysql/%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4_%E5%B4%A9%E6%BA%83%E6%81%A2%E5%A4%8D/","title":"\u4e24\u9636\u6bb5\u63d0\u4ea4","text":""},{"location":"mysql/%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4_%E5%B4%A9%E6%BA%83%E6%81%A2%E5%A4%8D/#_1","title":"\u4e24\u9636\u6bb5\u63d0\u4ea4","text":""},{"location":"mysql/%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4_%E5%B4%A9%E6%BA%83%E6%81%A2%E5%A4%8D/#a","title":"\u65f6\u523bA\u5d29\u6e83","text":"<ul> <li>binlog\u672a\u5199\uff0credolog\u672a\u63d0\u4ea4</li> <li>\u91cd\u542f\u540e\u4e8b\u52a1\u76f4\u63a5\u56de\u6eda</li> </ul>"},{"location":"mysql/%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4_%E5%B4%A9%E6%BA%83%E6%81%A2%E5%A4%8D/#b","title":"\u65f6\u523bB\u5d29\u6e83\uff0c\u5d29\u6e83\u6062\u590d\u5224\u65ad\u89c4\u5219","text":"<ul> <li>redo log \u4e8b\u52a1 \u5b8c\u6574\uff0credo loga \u5df2\u7ecf\u6709\u4e86commit \u8868\u793a\uff0c\u63d0\u4ea4\u4e8b\u52a1</li> <li>redo log \u4e8b\u52a1\u53ea\u6709\u5b8c\u6574\u7684prepare\uff0c\u5224\u65ad\u5bf9\u5e94\u4e8b\u52a1\u7684binlog\u662f\u5426\u5b8c\u6574<ol> <li>binlog\u5b8c\u6574\uff0c\u63d0\u4ea4\u4e8b\u52a1</li> <li>binlog\u4e0d\u5b8c\u6574\uff0c\u56de\u6eda\u4e8b\u52a1</li> </ol> </li> </ul>"},{"location":"mysql/%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4_%E5%B4%A9%E6%BA%83%E6%81%A2%E5%A4%8D/#binlog","title":"\u5224\u65adbinlog \u5b8c\u6574","text":"<ul> <li>statement\u683c\u5f0f\u7684binlog\uff0c\u6700\u540e\u4f1a\u6709COMMIT</li> <li>row\u683c\u5f0f\u7684binlog\uff0c\u6700\u540e\u4f1a\u6709XID event</li> <li>binlog-checksum\u53c2\u6570\uff0c\u7528\u6765\u9a8c\u8bc1binlog\u7684\u5b8c\u6574\u6027</li> </ul>"},{"location":"mysql/%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4_%E5%B4%A9%E6%BA%83%E6%81%A2%E5%A4%8D/#redo-log-binlog","title":"redo log \u4e0ebinlog\u5173\u8054","text":"<ul> <li>\u5171\u6709\u6570\u636e\u5b57\u6bb5XID\uff0c\u5d29\u6e83\u6062\u590d\u65f6\u626b\u63cfredo log\u7684</li> <li>redolog \u6709commit\uff0c\u63d0\u4ea4\u4e8b\u52a1</li> <li>redolog \u53ea\u6709prepare\uff0c\u67e5\u8be2binlog\uff0cbinlog \u5b8c\u6574\u63d0\u4ea4\u4e8b\u52a1\uff0c\u5426\u5219\u56de\u6eda\u4e8b\u52a1</li> <li>redolog \u53ea\u6709prepare\uff0cbinlog\u5b8c\u6574\uff0c\u63d0\u4ea4\u4e8b\u52a1\u7684\u539f\u56e0\u662f\uff0cbinlog\u5df2\u7ecf\u88ab\u4ece\u5e93\u4f7f\u7528\uff0c\u4fdd\u8bc1\u4e3b\u4ece\u6570\u636e\u4e00\u81f4\u6027\uff0c\u624d\u9700\u8981\u63d0\u4ea4\u4e8b\u52a1</li> </ul>"},{"location":"mysql/%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4_%E5%B4%A9%E6%BA%83%E6%81%A2%E5%A4%8D/#redo-log-buffer","title":"redo log buffer","text":"<ul> <li>\u7f13\u5b58redo log\u8bb0\u5f55\u65e5\u5fd7</li> <li>\u4e8b\u52a1commit\u540e redolog buffer \u6e05\u7a7a\uff0credo log \u5199\u5165\u6587\u4ef6</li> </ul>"},{"location":"mysql/%E4%B8%B4%E6%97%B6%E6%8F%90%E9%AB%98%E6%80%A7%E8%83%BD/","title":"\u4e34\u65f6\u63d0\u9ad8\u6027\u80fd","text":""},{"location":"mysql/%E4%B8%B4%E6%97%B6%E6%8F%90%E9%AB%98%E6%80%A7%E8%83%BD/#_1","title":"\u77ed\u94fe\u63a5\u98ce\u66b4\uff0c\u652f\u6491\u66f4\u591a\u7684\u67e5\u8be2\u94fe\u63a5","text":"<ul> <li>\u5904\u7406\u6389\u5360\u7740\u8fde\u63a5\u4f46\u662f\u4e0d\u5de5\u4f5c\u7684\u7ebf\u7a0b<ul> <li>show processlist \u7684\u7ed3\u679c\u91cc\uff0c\u8e22\u6389\u663e\u793a\u4e3asleep\u7684\u7ebf\u7a0b</li> <li>sleep \u72b6\u6001 \u4e14 \u4e0d\u5728\u4e8b\u52a1\u4e2d\u7684\u8fde\u63a5</li> <li><code>kill connection id</code></li> <li>\u5ba2\u6237\u7aef\u4f1a\u53d7\u5230<code>lost connection to MySQL server during query</code></li> </ul> </li> <li>\u51cf\u5c11\u8fde\u63a5\u8fc7\u7a0b\u4e2d\u7684\u6d88\u8017<ul> <li>\u8df3\u8fc7\u6570\u636e\u5e93\u6743\u9650\u9a8c\u8bc1</li> <li>\u91cd\u542f\u6570\u636e\u5e93\uff0c\u4f7f\u7528 <code>-skip-grant-tables</code> \u53c2\u6570\u542f\u52a8</li> <li>\u8df3\u8fc7\u6240\u6709\u6743\u9650\u9a8c\u8bc1\uff0c\u5305\u62ec\u8fde\u63a5\u7b80\u5386\u548c\u8bed\u53e5\u6267\u884c\u8fc7\u7a0b</li> </ul> </li> </ul>"},{"location":"mysql/%E4%B8%B4%E6%97%B6%E6%8F%90%E9%AB%98%E6%80%A7%E8%83%BD/#_2","title":"\u6162\u67e5\u8be2\u5bfc\u81f4\u7684\u6027\u80fd\u95ee\u9898","text":"<ul> <li>\u7d22\u5f15\u6ca1\u6709\u8bbe\u8ba1\u597d<ul> <li>online ddl \u521b\u5efa\u7d22\u5f15</li> <li>alter table \u8bed\u53e5\u52a0\u7d22\u5f15</li> </ul> </li> <li>SQL\u8bed\u53e5\u6ca1\u6709\u5199\u597d<ul> <li>query_rewrite</li> <li>\u67e5\u8be2\u91cd\u5199\u529f\u80fd <pre><code>mysql&gt; insert into query_rewrite.rewrite_rules(pattern, replacement, pattern_database) values (\"select * from t where id + 1 = ?\", \"select * from t where id = ? - 1\", \"db1\");\ncall query_rewrite.flush_rewrite_rules();\n</code></pre></li> </ul> </li> <li>MySQL\u81ea\u52a8\u9009\u62e9\u9519\u4e86\u7d22\u5f15<ul> <li>\u6dfb\u52a0 force index</li> </ul> </li> </ul>"},{"location":"mysql/%E4%B8%B4%E6%97%B6%E6%8F%90%E9%AB%98%E6%80%A7%E8%83%BD/#qps","title":"QPS\u7a81\u589e\u95ee\u9898","text":"<ul> <li>\u6570\u636e\u5e93\u767d\u540d\u5355\u63a7\u5236</li> <li>\u5220\u9664\u6570\u636e\u5e93\u7528\u6237\uff0c\u7136\u540e\u65ad\u5f00\u8fd9\u4e2a\u7528\u6237\u6240\u6709\u7684\u8fde\u63a5</li> <li>\u67e5\u8be2\u8bed\u53e5\u91cd\u5199\uff0c\u538b\u529b\u5927\u7684SQL\u8f6c\u5199</li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E4%B8%80%E8%87%B4/","title":"\u4e3b\u5907\u4e00\u81f4","text":""},{"location":"mysql/%E4%B8%BB%E5%A4%87%E4%B8%80%E8%87%B4/#readonly","title":"\u4ece\u5e93readonly","text":"<ul> <li>\u4ece\u5e93\u53ea\u8bfb\uff0c\u9632\u6b62dml\u8bed\u53e5\u8bef\u64cd\u4f5c</li> <li>\u9632\u6b62\u4e3b\u5907\u5207\u6362\u8fc7\u7a0b\u6709bug\uff0c\u5bfc\u81f4\u53cc\u5199\uff0c\u9020\u6210\u4e3b\u5907\u4e0d\u4e00\u81f4</li> <li>readonly\u72b6\u6001\uff0c\u4fbf\u4e8e\u5224\u65ad\u5f53\u524d\u662f\u4e3b\u5e93\u8fd8\u662f\u4ece\u5e93</li> <li>readonly\u5bf9\u8d85\u7ea7\u6743\u9650\u7528\u6237\u662f\u65e0\u6548\u7684\uff0c\u6240\u4ee5binlog\u540c\u6b65\u64cd\u4f5c\u8fd8\u4f1a\u6b63\u5e38\u8fdb\u884c</li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E4%B8%80%E8%87%B4/#_1","title":"\u4e8b\u52a1\u65e5\u5fd7\u540c\u6b65\u5b8c\u6574\u8fc7\u7a0b","text":"<ol> <li>\u5907\u5e93B\u4e0a\u901a\u8fc7<code>change master</code>\uff0c\u8bbe\u7f6e\u4e3b\u5e93\u7684IP\uff0c\u7aef\u53e3\uff0c\u7528\u6237\u540d\uff0c\u5bc6\u7801\u4ee5\u53cabinlog\u6587\u4ef6\u540d\u548c\u504f\u79fb\u91cf</li> <li>\u5907\u5e93\u6267\u884c <code>start slave</code>\u547d\u4ee4\uff0c\u5f00\u59cb\u521b\u5efa<code>io_thread</code>\u548c<code>sql_thread</code><ul> <li><code>io_thread</code>\uff1a\u7528\u4e8e\u4ece\u4e3b\u5e93\u540c\u6b65binlog\u5230<code>relay_log</code></li> <li><code>sql_thread</code>\uff1a\u7528\u4e8e\u6267\u884crelay_log\u4e2d\u7684sql\u8bed\u53e5</li> </ul> </li> <li>\u4e3b\u5e93A\u6821\u9a8c\u5b8c\u7528\u6237\u540d\uff0c\u5bc6\u7801\u540e\uff0c\u5f00\u59cb\u6309\u7167\u4ece\u5e93\u4f20\u8fc7\u6765\u7684\u4f4d\u7f6e\uff0c\u4ece\u672c\u5730\u8bfb\u53d6binlog\uff0c\u53d1\u9001\u7ed9\u4ece\u5e93<ul> <li>binlog\u6587\u4ef6\u5728page cache\u4e2d\uff0c\u76f4\u63a5\u4ecepage cache\u53d6</li> <li>binlog\u6587\u4ef6\u5df2\u7ecf\u843d\u76d8\uff0c\u5219\u4ece\u78c1\u76d8\u8bfb\u53d6</li> </ul> </li> <li>\u4ece\u5e93\u62ff\u5230binlog\u540e\uff0c\u5199\u5230\u672c\u5730\u6587\u4ef6\uff0c\u79f0\u4e3a\u4e2d\u8f6c\u65e5\u5fd7<code>relay_log</code></li> <li><code>sql_thread</code>\u8bfb\u53d6\u4e2d\u8f6c\u65e5\u5fd7\uff0c\u89e3\u6790\u5e76\u6267\u884c\u65e5\u5fd7\u91cc\u7684\u547d\u4ee4</li> <li>\u4e3b\u5e93\u5185\u90e8\u6709\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u4e13\u95e8\u7528\u6765\u670d\u52a1\u67d0\u4e00\u4e2a\u4ece\u5e93\u7684\u957f\u94fe\u63a5 </li> </ol>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E4%B8%80%E8%87%B4/#binlog","title":"binlog \u683c\u5f0f","text":"<ul> <li>statement</li> <li>row</li> <li>mixed</li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E4%B8%80%E8%87%B4/#statement-binlog","title":"statement binlog","text":"<ul> <li>SET @@SESSION.GTID_NEXT='ANONYMOUS'</li> <li>BEGIN\u548cCOMMIT\u5bf9\u5e94\u7684\u662f\u4e00\u4e8b\u52a1\u7684\u5f00\u59cb\u548c\u63d0\u4ea4\uff0c\u4e2d\u95f4\u8bb0\u5f55\u7684\u662f\u4e00\u4e2a\u4e8b\u52a1</li> <li><code>use test;</code> \u786e\u4fdd\u65e5\u5fd7\u5230\u4ece\u5e93\uff0c\u4e0d\u8bba\u54ea\u4e2asql\u7ebf\u7a0b\u5de5\u4f5c\u5728\u54ea\u4e2a\u6570\u636e\u5e93\u91cc\uff0c\u4e5f\u4f1a\u6b63\u786e\u9009\u62e9test\u6570\u636e\u5e93\uff0c\u8fdb\u884c\u5220\u9664\u64cd\u4f5c</li> <li><code>statement</code>\u7684binlog\u5b8c\u6574\u8bb0\u5f55\u4e86\u8f93\u5165\u7684sql</li> <li><code>COMMIT; /*xid=61*/</code>\u672c\u6b21delete\u4e8b\u52a1\u63d0\u4ea4\uff0c\u8bb0\u5f55\u6267\u884c\u7684xid\u662f61</li> </ul> <p>XID\u662f\u7528\u6765\u8054\u7cfbbin log\u548credo log\u7684 redo log\u91cc\u9762\u6709\u4e00\u4e2a\u4e8b\u52a1\u662fprepare\u72b6\u6001\uff0c\u4f46\u4e0d\u786e\u5b9acommit\u72b6\u6001\uff0c\u53ef\u4ee5\u7528XID\u53bbbinlog\u91cc\u9762\u67e5\u8be2\u8be5\u4e8b\u52a1\u6709\u6ca1\u6709\u63d0\u4ea4 \u6709\u63d0\u4ea4\u5219\u662fcommit\u72b6\u6001\uff0c\u82e5\u6ca1\u6709\u63d0\u4ea4\u5219\u56de\u6eda\u8be5\u4e8b\u52a1</p>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E4%B8%80%E8%87%B4/#limitstatementbinlog","title":"\u5e26limit\u8bed\u53e5\u7684statement\u7c7b\u578b\u7684binlog\u4e0d\u5b89\u5168","text":"<ul> <li>\u4e3b\u5e93\u548c\u4ece\u5e93\u9009\u62e9\u7684\u7d22\u5f15\u4e0d\u4e00\u6837\u7684\u60c5\u51b5\u4e0b\u5bb9\u6613\u9020\u6210\u4e3b\u5e93\u548c\u4ece\u5e93\u64cd\u4f5c\u7684\u884c\u4e0d\u4e00\u81f4</li> <li>\u4f7f\u7528row\u683c\u5f0f\u7684binlog\u53ef\u4ee5\u63a7\u5236\u5220\u9664\u6570\u636e\u7684\u884c</li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E4%B8%80%E8%87%B4/#row-binlog","title":"row binlog","text":"<ul> <li>\u9700\u8981\u501f\u52a9mysqlbinlog\u5de5\u5177\u89e3\u6790\u4ea7\u751f\u7684binlog\u5185\u5bb9</li> <li>\u8bb0\u5f55\u771f\u5b9e\u53d8\u52a8\u884c\u7684\u4e3b\u952eid\u548c\u6570\u636e\u8868\u4fe1\u606f</li> <li>binlog\u5230\u4ece\u5e93\uff0c\u53ef\u4ee5\u6309\u7167id\u8fdb\u884cdml\uff0c\u4e0d\u4f1a\u4ea7\u751f\u4e3b\u5907\u4e0d\u4e00\u81f4\u7684\u95ee\u9898</li> <li>binlog_row_image\u914d\u7f6e<ul> <li>FULL\uff0c\u8bb0\u5f55\u6240\u4ee5\u5b57\u6bb5</li> <li>MINIMAL\uff0c\u8bb0\u5f55\u5fc5\u8981\u7684\u53d8\u66f4\u5b57\u6bb5 </li> </ul> </li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E4%B8%80%E8%87%B4/#mixed-binlog","title":"mixed binlog","text":"<ul> <li><code>statement binlog</code> \u5bb9\u6613\u9020\u6210\u4e3b\u5907\u4e0d\u4e00\u81f4</li> <li>\u5220\u9664\u6570\u636e\u91cf\u8fc7\u5927\u65f6\uff0cstatement\u7c7b\u578b\u7684binlog\u5c31\u5360\u51e0\u5341\u4e2a\u5b57\u8282\uff0c\u800c<code>row</code>\u9700\u8981\u628a\u5220\u9664\u7684\u8bb0\u5f55\u5168\u90e8\u8bb0\u5f55\u5230binlog\uff0c\u5360\u7528\u7a7a\u95f4\u8fc7\u5927\uff0c\u800c\u4e14\u5199binlog\u8fd8\u6709\u5360\u7528\u78c1\u76d8io\uff0c\u6d6a\u8d39\u5927\u91cf\u8d44\u6e90</li> <li>MySQL\u81ea\u5df1\u5224\u65adsql\u8bed\u53e5\u4f1a\u4e0d\u4f1a\u4ea7\u751f\u4e3b\u5907\u4e0d\u4e00\u81f4\uff0c\u5982\u679c\u4f1a\u4ea7\u751f\u5c31\u4f7f\u7528<code>row</code>\u683c\u5f0f\u7684binlog\uff0c\u5426\u5219\u4f7f\u7528<code>statement</code>\u683c\u5f0f\u7684binlog</li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E4%B8%80%E8%87%B4/#rowbinlog","title":"row\u683c\u5f0fbinlog\u7528\u6765\u6062\u590d\u6570\u636e","text":"<ul> <li>delete\u8bed\u53e5\u4f1a\u4fdd\u5b58\u5220\u6389\u7684\u6574\u884c\u7684\u4fe1\u606f</li> <li>insert\u8bed\u53e5\u4f1a\u4fdd\u5b58\u63d2\u5165\u540e\u7684\u884c\u7684\u4fe1\u606f</li> <li>update\u8bed\u53e5\u4f1a\u4fdd\u5b58\u66f4\u65b0\u524d\u548c\u66f4\u65b0\u540e\u7684\u8bb0\u5f55\u7684\u4fe1\u606f</li> <li>\u76f4\u63a5\u5e94\u7528row\u7684\u53cd\u5411\u64cd\u4f5c\u53ef\u4ee5\u8fdb\u884c\u6570\u636e\u6062\u590d</li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E4%B8%80%E8%87%B4/#binlog_1","title":"binlog\u540c\u6b65\u8bbe\u7f6e\u65f6\u95f4\u6233","text":"<ul> <li>\u5373\u4f7f\u8bb0\u5f55\u683c\u5f0f\u4e3a<code>statement</code>\u5728\u4ece\u5e93\u4e0a\u6267\u884c\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u65f6\u95f4</li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E4%B8%80%E8%87%B4/#binlog_2","title":"\u53cc\u4e3b\u7ed3\u6784binlog\u5faa\u73af\u590d\u5236","text":"<ul> <li>\u53cc\u4e3b\u7ed3\u6784\uff0c\u4e24\u4e2a\u8282\u70b9\u4e4b\u95f4\u4e92\u4e3a\u4e3b\u5907\uff0c\u65b9\u4fbf\u5feb\u901f\u5207\u6362</li> <li>binlog\u5faa\u73af\u590d\u5236\u95ee\u9898<ul> <li>A\u673a\u5668\u7684binlog\u590d\u5236\u5230B\u673a\u5668\u6267\u884c</li> <li>B\u673a\u5668\u7684binlog\u590d\u5236\u5230A\u7ea7\u5668\u6267\u884c</li> <li>\u5faa\u73af\u590d\u5236</li> </ul> </li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E4%B8%80%E8%87%B4/#_2","title":"\u5faa\u73af\u590d\u5236\u89e3\u51b3","text":"<ul> <li>MySQL\u5728binlog\u4e2d\u8bb0\u5f55\u4e86\u8fd9\u4e2asql\u7b2c\u4e00\u6b21\u6267\u884c\u65f6\u7684server id</li> <li>\u4e24\u4e2a\u4e3b\u5e93\u7684server id\u5fc5\u987b\u4e0d\u540c\uff0c\u76f8\u540c\u5219\u4e0d\u80fd\u8bbe\u7f6e\u4e3a\u4e3b\u5907\u5173\u7cfb</li> <li>\u4ece\u5e93\u6267\u884c\u5b8cbinlog\u540e\uff0c\u4ea7\u751f\u7684\u65b0binlog\u7684server id \u5fc5\u987b\u539fbinlog\u7684server id\u76f8\u540c</li> <li>\u6bcf\u4e2a\u4e3b\u5e93\u6536\u5230binlog\u540e\u5224\u65adserver id \u4e0e\u81ea\u5df1\u76f8\u540c\u5c31\u4e22\u5f03binlog</li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E5%BB%B6%E8%BF%9F/","title":"\u4e3b\u5907\u5ef6\u8fdf","text":""},{"location":"mysql/%E4%B8%BB%E5%A4%87%E5%BB%B6%E8%BF%9F/#_1","title":"\u4e3b\u5907\u5ef6\u8fdf\u8ba1\u7b97","text":"<ul> <li>\u4ece\u5e93\u8fde\u63a5\u4e3b\u5e93\u65f6\uff0c\u4f1a\u6267\u884c<code>SELECT UNIX_TIMESTAMP()</code>\u83b7\u53d6\u5f53\u524d\u4e3b\u5e93\u7684\u7cfb\u7edf\u65f6\u95f4</li> <li>\u6bcf\u4e2a\u4e8b\u52a1\u7684binlog \u91cc\u9762\u90fd\u6709\u4e00\u4e2a\u65f6\u95f4\u5b57\u6bb5\uff0c\u7528\u4e8e\u8bb0\u5f55\u4e3b\u5e93\u4e0a\u5199\u5165\u7684\u65f6\u95f4</li> <li>\u5907\u5e93\u53d6\u51fa\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u4e8b\u52a1\u7684\u65f6\u95f4\u5b57\u6bb5\u7684\u503c\uff0c\u8ba1\u7b97\u5b83\u4e0e\u5f53\u524d\u7cfb\u7edf\u7684\u65f6\u95f4\u7684\u5dee\u503c</li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E5%BB%B6%E8%BF%9F/#_2","title":"\u4e3b\u5907\u5ef6\u8fdf\u6765\u6e90","text":"<ul> <li>\u5907\u5e93\u673a\u5668\u6027\u80fd\u5f31\u4e8e\u4e3b\u5e93\u673a\u5668</li> <li>\u5907\u5e93\u538b\u529b\u5927\uff0c\u5907\u5e93\u4e0a\u7684\u67e5\u8be2\u8017\u8d39\u5927\u91cf\u7684CPU\u8d44\u6e90\uff0c\u5f71\u54cd\u540c\u6b65\u901f\u5ea6</li> <li>\u5927\u4e8b\u52a1\uff0c\u4e3b\u5e9310\u5206\u949f\u7684\u5927\u4e8b\u52a1\uff0c\u4ece\u5e93\u4e5f\u9700\u898110\u5206\u949f<ul> <li>\u4e00\u6b21\u6027delete\u8bed\u53e5\u5220\u9664\u592a\u591a\u6570\u636e</li> <li>\u5927\u8868DDL</li> </ul> </li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E5%BB%B6%E8%BF%9F/#_3","title":"\u4e3b\u5907\u6d41\u7a0b","text":""},{"location":"mysql/%E4%B8%BB%E5%A4%87%E5%BB%B6%E8%BF%9F/#_4","title":"\u4ece\u5e93\u5e76\u884c\u590d\u5236\u80fd\u529b","text":"<p> - \u4e0d\u80fd\u9020\u6210\u8986\u76d6\u66f4\u65b0\uff0c\u8981\u6c42\u66f4\u65b0\u540c\u4e00\u884c\u7684\u4e24\u4e2a\u4e8b\u52a1\uff0c\u5fc5\u987b\u88ab\u5206\u53d1\u5230\u540c\u4e00\u4e2aworker\u4e2d - \u540c\u4e00\u4e2a\u4e8b\u52a1\u4e0d\u80fd\u88ab\u62c6\u5f00\uff0c\u5fc5\u987b\u653e\u5230\u540c\u4e00\u4e2aworker\u4e2d</p>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E5%BB%B6%E8%BF%9F/#_5","title":"\u5206\u53d1\u7b56\u7565","text":"<ul> <li>\u6309\u8868\u5206\u53d1</li> <li>\u6309\u884c\u5206\u53d1</li> <li>\u6309\u5e93\u5206\u53d1</li> <li>\u6309\u7ec4\u5206\u53d1</li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E5%BB%B6%E8%BF%9F/#_6","title":"\u6309\u5e93\u5206\u53d1","text":"<ul> <li>MySQL5.6\u4e4b\u540e\u7684\u5e76\u884c\u590d\u5236\u7b56\u7565</li> <li>\u6309\u5e93\u5e76\u884c</li> <li>\u4e0d\u8981\u6c42binlog\u683c\u5f0f</li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E5%BB%B6%E8%BF%9F/#_7","title":"\u6309\u7ec4\u5206\u53d1","text":"<ul> <li>\u6a21\u4eff redo log \u7ec4\u63d0\u4ea4</li> <li>\u80fd\u591f\u5728\u540c\u4e00\u7ec4\u91cc\u63d0\u4ea4\u7684\u4e8b\u52a1\uff0c\u4e00\u5b9a\u4e0d\u4f1a\u4fee\u6539\u540c\u4e00\u884c\uff0c\u5982\u679c\u4fee\u6539\u540c\u4e00\u884ccommit\u7684\u65f6\u5019\u5c31\u4f1a\u88ab\u9501\u4f4f\uff0c\u7b49\u5f85\u9501\u7684\u4e8b\u52a1\u4f1a\u7b49\u5f85\u4e0d\u4f1a\u8fdb\u5165commit\u72b6\u6001</li> <li>\u4e3b\u5e93\u4e0a\u53ef\u4ee5\u5e76\u884c\u6267\u884c\u7684\u4e8b\u52a1\uff0c\u5907\u5e93\u4e0a\u4e00\u5b9a\u4e5f\u662f\u53ef\u4ee5\u5e76\u884c\u6267\u884c\u7684</li> <li>\u4e00\u4e2a\u7ec4\u91cc\u8fb9\u63d0\u4ea4\u7684\u4e8b\u52a1\uff0c\u6709\u4e00\u4e2a\u76f8\u540c\u7684commit id</li> <li>binlog\u4e2d\u5199\u5165 commit id</li> <li>\u76f8\u540c\u7684commit id\u7684\u4e8b\u52a1\u88ab\u5206\u53d1\u7684\u591a\u4e2aworker\u8fdb\u884c\u6267\u884c</li> <li>\u4e00\u4e2a\u7ec4\u7684commit\u6267\u884c\u5b8c\u540e\uff0c\u518d\u53d6\u4e0b\u4e00\u4e2a\u7ec4</li> </ul>"},{"location":"mysql/%E4%B8%BB%E5%A4%87%E5%BB%B6%E8%BF%9F/#_8","title":"\u7f3a\u70b9","text":"<ul> <li>\u4e00\u4e2a\u7ec4\u6267\u884c\u65f6\uff0c\u540e\u7eed\u7684\u7ec4\u53ea\u80fd\u7b49\u7740\uff0c\u541e\u5410\u91cf\u4e0d\u591f</li> <li>\u9047\u5230\u5927\u4e8b\u52a1\uff0c\u4e00\u4e2a\u7ec4\u91cc\u7684\u5176\u4ed6worker\uff0c\u53ea\u80fd\u7b49\u5f85\u5927\u4e8b\u52a1\u7684worker\u6267\u884c\u5b8c\uff0c\u624d\u8fdb\u884c\u4e0b\u4e00\u4e2a\u7ec4</li> </ul>"},{"location":"mysql/%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB/","title":"\u4e8b\u52a1\u9694\u79bb","text":""},{"location":"mysql/%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB/#_1","title":"\u4e8b\u52a1\u56db\u5927\u7279\u6027","text":"<ul> <li>\u9694\u79bb\u6027</li> <li>\u4e00\u81f4\u6027</li> <li>\u539f\u5b50\u6027</li> <li>\u6301\u4e45\u6027</li> </ul>"},{"location":"mysql/%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB/#_2","title":"\u4e8b\u52a1\u540c\u65f6\u5b58\u5728\u4ea7\u751f\u7684\u95ee\u9898","text":"<ul> <li>\u810f\u8bfb</li> <li>\u5e7b\u8bfb</li> <li>\u4e0d\u53ef\u91cd\u590d\u8bfb</li> </ul>"},{"location":"mysql/%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB/#_3","title":"\u6807\u51c6\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b","text":"<ul> <li>\u8bfb\u672a\u63d0\u4ea4\uff1a\u4e00\u4e2a\u4e8b\u52a1\u8fd8\u6ca1\u63d0\u4ea4\u65f6\uff0c\u5b83\u505a\u7684\u53d8\u66f4\u5c31\u80fd\u88ab\u522b\u7684\u4e8b\u52a1\u770b\u5230</li> <li>\u8bfb\u63d0\u4ea4\uff1a\u4e00\u4e2a\u4e8b\u52a1\u63d0\u4ea4\u4e4b\u540e\uff0c\u5b83\u505a\u7684\u53d8\u66f4\u624d\u4f1a\u88ab\u5176\u4ed6\u4e8b\u52a1\u770b\u5230\u3002</li> <li>\u53ef\u91cd\u590d\u8bfb\uff1a\u4e00\u4e2a\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\u770b\u5230\u7684\u6570\u636e\uff0c\u603b\u662f\u8ddf\u8fd9\u4e2a\u4e8b\u52a1\u5728\u542f\u52a8\u65f6\u770b\u5230\u7684\u6570\u636e\u662f\u4e00\u81f4\u7684\u3002\u5f53\u7136\u5728\u53ef\u91cd\u590d\u8bfb\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u672a\u63d0\u4ea4\u53d8\u66f4\u5bf9\u5176\u4ed6\u4e8b\u52a1\u4e5f\u662f\u4e0d\u53ef\u89c1\u7684</li> <li>\u4e32\u884c\u5316\uff1a\u6309\u987a\u5e8f\u6267\u884c\u4e8b\u52a1\uff0c\u4e0d\u5e76\u53d1\u6267\u884c</li> <li>\u8bbe\u7f6e\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b<code>SET GLOBAL TRANSACTION ISOLATION LEVEL REPEATABLE-READ;</code></li> </ul>"},{"location":"mysql/%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB/#_4","title":"\u89c6\u56fe\u521b\u5efa","text":"<ul> <li>\u53ef\u91cd\u590d\u5ea6\uff1a\u5728\u4e8b\u52a1\u542f\u52a8\u7684\u65f6\u5019\u521b\u5efa</li> <li>\u8bfb\u63d0\u4ea4\uff1a\u5728sql\u5f00\u59cb\u6267\u884c\u7684\u65f6\u5019\u521b\u5efa\u89c6\u56fe</li> <li>\u8bfb\u672a\u63d0\u4ea4\uff1a\u76f4\u63a5\u8bfb\u53d6\u8bb0\u5f55\u7684\u6700\u65b0\u503c\uff0c\u4e0d\u7528\u521b\u5efa\u89c6\u56fe</li> <li>\u4e32\u884c\u5316\uff1a\u7528\u52a0\u9501\u6765\u63a7\u5236\u4e8b\u52a1\uff0c\u4e0d\u9700\u8981\u89c6\u56fe</li> </ul>"},{"location":"mysql/%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB/#mvcc","title":"MVCC","text":"<ul> <li>\u6bcf\u6b21\u5bf9\u8bb0\u5f55\u66f4\u65b0\u65f6\uff0c\u90fd\u4f1a\u8bb0\u5f55\u4e00\u6761\u56de\u6eda\u65e5\u5fd7\u3002\u901a\u8fc7\u56de\u6eda\u65e5\u5fd7\u53ef\u4ee5\u5c06\u8bb0\u5f55\u8fd8\u539f\u5230\u66f4\u65b0\u524d\u7684\u72b6\u6001</li> <li>\u4e00\u6761\u6570\u636e\u5e93\u8bb0\u5f55\uff0c\u5728\u591a\u4e2a\u4e8b\u52a1\u4e2d\u4f1a\u6709\u4e0d\u540c\u7684\u7248\u672c\uff0c\u4e0d\u540c\u7684read-view</li> </ul>"},{"location":"mysql/%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB/#_5","title":"\u4e8b\u52a1\u7684\u542f\u52a8\u65b9\u5f0f","text":"<ul> <li>begin \u6216 start transaction\u3002\u914d\u5957\u7684\u63d0\u4ea4\u8bed\u53e5\u662f commit\uff0c\u56de\u6eda\u8bed\u53e5\u662f rollback</li> <li>set autocommit=0\uff0c\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5c06\u8fd9\u4e2a\u7ebf\u7a0b\u7684\u81ea\u52a8\u63d0\u4ea4\u5173\u6389\u3002\u4e8b\u52a1\u6301\u7eed\u5b58\u5728\u76f4\u5230\u4e3b\u52a8\u6267\u884c commit \u6216 rollback \u8bed\u53e5\u6216\u65ad\u5f00\u94fe\u63a5</li> <li>commit work and chain \u8bed\u6cd5 \u63d0\u4ea4\u4e00\u4e2a\u4e8b\u52a1\u540e\u81ea\u52a8\u5f00\u542f\u4e0b\u4e00\u4e2a\u4e8b\u52a1</li> </ul>"},{"location":"mysql/%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB/#_6","title":"\u4e8b\u52a1\u7248\u672c\u63a7\u5236","text":""},{"location":"mysql/%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB/#_7","title":"\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u6570\u636e\u7248\u672c\u4e0e\u4e8b\u52a1\u89c6\u56fe","text":"<ul> <li>\u7248\u672c\u672a\u63d0\u4ea4\uff0c\u4e0d\u53ef\u89c1</li> <li>\u6570\u636e\u7248\u672c\u5df2\u7ecf\u63d0\u4ea4\uff0c\u4f46\u662f\u662f\u5728\u4e8b\u52a1\u89c6\u56fe\u521b\u5efa\u540e\u63d0\u4ea4\u7684\uff0c\u4e0d\u53ef\u89c1</li> <li>\u6570\u636e\u7248\u672c\u5df2\u7ecf\u63d0\u4ea4\uff0c\u5728\u4e8b\u52a1\u89c6\u56fe\u521b\u5efa\u4e4b\u524d\u63d0\u4ea4\u7684\uff0c\u53ef\u89c1</li> </ul>"},{"location":"mysql/%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB/#_8","title":"\u66f4\u65b0\u6570\u636e\u65f6\uff0c\u6570\u636e\u7248\u672c\u4e0e\u4e8b\u52a1\u89c6\u56fe","text":"<ul> <li>\u66f4\u65b0\u6570\u636e\u65f6\uff0c\u4e0d\u80fd\u5728\u5386\u53f2\u7248\u672c\u4e0a\u66f4\u65b0\uff0c\u4f1a\u5bfc\u81f4\u65b0\u7248\u672c\u5df2\u7ecf\u63d0\u4ea4\u7684\u4e8b\u52a1\u66f4\u65b0\u5931\u6548</li> <li>\u66f4\u65b0\u6570\u636e\u90fd\u662f\u5148\u8bfb\u540e\u5199\u7684\uff0c\u53ea\u80fd\u7528\u5f53\u524d\u8bfb\uff0c\u4e5f\u5c31\u662f\u8bfb\u5f53\u524d\u7684\u503c</li> <li>select \u8bed\u53e5\u52a0\u4e86 <code>for update</code>\u6216\u8005\u662f<code>lock in share mode</code> \u4e5f\u662f\u5f53\u524d\u8bfb</li> <li>\u4e24\u4e2a\u4e8b\u52a1\u540c\u65f6\u66f4\u65b0\u540c\u4e00\u884c\u6570\u636e\uff0c\u5148\u542f\u52a8\u7684\u65f6\u5019\u4f1a\u6301\u6709MDL</li> </ul>"},{"location":"mysql/%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7/","title":"\u521b\u5efa\u7528\u6237","text":""},{"location":"mysql/%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7/#_1","title":"\u521b\u5efa\u9700\u8981\u5206\u914d\u7684\u6570\u636e\u5e93\uff0c\u5982\u679c\u6709\u8df3\u8fc7","text":"<pre><code>CREATE DATABASE ics_config_dev DEFAULT CHARSET utf8 collate utf8_general_ci;\n</code></pre>"},{"location":"mysql/%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7/#_2","title":"\u521b\u5efa\u7528\u6237","text":"<ul> <li>host\u6307\u5b9a\u8be5\u7528\u6237\u5728\u54ea\u4e2a\u4e3b\u673a\u4e0a\u53ef\u4ee5\u767b\u9646\uff0c\u5982\u679c\u662f\u672c\u5730\u7528\u6237\u53ef\u7528localhost\uff0c\u5982\u679c\u60f3\u8ba9\u8be5\u7528\u6237\u53ef\u4ee5\u4ece\u4efb\u610f\u8fdc\u7a0b\u4e3b\u673a\u767b\u9646\uff0c\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26%</li> <li>\u767b\u9646\u5bc6\u7801\uff0c\u5bc6\u7801\u53ef\u4ee5\u4e3a\u7a7a\uff0c\u5982\u679c\u4e3a\u7a7a\u5219\u8be5\u7528\u6237\u53ef\u4ee5\u4e0d\u9700\u8981\u5bc6\u7801\u767b\u9646\u670d\u52a1\u5668 <pre><code>CREATE USER 'userame'@'host' IDENTIFIED BY 'password';\n</code></pre></li> </ul>"},{"location":"mysql/%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7/#_3","title":"\u4e3a\u7528\u6237\u5206\u914d\u6570\u636e\u5e93\u6743\u9650","text":"<ul> <li>\u7528\u6237\u7684\u64cd\u4f5c\u6743\u9650\uff0c\u5982SELECT\uff0cINSERT\uff0cUPDATE\u7b49\uff0c\u5982\u679c\u8981\u6388\u4e88\u6240\u7684\u6743\u9650\u5219\u4f7f\u7528ALL</li> <li>\u5982\u679c\u8981\u6388\u4e88\u8be5\u7528\u6237\u5bf9\u6240\u6709\u6570\u636e\u5e93\u548c\u8868\u7684\u76f8\u5e94\u64cd\u4f5c\u6743\u9650\u5219\u53ef\u7528\u8868\u793a\uff0c\u5982.* <pre><code>GRANT ALL ON ics_config_dev.* TO 'ics_config_dev'@'%';\n</code></pre></li> </ul>"},{"location":"mysql/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/","title":"\u53ef\u91cd\u590d\u8bfb","text":""},{"location":"mysql/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/#_1","title":"\u4f5c\u8005\u603b\u7ed3","text":"<ul> <li>\u4e2a\u4eba\u5b66\u4e60</li> </ul>"},{"location":"mysql/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/#_2","title":"\u4e24\u4e2a\u539f\u5219","text":"<ul> <li>\u52a0\u9501\u7684\u57fa\u672c\u5355\u4f4d\u662fnext-key-lock\uff0c\u524d\u5f00\u540e\u95ed\u7684\u533a\u95f4</li> <li>\u67e5\u8be2\u8fc7\u7a0b\u4e2d\u8bbf\u95ee\u5230\u7684\u5bf9\u8c61\u624d\u4f1a\u52a0\u9501</li> </ul>"},{"location":"mysql/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/#_3","title":"\u4e24\u4e2a\u4f18\u5316","text":"<ul> <li>\u7d22\u5f15\u4e0a\u7684\u7b49\u503c\u67e5\u8be2\uff0c\u7ed9\u552f\u4e00\u7d22\u5f15\u52a0\u9501\u7684\u540enext-key-lock\u4f1a\u9000\u5316\u6210\u884c\u9501</li> <li>\u7d22\u5f15\u4e0a\u7684\u7b49\u503c\u67e5\u8be2\uff0c\u5411\u53f3\u904d\u5386\u65f6\u4e14\u6700\u540e\u4e00\u4e2a\u503c\u4e0d\u6ee1\u8db3\u7b49\u503c\u6761\u4ef6\u7684\u65f6\u5019\uff0cnext-key-lock\u9000\u5316\u4e3a\u95f4\u9699\u9501</li> </ul>"},{"location":"mysql/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/#bug","title":"\u4e00\u4e2abug","text":"<ul> <li>\u552f\u4e00\u7d22\u5f15\u4e0a\u7684\u8303\u56f4\u67e5\u8be2\u4f1a\u8bbf\u95ee\u5230\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u7b2c\u4e00\u4e2a\u503c\u4e3a\u6b62</li> </ul>"},{"location":"mysql/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/#_4","title":"\u662f\u5426\u9501\u4e3b\u952e\u7d22\u5f15","text":"<ul> <li>\u8986\u76d6\u7d22\u5f15\u7684\u60c5\u51b5lock in share mode \u4e0d\u4f1a\u9501\u4e3b\u952e\u7d22\u5f15</li> <li>select * for update \u4f1a\u9501\u4e3b\u952e</li> </ul>"},{"location":"mysql/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/#sql","title":"SQL","text":"<pre><code>CREATE TABLE `t` (\n`id` int(11) NOT NULL,\n`c` int(11) DEFAULT NULL,\n`d` int(11) DEFAULT NULL,\nPRIMARY KEY (`id`),\nKEY `c` (`c`)\n) ENGINE=InnoDB;\ninsert into t values(0,0,0),(5,5,5),\n(10,10,10),(15,15,15),(20,20,20),(25,25,25);\n</code></pre>"},{"location":"mysql/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/#_5","title":"\u7b49\u503c\u67e5\u8be2\u95f4\u9699\u9501","text":""},{"location":"mysql/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/#_6","title":"\u975e\u552f\u4e00\u7d22\u5f15\u7b49\u503c\u9501","text":""},{"location":"mysql/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/#_7","title":"\u4e3b\u952e\u7d22\u5f15\u8303\u56f4\u9501","text":""},{"location":"mysql/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/#_8","title":"\u975e\u552f\u4e00\u7d22\u5f15\u8303\u56f4\u9501","text":""},{"location":"mysql/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/#bug_1","title":"\u552f\u4e00\u7d22\u5f15\u8303\u56f4\u9501 \u4e00\u4e2abug","text":""},{"location":"mysql/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/#_9","title":"\u975e\u552f\u4e00\u7d22\u5f15\u4e0a\u5b58\u5728\u7b49\u503c\u7684\u4f8b\u5b50","text":""},{"location":"mysql/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/#limit","title":"limit\u8bed\u53e5\u52a0\u9501","text":"<ul> <li>\u5220\u9664\u6570\u636e\u7684\u65f6\u5019\u5c3d\u91cf\u6dfb\u52a0limit\uff0c\u53ef\u4ee5\u63a7\u5236\u5220\u9664\u6570\u636e\u7684\u6761\u6570\uff0c\u51cf\u5c0f\u9501\u7684\u8303\u56f4</li> </ul>"},{"location":"mysql/%E5%90%84%E7%A7%8D%E9%94%81/","title":"\u5404\u79cd\u9501","text":""},{"location":"mysql/%E5%90%84%E7%A7%8D%E9%94%81/#_1","title":"\u9501","text":"<ul> <li>\u5168\u5c40\u9501</li> <li>\u8868\u7ea7\u9501</li> <li>\u884c\u9501</li> </ul>"},{"location":"mysql/%E5%90%84%E7%A7%8D%E9%94%81/#_2","title":"\u5168\u5c40\u9501","text":"<ul> <li>\u5bf9\u6574\u4e2a\u6570\u636e\u5e93\u5b9e\u4f8b\u52a0\u9501</li> <li><code>Flush tables with read lock</code></li> <li>\u9700\u8981\u6574\u4e2a\u6570\u636e\u5e93\u5904\u4e8e\u53ea\u8bfb\u72b6\u6001\u7684\u65f6\u5019\u53ef\u4ee5\u52a0\u9501</li> <li>\u6267\u884c\u547d\u4ee4\u8fde\u63a5\u65ad\u5f00\u540e\uff0c\u6570\u636e\u5e93\u6062\u590d\u53ef\u5199\u72b6\u6001</li> <li>\u963b\u585e\u4ee5\u4e0b\u8bed\u53e5<ul> <li>\u6570\u636e\u7684\u589e\u5220\u6539\u67e5</li> <li>\u6570\u636e\u5b9a\u4e49\u8bed\u53e5\uff0c\u5305\u62ec\u5efa\u8868\u548c\u4fee\u6539\u8868\u7ed3\u6784\u8bed\u53e5</li> <li>\u66f4\u65b0\u7c7b\u4e8b\u52a1\u7684\u63d0\u4ea4\u8bed\u53e5</li> <li>\u5178\u578b\u4f7f\u7528\u573a\u666f\uff0c\u5168\u5e93\u903b\u8f91\u5907\u4efd</li> </ul> </li> </ul>"},{"location":"mysql/%E5%90%84%E7%A7%8D%E9%94%81/#_3","title":"\u8868\u7ea7\u9501","text":"<ul> <li>\u8868\u9501</li> <li>MDL metadata lock\u5143\u6570\u636e\u9501</li> </ul>"},{"location":"mysql/%E5%90%84%E7%A7%8D%E9%94%81/#_4","title":"\u8868\u9501","text":"<ul> <li><code>lock tables ... read/write</code></li> <li><code>unlock tables</code> \u4e3b\u52a8\u91ca\u653e\u9501</li> <li>\u9501\u4f4f\u5176\u4ed6\u7ebf\u7a0b\u548c\u81ea\u5df1\u672c\u8eab</li> </ul>"},{"location":"mysql/%E5%90%84%E7%A7%8D%E9%94%81/#mdl-metadata-lock","title":"MDL\u9501 metadata lock","text":"<ul> <li>MDL\u4e0d\u9700\u8981\u663e\u793a\u4f7f\u7528\uff0c\u5728\u8bbf\u95ee\u4e00\u4e2a\u8868\u7684\u65f6\u5019\u4f1a\u88ab\u81ea\u52a8\u52a0\u4e0a</li> <li>\u7528\u6765\u4fdd\u8bc1\u8bfb\u5199\u7684\u6b63\u786e\u6027</li> <li>\u5f53\u5bf9\u4e00\u4e2a\u8868\u8fdb\u884c\u589e\u5220\u6539\u67e5\u7684\u65f6\u5019\u52a0MDL\u8bfb\u9501</li> <li>\u5f53\u5bf9\u8868\u7ed3\u6784\u505a\u53d8\u66f4\u7684\u65f6\u5019\uff0c\u52a0\u4e00\u4e2aMDL\u5199\u9501</li> <li>\u8bfb\u9501\u4e4b\u95f4\u4e0d\u4e92\u65a5\uff0c\u56e0\u6b64\u4e00\u4e2a\u8868\u53ef\u4ee5\u6709\u591a\u4e2a\u589e\u5220\u6539\u67e5</li> <li>\u8bfb\u5199\u9501\u4e4b\u95f4\uff0c\u5199\u9501\u4e4b\u95f4\u662f\u4e92\u65a5\u7684\uff0c\u7528\u6765\u4fdd\u8bc1\u53d8\u66f4\u8868\u7ed3\u6784\u64cd\u4f5c\u7684\u5b89\u5168\u6027</li> <li>MDL\u4f1a\u6301\u7eed\u5230\u4e8b\u52a1\u63d0\u4ea4\u624d\u91ca\u653e\uff0c\u505a\u8868\u7ed3\u6784\u53d8\u66f4\u7684\u65f6\u5019\u5bb9\u6613\u9501\u4f4f\u7ebf\u4e0a\u7684\u67e5\u8be2\u548c\u66f4\u65b0</li> </ul>"},{"location":"mysql/%E5%90%84%E7%A7%8D%E9%94%81/#_5","title":"\u884c\u9501","text":"<ul> <li>\u9488\u5bf9\u6570\u636e\u8868\u4e2d\u884c\u8bb0\u5f55\u7684\u9501</li> </ul>"},{"location":"mysql/%E5%90%84%E7%A7%8D%E9%94%81/#_6","title":"\u4e24\u9636\u6bb5\u9501","text":"<ul> <li>\u884c\u9501\u5728\u9700\u8981\u7684\u65f6\u5019\u88ab\u52a0\u4e0a\uff0c\u4f46\u662f\u4e0d\u4f1a\u7acb\u523b\u91ca\u653e\uff0c\u8981\u7b49\u5230\u4e8b\u52a1\u7ed3\u675f\u65f6\u624d\u91ca\u653e</li> <li>\u4e8b\u52a1\u4e2d\u9700\u8981\u9501\u591a\u4e2a\u884c\uff0c\u628a\u6700\u53ef\u80fd\u9020\u6210\u884c\u9501\u51b2\u7a81\uff0c\u6700\u53ef\u80fd\u5f71\u54cd\u5e76\u53d1\u5ea6\u7684\u9501\u5c3d\u91cf\u5f80\u540e\u653e</li> </ul>"},{"location":"mysql/%E5%90%84%E7%A7%8D%E9%94%81/#_7","title":"\u6b7b\u9501","text":"<ul> <li>\u5e76\u53d1\u7cfb\u7edf\u4e2d\u4e0d\u540c\u7ebf\u7a0b\u51fa\u73b0\u8d44\u6e90\u4f9d\u8d56\uff0c\u6d89\u53ca\u7684\u7ebf\u7a0b\u90fd\u5728\u7b49\u5f85\u5176\u4ed6\u7ebf\u7a0b\u91ca\u653e\u8d44\u6e90\uff0c\u5bfc\u81f4\u7ebf\u7a0b\u8fdb\u5165\u65e0\u9650\u7b49\u5f85\u72b6\u6001\uff0c\u5c31\u662f\u6b7b\u9501</li> </ul>"},{"location":"mysql/%E5%90%84%E7%A7%8D%E9%94%81/#_8","title":"\u6b7b\u9501\u7b56\u7565","text":"<ul> <li>\u76f4\u63a5\u8fdb\u5165\u7b49\u5f85\uff0c\u76f4\u5230\u8d85\u65f6\uff0c\u8d85\u65f6\u65f6\u95f4\u901a\u8fc7innodb_lock_wait_timeout\u6765\u8bbe\u7f6e</li> <li>\u53d1\u8d77\u6b7b\u9501\u68c0\u6d4b\uff0c\u53d1\u73b0\u6b7b\u9501\u540e\uff0c\u4e3b\u52a8\u56de\u6eda\u6b7b\u9501\u94fe\u6761\u4e2d\u7684\u67d0\u4e00\u4e2a\u4e8b\u52a1\uff0c\u8ba9\u5176\u4ed6\u4e8b\u52a1\u5f97\u4ee5\u7ee7\u7eed\u6267\u884c\uff0c\u53c2\u6570innodb_deadlock_detect \u8bbe\u7f6e\u4e3aon</li> </ul>"},{"location":"mysql/%E5%90%84%E7%A7%8D%E9%94%81/#_9","title":"\u4e3b\u52a8\u6b7b\u9501\u68c0\u6d4b","text":"<ul> <li>\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u4f1a\u68c0\u67e5\u4f1a\u4e0d\u4f1a\u56e0\u4e3a\u81ea\u5df1\u7684\u52a0\u5165\u5bfc\u81f4\u4e86\u6b7b\u9501\uff0c\u7ebf\u7a0b\u6570\u91cf\u591a\u7684\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u5faa\u73af\u68c0\u6d4b\u4f1a\u8017\u8d39\u5927\u91cfCPU</li> </ul>"},{"location":"mysql/%E5%90%84%E7%A7%8D%E9%94%81/#_10","title":"\u89e3\u51b3\u65b9\u6848","text":"<ul> <li>\u5173\u95ed\u6b7b\u9501\u68c0\u6d4b\uff0c\u6b7b\u9501\u7b49\u5f85\u8d85\u65f6\u62a5\u9519\u540e\uff0c\u4e1a\u52a1\u91cd\u8bd5</li> <li>\u63a7\u5236\u5e76\u53d1\u7ebf\u7a0b\u6570\u91cf</li> <li>\u8c03\u6574\u4e1a\u52a1\u903b\u8f91\uff0c\u987a\u5e8f\u65e0\u5173\u7684\u903b\u8f91\u968f\u673a\u9009\u62e9\u4e00\u6761\u6267\u884c</li> </ul>"},{"location":"mysql/%E5%B9%BB%E8%AF%BB/","title":"\u5e7b\u8bfb","text":""},{"location":"mysql/%E5%B9%BB%E8%AF%BB/#_1","title":"\u5b9a\u4e49","text":"<ul> <li>\u4e00\u4e2a\u4e8b\u52a1\u5728\u524d\u540e\u4e24\u6b21\u67e5\u8be2\u540c\u4e00\u4e2a\u8303\u56f4\u7684\u65f6\u5019\uff0c\u540e\u4e00\u6b21\u67e5\u8be2\u770b\u5230\u4e86\u524d\u4e00\u6b21\u6ca1\u6709\u770b\u5230\u7684\u884c</li> </ul>"},{"location":"mysql/%E5%B9%BB%E8%AF%BB/#_2","title":"\u8bf4\u660e","text":"<ul> <li>\u53ef\u91cd\u590d\u8bfbRR\u6a21\u5f0f\u4e0b\uff0c\u666e\u901a\u7684\u67e5\u8be2\u662f\u5feb\u7167\u8bfb\uff0c\u9700\u8981\u8fd8\u539f\u4e8b\u52a1\u542f\u52a8\u524d\u7684\u6700\u8fd1\u7684\u4e00\u6b21\u53ef\u89c1MVCC\u7248\u672c</li> <li>\u5f53\u524d\u8bfb\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u80fd\u770b\u5230\u5e7b\u8bfb</li> <li>\u5e7b\u8bfb\u4ec5\u4e13\u6307\u65b0\u63d2\u5165\u7684\u884c</li> </ul>"},{"location":"mysql/%E5%B9%BB%E8%AF%BB/#gap-lock","title":"\u95f4\u9699\u9501 gap lock \u89e3\u51b3\u5e7b\u8bfb","text":"<ul> <li>\u53ea\u5728\u53ef\u91cd\u590d\u5ea6\u9694\u79bb\u7ea7\u522b\u4e0b\u624d\u751f\u6548</li> <li>\u5f53\u524d\u8bfb for update \u6216 lock in share mode</li> <li>\u95f4\u9699\u9501\u4e4b\u95f4\u4e0d\u5b58\u5728\u51b2\u7a81\u5173\u7cfb</li> <li>\u95f4\u9699\u9501\u5f15\u5165\uff0c\u4f1a\u9501\u4f4f\u66f4\u5927\u8303\u56f4\uff0c\u4f1a\u5f71\u54cd\u5e76\u53d1\u5ea6</li> </ul>"},{"location":"mysql/%E5%B9%BB%E8%AF%BB/#next-key-lock","title":"next-key lock","text":"<ul> <li>\u95f4\u9699\u9501\u548c\u884c\u9501\u5408\u79f0next-key lock</li> <li>\u6bcf\u4e2anext-key lock\u90fd\u662f\u524d\u5f00\u540e\u95ed\u533a\u95f4</li> <li>next-key lock \u5148\u52a0\u95f4\u9699\u9501\uff0c\u7136\u540e\u52a0\u884c\u9501</li> </ul>"},{"location":"mysql/%E5%B9%BB%E8%AF%BB/#_3","title":"\u4e0d\u4f7f\u7528\u95f4\u9699\u9501\u89e3\u51b3\u5e7b\u8bfb","text":"<ul> <li>\u9694\u79bb\u7ea7\u522b\u8bbe\u7f6e\u4e3a\u8bfb\u63d0\u4ea4</li> <li>binlog\u8bbe\u7f6e\u4e3arow\u683c\u5f0f</li> </ul>"},{"location":"mysql/%E6%9B%B4%E6%96%B0%E8%AF%AD%E5%8F%A5/","title":"\u66f4\u65b0\u8bed\u53e5","text":""},{"location":"mysql/%E6%9B%B4%E6%96%B0%E8%AF%AD%E5%8F%A5/#wal","title":"WAL","text":"<ul> <li>Write-Ahead Logging</li> <li>\u5148\u5199\u65e5\u5fd7\uff0c\u518d\u5199\u78c1\u76d8</li> </ul>"},{"location":"mysql/%E6%9B%B4%E6%96%B0%E8%AF%AD%E5%8F%A5/#redo-log","title":"redo log","text":"<ul> <li>InnoDB\u5f15\u64ce\u7279\u6709\u7684\u65e5\u5fd7</li> <li>\u66f4\u65b0\u8bb0\u5f55\u65f6\uff0c\u5148\u5199redo log\uff0c\u7136\u540e\u66f4\u65b0\u5185\u5b58\uff0c\u7136\u540e\u66f4\u65b0\u5c31\u5b8c\u6210\u4e86</li> <li>InnoDB\u5f15\u64ce\u4f1a\u5728\u7cfb\u7edf\u6bd4\u8f83\u7a7a\u95f2\u7684\u65f6\u5019\uff0c\u5c06\u64cd\u4f5c\u8bb0\u5f55\u66f4\u65b0\u5230\u78c1\u76d8</li> <li> <p>redo log \u53ef\u5199\u5165\u7a7a\u95f4\u56fa\u5b9a\u5927\u5c0f\uff0c\u5faa\u73af\u5199\u5165  </p> </li> <li> <p>write pos \u5f53\u524d\u8bb0\u5f55\u7684\u4f4d\u7f6e</p> </li> <li>checkpoint \u5f53\u524d\u8981\u64e6\u9664\u7684\u4f4d\u7f6e\uff0c\u5f80\u540e\u63a8\uff0c\u5e76\u4e14\u5faa\u73af\u7684\uff0c\u64e6\u9664\u8bb0\u5f55\u524d\u8981\u628a\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u6587\u4ef6</li> <li>\u6709\u4e86redo log InnoDB\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u5373\u4f7f\u6570\u636e\u5e93\u53d1\u751f\u5f02\u5e38\u91cd\u542f\uff0c\u4e4b\u524d\u7684\u8bb0\u5f55\u4e5f\u4e0d\u4f1a\u4e22\u5931\uff0ccrash-safe</li> </ul>"},{"location":"mysql/%E6%9B%B4%E6%96%B0%E8%AF%AD%E5%8F%A5/#redologbinlog","title":"redolog\u548cbinlog\u533a\u522b","text":"<ul> <li>redo log\u662fInnoDB\u5f15\u64ce\u7279\u6709\u7684\uff0cbinlog\u662fMySQL\u7684Server\u5c42\u5b9e\u73b0\u7684\uff0c\u6240\u6709\u5f15\u64ce\u90fd\u53ef\u4ee5\u4f7f\u7528</li> <li>redo log\u662f\u7269\u7406\u65e5\u5fd7\uff0c\u8bb0\u5f55\u7684\u662f\u5728\u67d0\u4e2a\u6570\u636e\u9875\u4e0a\u505a\u4e86\u4ec0\u4e48\u4fee\u6539\uff0cbinlog\u662f\u903b\u8f91\u65e5\u5fd7\uff0c\u8bb0\u5f55\u7684\u662f\u8fd9\u4e2a\u8bed\u53e5\u7684\u539f\u59cb\u903b\u8f91</li> <li>redo log \u662f\u5faa\u73af\u5199\u7684\uff0c\u7a7a\u95f4\u56fa\u5b9a\u4e14\u4f1a\u7528\u5b8c\uff0cbinlog\u662f\u8ffd\u52a0\u5199\u5165\u7684\uff0c\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\u5199\u5b8c\u4f1a\u5207\u6362\u5230\u4e0b\u4e00\u4e2a\uff0c\u5e76\u4e0d\u4f1a\u8986\u76d6\u4ee5\u524d\u7684\u65e5\u5fd7</li> </ul>"},{"location":"mysql/%E6%9B%B4%E6%96%B0%E8%AF%AD%E5%8F%A5/#_1","title":"\u66f4\u65b0\u6570\u636e\u6d41\u7a0b","text":"<ul> <li>\u6267\u884c\u5668\u627e\u5230\u6570\u636e\uff0c\u6570\u636e\u5728\u5185\u5b58\u9875\u4e0a\u76f4\u63a5\u8fd4\u56de\u7ed9\u6267\u884c\u5668\uff0c\u4e0d\u5728\u5c31\u53bb\u78c1\u76d8\u4e0a\u67e5\u627e\u7136\u540e\u8fd4\u56de\u7ed9\u6267\u884c\u5668</li> <li>\u6267\u884c\u5668\u4fee\u6539\u6570\u636e\uff0c\u8c03\u7528\u5f15\u64ce\u63a5\u53e3\uff0c\u5199\u5165\u65b0\u6570\u636e</li> <li>\u5f15\u64ce\u5c06\u65b0\u6570\u636e\u66f4\u65b0\u5230\u5185\u5b58\u4e2d\uff0c\u540c\u65f6\u5c06\u8fd9\u4e2a\u66f4\u65b0\u64cd\u4f5c\u8bb0\u5f55\u5230redolog\u91cc\u3002\u7136\u540eredolog\u5904\u4e8e prepare\u72b6\u6001\uff0c\u7136\u540e\u544a\u77e5\u6267\u884c\u5668\u53ef\u4ee5\u63d0\u4ea4\u4e8b\u52a1</li> <li>\u6267\u884c\u5668\u751f\u6210binlog\uff0cbinlog\u5199\u5165\u78c1\u76d8</li> <li>\u8c03\u7528\u5f15\u64ce\u7684\u63d0\u4ea4\u4e8b\u52a1\u63a5\u53e3\uff0c\u5f15\u64ce\u628a\u521a\u521a\u5199\u5165\u7684redolog\u6539\u6210\u63d0\u4ea4\u72b6\u6001\uff0c\u66f4\u65b0\u5b8c\u6210 </li> </ul>"},{"location":"mysql/%E6%9B%B4%E6%96%B0%E8%AF%AD%E5%8F%A5/#_2","title":"\u4e24\u9636\u6bb5\u63d0\u4ea4","text":"<ul> <li>1 prepare\u9636\u6bb5 2 \u5199binlog 3 commit</li> <li>\u5f53\u57282\u4e4b\u524d\u5d29\u6e83\u65f6\uff0c\u91cd\u542f\u6062\u590d\uff1a\u540e\u53d1\u73b0\u6ca1\u6709commit\uff0c\u56de\u6eda\u3002\u5907\u4efd\u6062\u590d\uff1a\u6ca1\u6709binlog \u3002\u6570\u636e\u4e00\u81f4</li> <li>\u5f53\u57283\u4e4b\u524d\u5d29\u6e83\uff0c\u91cd\u542f\u6062\u590d\uff1a\u867d\u6ca1\u6709commit\uff0c\u4f46\u6ee1\u8db3prepare\u548cbinlog\u5b8c\u6574\uff0c\u6240\u4ee5\u91cd\u542f\u540e\u4f1a\u81ea\u52a8commit\u3002\u5907\u4efd\uff1a\u6709binlog. \u6570\u636e\u4e00\u81f4</li> </ul>"},{"location":"mysql/%E6%9B%B4%E6%96%B0%E8%AF%AD%E5%8F%A5/#flush","title":"\u5237\u810f\u9875\u5230\u78c1\u76d8 flush","text":"<ul> <li>redolog\u6ee1\u4e86\uff0c\u7136\u540e\u5237\u5230\u78c1\u76d8\u3002\u7cfb\u7edf\u4f1a\u505c\u6b62\u6240\u6709\u66f4\u65b0\u64cd\u4f5c</li> <li>\u7cfb\u7edf\u5185\u5b58\u4e0d\u8db3\uff0c\u9700\u8981\u65b0\u7684\u5185\u5b58\u9875\u7684\u65f6\u5019\uff0c\u6dd8\u6c70\u4e00\u4e9b\u6700\u4e45\u4e0d\u4f7f\u7528\u6570\u636e\u9875\uff0c\u6dd8\u6c70\u7684\u662f\u810f\u9875\u7684\u8bdd\uff0c\u5c31\u9700\u8981\u5237\u65b0\u810f\u9875\u5230\u78c1\u76d8</li> <li>mysql\u7cfb\u7edf\u7a7a\u95f2\u65f6\uff0c\u5237\u65b0\u810f\u9875\u5230\u78c1\u76d8</li> <li>mysql \u6b63\u5e38\u5173\u95ed\uff0c\u5237\u65b0\u810f\u9875\u5230\u78c1\u76d8</li> <li>\u6b63\u5e38\u5237\u810f\u9875\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u628a\u90bb\u5c45\u5982\u679c\u4e5f\u662f\u810f\u9875\u7684\u8bdd\u90fd\u5237\u6389\uff0c\u7136\u540e\u8fd8\u4f1a\u53bb\u7ee7\u7eed\u5224\u65ad\u90bb\u5c45\u7684\u90bb\u5c45\u662f\u4e0d\u662f\u4e5f\u662f\u810f\u9875\uff0c\u53ef\u4ee5\u901a\u8fc7<code>innodb_flush_neighbors</code>\u8bbe\u7f6e\u4e3a0\uff0c\u5173\u95ed\u90bb\u5c45\u810f\u9875\u68c0\u6d4b</li> </ul>"},{"location":"mysql/%E6%9B%B4%E6%96%B0%E8%AF%AD%E5%8F%A5/#change-buffer","title":"change buffer","text":"<ul> <li>\u5360\u7528buffer pool\u7684\u5bb9\u91cf</li> <li>\u66f4\u65b0\u7684\u6570\u636e\u9875\u5982\u679c\u5728\u5185\u5b58\u4e2d\u76f4\u63a5\u66f4\u65b0\uff0c\u4e0d\u5728\u5185\u5b58\u4e2d\u5c31\u4f1a\u5728change buffer\u4e2d\u8bb0\u5f55\u5bf9\u8bb0\u5f55\u7684\u64cd\u4f5c</li> <li>\u9700\u8981\u67e5\u8be2\u8be5\u8bb0\u5f55\u7684\u65f6\u5019\u5c31\u4f1a\u5c06\u6570\u636e\u9875\u8bfb\u5165\u5185\u5b58\uff0c\u5e94\u7528change buffer\u4e2d\u7684\u64cd\u4f5c</li> <li>\u53ef\u4ee5\u6301\u4e45\u5316\uff0c\u5728\u5185\u5b58\u4e2d\u6709\u62f7\u8d1d\u4e5f\u53ef\u4ee5\u5199\u5165\u5230\u78c1\u76d8\u4e0a</li> <li>\u51cf\u5c11\u4e86\u78c1\u76d8\u968f\u673a\u8bfb\u7684\u6d88\u8017</li> <li>\u5199\u591a\u5ea6\u5c11\u7684\u4e1a\u52a1\u4f7f\u7528change buffer \u610f\u4e49\u8f83\u5927\uff0c\u5199\u540e\u7acb\u5373\u8bfb\uff0c\u6ca1\u6709\u51cf\u5c11\u78c1\u76d8\u7684io\u64cd\u4f5c\uff0c\u610f\u4e49\u4e0d\u5927</li> <li>\u66f4\u65b0\u65f6\u5148\u8bb0\u5f55change buffer \u548c\u5185\u5b58\uff0c\u7136\u540e\u5c06\u64cd\u4f5c\u8bb0\u5f55\u5230redo log</li> </ul>"},{"location":"mysql/%E6%9B%B4%E6%96%B0%E8%AF%AD%E5%8F%A5/#change-buffer-merge","title":"\u5e94\u7528change buffer \u5230\u6570\u636e\u9875\u7684\u64cd\u4f5c\u79f0\u4e3amerge\uff0c\u89e6\u53d1\u65f6\u673a","text":"<ul> <li>\u67e5\u8be2\u8bed\u53e5</li> <li>\u5b9a\u65f6\u66f4\u65b0</li> <li>\u6570\u636e\u5e93\u6b63\u5e38\u5173\u95ed</li> </ul>"},{"location":"mysql/%E6%9B%B4%E6%96%B0%E8%AF%AD%E5%8F%A5/#change-buffer_1","title":"\u66f4\u65b0\u65f6\u662f\u5426\u4f7f\u7528change buffer","text":"<ul> <li>\u66f4\u65b0\u7684\u76ee\u6807\u9875\u4e0d\u5728\u5185\u5b58\u4e2d</li> <li>\u552f\u4e00\u7d22\u5f15\u66f4\u65b0\u6570\u636e\u9875\u65f6\u65e0\u6cd5\u4f7f\u7528change buffer</li> <li>\u666e\u901a\u7d22\u5f15\u66f4\u65b0\u53ef\u4ee5\u4f7f\u7528change buffer</li> </ul>"},{"location":"mysql/%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5/","title":"\u67e5\u8be2\u8bed\u53e5","text":""},{"location":"mysql/%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5/#mysql","title":"MySQL\u67b6\u6784\u56fe","text":""},{"location":"mysql/%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5/#server","title":"Server \u5c42","text":"<p>\u8fde\u63a5\u5668\u3001\u67e5\u8be2\u7f13\u5b58\u3001\u5206\u6790\u5668\u3001\u4f18\u5316\u5668\u3001\u6267\u884c\u5668\uff0c\u5b9e\u73b0\u6240\u6709\u7684\u5185\u7f6e\u51fd\u6570\uff08\u5982\u65e5\u671f\u3001\u65f6\u95f4\u3001\u6570\u5b66\u548c\u52a0\u5bc6\u51fd\u6570\u7b49\uff09\u548c\u8de8\u5b58\u50a8\u5f15\u64ce\u7684\u529f\u80fd\uff1a\u5b58\u50a8\u8fc7\u7a0b\u3001\u89e6\u53d1\u5668\u3001\u89c6\u56fe</p>"},{"location":"mysql/%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5/#_1","title":"\u5b58\u50a8\u5f15\u64ce\u5c42","text":"<p>\u8d1f\u8d23\u6570\u636e\u7684\u5b58\u50a8\u548c\u8bfb\u53d6\uff0c\u63d2\u4ef6\u5f0f\u67b6\u6784\uff0cMySQL 5.5.5 \u7248\u672c\u5f00\u59cb\u9ed8\u8ba4\u4f7f\u7528InnoDB\u5b58\u50a8\u5f15\u64ce</p>"},{"location":"mysql/%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5/#_2","title":"\u8fde\u63a5\u5668","text":"<ul> <li>\u8d1f\u8d23\u8ddf\u5ba2\u6237\u7aef\u5efa\u7acb\u8fde\u63a5\u3001\u83b7\u53d6\u6743\u9650\u3001\u7ef4\u6301\u548c\u7ba1\u7406\u8fde\u63a5</li> <li>\u5ba2\u6237\u7aef\u957f\u65f6\u95f4\u65e0\u64cd\u4f5c\uff0c\u8fde\u63a5\u5668\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\uff0c\u7531\u53c2\u6570 wait_timeout \u63a7\u5236\uff0c\u9ed8\u8ba4\u503c\u662f 8 \u5c0f\u65f6</li> <li>\u957f\u8fde\u63a5\uff1a\u8fde\u63a5\u6210\u529f\u540e\uff0c\u5ba2\u6237\u7aef\u6301\u7eed\u6709\u8bf7\u6c42\uff0c\u4e00\u76f4\u4f7f\u7528\u540c\u4e00\u4e2a\u8fde\u63a5</li> <li>\u77ed\u8fde\u63a5\uff1a\u6bcf\u6b21\u6267\u884c\u5b8c\u5f88\u5c11\u7684\u51e0\u6b21\u67e5\u8be2\u5c31\u65ad\u5f00\u8fde\u63a5\uff0c\u4e0b\u6b21\u67e5\u8be2\u91cd\u65b0\u5efa\u7acb\u4e00\u4e2a</li> <li>\u5c3d\u91cf\u4f7f\u7528\u957f\u8fde\u63a5\uff0c\u51cf\u8f7b\u5efa\u7acb\u548c\u65ad\u5f00\u8fde\u63a5\u7684\u5f00\u9500</li> <li>\u4f7f\u7528\u957f\u8fde\u63a5\u540e\uff0cMySQL\u5185\u5b58\u5360\u7528\u5927</li> <li>\u5b9a\u671f\u65ad\u5f00\u8fde\u63a5\uff0c\u8fdb\u884c\u5927\u6570\u636e\u67e5\u8be2\u540e\uff0c\u65ad\u5f00\u8fde\u63a5\uff0c\u4e4b\u540e\u67e5\u8be2\u518d\u91cd\u8fde</li> <li>MySQL5.7\u4e4b\u540e\u7684\u7248\u672c\uff0c\u5927\u6570\u636e\u67e5\u8be2\u540e\uff0c\u4f7f\u7528</li> <li>\u8fde\u63a5\u88ab\u65ad\u5f00\u4e4b\u540e\uff0c\u5ba2\u6237\u7aef\u518d\u6b21\u53d1\u9001\u8bf7\u6c42\u7684\u8bdd\uff0c\u5c31\u4f1a\u6536\u5230\u4e00\u4e2a\u9519\u8bef\u63d0\u9192\uff1a Lost connection to MySQL server during query \u4f7f\u7528<code>mysql_reset_connection</code>\uff0c\u91cd\u7f6e\u8fde\u63a5\u5230\u521a\u521a\u521b\u5efa\u7684\u72b6\u6001</li> </ul>"},{"location":"mysql/%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5/#_3","title":"\u5206\u6790\u5668","text":"<ul> <li>\u5206\u6790\u8bed\u6cd5\u9519\u8bef</li> <li>\u5206\u6790\u6570\u636e\u8868\u548c\u5b57\u6bb5\u9519\u8bef</li> </ul>"},{"location":"mysql/%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5/#_4","title":"\u4f18\u5316\u5668","text":"<ul> <li>\u5206\u6790\u7d22\u5f15</li> <li>\u5206\u6790\u6570\u636e\u67e5\u8be2\u7684\u6700\u4f18\u65b9\u5f0f</li> </ul>"},{"location":"mysql/%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5/#_5","title":"\u6267\u884c\u5668","text":"<ul> <li>\u5224\u65ad\u6267\u884c\u6743\u9650</li> <li>\u8c03\u7528\u5b58\u50a8\u5f15\u64ce\u63a5\u53e3\u8fdb\u884c\u6570\u636e\u67e5\u8be2\uff0c\u62fc\u63a5\u8fd4\u56de\u7ed3\u679c\u96c6</li> </ul>"},{"location":"mysql/%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5/#_6","title":"\u67e5\u8be2\u8bed\u53e5\u7684\u6267\u884c\u8fc7\u7a0b\u4e00\u822c\u662f\u7ecf\u8fc7\u8fde\u63a5\u5668\u3001\u5206\u6790\u5668\u3001\u4f18\u5316\u5668\u3001\u6267\u884c\u5668\u7b49\u529f\u80fd\u6a21\u5757\uff0c\u6700\u540e\u5230\u8fbe\u5b58\u50a8\u5f15\u64ce","text":""},{"location":"mysql/%E7%B4%A2%E5%BC%95/","title":"\u7d22\u5f15","text":""},{"location":"mysql/%E7%B4%A2%E5%BC%95/#_1","title":"\u7d22\u5f15\u5e38\u89c1\u6570\u636e\u7ed3\u6784","text":"<ul> <li>\u54c8\u5e0c\u8868\uff1a\u952e\u503c\u5bf9\uff0c\u54c8\u5e0c\u78b0\u649e\u7528\u94fe\u8868\u94fe\u63a5\uff0c\u53ea\u9002\u7528\u4e8e\u7b49\u503c\u67e5\u8be2\uff0c\u4e0d\u652f\u6301\u8303\u56f4\u67e5\u8be2</li> <li>\u6709\u5e8f\u6570\u7ec4\uff1a\u652f\u6301\u7b49\u503c\u67e5\u8be2\u548c\u8303\u56f4\u67e5\u8be2\uff0c\u4f46\u662f\u66f4\u65b0\u6570\u636e\u7684\u60c5\u51b5\u4e0b\uff0c\u6709\u5e8f\u6570\u7ec4\u6210\u672c\u8f83\u5927\uff0c\u6240\u4ee5\u6709\u5e8f\u6570\u7ec4\u53ea\u9002\u7528\u4e8e\u9759\u6001\u5b58\u50a8\u5f15\u64ce</li> <li>\u641c\u7d22\u6811</li> </ul>"},{"location":"mysql/%E7%B4%A2%E5%BC%95/#innodb","title":"InnoDB\u7d22\u5f15\u6a21\u578b","text":"<ul> <li>\u7d22\u5f15\u7ec4\u7ec7\u8868\uff1a\u6309\u4e3b\u952e\u987a\u5e8f\u5b58\u653e\u5728\u7d22\u5f15\u4e0a</li> <li>InnoDB \u4f7f\u7528 B+ \u6811\u7d22\u5f15\u6a21\u578b\uff0c\u6570\u636e\u90fd\u662f\u5b58\u50a8\u5728 B+ \u6811\u4e2d\u7684</li> </ul>"},{"location":"mysql/%E7%B4%A2%E5%BC%95/#innodb_1","title":"InnoDB\u7d22\u5f15\u7c7b\u578b","text":"<ul> <li>\u4e3b\u952e\u7d22\u5f15\uff1a\u53f6\u5b50\u8282\u70b9\u5b58\u7684\u662f\u6574\u884c\u6570\u636e\u3002\u5728 InnoDB \u91cc\uff0c\u4e3b\u952e\u7d22\u5f15\u4e5f\u88ab\u79f0\u4e3a\u805a\u7c07\u7d22\u5f15\uff08clustered index\uff09</li> <li>\u975e\u4e3b\u952e\u7d22\u5f15\uff1a\u53f6\u5b50\u8282\u70b9\u5185\u5bb9\u662f\u4e3b\u952e\u7684\u503c\u3002\u5728 InnoDB \u91cc\uff0c\u975e\u4e3b\u952e\u7d22\u5f15\u4e5f\u88ab\u79f0\u4e3a\u4e8c\u7ea7\u7d22\u5f15\uff08secondary index</li> </ul>"},{"location":"mysql/%E7%B4%A2%E5%BC%95/#_2","title":"\u4e3b\u952e\u7d22\u5f15\u548c\u975e\u4e3b\u952e\u7d22\u5f15\u67e5\u8be2\u533a\u522b","text":"<ul> <li>\u975e\u4e3b\u952e\u7d22\u5f15\u67e5\u8be2\u5230\u6570\u636e\u540e\uff0c\u5982\u679c\u7d22\u5f15\u4e0a\u7684\u6570\u636e\u4e0d\u6ee1\u8db3\u67e5\u8be2\u9700\u6c42\uff0c\u9700\u8981\u56de\u5230\u4e3b\u952e\u7d22\u5f15\u7ee7\u7eed\u67e5\u8be2</li> <li>\u4e3b\u952e\u7d22\u5f15\u67e5\u8be2\uff0c\u53ef\u4ee5\u67e5\u5230\u8bb0\u5f55\u7684\u6240\u6709\u4fe1\u606f</li> <li>\u4e8c\u6b21\u67e5\u8be2\u4e3b\u952e\u7684\u8fc7\u7a0b\u79f0\u4e3a<code>\u56de\u8868</code></li> </ul>"},{"location":"mysql/%E7%B4%A2%E5%BC%95/#_3","title":"\u91cd\u5efa\u7d22\u5f15","text":"<ul> <li>\u4e3b\u952e\u7d22\u5f15     <code>alter table T engine = InnoDB;</code> </li> <li>\u4e8c\u7ea7\u7d22\u5f15     <code>alter table T drop index k;alter table T add index(k);</code></li> </ul>"},{"location":"mysql/%E7%B4%A2%E5%BC%95/#_4","title":"\u8986\u76d6\u7d22\u5f15","text":"<ul> <li>\u8981\u67e5\u8be2\u7684\u6570\u636e\u5b57\u6bb5\uff0c\u5168\u90e8\u901a\u8fc7\u4e8c\u7ea7\u7d22\u5f15\u53ef\u4ee5\u67e5\u5230</li> <li>\u8bc4\u4f30\u4e1a\u52a1\u53d6\u820d\u662f\u5426\u6709\u5fc5\u8981\u8bbe\u7f6e\u8054\u5408\u7d22\u5f15</li> </ul>"},{"location":"mysql/%E7%B4%A2%E5%BC%95/#_5","title":"\u6700\u5de6\u524d\u7f00\u539f\u5219","text":"<ul> <li>\u6700\u5de6\u524d\u7f00\u53ef\u4ee5\u662f\u8054\u5408\u7d22\u5f15\u7684\u6700\u5de6 N \u4e2a\u5b57\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u7d22\u5f15\u7684\u6700\u5de6 M \u4e2a\u5b57\u7b26</li> <li>\u5efa\u7acb\u539f\u5219<ul> <li>\u901a\u8fc7\u79fb\u52a8\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u5c11\u5efa\u7acb\u4e00\u4e2a\u5355\u72ec\u7d22\u5f15</li> <li>\u7d22\u5f15\u5360\u7528\u7a7a\u95f4</li> </ul> </li> </ul>"},{"location":"mysql/%E7%B4%A2%E5%BC%95/#index-condition-pushdown-56","title":"\u7d22\u5f15\u4e0b\u63a8 index condition pushdown 5.6\u4e4b\u540e\u7248\u672c","text":"<ul> <li>\u7d22\u5f15\u904d\u5386\u8fc7\u7a0b\u4e2d\uff0c\u5bf9\u7d22\u5f15\u4e2d\u5305\u542b\u7684\u5b57\u6bb5\u5148\u505a\u5224\u65ad\uff0c\u76f4\u63a5\u8fc7\u6ee4\u6389\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u8bb0\u5f55\uff0c\u51cf\u5c11\u56de\u8868\u6b21\u6570</li> </ul>"},{"location":"mysql/%E7%B4%A2%E5%BC%95/#_6","title":"\u6570\u636e\u5e93\u4f18\u5316\u5668\u9009\u62e9\u7d22\u5f15\u9519\u8bef","text":"<ul> <li>mysql\u7edf\u8ba1\u4fe1\u606f\u4e0d\u51c6\u786e\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5analyze table \u5237\u65b0\u7edf\u8ba1\u4fe1\u606f</li> <li>force index \u5f3a\u5236\u4f7f\u7528\u67d0\u4e2a\u7d22\u5f15</li> <li>\u4f18\u5316sql\u8bed\u53e5\uff0c\u4fdd\u6301\u903b\u8f91\u4e00\u81f4\uff0c\u4eba\u4e3a\u5f15\u5bfcmysql\u9009\u62e9\u6b63\u786e\u7684\u7d22\u5f15\uff08\u4f8b\u5982\uff1a\u4fee\u6539\u6392\u5e8f\u5b57\u6bb5\uff09</li> <li>\u65b0\u5efa\u4e00\u4e2a\u66f4\u5408\u9002\u7684\u7d22\u5f15</li> <li>\u5220\u6389\u9519\u8bef\u4f7f\u7528\u7684\u7d22\u5f15</li> </ul>"},{"location":"mysql/%E7%B4%A2%E5%BC%95/#_7","title":"\u5b57\u7b26\u4e32\u5efa\u7acb\u7d22\u5f15","text":"<ul> <li>\u8003\u8651\u6570\u636e\u533a\u5206\u5ea6</li> <li>\u8003\u8651\u6570\u636e\u957f\u5ea6</li> <li>\u8003\u8651\u524d\u7f00\u7d22\u5f15</li> <li>hash\u7d22\u5f15</li> <li>\u5012\u5e8f\u5b58\u50a8\u7d22\u5f15</li> </ul>"},{"location":"mysql/%E7%B4%A2%E5%BC%95/#_8","title":"\u7d22\u5f15\u5931\u6548","text":"<ul> <li>\u7d22\u5f15\u5b57\u6bb5\u4f7f\u7528\u51fd\u6570\u6216\u53c2\u4e0e\u8ba1\u7b97</li> <li>\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362\uff0cMySQL\u5c06\u5b57\u7b26\u4e32\u8f6c\u4e3a\u6570\u5b57\u8fdb\u884c\u6bd4\u8f83</li> <li>\u9690\u5f0f\u5b57\u7b26\u7f16\u7801\u8f6c\u6362 utf8 -&gt; utf8mb4 </li> </ul>"},{"location":"mysql/%E8%84%8F%E9%A1%B5/","title":"\u810f\u9875","text":""},{"location":"mysql/%E8%84%8F%E9%A1%B5/#_1","title":"\u810f\u9875","text":"<ul> <li>\u5185\u5b58\u6570\u636e\u9875\u548c\u78c1\u76d8\u6570\u636e\u9875\u4e0d\u4e00\u81f4\u7684\u6570\u636e\u9875\u5c31\u662f\u810f\u9875</li> <li>\u4e00\u81f4\u7684\u79f0\u4e3a\u5e72\u51c0\u9875</li> </ul>"},{"location":"mysql/%E8%84%8F%E9%A1%B5/#_2","title":"\u5237\u810f\u9875","text":"<ul> <li>redo log \u8bb0\u5f55\u6ee1\u4e86\uff0c\u505c\u6b62\u6240\u6709\u66f4\u65b0\u64cd\u4f5c</li> <li>\u7cfb\u7edf\u5185\u5b58\u4e0d\u8db3\uff0c\u9700\u8981\u7a7a\u95f4\u653e\u65b0\u7684\u5185\u5b58\u9875\uff0c\u6dd8\u6c70\u4e00\u4e9b\u5c31\u6570\u636e\u9875\uff0c\u6dd8\u6c70\u7684\u5982\u679c\u662f\u810f\u9875\u5c31\u9700\u8981\u5237\u810f\u9875</li> <li>\u7cfb\u7edf\u7a7a\u95f2\u7684\u65f6\u5019\uff0c\u5237\u810f\u9875</li> <li>\u6570\u636e\u5e93\u6b63\u5e38\u5173\u95ed\u65f6\uff0c\u5237\u810f\u9875</li> </ul>"},{"location":"mysql/%E8%84%8F%E9%A1%B5/#_3","title":"\u5237\u810f\u9875\u63a7\u5236\u7b56\u7565","text":"<ul> <li>\u810f\u9875\u5360\u6bd4\u5927\u4e8e\u914d\u7f6e\u5f00\u542f100%\u901f\u5ea6\u5237\u810f\u9875</li> <li>\u810f\u9875\u5360\u6bd4\u5c0f\u4e8e\u914d\u7f6e\u5f00\u542f\uff08\u810f\u9875\u6bd4\u4f8b/\u914d\u7f6e\uff09\u901f\u5ea6\u5237\u914d\u7f6e</li> <li>redo log checkpoint \u8ba1\u7b97\u51fa\u4e00\u4e2a0-100\u4e4b\u95f4\u7684\u6570\u5b57</li> <li>\u53d6\u810f\u9875\u6bd4\u4f8b\u548credolog\u8ba1\u7b97\u7684\u6700\u5927\u503c\u5237\u810f\u9875</li> </ul>"},{"location":"mysql/%E8%84%8F%E9%A1%B5/#_4","title":"\u76f8\u90bb\u810f\u9875\u4f1a\u88ab\u4e00\u8d77\u5237\u5230\u78c1\u76d8","text":"<ul> <li>innodb_flush_neighbors \u4e3a1\u65f6\uff0c\u8fde\u540c\u90bb\u5c45\u548c\u90bb\u5c45\u7684\u90bb\u5c45\u4e00\u8d77\u88ab\u5237\u5230\u78c1\u76d8</li> <li>\u4e3a0\u65f6\u53ea\u5237\u81ea\u5df1</li> </ul>"},{"location":"mysql/%E8%A1%A8/","title":"\u8868","text":""},{"location":"mysql/%E8%A1%A8/#_1","title":"\u8868\u6570\u636e","text":"<ul> <li>\u5220\u9664\u8868\u5e76\u4e0d\u4f1a\u5220\u9664\u8bb0\u5f55\uff0c\u53ea\u662f\u5728\u5220\u9664\u7684\u4f4d\u7f6e\u6807\u8bb0\uff0c\u8be5\u8bb0\u5f55\u53ef\u4ee5\u590d\u7528</li> <li>\u5220\u9664\u6570\u636e\u9875\u4e5f\u4e0d\u4f1a\u6e05\u7a7a\u6570\u636e\u9875\uff0c\u53ea\u662f\u6807\u8bb0\u6570\u636e\u9875\u53ef\u88ab\u590d\u7528</li> <li>delete \u547d\u4ee4\u662f\u4e0d\u80fd\u56de\u6536\u8868\u7a7a\u95f4\u7684\uff0c\u53ea\u662f\u6807\u8bb0\u88ab\u590d\u7528\uff0c\u6ca1\u6709\u4f7f\u7528\u7684\u7a7a\u95f4\uff0c\u79f0\u4e3a\u201c\u7a7a\u6d1e\u201d</li> </ul>"},{"location":"mysql/%E8%A1%A8/#_2","title":"\u7a7a\u6d1e","text":"<ul> <li>\u5220\u9664\u6570\u636e\u9020\u6210\u7a7a\u6d1e</li> <li>\u63d2\u5165\u6570\u636e\u9020\u6210\u7a7a\u6d1e\uff0c\u7d22\u5f15\u4e0d\u8fde\u7eed\uff0c\u6570\u636e\u9875\u5206\u88c2</li> <li>\u7d22\u5f15\u503c\u66f4\u65b0</li> </ul>"},{"location":"mysql/%E8%A1%A8/#_3","title":"\u91cd\u5efa\u8868","text":"<ul> <li>alter table T engine = InnoDB</li> <li>5.5\u4e4b\u524d\uff0c\u91cd\u5efa\u65f6\u4e0d\u652f\u6301\u66f4\u65b0\u64cd\u4f5c\uff0c\u79bb\u7ebfddl</li> <li>5.6\u4e4b\u540e\uff0c\u91cd\u5efa\u65f6\u4f1a\u8bb0\u5f55\u66f4\u65b0\u64cd\u4f5c\u5230\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u91cd\u5efa\u540e\u91cd\u653e\u65e5\u5fd7\u6587\u4ef6\u5230\u65b0\u7684\u8868\u4e2d\uff0conline ddl</li> <li>\u4f1a\u5148\u6301\u6709\u4e00\u4e2aMDL\u5199\u9501\uff0c\u7136\u540e\u6570\u636e\u62f7\u8d1d\u7684\u65f6\u5019\u4f1a\u9000\u5316\u6210\u8bfb\u9501\uff0c\u9632\u6b62\u5176\u4ed6\u7ebf\u7a0b\u66f4\u6539\u8868\u7ed3\u6784</li> </ul>"},{"location":"nginx/cors/","title":"\u8de8\u57df","text":""},{"location":"nginx/cors/#_1","title":"\u8de8\u57df\u914d\u7f6e","text":"<ul> <li>server \u914d\u7f6e\u5757\u4e2d\u6dfb\u52a0\u8bf7\u6c42\u5934\u6807\u5fd7</li> <li>add_header 'Access-Control-Allow-Origin' *; \u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u7684\u539f\u59cb\u7ad9\u70b9</li> <li>add_header 'Access-Control-Allow-Credentials' 'true'; \u5141\u8bb8\u643a\u5e26cookie\u8fdb\u884c\u8de8\u57df\u8bf7\u6c42</li> <li>add_header 'Access-Control-Allow-Methods' *; \u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u7684\u65b9\u6cd5</li> <li>add_header 'Access-Control-Allow-Headers' *; \u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u7684\u643a\u5e26\u7684header</li> </ul>"},{"location":"nginx/load_balancer/","title":"\u8d1f\u8f7d\u5747\u8861","text":""},{"location":"nginx/load_balancer/#_1","title":"\u8d1f\u8d23\u5747\u8861\u7b56\u7565","text":"<ul> <li>\u8f6e\u8be2 round-robin</li> <li>\u6700\u5c0f\u8fde\u63a5 least-connected</li> <li>\u6e90\u5730\u5740hash ip-hash</li> <li>uri hash</li> <li>\u52a0\u6743\u8d1f\u8f7d\u5747\u8861 weight load balancer</li> <li>\u8fd0\u884c\u72b6\u51b5\u68c0\u67e5 health checks</li> </ul>"},{"location":"nginx/load_balancer/#_2","title":"\u8f6e\u8be2","text":"<ul> <li>\u9ed8\u8ba4\u8f6e\u8be2\u7b97\u6cd5 <pre><code>upstream backend {\n    server srv1.example.com;\n    server srv2.example.com;\n    server srv3.example.com;\n}\n</code></pre></li> </ul>"},{"location":"nginx/load_balancer/#_3","title":"\u6700\u5c0f\u8fde\u63a5","text":"<pre><code>upstream backend {\n    least_conn;\n    server srv1.example.com;\n    server srv2.example.com;\n    server srv3.example.com;\n}\n</code></pre>"},{"location":"nginx/load_balancer/#hash","title":"\u6e90\u5730\u5740hash","text":"<pre><code>upstream backend {\n    ip_hash;\n    server srv1.example.com;\n    server srv2.example.com;\n    server srv3.example.com;\n}\n</code></pre>"},{"location":"nginx/load_balancer/#uri-hash","title":"uri hash","text":"<pre><code>upstream backend {\n    hash $request_uri;\n    server srv1.example.com;\n    server srv2.example.com;\n    server srv3.example.com;\n}\n</code></pre>"},{"location":"nginx/load_balancer/#_4","title":"\u52a0\u6743\u8d1f\u8f7d\u5747\u8861","text":"<ul> <li>\u9ed8\u8ba4\u6743\u91cd\u4e3a1 <pre><code>upstream backend {\n    server srv1.example.com weight=3;\n    server srv2.example.com weitht=4;\n    server srv3.example.com weight=1;\n}\n</code></pre></li> </ul>"},{"location":"nginx/load_balancer/#_5","title":"\u8fd0\u884c\u72b6\u51b5\u68c0\u67e5","text":"<ul> <li>max_fails \u7f3a\u7701\u503c\u662f 1\uff0cfail_timeout \u7f3a\u7701\u503c\u662f 10s</li> <li>www.example.com \u7684\u5065\u5eb7\u68c0\u67e5\u4f1a\u88ab\u5173\u95ed\uff0c\u4e00\u76f4\u90fd\u6807\u8bb0\u4e3a\u53ef\u7528</li> <li>www2.example.com \u5931\u8d25\u540e\u4f1a\u91cd\u8bd5\u4e24\u6b21\uff0c\u518d\u6b21\u5931\u8d25\u540e\u6807\u8bb0\u4e0d\u53ef\u7528\u4e00\u5929 <pre><code>upstream backend {\n    server www.example.com max_fails=0;\n    server www2.example.com max_fails=2 fail_timeout=1d;\n}\n</code></pre></li> </ul>"},{"location":"nginx/load_balancer/#proxy_next_upstream","title":"proxy_next_upstream","text":"<ul> <li>\u8d1f\u8f7d\u5747\u8861\u8bf7\u6c42\u51fa\u73b0\u5f02\u5e38\uff0c\u4f7f\u7528\u4e0b\u4e00\u4e2aserver</li> <li>error \u5efa\u7acb\u8fde\u63a5 / \u53d1\u9001\u8bf7\u6c42 / \u63a5\u6536\u54cd\u5e94\u65f6\u51fa\u9519\uff08\u7f3a\u7701\u503c\u4e4b\u4e00\uff09\uff1b</li> <li>timeout \u5efa\u7acb\u8fde\u63a5 / \u53d1\u9001\u8bf7\u6c42 / \u63a5\u6536\u54cd\u5e94\u65f6\u8d85\u65f6\uff08\u7f3a\u7701\u503c\u4e4b\u4e00\uff09\uff1b</li> <li>invalid_header \u4e0a\u6e38\u8fd4\u56de\u7a7a\u767d\u6216\u65e0\u6548\u54cd\u5e94\uff1b</li> <li>http_500 \u4e0a\u6e38\u8fd4\u56de 500 Internal Server Error\uff1b</li> <li>http_501 \u4e0a\u6e38\u8fd4\u56de 501 Not Implemented\uff1b</li> <li>http_502 \u4e0a\u6e38\u8fd4\u56de 502 Bad Gateway\uff1b</li> <li>http_503 \u4e0a\u6e38\u8fd4\u56de 503 Service Unavailable\uff1b</li> <li>http_504 \u4e0a\u6e38\u8fd4\u56de 504 Gateway Timeout\uff1b</li> <li>http_404 \u4e0a\u6e38\u8fd4\u56de 404 Not Found\uff1b</li> <li>http_429 \u4e0a\u6e38\u8fd4\u56de 429 Too Many Requests\uff1b</li> <li>non_idempotent \u89e3\u9664\u5bf9\u975e\u5e42\u7b49\u8bf7\u6c42 (POST, LOCK, PATCH) \u7684\u5c01\u5370\uff0c\u5c0f\u5fc3\u9020\u6210\u91cd\u590d\u63d0\u4ea4\uff1b</li> <li>off \u4e0d\u5f97\u8f6c\u7ed9\u4e0b\u4e00\u53f0\u670d\u52a1\u5668\u3002</li> </ul> <pre><code>location / {\n    ...\n    proxy_pass http://backend;\n    proxy_next_upstream error timeout http_500;\n    ...\n}\n</code></pre>"},{"location":"nginx/location/","title":"location","text":""},{"location":"nginx/location/#_1","title":"\u4fee\u9970\u7b26\u51e0\u79cd\u60c5\u51b5","text":"<ul> <li>/ \u524d\u7f00\u5339\u914d</li> <li>= / \u5b8c\u5168\u7cbe\u786e\u5339\u914d</li> <li>~* \u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199</li> <li>~ \u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u533a\u5206\u5927\u5c0f\u5199</li> <li>^~ \u4ee5\u67d0\u4e2a\u5b57\u7b26\u5f00\u5934\uff0c^ \u975e\u7684\u610f\u601d\uff0c\u8868\u793a\u4e0d\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f</li> </ul>"},{"location":"nginx/location/#_2","title":"\u4fee\u9970\u7b26\u4f18\u5148\u7ea7","text":"<ul> <li>=           - \u5b8c\u5168\u5339\u914d  </li> <li>^~          - \u4f18\u5148\u5339\u914d  </li> <li>~ &amp;&amp; ~*     - \u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d  </li> <li>no modifier - \u524d\u7f00\u5339\u914d</li> <li>nginx \u5c06\u68c0\u67e5\u662f\u5426\u6709\u4efb\u4f55\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u5b83\u4e0d\u5b58\u5728\uff0c\u5b83\u5c06\u5bfb\u627e\u4f18\u5148\u7684\u3002\u5982\u679c\u6b64\u5339\u914d\u4e5f\u5931\u8d25\uff0c\u5219\u5c06\u6309\u51fa\u73b0\u987a\u5e8f\u6d4b\u8bd5\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u3002\u5982\u679c\u90fd\u5931\u8d25\u4e86\uff0c\u5c06\u4f7f\u7528\u6700\u540e\u4e00\u4e2a\u524d\u7f00\u5339\u914d</li> </ul>"},{"location":"nginx/nav/","title":"Nav","text":"<ul> <li>location</li> <li>\u8de8\u57df</li> <li>\u8d1f\u8f7d\u5747\u8861</li> </ul>"},{"location":"redis/hash/","title":"Hash","text":""},{"location":"redis/hash/#_1","title":"\u54c8\u5e0c\u51b2\u7a81","text":"<ul> <li>\u952e\u7684\u7a7a\u95f4\u4f1a\u5927\u4e8eHash\u8868\u7684\u7a7a\u95f4</li> <li>\u5bfc\u81f4\u7528hash\u51fd\u6570\u628a\u952e\u6620\u5c04\u5230Hash\u8868\u7a7a\u95f4\u65f6\uff0c\u4f1a\u51fa\u73b0\u4e0d\u540c\u7684\u952e\u88ab\u6620\u5c04\u5230\u6570\u7ec4\u540c\u4e00\u4e2a\u4f4d\u7f6e\u4e0a</li> <li>\u5982\u679c\u540c\u4e00\u4e2a\u4f4d\u7f6e\u53ea\u80fd\u4fdd\u5b58\u4e00\u4e2a\u952e\u503c\u5bf9\uff0c\u5c31\u4f1a\u5bfc\u81f4hash\u51b2\u7a81</li> </ul>"},{"location":"redis/hash/#hash","title":"hash \u51b2\u7a81\u89e3\u51b3","text":"<ul> <li>\u94fe\u5f0f\u54c8\u5e0c\uff0c\u4e14hash\u7684\u94fe\u4e0d\u80fd\u592a\u957f\uff0c\u592a\u957f\u4e5f\u4f1a\u5f71\u54cd\u6027\u80fd</li> <li>rehash\uff0c\u589e\u5927hash\u8868\u7a7a\u95f4\uff0c\u91cd\u65b0\u8ba1\u7b97hash\u8868\u5185\u7684\u6570\u636e\u7684hash</li> <li>\u6e10\u8fdb\u5f0frehash \u4f18\u5316</li> </ul>"},{"location":"redis/hash/#_2","title":"\u94fe\u5f0f\u54c8\u5e0c","text":"<ul> <li>\u6bcf\u4e2ahash\u7684\u5bf9\u8c61\u5b58\u50a8\u8fd9\u4e0b\u4e00\u4e2a\u94fe\u8868\u8282\u70b9\u7684\u6307\u9488</li> <li>redis \u54c8\u5e02\u7ed3\u6784 <pre><code>typedef struct dictht {\ndictEntry **table; //\u4e8c\u7ef4\u6570\u7ec4\nunsigned long size; //Hash\u8868\u5927\u5c0f\nunsigned long sizemask;\nunsigned long used;\n} dictht;\n</code></pre></li> <li>redis hash\u4e2d\u7684 dictEntry\u7ed3\u6784 <pre><code>typedef struct dictEntry {\nvoid *key;\nunion {\nvoid *val;\nuint64_t u64; // \u672c\u8eab\u5b58\u50a8\u7684\u662f8\u5b57\u8282\u7684\u5185\u5bb9\u65f6\u5c31\u4e0d\u9700\u8981\u5355\u72ec\u5f00\u8f9f\u7a7a\u95f4\u5b58\u50a8\u6307\u9488\u4e86\nint64_t s64;\ndouble d;\n} v;\nstruct dictEntry *next;\n} dictEntry;\n</code></pre></li> </ul>"},{"location":"redis/hash/#rehash","title":"rehash","text":"<ul> <li>\u4e24\u4e2a\u54c8\u5e0c\u8868\uff0c\u7528\u4e8e\u4ea4\u66ff\u4fdd\u5b58\u6570\u636e</li> <li>\u6b63\u5e38\u8bf7\u6c42\u9636\u6bb5\uff0c\u6570\u636e\u5168\u90e8\u5199\u5165\u5230hash0</li> <li>\u8fdb\u884crehash\uff0c\u6570\u636e\u8fc1\u79fb\u5230hash1</li> <li>\u8fc1\u79fb\u5b8c\u6210\u540e\uff0chash0\u88ab\u91ca\u653e\uff0chash1\u7684\u5730\u5740\u590d\u5236\u7ed9hash0\uff0chash1\u6e05\u7a7a</li> </ul>"},{"location":"redis/hash/#rehash_1","title":"rehash \u6761\u4ef6","text":"<ul> <li>ht[0]\u627f\u8f7d\u7684\u5143\u7d20\u4e2a\u6570\u5df2\u7ecf\u8d85\u8fc7\u4e86 ht[0]\u7684\u5927\u5c0f\uff0c\u540c\u65f6 Hash \u8868<code>dict_can_resize</code>\u7b49\u4e8e1\uff0c\u8868\u793a\u53ef\u4ee5\u8fdb\u884c\u6269\u5bb9</li> <li>ht[0]\u627f\u8f7d\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u662f ht[0]\u7684\u5927\u5c0f\u7684 dict_force_resize_ratio \u500d\uff0c\u5176\u4e2d\uff0cdict_force_resize_ratio \u7684\u9ed8\u8ba4\u503c\u662f 5</li> </ul>"},{"location":"redis/hash/#rehash_2","title":"rehash \u89e6\u53d1\u70b9","text":"<ul> <li>redis \u5f53\u524d\u6ca1\u6709\u8fdb\u884cRDB\u7684\u5b50\u8fdb\u7a0b\u548cAOF\u5b50\u8fdb\u7a0b</li> <li>dicAdd\uff0c\u5411hash\u8868\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u952e\u503c\u5bf9</li> <li>dictReplace\uff0c\u5411hash\u8868\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u952e\u503c\u5bf9\uff0c\u6216\u8005\u952e\u503c\u5bf9\u5b58\u5728\u65f6\uff0c\u4fee\u6539\u952e\u503c\u5bf9</li> <li>dictAddorFind\uff1ahash\u8868\u6dfb\u52a0\u6216\u67e5\u627e</li> </ul>"},{"location":"redis/hash/#rehash_3","title":"rehash \u6269\u5bb9","text":"<ul> <li><code>size</code> \u662f \u521d\u59cb\u5316\u5927\u5c0f\u6216\u8005hash\u6b63\u5728\u7528\u7684key\u7684\u6570\u91cf</li> <li>\u7528\u521d\u59cb\u5316\u5927\u5c0f<code>i</code>\uff0c\u4e0d\u65ad <code>i*=2</code></li> <li>\u76f4\u5230 <code>i &gt;= size</code></li> </ul>"},{"location":"redis/hash/#rehash_4","title":"\u6e10\u8fdb\u5f0frehash","text":"<ul> <li>\u76ee\u7684\uff0c\u51cf\u5c11rehash\u8fc1\u79fb\u6570\u636e\u65f6\uff0c\u5bf9\u4e3b\u7ebf\u7a0b\u7684\u963b\u585e\uff0c\u51cf\u8f7brehash\u5f00\u9500</li> <li>redis \u5e76\u4e0d\u4f1a\u4e00\u6b21\u62f7\u8d1d\u6240\u6709\u6570\u636e\u5230\u65b0\u7684\u4f4d\u7f6e\uff0c\u800c\u662f\u5206\u6279\u4e00\u90e8\u5206\u8fc1\u79fb\uff0c\u6bcf\u6b21\u53ea\u62f7\u8d1d\u4e00\u4e2ahash\u8868\u4e2d\u7684\u4e00\u4e2abucket</li> <li>rahashidx \u79fb\u52a8\u7684bucket\u7684\u7f16\u53f7\uff0c-1\u8868\u793a\u4e0d\u9700\u8981rehash</li> <li>\u5982\u679chash\u6b63\u5728\u8fdb\u884crehash\u7684\u8bdd\uff0c\u6dfb\u52a0\u548c\u5220\u9664\u5143\u7d20\u540e\u4f1a\u8fdb\u884c1\u4e2abucket\u7684\u79fb\u52a8</li> <li>\u5982\u679chash\u6b63\u5728\u8fdb\u884crehash\u7684\u8bdd\uff0c\u67e5\u627e\u4e5f\u4f1a\u5bfc\u81f41\u4e2abucket\u7684\u79fb\u52a8 <p>key\u7684hash\u7b97\u6cd5\u662f<code>siphash</code> <pre><code>/* Performs N steps of incremental rehashing. Returns 1 if there are still\n * keys to move from the old to the new hash table, otherwise 0 is returned.\n *\n * Note that a rehashing step consists in moving a bucket (that may have more\n * than one key as we use chaining) from the old to the new hash table, however\n * since part of the hash table may be composed of empty spaces, it is not\n * guaranteed that this function will rehash even a single bucket, since it\n * will visit at max N*10 empty buckets in total, otherwise the amount of\n * work it does would be unbound and the function may block for a long time. */\nint dictRehash(dict *d, int n) {\nint empty_visits = n*10; // \u6700\u5927rehash\u7684bucket\u7684\u6570\u91cf\nif (!dictIsRehashing(d)) return 0;\nwhile(n-- &amp;&amp; d-&gt;ht[0].used != 0) {\ndictEntry *de, *nextde;\n/* Note that rehashidx can't overflow as we are sure there are more\n         * elements because ht[0].used != 0 */\nassert(d-&gt;ht[0].size &gt; (unsigned long)d-&gt;rehashidx);\nwhile(d-&gt;ht[0].table[d-&gt;rehashidx] == NULL) { // \u79fb\u52a8\u7684bucket\u4e3a\u7a7a\nd-&gt;rehashidx++;\nif (--empty_visits == 0) return 1;\n}\nde = d-&gt;ht[0].table[d-&gt;rehashidx];\n/* Move all the keys in this bucket from the old to the new hash HT */\nwhile(de) {  // \u6bcf\u6b21\u79fb\u52a8\u4e00\u4e2abucket\nuint64_t h;\nnextde = de-&gt;next;\n/* Get the index in the new hash table */\nh = dictHashKey(d, de-&gt;key) &amp; d-&gt;ht[1].sizemask;\nde-&gt;next = d-&gt;ht[1].table[h];\nd-&gt;ht[1].table[h] = de; // \u79fb\u52a8\u8fc7\u7a0b\nd-&gt;ht[0].used--;\nd-&gt;ht[1].used++;\nde = nextde;\n}\nd-&gt;ht[0].table[d-&gt;rehashidx] = NULL;\nd-&gt;rehashidx++;\n}\n/* Check if we already rehashed the whole table... */\n// \u90fd\u79fb\u52a8\u4e86\uff0c\u7136\u540e\u8bbe\u7f6e\u91ca\u653eh0\uff0ch1\u8d4b\u503c\u5230h0\uff0c\u6e05\u7a7ah1\nif (d-&gt;ht[0].used == 0) {\nzfree(d-&gt;ht[0].table);\nd-&gt;ht[0] = d-&gt;ht[1];\n_dictReset(&amp;d-&gt;ht[1]);\nd-&gt;rehashidx = -1;\nreturn 0;\n}\n/* More to rehash... */\nreturn 1;\n}\n</code></pre></p> </li> </ul>"},{"location":"redis/nav/","title":"Nav","text":"<ul> <li>\u5e03\u9686\u8fc7\u6ee4\u5668</li> <li>Scan</li> <li>Hash</li> <li>SDS\u7b80\u5355\u52a8\u6001\u5b57\u7b26\u4e32</li> </ul>"},{"location":"redis/scan/","title":"Scan","text":""},{"location":"redis/scan/#scan","title":"Scan \u547d\u4ee4","text":"<ul> <li>\u590d\u6742\u5ea6\u4e3aO(n)\uff0c\u901a\u8fc7\u6e38\u6807\u5206\u6b65\u8fdb\u884c\uff0c\u5e76\u4e0d\u4f1a\u963b\u585e\u4e3b\u7ebf\u7a0b</li> <li>\u63d0\u4f9blimit\u53c2\u6570\uff0c\u53ef\u4ee5\u63a7\u5236\u6bcf\u6b21\u8fd4\u56de\u7ed3\u679c\u7684\u6700\u5927\u6570\uff0c\u5b9e\u9645\u8fd4\u56de\u7684\u7ed3\u679c\u53ef\u591a\u53ef\u5c11</li> <li>\u63d0\u4f9b\u6a21\u5f0f\u5339\u914d\u529f\u80fd</li> <li>\u6e38\u6807\u72b6\u6001\u4fdd\u7559\u5728\u5ba2\u6237\u7aef</li> <li>\u8fd4\u56de\u7684\u6570\u636e\u53ef\u80fd\u6709\u91cd\u590d\uff0c\u9700\u8981\u5ba2\u6237\u7aef\u53bb\u91cd</li> <li>\u904d\u5386\u8fc7\u7a0b\u4e2d\u6709\u6570\u636e\u4fee\u6539\uff0c\u6539\u52a8\u540e\u7684\u6570\u636e\u4e0d\u786e\u5b9a\u80fd\u4e0d\u80fd\u67e5\u627e\u5230</li> <li>\u6e38\u6807\u518d\u6b21\u8fd4\u56de\u4e3a0\uff0c\u624d\u8868\u793a\u904d\u5386\u7ed3\u675f</li> </ul>"},{"location":"redis/scan/#limit","title":"\u8fd4\u56de\u7684\u7ed3\u679c\u6570\u4e0d\u7b49\u4e8elimit\u6570\u91cf","text":"<ul> <li>limit\u53ea\u662f\u9650\u5b9a\u6bcf\u6b21scan\u904d\u5386\u7684hash\u69fd\u7684\u6570\u91cf</li> <li>\u6700\u5927\u5c42\u5b58\u6709\u6240\u6709key\u7684hash\u7684\u69fd\u6570</li> <li>\u6bcf\u4e00\u6b21\u904d\u5386\u90fd\u4f1a\u5c06 limit \u6570\u91cf\u7684\u69fd\u4f4d\u4e0a\u6302\u63a5\u7684\u6240\u6709\u94fe\u8868\u5143\u7d20\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\u8fc7\u6ee4\u540e,\u4e00\u6b21\u6027\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef</li> </ul>"},{"location":"redis/scan/#scan_1","title":"scan \u904d\u5386\u987a\u5e8f","text":"<ul> <li>\u9ad8\u4f4d\u8fdb\u4f4d\u52a0\u6cd5</li> <li>\u4e0e\u666e\u901a\u7684\u52a0\u6cd5\u6b63\u597d\u8fdb\u4f4d\u65b9\u5411\u76f8\u53cd</li> <li>\u4f7f\u7528\u666e\u901a\u52a0\u6cd5\u5b57\u6bb5\u6269\u5bb9\u8fdb\u884crehash\u65f6\uff0c\u4f1a\u4ea7\u751f\u91cd\u590d\u6216\u9057\u6f0f</li> <li>rehash\u7684map\u8fdb\u884c\u904d\u5386\u65f6\uff0c\u4f1a\u540c\u65f6\u67e5\u8be2\u65b0\u65e7\u591a\u4e2a\u69fd\u4f4d\u6709\u6ca1\u6709\u7b26\u5408\u8981\u6c42\u7684\u6570\u636e</li> </ul>"},{"location":"redis/scan/#hash-2","title":"hash 2\u500d\u6269\u5bb9","text":"<ul> <li>\u539f\u6765\u7684\u6570\u7ec4\u4e2d\u7684\u6570\u636e\u88ab\u5206\u6563\u52302\u4e2a\u6570\u7ec4\u4e2d</li> <li>\u7528\u9ad8\u4f4d\u52a00\u548c\u52a01\u7684\u65b9\u5f0f</li> </ul>"},{"location":"redis/scan/#_1","title":"\u6269\u7f29\u5bb9\u524d\u540e\u9ad8\u4f4d\u52a0\u6cd5\u904d\u5386\u987a\u5e8f","text":"<ul> <li>\u91c7\u7528\u9ad8\u4f4d\u8fdb\u4f4d\u52a0\u6cd5\u7684\u904d\u5386\u987a\u5e8f\uff0crehash\u540e\u7684\u69fd\u4f4d\u904d\u5386\u987a\u5e8f\u4e0a\u662f\u76f8\u90bb\u7684</li> <li>\u6269\u5bb9\u540e\u5373\u5c06\u904d\u5386\u7684\u69fd\u4f4d\u4e4b\u524d\u7684\u69fd\u90fd\u662f\u5df2\u7ecf\u904d\u5386\u8fc7\u7684\u4e86\uff0c\u53ef\u4ee5\u907f\u514d\u5bf9\u4e4b\u524d\u7684\u69fd\u8fdb\u884c\u91cd\u590d\u904d\u5386 0110\u4e4b\u524d\u7684\u69fd\u90fd\u904d\u5386\u8fc7\u4e86</li> <li>\u7f29\u5bb9\u4e0d\u4f1a\u91cd\u590d\u904d\u5386\u4e4b\u524d\u5df2\u7ecf\u904d\u5386\u8fc7\u7684\u69fd\uff0c\u4f46\u662f\u4f1a\u5bf9\u5f53\u524d\u69fd\u7684\u6570\u636e\u8fdb\u884c\u91cd\u590d\u904d\u5386\uff0c10\u4e4b\u524d\u7684\u69fd\u904d\u5386\u8fc7\u4e86\uff0c\u4f46\u662f10\u8fd9\u4e2a\u69fd\u7684\u6570\u636e\u4f1a\u91cd\u590d\u904d\u5386\u4e00\u6b21</li> </ul>"},{"location":"redis/scan/#scan_2","title":"\u66f4\u591a\u7684scan","text":"<ul> <li>hscan</li> <li>zscan</li> <li>sscan</li> </ul>"},{"location":"redis/sds/","title":"SDS\u7b80\u5355\u52a8\u6001\u5b57\u7b26\u4e32","text":""},{"location":"redis/sds/#c","title":"\u4f7f\u7528C\u8bed\u8a00\u539f\u751f\u5b57\u7b26\u4e32\u4e0d\u8db3","text":"<ul> <li>\u4ee5\"\\0\"\u6765\u5224\u65ad\u7ed3\u5c3e\uff0c\u5bfc\u81f4\u5b57\u7b26\u4e32\u4e2d\u4e0d\u80fd\u51fa\u73b0\"\\0\"\uff0c\u4e0d\u5229\u4e8e\u5b58\u50a8\u4efb\u610f\u4e8c\u8fdb\u5236\u6570\u636e</li> <li>\u64cd\u4f5c\u51fd\u6570\u590d\u6742\u5ea6\u592a\u9ad8\uff0c\u53d6\u957f\u5ea6\u4e5f\u9700\u8981O(n)\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u4e0d\u5229\u4e8e\u5feb\u901f\u7684redis\u8fdb\u884c\u64cd\u4f5c</li> </ul>"},{"location":"redis/sds/#sds","title":"SDS","text":"<ul> <li>Simple Dynamic String</li> <li>\u4e00\u4e2a\u5b57\u7b26\u6570\u7ec4<code>buf[]</code>\uff0c\u7528\u6765\u4fdd\u5b58\u5b9e\u9645\u7684\u6570\u636e</li> <li>\u6570\u7ec4\u73b0\u6709\u957f\u5ea6<code>len</code></li> <li>\u5206\u914d\u7ed9\u5b57\u7b26\u6570\u7ec4\u7684\u7a7a\u95f4\u957f\u5ea6<code>alloc</code></li> <li>SDS \u7c7b\u578b <code>flags</code></li> <li>\u5185\u5b58\u9884\u5206\u914d\uff1aSDS \u6269\u5bb9\uff0c\u4f1a\u591a\u7533\u8bf7\u4e00\u4e9b\u5185\u5b58\uff08\u5c0f\u4e8e 1MB \u7ffb\u500d\u6269\u5bb9\uff0c\u5927\u4e8e 1MB \u6309 1MB \u6269\u5bb9\uff09</li> <li>\u591a\u4f59\u5185\u5b58\u4e0d\u91ca\u653e\uff1aSDS \u7f29\u5bb9\uff0c\u4e0d\u91ca\u653e\u591a\u4f59\u7684\u5185\u5b58\uff0c\u4e0b\u6b21\u4f7f\u7528\u53ef\u76f4\u63a5\u590d\u7528\u8fd9\u4e9b\u5185\u5b58</li> </ul> <pre><code>struct __attribute__ ((__packed__)) sdshdr8 {\nuint8_t len; /* \u5b57\u7b26\u6570\u7ec4\u73b0\u6709\u957f\u5ea6*/\nuint8_t alloc; /* \u5b57\u7b26\u6570\u7ec4\u7684\u5df2\u5206\u914d\u7a7a\u95f4\uff0c\u4e0d\u5305\u62ec\u7ed3\u6784\u4f53\u548c\\0\u7ed3\u675f\u5b57\u7b26*/\nunsigned char flags; /* SDS\u7c7b\u578b*/\nchar buf[]; /*\u5b57\u7b26\u6570\u7ec4*/\n};\n</code></pre>"},{"location":"redis/sds/#_1","title":"\u4f18\u52bf","text":"<ul> <li>\u964d\u4f4e\u4e86\u5b57\u7b26\u4e32\u957f\u5ea6\u7684\u590d\u6742\u5ea6</li> <li>\u5355\u72ec\u8ba1\u7b97\u4e86\u5b57\u7b26\u4e32\u957f\u5ea6\uff0c\u4e8c\u8fdb\u5236\u5b89\u5168\uff0c\u4e0d\u7528\u5224\u65ad\"\\0\"</li> <li>\u907f\u514d\u4e86\u5bf9\u5b57\u7b26\u4e32\u7684\u904d\u5386\u64cd\u4f5c\uff0c\u521b\u5efa\uff0c\u8ffd\u52a0\uff0c\u590d\u5236\u548c\u6bd4\u8f83\u7b49\u529f\u80fd\u66f4\u52a0\u9ad8\u6548</li> <li>\u7d27\u51d1\u578b\u5b57\u7b26\u4e32\u7ed3\u6784\u66f4\u52a0\u8282\u7701\u5185\u5b58</li> </ul>"},{"location":"redis/sds/#_2","title":"\u7d27\u51d1\u578b\u5b57\u7b26\u4e32\u7ed3\u6784","text":"<ul> <li>SDS\u4e2d\u7684len\u4e2aalloc\u7c7b\u578b\u662f\u53ef\u53d8\u7684</li> <li>\u5206\u522b\u662fuint8\uff0cuint16\uff0cuint32\uff0cuint64</li> <li>\u5206\u522b\u5360\u75281\u5b57\u8282\uff0c2\u5b57\u8282\uff0c4\u5b57\u8282\uff0c8\u5b57\u8282</li> <li>\u80fd\u8868\u793a\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u5206\u522b\u4e3a2\u76848\u6b21\u65b9\uff0c16\u6b21\u65b9\uff0c32\u6b21\u65b9\uff0c64\u6b21\u65b9</li> <li>\u80fd\u7075\u6d3b\u4fdd\u5b58\u4e0d\u540c\u5927\u5c0f\u7684\u5b57\u7b26\u4e32\uff0c\u6709\u6548\u8282\u7701\u5185\u5b58\u7a7a\u95f4</li> <li>\u4f7f\u7528 <code>__attribute__ ((__packed__))</code>\u5b9a\u4e49\u7ed3\u6784\u4f53\uff0c\u7f16\u8bd1\u5668\u4f1a\u6309\u7167\u5b9e\u9645\u7ed3\u6784\u4f53\u5927\u5c0f\u8fdb\u884c\u5185\u5b58\u5206\u914d</li> </ul>"},{"location":"redis/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/","title":"\u5e03\u9686\u8fc7\u6ee4\u5668","text":""},{"location":"redis/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/#_1","title":"\u7528\u9014","text":"<ul> <li>\u5224\u65ad\u662f\u5426\u5b58\u5728</li> <li>\u7f13\u5b58\u7a7f\u900f\uff0c\u4e0d\u7cbe\u786e\u53bb\u91cd</li> <li>\u7701\u7a7a\u95f4</li> <li>\u6709\u4e00\u5b9a\u8bef\u5224\u7387</li> </ul>"},{"location":"redis/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/#_2","title":"\u8bef\u5224","text":"<ul> <li>\u5224\u5b9a\u67d0\u4e2a\u503c\u5b58\u5728\u65f6\uff0c\u53ef\u80fd\u4e0d\u5b58\u5728</li> <li>\u5224\u5b9a\u67d0\u4e2a\u503c\u4e0d\u5b58\u5728\u65f6\uff0c\u90a3\u5c31\u80af\u5b9a\u4e0d\u5b58\u5728</li> </ul>"},{"location":"redis/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/#_3","title":"\u57fa\u672c\u4f7f\u7528","text":"<ul> <li>bf.add key element \u6dfb\u52a0\u5143\u7d20</li> <li>bf.exists key element \u68c0\u67e5\u5143\u7d20\u662f\u5426\u5b58\u5728</li> <li>bf.madd key ele1 ele2 ele3 \u6dfb\u52a0\u591a\u4e2a\u5143\u7d20</li> <li>bf.mexists key ele1 ele2 ele3 \u68c0\u67e5\u591a\u4e2a\u5143\u7d20\u662f\u5426\u5b58\u5728</li> </ul>"},{"location":"redis/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/#_4","title":"\u8bef\u5224\u7387\u4e0e\u5bb9\u91cf\u8c03\u6574","text":"<ul> <li>\u9ed8\u8ba4\u8bef\u5224\u7387<code>error_rate</code> \u662f0.01</li> <li>\u9ed8\u8ba4\u9884\u8ba1\u653e\u5165\u7684\u5143\u7d20\u6570\u91cf<code>initial_size</code>\u662f100</li> <li><code>bf.reverse</code> \u8c03\u6574\u8bef\u5224\u7387\u4e0e\u9884\u8ba1\u653e\u5165\u5143\u7d20\u6570\u91cf</li> <li>bf.reverse key error_rate initial_size </li> </ul>"},{"location":"redis/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/#_5","title":"\u539f\u7406","text":"<ul> <li>\u6bcf\u4e2a\u5e03\u9686\u8fc7\u6ee4\u5668\u5bf9\u5e94\u5230redis\u5c31\u662f\u4e00\u4e2a\u4f4d\u6570\u7ec4\u548c\u591a\u4e2a\u65e0\u504fhash\u51fd\u6570</li> <li>\u65e0\u504fhash\u51fd\u6570\u5c31\u662f\u6bcf\u4e2a\u5143\u7d20\u88abhash\u540e\u5206\u5e03\u7684\u6bd4\u8f83\u5747\u5300</li> <li>\u6dfb\u52a0\u5143\u7d20\u65f6<ul> <li>\u6839\u636e\u6bcf\u4e2ahash\u51fd\u6570\u8fdb\u884chash\u8ba1\u7b97</li> <li>\u6bcf\u6b21\u8ba1\u7b97\u7684hash\u503c\u7684\u4f4d\u7f6e\u6807\u8bb0\u4e3a1</li> </ul> </li> <li>\u67e5\u627e\u5143\u7d20\u662f\u5426\u5b58\u5728\u65f6<ul> <li>\u6bcf\u4e2ahash\u51fd\u6570\u8ba1\u7b97\u54c8\u5e0c\u503c</li> <li>\u6240\u6709hash\u4f4d\u90fd\u4e3a1\u5219\u5143\u7d20\u5b58\u5728\uff0c\u5426\u5219\u5143\u7d20\u4e0d\u5b58\u5728 </li> </ul> </li> </ul>"},{"location":"redis/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/#_6","title":"\u7a7a\u95f4\u5360\u7528\u4f30\u8ba1","text":"<ul> <li>\u516c\u5f0f\u8ba1\u7b97\u8f93\u5165<code>error_rate</code>\u8bef\u5224\u7387\uff0c<code>initial_size</code>\u9884\u8ba1\u653e\u5165\u5143\u7d20\u6570\u91cf</li> <li>\u516c\u5f0f\u8ba1\u7b97\u8f93\u51fa\u4f4d\u6570\u7ec4\u957f\u5ea6<code>l</code>\uff0c\u548c\u6ee1\u8db3\u8bef\u5224\u7387\u9700\u8981\u7684hash\u51fd\u6570\u7684\u6700\u4f73\u6570\u91cf<code>k</code><ul> <li>k=0.7*(l/n)  # \u7ea6\u7b49\u4e8e</li> <li>f=0.6185^(l/n)  # ^ \u8868\u793a\u6b21\u65b9\u8ba1\u7b97\uff0c\u4e5f\u5c31\u662f math.pow</li> </ul> </li> <li>\u4f4d\u6570\u7ec4\u8d8a\u957f\uff0c\u8bef\u5224\u7387\u8d8a\u4f4e</li> <li>\u4f4d\u6570\u7ec4\u8d8a\u957f\uff0chash\u51fd\u6570\u8d8a\u591a\uff0c\u8ba1\u7b97\u6548\u7387\u8d8a\u6162</li> </ul>"},{"location":"ruby/excel_helper/","title":"\u5bfc\u51facsv&&xlsx","text":""},{"location":"ruby/excel_helper/#csvxlsx","title":"\u5bfc\u51fa csv\u548cxlsx","text":"<pre><code>module ExcelHelper\nmodule_function\ndef excel_export(filename, data, title = [], sheet_name = \"\")\npath = \"/home/sunqi/disk150/rails_file\"\nif !filename.start_with?(path)\nname = filename.split(\"/\").last\nfilename = path + \"/\" + name\nend\nbook = Spreadsheet::Workbook.new\nsheet = book.create_worksheet\nsheet.name = sheet_name unless sheet_name.blank?\nindex = 0\nif title != [] index = 1\nsheet.row(0).replace(title)\nend\ndata.each do |d|\nsheet.row(index).replace(d)\nindex += 1\nend\nbook.write(filename)\nend\ndef self.excel_export(filename, data, title = [], sheet_name = \"\")\npath = \"/home/sunqi/disk150/rails_file\"\nif !filename.start_with?(path)\nname = filename.split(\"/\").last\nfilename = path + \"/\" + name\nend\nbook = WriteXLSX.new(filename)\nsheet = book.add_worksheet(sheet_name.blank? ? \"sheet1\" : sheet_name)\nsheet.write_col(\"A1\", [title]) unless title.blank?\nstart = title.blank? ? \"A1\" : \"A2\"\nsheet.write_col(start, data)\nbook.close; 0\nend\nend\n</code></pre>"},{"location":"ruby/nav/","title":"Nav","text":"<ul> <li>\u6267\u884c\u7cfb\u7edf\u547d\u4ee4</li> <li>Rails\u5c0f\u8bb0</li> <li>\u5bfc\u51facsv&amp;&amp;xlsx</li> </ul>"},{"location":"ruby/rails/","title":"Rails\u5c0f\u8bb0","text":""},{"location":"ruby/rails/#rails","title":"rails \u5173\u95ed\u63a7\u5236\u53f0\u8f93\u51fa\u989c\u8272","text":"<ol> <li>\u7f16\u8f91 <code>~/.irbrc</code></li> <li>\u6dfb\u52a0 <code>IRB.conf[:USE_COLORIZE] = false</code></li> </ol>"},{"location":"ruby/rails/#railssql","title":"rails\u547d\u4ee4\u884c\u6253\u5370\u683c\u5f0f\u5316SQL","text":"<ol> <li>\u7f16\u8f91 <code>config/environments/production.rb</code> \u6587\u4ef6</li> <li>\u8bbe\u7f6e\u65e5\u5fd7\u7ea7\u522b <code>config.log_level = :debug</code></li> </ol>"},{"location":"ruby/rails/#rails-csv","title":"rails CSV\u5bfc\u51fa\u4e2d\u6587\u4e71\u7801\u4fee\u590d","text":"<ul> <li>\u6dfb\u52a016\u8fdb\u5236BOM\u5934 <pre><code>CSV.open(filename,\"a\") do |csv|\ncsv &lt;&lt; [\"\\xEF\\xBB\\xBF\u4e5d\u9634\u771f\u7ecf\"]\nend\n</code></pre></li> </ul>"},{"location":"ruby/shell/","title":"\u6267\u884c\u7cfb\u7edf\u547d\u4ee4","text":""},{"location":"ruby/shell/#_1","title":"\u6267\u884c\u547d\u4ee4\u53d6\u5230\u7ed3\u679c","text":"<pre><code>result = `curl https://www.baidu.com`\n</code></pre>"},{"location":"ruby/shell/#_2","title":"\u4ec5\u6267\u884c\u7cfb\u7edf\u547d\u4ee4","text":"<pre><code>system(\"curl https://www.baidu.com\")\n</code></pre>"},{"location":"vim/desc/","title":"\u5165\u95e8","text":""},{"location":"vim/desc/#_1","title":"\u56db\u79cd\u6a21\u5f0f","text":"<ul> <li>\u6b63\u5e38\u6a21\u5f0f Normal</li> <li>\u63d2\u5165\u6a21\u5f0f Insert</li> <li>\u547d\u4ee4\u6a21\u5f0f Command</li> <li>\u53ef\u89c6\u6a21\u5f0f Visual</li> </ul>"},{"location":"vim/desc/#_2","title":"\u63d2\u5165","text":"<ul> <li>i \u5149\u6807\u7684\u5f53\u524d\u4f4d\u7f6e\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f</li> <li>I \u5149\u6807\u7684\u884c\u7684\u884c\u9996\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f</li> <li>a \u5728\u5149\u6807\u7684\u4f4d\u7f6e\u7684\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f</li> <li>A \u5149\u6807\u7684\u4f4d\u7f6e\u7684\u884c\u5c3e\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f</li> <li>o \u5149\u6807\u7684\u4e0b\u4e00\u884c\u6dfb\u52a0\u7a7a\u884c\u5e76\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f</li> <li>O \u5149\u6807\u7684\u4e0a\u4e00\u884c\u6dfb\u52a0\u7a7a\u884c\u5e76\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f</li> </ul>"},{"location":"vim/desc/#_3","title":"\u5149\u6807\u79fb\u52a8","text":"<ul> <li>h \u5de6</li> <li>j \u4e0b</li> <li>k \u4e0a</li> <li>l \u53f3</li> </ul>"},{"location":"vim/desc/#_4","title":"\u590d\u5236","text":"<ul> <li>yy \u590d\u5236\u6574\u884c</li> <li>y$ \u590d\u5236\u5230\u884c\u5c3e</li> <li>3yy \u591a\u884c\u590d\u5236</li> </ul>"},{"location":"vim/desc/#_5","title":"\u7c98\u8d34","text":"<ul> <li>p \u5149\u6807\u4f4d\u7f6e\u540e\u7c98\u8d34</li> <li>P \u5149\u6807\u4f4d\u7f6e\u524d\u7c98\u8d34</li> </ul>"},{"location":"vim/desc/#_6","title":"\u526a\u5207","text":"<ul> <li>dd \u526a\u5207\u5f53\u524d\u884c</li> <li>d$ \u526a\u5207\u5230\u884c\u5c3e</li> <li>d \u9009\u4e2d\u5185\u5bb9\u540e\u526a\u5207</li> <li>5dd \u591a\u884c\u526a\u5207</li> </ul>"},{"location":"vim/desc/#_7","title":"\u5220\u9664","text":"<ul> <li>x \u5355\u4e2a\u5b57\u7b26\u7684\u5220\u9664</li> </ul>"},{"location":"vim/desc/#_8","title":"\u66ff\u6362","text":"<ul> <li>r \u5355\u5b50\u5b57\u7b26\u7684\u66ff\u6362</li> <li>%s/old/new/g \u5168\u5c40\u66ff\u6362\uff0c\u4e00\u6b21\u6267\u884c</li> <li>3,5s/old/new/g 3-5\u884c\u4e4b\u95f4\u8fdb\u884c\u66ff\u6362</li> </ul>"},{"location":"vim/desc/#_9","title":"\u64a4\u9500","text":"<ul> <li>u \u64a4\u9500\u4e0a\u4e00\u6b65\u64cd\u4f5c\uff0c\u591a\u6b21\u64a4\u9500\u591a\u6b21\u6309u</li> <li>ctrl + r \u53cd\u64a4\u9500\uff0c\u5c06\u64a4\u9500\u7684\u6307\u4ee4\u91cd\u505a</li> </ul>"},{"location":"vim/desc/#_10","title":"\u5feb\u901f\u79fb\u52a8","text":"<ul> <li>line number + shift + g \u5feb\u901f\u79fb\u52a8\u5230\u6307\u5b9a\u7684\u884c\uff0c11\u884c 11 + shift + g</li> <li>gg \u79fb\u52a8\u5230\u6587\u4ef6\u7b2c\u4e00\u884c</li> <li>shift + G \u79fb\u52a8\u5230\u6700\u540e\u4e00\u884c</li> <li>$ \u79fb\u52a8\u5230\u884c\u9996</li> <li>^ \u79fb\u52a8\u5230\u884c\u5c3e</li> </ul>"},{"location":"vim/desc/#_11","title":"\u5757\u9009\u4e2d\uff0c\u53ef\u89c6\u6a21\u5f0f","text":"<ul> <li>v \u5b57\u7b26\u9009\u4e2d</li> <li>shift + v \u884c\u9009\u4e2d\u6a21\u5f0f</li> <li>ctrl + v \u5757\u9009\u4e2d\u6a21\u5f0f\uff0c\u4e0a\u4e0b\u5de6\u53f3\u5bf9\u9f50\u9009\u4e2d</li> </ul>"},{"location":"vim/nav/","title":"Nav","text":"<ul> <li>vimrc</li> <li>\u5165\u95e8</li> </ul>"},{"location":"vim/vimrc/","title":"vimrc","text":"<pre><code>set nu\n\nsyntax enable\n\nfiletype plugin indent on\n\nset backspace=2\nset encoding=utf-8\nset nocompatible\n\nset hlsearch \u201c \u9ad8\u4eae\u641c\u7d22\nset showmatch \u201c \u62ec\u53f7\u5339\u914d\n\u201c tab \u7f29\u8fdbi\nset tabstop=4 \u201c \u8bbe\u7f6eTab\u957f\u5ea6\u4e3a4\u7a7a\u683c\nset shiftwidth=4 \u201c \u8bbe\u7f6e\u81ea\u52a8\u7f29\u8fdb\u957f\u5ea6\u4e3a4\u7a7a\u683c\nset autoindent \u201c \u7ee7\u627f\u524d\u4e00\u884c\u7684\u7f29\u8fdb\u65b9\u5f0f\uff0c\u9002\u7528\u4e8e\u591a\u884c\u6ce8\u91ca\n\n\u201c \u7a81\u51fa\u663e\u793a\u5f53\u524d\u884c\nset cursorline \u201c\u7a81\u51fa\u663e\u793a\u5f53\u524d\u884c\n\ncall plug#begin(\u2018~/.vim/plugged\u2019)\nPlug \u2018fatih/vim-go\u2019\nPlug \u2018bling/vim-airline\u2019\nPlug \u2018vim-airline/vim-airline-themes\u2019\n\n\u201c \u914d\u8272\u65b9\u6848\n\u201c colorscheme neodark\nPlug \u2018KeitaNakamura/neodark.vim\u2019\n\n\u201c \u6587\u4ef6\u76ee\u5f55\u6811\u7ed3\u6784\nPlug \u2018scrooloose/nerdtree\u2019\n\n\u201c \u7a97\u53e3\u5927\u5c0f\u8c03\u8282\nPlug \u2018simeji/winresizer\u2019\n\n\u201c \u6587\u4ef6\u641c\u7d22\nPlug \u2018ctrlpvim/ctrlp.vim\u2019\n\n\u201c \u8865\u5168\u63d2\u4ef6\nPlug \u2018valloric/youcompleteme\u2019\n\n\u201c \u4ee3\u7801\u7ed3\u6784\u63d0\u53d6\nPlug \u2018majutsushi/tagbar\u2019\n\n\u201c \u53ef\u4ee5\u5728\u5bfc\u822a\u76ee\u5f55\u4e2d\u770b\u5230 git \u7248\u672c\u4fe1\u606f\nPlug \u2018Xuyuanp/nerdtree-git-plugin\u2019\n\n\u201c git \u63d2\u4ef6\nPlug \u2018tpope/vim-fugitive\u2019\n\n\u201c \u5168\u5c40\u641c\u7d22\u63d2\u4ef6\nPlug \u2018dyng/ctrlsf.vim\u2019\ncall plug#end()\n\nset title\nset termguicolors\ncolorscheme neodark\n\u201clet g:airline_theme=\u2019onehalfdark\u2019\nset background=dark\n\nlet g:airline_powerline_fonts = 1\nlet g:airline#extensions#tabline#fnamemod = \u2018:p:.\u2019\n\nlet mapleader = \u201cm\u201d\n\n\u201cmw\u9000\u51fa\u5e76\u4fdd\u5b58\ninoremap w :w\n\n\u201cjj\u63d2\u5165\u6a21\u5f0f\u4e0bjj\u9000\u51fa\u63d2\u5165\u6a21\u5f0f\ninoremap jj &lt;ESC&gt;\n\n\u201c \u5206\u53f7\u66ff\u6362\u5192\u53f7\uff0c\u7701\u7684\u6309shift\nnnoremap ; :\n\n\u201c\u7a97\u53e3\u5207\u6362\nnoremap h\nnoremap j\nnoremap k\nnoremap l\n\n\u201c tab\u5207\u6362\nset showtabline=2\nnoremap q :tabNext\nnoremap t :tabnew\nnoremap :tabclose\n\n\u201c nerdtree\nnnoremap ff :NERDTreeToggle\nlet g:NERDTreeWinPos = \u201cleft\u201d\n\u201c \u663e\u793a\u884c\u53f7\nlet NERDTreeShowLineNumbers=1\n\u201c \u6253\u5f00\u6587\u4ef6\u65f6\u662f\u5426\u663e\u793a\u76ee\u5f55\nlet NERDTreeAutoCenter=1\nlet NERDTreeShowBookmarks=2\n\nau FileType go nmap gv (go-def-vertical)\nau FileType go nmap gt (go-def-tab)\nau FileType go nmap gb (go-build)\nlet g:go_fmt_command = \u201cgoimports\u201d \u201c \u683c\u5f0f\u5316\u5c06\u9ed8\u8ba4\u7684 gofmt \u66ff\u6362\nlet g:go_autodetect_gopath = 1\nlet g:go_list_type = \u201cquickfix\u201d\nlet g:go_version_warning = 1\nlet g:go_highlight_types = 1\nlet g:go_highlight_fields = 1\nlet g:go_highlight_functions = 1\nlet g:go_highlight_function_calls = 1\nlet g:go_highlight_operators = 1\nlet g:go_highlight_extra_types = 1\nlet g:go_highlight_methods = 1\nlet g:go_highlight_generate_tags = 1\n\n\u201c iterm \u5149\u6807\u63d2\u5165\u6a21\u5f0f\u7ad6\u7ebf\uff0c\u666e\u901a\u6a21\u5f0f\u65b9\u5757\nif $TERM_PROGRAM =~ \u201ciTerm\u201d\nlet &amp;t_SI = \u201c&lt;Esc&gt;]50;CursorShape=1\\x7\u201d \u201c Vertical bar in insert mode\nlet &amp;t_EI = \u201c&lt;Esc&gt;]50;CursorShape=0\\x7\u201d \u201c Block in normal mode\nendif\n\n\u201c v \u6a21\u5f0f\u4e0b\u590d\u5236\u5185\u5bb9\u5230\u7cfb\u7edf\u526a\u5207\u677f\nvmap c \u201c+yy\n\u201c n \u6a21\u5f0f\u4e0b\u590d\u5236\u4e00\u884c\u5230\u7cfb\u7edf\u526a\u5207\u677f\nnmap c \u201c+yy\n\u201c n \u6a21\u5f0f\u4e0b\u7c98\u8d34\u7cfb\u7edf\u526a\u5207\u677f\u7684\u5185\u5bb9\nnmap v \u201c+p\n\n\u201c majutsushi/tagbar \u63d2\u4ef6\u6253\u5f00\u5173\u95ed\u5feb\u6377\u952e\nnmap :TagbarToggle\n\nlet g:tagbar_type_go = {\n\\ \u2018ctagstype\u2019 : \u2018go\u2019,\n\\ \u2018kinds\u2019 : [\n\\ \u2018p:package\u2019,\n\\ \u2018i:imports:1\u2019,\n\\ \u2018c:constants\u2019,\n\\ \u2018v:variables\u2019,\n\\ \u2018t:types\u2019,\n\\ \u2018n:interfaces\u2019,\n\\ \u2018w:fields\u2019,\n\\ \u2018e:embedded\u2019,\n\\ \u2018m:methods\u2019,\n\\ \u2018r:constructor\u2019,\n\\ \u2018f:functions\u2019\n\\ ],\n\\ \u2018sro\u2019 : \u2018.\u2019,\n\\ \u2018kind2scope\u2019 : {\n\\ \u2018t\u2019 : \u2018ctype\u2019,\n\\ \u2018n\u2019 : \u2018ntype\u2019\n\\ },\n\\ \u2018scope2kind\u2019 : {\n\\ \u2018ctype\u2019 : \u2018t\u2019,\n\\ \u2018ntype\u2019 : \u2018n\u2019\n\\ },\n\\ \u2018ctagsbin\u2019 : \u2018/Users/sunqi/go/bin/gotags\u2019,\n\\ \u2018ctagsargs\u2019 : \u2018-sort -silent\u2019\n\\ }\n\n\u201c nerdtree git\nlet g:NERDTreeGitStatusIndicatorMapCustom = {\n\\ \u201cModified\u201d : \u201c\u2739\u201d,\n\\ \u201cStaged\u201d : \u201c\u271a\u201d,\n\\ \u201cUntracked\u201d : \u201c\u272d\u201d,\n\\ \u201cRenamed\u201d : \u201c\u279c\u201d,\n\\ \u201cUnmerged\u201d : \u201c\u2550\u201d,\n\\ \u201cDeleted\u201d : \u201c\u2716\u201d,\n\\ \u201cDirty\u201d : \u201c\u2717\u201d,\n\\ \u201cClean\u201d : \u201c\u2714\ufe0e\u201d,\n\\ \u2018Ignored\u2019 : \u2018\u2612\u2019,\n\\ \u201cUnknown\u201d : \u201c?\u201d\n\\ }\n\nlet g:NERDTreeGitStatusShowIgnored = 1\n</code></pre>"}]}